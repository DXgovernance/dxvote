{"version":3,"sources":["utils/bignumber.ts","utils/constants.ts","utils/cache.ts","../node_modules/prismjs/components lazy /^/.//prism/-.*$/ groupOptions: {} namespace object","utils/address.ts","utils/date.ts","utils/enums.ts","utils/helperHooks.ts","utils/number.ts","utils/permissions.ts","utils/proposals.ts","utils/scheme.ts","utils/array.ts","utils/votes.ts","utils/ipfs.ts","assets/images/metamask.png","assets/images/walletconnect.png","provider/connectors.ts","services/ABIService.ts","stores/actions/error.ts","stores/actions/actions.ts","stores/Provider.ts","services/DaoService.ts","services/EventsService.ts","services/IPFSService.ts","services/PinataService.ts","services/EtherscanService.ts","services/CoingeckoService.ts","services/InfuraService.ts","services/PoktService.ts","services/AlchemyService.ts","services/CustomRpcService.ts","services/ENSService.ts","services/OrbitDBService.ts","stores/Transaction.ts","stores/Modal.ts","stores/ConfigStore.ts","stores/DaoStore.ts","utils/errors.ts","stores/BlockchainStore.ts","stores/NotificationStore.ts","contracts/index.ts","services/CacheService.ts","contexts/index.ts","provider/providerHooks.ts","theme/index.tsx","assets/images/DXdao.svg","components/Header/loadingNetwork.tsx","components/common/Row.tsx","components/common/Box.tsx","components/common/Title.tsx","components/common/Subtitle.tsx","components/common/InfoBox.tsx","components/common/Question.tsx","components/common/Link.tsx","components/common/Copy.tsx","components/common/BlockchainLink.tsx","components/common/Button.tsx","components/common/Table.ts","components/common/Votes.ts","components/common/Forms/InputDate.tsx","pages/proposals/styles.ts","assets/images/dxdao-icon.svg","components/common/LoadingIcon.tsx","components/Web3ReactManager/index.tsx","serviceWorker.ts","assets/images/x.svg","components/Modal/index.tsx","components/AccountDetails/index.tsx","components/WalletModal/Option.tsx","components/WalletModal/index.tsx","components/NetworkModal/Option.tsx","assets/images/arbitrum.png","assets/images/ethereum.svg","components/NetworkModal/index.tsx","assets/images/gnosis-icon-green.svg","components/Web3ConnectStatus/index.tsx","components/Header/index.tsx","components/Footer/index.tsx","components/GlobalNotification/index.tsx","components/ErrorBoundary/GlobalErrorBoundary.tsx","PageRouter.tsx","components/Proposals/Search/style.ts","components/Proposals/Search/SchemeSearch.tsx","components/Proposals/Search/StatusSearch.tsx","components/Proposals/Search/TitleSearch.tsx","hooks/useRep.ts","hooks/useFilterCriteria.ts","hooks/useQuery.ts","hooks/useQueryStringValue.ts","hooks/useDebounceFn.ts","hooks/useFilteredProposals.ts","hooks/useMiniSearch.ts","hooks/useExporters.ts","components/Toggle.tsx","components/Proposals/ProposalsExporter.tsx","pages/proposals/index.tsx","components/common/PendingCircle.tsx","components/LinkedButtons/index.tsx","components/DiscourseImporter/index.tsx","components/ProposalSubmission/ContributionRewardCall.tsx","components/ProposalSubmission/SchemeRegistarCall.tsx","components/ProposalSubmission/Calls.tsx","components/ProposalSubmission/Preview.tsx","pages/ProposalSubmission/Custom.tsx","pages/SubmitProposal.tsx","pages/NewProposalType.tsx","components/UserPage/styled/index.ts","pages/User.tsx","components/Proposal/History/index.tsx","hooks/useABIService.ts","hooks/useEtherscanService.ts","components/Proposal/Calls/EtherscanCalls.tsx","components/RepDisplay/index.tsx","components/Proposal/Calls/RecommendedCalls.tsx","components/Proposal/Calls/Error.tsx","components/Proposal/Calls/BaseCalls.tsx","components/Proposal/Calls/ShowMore.tsx","components/Proposal/styles.ts","components/Proposal/Calls/index.tsx","components/ConfirmVoteModal/index.tsx","components/Proposal/Votes/index.tsx","hooks/ether-swr/useEtherSWR.ts","hooks/usePrevious.ts","hooks/useContract.ts","hooks/useERC20.ts","components/Proposal/Stakes/index.tsx","components/Proposal/Details/index.tsx","components/Proposal/Status/index.tsx","pages/Proposal.tsx","hooks/useETHBalance.ts","components/FinanceInformation.tsx","components/SchemesInformation.tsx","components/GovernanceInformation.tsx","components/PermissionsInformation.tsx","pages/Info.tsx","pages/Configuration.tsx","pages/FAQ.tsx","pages/Forum.tsx","pages/Cache.tsx","pages/Metadata.tsx","contexts/MultichainProvider/index.tsx","hooks/useJsonRpcProvider.ts","hooks/ether-swr/middleware/logger.ts","components/EtherSWRManager/index.tsx","index.tsx","utils/signature.ts","utils/helpers.ts"],"names":["BigNumber","config","EXPONENTIAL_AT","ROUNDING_MODE","ROUND_DOWN","DECIMAL_PLACES","FORMAT","groupSize","groupSeparator","decimalSeparator","MAX_UINT","ZERO_HASH","ZERO_ADDRESS","ANY_ADDRESS","ANY_FUNC_SIGNATURE","ERC20_TRANSFER_SIGNATURE","ERC20_APPROVE_SIGNATURE","DEFAULT_TOKEN_DECIMALS","MAX_BLOCKS_PER_EVENTS_FETCH","CACHE_METADATA_ENS","defaultAlchemyKey","DISCOURSE_URL_ROOT","MAINNET_ID","DEFAULT_CHAIN_ID","POKT_NETWORK_URLS","NETWORKS","id","name","displayName","defaultRpc","nativeAsset","symbol","decimals","blockExplorer","api","NETWORK_NAMES","reduce","acc","network","getNetworkByName","networkName","find","NETWORK_DISPLAY_NAMES","DEFAULT_RPC_URLS","NETWORK_EXPLORERS","NETWORK_ASSET_SYMBOL","INFURA_NETWORK_NAMES","ALCHEMY_NETWORK_URLS","NETWORK_APIS","Web3","require","web3","arbitrum","arbitrumTestnet","mainnet","xdai","rinkeby","localhost","proposalTitles","defaultConfigHashes","getDefaultConfigHashes","getProposalTitles","getAppConfig","sortNetworkCache","networkCache","Object","keys","schemes","forEach","schemeId","proposalIds","sort","newProposalEvents","a","b","proposalId","localeCompare","proposals","obj","key","ipfsHashes","_","uniqBy","getEvents","async","contract","fromBlock","toBlock","eventsToGet","maxBlocksPerFetch","_provider","host","indexOf","events","to","Math","min","from","console","debug","_address","eventsFetched","getPastEvents","getTimestampOfEvents","concat","error","message","blocksToLower","max","trunc","sleep","Number","toFixed","sortEvents","getRawEvents","contractAddress","topicsToGet","address","topics","eth","getPastLogs","promises","maxPromisesPerTry","maxTries","sleepTimeBetweenRetries","promisesBatch","promisesBatchIndex","i","length","push","slice","Promise","all","e","batchPromises","map","event","blockInfo","getBlock","blockNumber","log","number","timestamp","l2BlockNumber","uniq","orderBy","executeMulticall","multicall","calls","rawCalls","call","functionParams","matchAll","flat","split","abi","encodeFunctionSignature","encodeParameters","substring","returnData","methods","aggregate","decodedReturnData","callResult","decodeParameters","getSchemeConfig","networkContracts","schemeAddress","daostack","type","contractToCall","newProposalTopics","creationLogEncoding","votingMachine","voteParams","utils","soliditySha3","batchPromisesOntarget","targetObject","targetObjectUpdated","assign","webpackAsyncContext","req","__webpack_require__","o","resolve","then","Error","code","ids","t","module","exports","appConfig","isAddress","value","ethers","getAddress","toLowerCase","getBlockchainLink","window","location","pathname","timeToTimestamp","toNumber","moment","unix","toString","Web3Errors","TXEvents","VoteDecision","WalletSchemeProposalState","VotingMachineProposalState","PendingAction","usePrevious","ref","useRef","useEffect","current","formatPercentage","useLowerLimit","times","decimalPlaces","lte","gt","toPercentage","bnum","denormalizeBalance","normalizedBalance","scale","normalizeBalance","amount","formatNumberValue","displayPrecision","truncateAt","roundDown","eq","result","ROUND_UP","padToDecimalPlaces","formatBalance","balance","precision","minDecimals","zerosToPad","pad","encodePermission","permissions","binaryString","lookup","ret","binaryToHex","canGenericCall","canUpgrade","canChangeConstraints","canRegisterSchemes","votedBeforeBoosted","proposal","vote","boosted","boostedPhaseTime","notBoosted","isNotActive","stateInVotingMachine","isWinningVote","winningVote","decodeProposalStatus","proposalStateChangeEvents","votingMachineParams","maxSecondsForExecution","autoBoost","schemeType","timeNow","queuedVotePeriodLimit","boostedVotePeriodLimit","preBoostedVotePeriodLimit","quietEndingPeriod","submittedTime","preBoostedPhaseTime","ExpiredInQueue","status","boostTime","finishTime","state","pendingAction","None","Executed","stateInScheme","Rejected","ExecutionSucceded","ExecutionTimeout","Submitted","Redeem","RedeemForBeneficiary","Queued","plus","Finish","PreBoosted","shouldBoost","Execute","Boost","Boosted","QuietEndingPeriod","lt","isWalletScheme","scheme","flatten","arr","val","Array","isArray","hashVote","votingMachineAddress","voter","decision","repAmount","verifySignedVote","signature","recoverAddress","toEthSignedMessageHash","isVoteYes","isVoteNo","getIPFSFile","ipfsHash","timeout","any","axios","request","url","method","warn","descriptionHashToIPFSHash","descriptionHash","contentHash","getCodec","decode","ACTIVE_NETWORK_NAMES","ACTIVE_NETWORKS","filter","includes","ETH_NETWORKS_IDS","isChainIdSupported","chainId","injected","InjectedConnector","supportedChainIds","getWalletConnectConnector","customRpcUrls","WalletConnectConnector","rpc","qrcode","getChains","rpcUrl","schema","Avatar","Controller","VotingMachine","DXDVotingMachine","Reputation","WalletScheme1_0","WalletScheme1_1","ERC20","PermissionRegistry","Multicall","ContributionReward","SchemeRegistrar","Redeemer","ABIService","constructor","context","this","getAbi","contractType","decodeCall","data","ABI","providerStore","contractInterface","Interface","library","getActiveWeb3React","functionSignature","functionName","functions","getSighash","getFunction","function","args","inputs","input","errorCodeMapping","SIGNATURE_REJECTED","isKnownErrorCode","codeStr","getErrorByCode","UNKNOWN_ERROR","sendAction","params","action","sender","overrides","preLog","promiEvent","PromiEvent","send","once","hash","emit","TX_HASH","receipt","RECEIPT","confNumber","CONFIRMATION","on","TX_ERROR","INVARIANT","FINALLY","catch","ContractType","ERRORS","ProviderStore","web3Context","chainData","sendTransaction","web3React","transactionStore","account","BlockchainActionNoAccount","BlockchainActionNoChainId","getContract","addTransactionRecord","sign","dataToSign","reject","currentProvider","sendAsync","err","signTypedV3","msgParams","JSON","stringify","types","EIP712Domain","Broadcast","primaryType","domain","version","verifyingContract","sendRawTransaction","currentBlockNumber","makeObservable","observable","setWeb3Context","setCurrentBlockNumber","getCurrentBlockNumber","signerAccount","Contract","DaoService","createProposal","approveVotingMachineToken","stake","execute","redeem","encodeControllerGenericCall","callData","configStore","controller","getNetworkContracts","avatarAddress","avatar","genericCall","encodeABI","proposalData","encodeFunctionCall","reputationChange","ethValue","tokenValue","externalToken","beneficiary","register","parametersHash","titleText","daoStore","getVotingMachineOfProposal","addSignatureDomain","hashedVote","executeSignedVote","daoCache","votingMachines","token","redeemDaoBounty","redeemContributionReward","redeemerAddress","redeemContributionRewardCall","EventsService","activeEventsCalls","eventName","activeEventCall","addEventsCalls","addEventCall","resetActiveEventCalls","IPFSService","starting","ipfs","SLEEP_MS","getIpfs","start","content","cid","add","CID","pin","title","description","tags","pinataService","bodyTextToUpload","localStorage","setItem","auth","pinataPin","ipfsPin","uploaded","ipfsContent","getContentFromIPFS","IPFS","PinataService","defaultApiKey","pinataApiKey","getLocalConfig","pinata","headers","Authorization","hashToPin","pinataMetadata","getActiveChainName","fromIpfs","keyValues","EtherscanService","etherscanAPIKey","etherscan","getContractURL","URLSearchParams","apikey","appendEthAPIKey","tag","URL","CoingeckoService","prices","tokens","getTokensToFetchPrice","tokenAddresses","pricesResponse","tokenAddress","toChecksumAddress","getPrices","InfuraService","infuraAPIKey","infura","jsonrpc","getRpcUrls","prevUrls","infuraNetworkName","infuraUrl","poktService","poktAPIKey","pokt","poktNetworkName","poktUrl","AlchemyService","alchemyAPIKey","alchemy","networkUrl","alchemyUrl","CustomRpcService","customRpcUrl","ENSService","web3Provider","getWeb3Provider","setWeb3Provider","checksumed","lookupAddress","ensName","resolveName","resolver","getResolver","getContentHash","replace","OrbitDBService","orbitDB","getOrbitDB","topic","eventlog","write","entry","progress","total","have","load","logAdded","logs","iterator","limit","collect","payload","ipfsService","OrbitDB","createInstance","FetchCode","TransactionStore","txRecords","checkPendingTransactions","reset","getPendingTransactions","isTxPending","getConfirmedTransactions","currentBlock","isStale","getTransactionReceipt","blockNumberChecked","SUCCESS","txHash","record","undefined","records","txRecord","ModalStore","walletModalVisible","networkModalVisible","toggleWalletModal","setWalletModalVisible","toggleNetworkModal","setNetworkModalVisible","visible","ConfigStore","darkMode","networkConfigLoaded","networkConfig","loadNetworkConfig","toggleDarkMode","ensService","isTestingEnv","href","metadataHash","resolveContentHash","configContentHash","info","ipfsConfig","getActiveChainDisplayName","defaultAppConfigs","defaultConfig","rpcType","pinOnStart","mainnet_toBlock","cache","mainnet_rpcURL","xdai_toBlock","xdai_rpcURL","rinkeby_toBlock","rinkeby_rpcURL","arbitrum_toBlock","arbitrum_rpcURL","arbitrumTestnet_toBlock","arbitrumTestnet_rpcURL","configInLocalStorage","getItem","parse","setLocalConfig","resetLocalConfig","setDarkMode","getTokenData","tokenInFile","contracts","getTokensOfNetwork","fetchPrice","getProposalTypes","proposalTypes","getContributorLevels","contributionLevels","getRecommendedCalls","networkTokens","recommendedCalls","asset","toName","defaultValue","isRep","decodeText","permissionRegistry","dxdVestingFactory","dxDaoNFT","networkToken","DaoStore","getAllProposals","computed","setCache","parseCache","unparsedCache","reputation","repEvent","callPermissions","values","currentBoostedVotePeriodLimit","daoBountyRemain","daoBounty","confidenceThreshold","secondsFromTimeOutTillExecuteBoosted","positiveVotes","negativeVotes","positiveStakes","negativeStakes","votingParameters","paramsHash","unparsedParams","queuedVoteRequiredPercentage","thresholdConst","limitExponentValue","proposingRepReward","votersReputationLossRatio","minimumDaoBounty","daoBountyConst","activationTime","newNetworkCache","getAmountOfProposalsPreBoostedInScheme","filterProposals","getGovernanceInfo","users","totalPositiveVotes","totalPositiveVotesAmount","totalNegativeVotes","totalNegativeVotesAmount","totalPositiveStakes","totalPositiveStakesAmount","totalNegativeStakes","totalNegativeStakesAmount","totalProposalsCreated","repUsers","repEvents","repTotalSupply","minus","div","rep","userAddress","sortBy","unshift","totalSupply","getRepAt","votes","correctVotes","wrongVotes","correctStakes","wrongStakes","totalVoted","totalStaked","userRep","stakes","staker","proposalCreator","proposer","creationEvent","tx","ranking","allProposals","cacheProposal","getProposalStatus","getSchemes","filterSchemes","flatMap","getProposal","getScheme","getSchemeOfProposal","getVotingMachineOfScheme","getProposalEvents","proposalEvents","getVotesOfProposal","getStakesOfProposal","redeems","getRedeemsOfProposal","redeemsRep","getRedeemsRepOfProposal","redeemsDaoBounty","getRedeemsDaoBountyOfProposal","stateChanges","getProposalStateChanges","history","text","textParams","block","transactionIndex","logIndex","getUser","repBalance","repPercentage","getUserEvents","redeemRep","pickBy","newProposal","getUserRedeemsLeft","userEvents","redeemsLeft","bounty","voteParameters","isExpired","hasLostReputation","proposalDaoBounty","proposalWinningStakes","bountyToRedeem","integerValue","splice","votingMachineOfProposal","proposalStateChanges","proposalStateChange","getSchemeRecommendedCalls","assetLimits","controllerAddress","assetAddress","callAllowance","getCallAllowance","fromTime","atBlock","atTime","getRepEventsOfUser","getUsersRep","getAllVestingContracts","vestingContracts","getUserVestingContracts","beneficiaryAddress","CacheLoadError","super","BlockchainStore","activeFetchLoop","initialLoadComplete","fetchData","active","notificationStore","cacheService","setGlobalLoading","caches","open","match","networkId","getBlockNumber","newestCacheIpfsHash","baseCacheIpfsHash","ipfsCache","getCacheFromIPFS","getUpdatedCache","updateProposalTitles","put","Response","setFirstLoadComplete","setGlobalError","GlobalLoadingState","NotificationStore","firstLoadComplete","globalLoadingState","HIDDEN","globalMessage","LOADING","ERROR","DxController","DxAvatar","DxReputation","GenesisProtocol","VestingFactory","getContracts","vestingFactory","Hash","jsonSort","UtilsService","jsonCache","networksConfig","updatedCacheConfig","configHashes","configs","cacheForNetwork","buildCacheForNetwork","configHash","resetCache","emptyCache","networkConfigFileFetch","retryPromise","sortAsync","networkCacheString","of","networkWeb3Contracts","updateReputationEvents","updatePermissionRegistry","updateVestingContracts","updateVotingMachineEvents","updateSchemes","updateProposals","reputationEvent","returnValues","_to","_amount","transactionHash","_from","updateVotingMachine","newVotingMachineEvents","votingMachineEventsInCache","votingMachineEvent","proposalCreated","findIndex","newProposalEvent","_proposalId","existEvent","_organization","_proposer","paramHash","_paramsHash","_proposalState","preBoosted","transactionHas","_voter","_vote","_reputation","_staker","amount4Bounty","_beneficiary","permissionRegistryEvent","eventValues","vestingFactoryEvents","callsToExecute","vestingContractAddress","callsResponse","tokenContractInfo","cliff","duration","owner","isOwner","revocable","controllerEvents","controllerEvent","_sender","_scheme","processScheme","registered","processProposal","retryIntent","proposalIndex","response","isNewScheme","schemeTypeData","schemeName","maxRepPercentageChange","callsResponse1","permission","hexString","c","d","f","A","B","C","D","E","F","len","hexToBinary","callsResponse2","boostedProposals","boostedVoteRequiredPercentage","avatarAddressEncoded","encodeParameter","schemeEvents","schemeEvent","schemeOfProposal","proposalTimes","decodedProposer","creationLogDecoded","schemeProposalInfo","votingMachineExecutionEvent","transactionReceipt","newProposalTopic","_descriptionHash","ipfsHashToDescriptionHash","_parametersHash","_permissions","_reputationChange","_rewards","_externalToken","_data","_value","callIndex","_contractsToCall","_callsData","_values","daoRedeemItsWinnings","rootContext","React","createContext","modalStore","blockchainStore","abiService","daoService","eventsService","etherscanService","coingeckoService","infuraService","alchemyService","customRpcService","orbitDBService","PoktService","CacheService","useContext","useRpcUrls","preferredRpc","rpcUrls","setRpcUrls","useState","isAuthenticated","urls","MEDIA_WIDTHS","upToSmall","upToMedium","upToLarge","mediaWidthTemplates","accumulator","size","css","white","ThemeProvider","children","theme","fontSize","horizontalSeparatorBorder","negative","color","foregroundColor","backgroundColor","positive","black","textColor","greyText","activeButtonBackground","modalBackground","inputBackground","placeholderGray","shadowColor","borderStyle","concreteGray","mercuryGray","silverGray","chaliceGray","doveGray","mineshaftGray","activeGray","buttonOutlineGrey","tokenRowHover","charcoalBlack","zumthorBlue","malibuBlue","royalBlue","loadingBlue","wisteriaPurple","salmonRed","pizazzOrange","warningYellow","bodyText","connectedGreen","red","blue","gray","metaMaskOrange","textHover","buttonFaded","mediaWidth","flexColumnNoWrap","flexRowNoWrap","flexRowWrap","GlobalStyle","createGlobalStyle","NavWrapper","styled","NavSection","MenuItem","WarningDev","LoadingNetworkHeader","observer","alt","src","dxdaoIcon","Row","Box","noPadding","centered","Title","h1","noMargin","Subtitle","h2","InfoBox","QuestionLink","Question","question","target","Link","attrs","rel","CopyIcon","TransactionStatusText","span","CopyHelper","toCopy","isCopied","setCopied","setIsCopied","staticCopy","useCallback","didCopy","copy","hide","setTimeout","clearTimeout","useCopyClipboard","onClick","AddressLink","Icon","img","BlockchainLink","onlyIcon","onlyText","setENSName","erc20Token","tokenObject","entries","getERC20Token","dxVoteContract","getDxVoteContract","formatedAddress","resolveENSName","getENS","end","toAddressStub","Address","logoURI","Button","button","props","width","LinkButton","withRouter","route","rest","Table","table","TableHeader","tr","HeaderCell","th","align","TableRow","TableBody","tbody","DataCell","td","weight","wrapText","Positive","Negative","Separator","AmountBadge","HorizontalSeparator","Label","Date","Datetime","InputDate","onChange","isValidDate","date","dateFormat","timeFormat","LoadingBox","ProposalsWrapper","NewProposalButton","SidebarWrapper","ProposalTableHeaderActions","StyledTableRow","FooterWrap","TableProposal","UnstyledAnchor","pulseKeyframes","keyframes","RotatingImage","image","inactive","PulseCircle","circle","PulsingIcon","className","height","x","y","transform","DXdaoIcon","cx","cy","r","attributeName","attributeType","dur","additive","repeatCount","Web3ReactManager","useLocation","useHistory","originalFetch","fetch","opts","useWeb3React","networkActive","networkError","connector","activate","triedEager","tryConnecting","tried","setTried","chains","urlNetworkName","urlChainId","chain","urlChainIdHex","isAuthorized","getChainId","isMobile","ethereum","useEagerConnect","networkConnector","defaultChainId","NetworkConnector","prevChainId","prevAccount","reload","handleChainChange","removeListener","useMemo","prevUrlNetworkName","callback","delay","savedCallback","tick","setInterval","clearInterval","useInterval","Content","Boolean","hostname","_line","_line2","_extends","arguments","source","prototype","hasOwnProperty","apply","SvgX","_ref","svgRef","titleId","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","ForwardRef","Wrapper","maxWidth","Backdrop","StyledModal","Header","HeaderText","CloseIcon","CloseColor","Close","Footer","ModalButton","Modal","isOpen","onDismiss","header","confirmText","cancelText","onConfirm","onCancel","hideHeader","modal","variant","ReactDOM","createPortal","document","body","OptionButton","UpperSection","InfoCard","AccountGroupingRow","AccountSection","YourAccount","GreenCircle","CircleWrapper","AccountControl","ConnectButtonRow","StyledLink","WalletAction","AccountDetails","openOptions","deactivate","close","clickable","transparentize","OptionCard","OptionCardLeft","OptionCardClickable","disabled","SubHeader","IconWrapper","Option","link","icon","subheader","HeaderRow","ContentWrapper","Blurb","OptionGrid","HoverText","WALLET_VIEWS","WalletModal","walletView","setWalletView","connectionErrorMessage","setConnectionErrorMessage","walletModalOpen","activePrevious","connectorPrevious","tryActivation","getOptions","isMetamask","isMetaMask","wallets","INJECTED","iconName","primary","METAMASK","metamaskIcon","WALLETCONNECT","walletConnectIcon","option","mobile","mobileOnly","style","iconsByChain","ethereumIcon","arbitrumIcon","NetworkModal","networkErrorMessage","setNetworkErrorMessage","networkModalOpen","chainIdHex","chainName","nativeCurrency","blockExplorerUrls","trySwitching","WrongNetworkButton","AccountButton","ConnectButton","ChainButton","Web3ConnectStatus","injectedWalletAuthorized","setInjectedWalletAuthorized","display","toCamelCaseString","activeChain","switchNetwork","getWalletStatus","ItemBox","NavItem","cursor","margin","FooterWrapper","LeftFooter","FooterItem","FooterDivider","GlobalNotificationWrapper","GlobalNotification","handledErrorTypes","GlobalErrorBoundary","Component","promiseRejectionHandler","errorMessage","getErrorMessage","reason","setState","hasError","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","errorName","render","PageRouterWrapper","LoadingProgressText","PageRouter","providerActive","loadPrices","updatePinList","ProposalsFilter","select","SchemeSearch","onFilter","StatusSearch","k","isNaN","ProposalsNameFilter","TitleSearch","placeholder","useRep","memo","setMemo","getRep","closest","parseInt","orderByNewestTimeToFinish","orderByOldestTimeToFinish","useQuery","search","query","setQueryParam","delete","append","useQueryStringValue","initialValue","setValue","get","setQueryParamDebounced","wait","argsRef","cleanup","useDebounceFn","newValue","useFilteredProposals","loading","filteredProposals","setFilteredProposals","setLoading","stateEarliestAbove10","repAtCreation","gte","stateBoosted","stateQuiteEndingProposals","statePreBoosted","stateEarliestUnder10","stateExecuted","stateFinished","Passed","useFilterCriteria","minisearch","searchItems","setSearchItems","miniSearchRef","MiniSearch","instance","buildIndex","documents","removeAll","addAll","searchOptions","hit","item","useMiniSearch","fields","storeFields","fuzzy","prefix","combineWith","titleFilter","setTitleFilter","stateFilter","setStateFilter","schemesFilter","setSchemesFilter","ensAddress","setEnsAddress","isEnsResolving","setIsEnsResolving","endsWith","resolveENSAddress","finally","searchTerms","queries","matchStatus","matchScheme","useExporters","exportToCSV","rows","jsonexport","triggerDownload","fileName","mimeType","blob","Blob","createObjectURL","createElement","setAttribute","appendChild","click","removeChild","Wrap","section","Toggle","onToggle","optionOne","optionTwo","checked","offColor","onColor","uncheckedIcon","checkedIcon","flexColumnWrap","WrapperRow","ExportButtonsRow","ProposalsExporter","setIsOpen","isDateRange","setIsDateRange","startDate","setStartDate","subtract","endDate","setEndDate","getFilteredProposalsList","isSameOrAfter","isSameOrBefore","startOf","isBefore","endOf","isAfter","exportName","format","extractedData","submittedAt","boostedAt","finishedAt","submittedAtTs","boostedAtTs","finishedAtTs","csvString","markdown","origin","navigator","clipboard","writeText","ProposalsPage","setAllProposals","activeProposalsCount","alignSelf","positiveStake","negativeStake","positiveVotesPercentage","negativeVotesPercentage","timeToBoost","timeToFinish","votingMachineTokenName","voted","staked","created","proposerVotedDown","component","minWidth","SpinningCircle","PendingCircle","ColumnWrapper","ProgressLineWrapper","Dot","Line","complete","StyledButton","buttonSize","LinkedButtons","buttons","arrayOfButtons","setArrayOfButtons","progressLineArray","setProgressLineArray","numberOfButtons","tempButtons","tempProgressBar","beforeActive","index","typeSubmit","loadingId","createButtons","Container","LinkLabel","label","InputRow","LinkInput","invalid","ErrorMessage","DiscourseImporter","onImport","discourseLink","setDiscourseLink","isImporting","setIsImporting","isInvalid","setIsInvalid","setErrorMessage","htmlFor","topicId","urlString","startsWith","path","parseDiscourseUrlTopicId","ok","json","getTopic","post","postId","getPost","post_stream","stream","raw","CallRow","TextInput","ContributionRewardCall","onContributionRewardValueChange","contributionRewardCalls","networkAssetSymbol","repChange","SchemeRegistrarCall","schemeRegistrarProposalValues","onSchemeRegistrarValueChange","RemoveButton","SelectInput","Calls","schemeToUse","onToSelectChange","allowedToCall","onFunctionSelectChange","onFunctionParamsChange","addCall","onValueChange","removeCall","changeCallType","callType","allowedCall","allowedCallIndex","selectedFunction","allowedFunctions","allowedFunction","allowedFunc","allowedFuncIndex","flexDirection","paddingRight","marginTop","funcParam","funcParamIndex","dataValues","padding","alignItems","Preview","descriptionText","transferLimits","Markdown","borderRadius","border","linkTarget","skipHtml","escapeHtml","NewProposalFormWrapper","PlaceHolders","TitleInput","TextActions","NewProposalPage","schemeInLocalStorage","defaultSchemeToUse","setSchemeToUse","setTitleText","setIpfsHash","setDescriptionText","callsInStorage","callInStorage","setCalls","setContributionRewardCalls","setSchemeRegistrarProposalValues","forceUpdate","useReducer","submitionState","setSubmissionState","recommendedCall","allowedPermission","onDescriptionChange","setCallsInState","justifyContent","preview","minHeight","maxHeight","commands","bold","italic","strikethrough","hr","divider","quote","unorderedListCommand","orderedListCommand","checkedListCommand","previewOptions","setContributionRewardCallsInState","toAddress","paramIndex","uploadProposalMetadata","callToController","callDataFunctionSignature","callDataFunctionParamsEncoded","functionParam","toWei","txerror","SubmitProposalPage","useRouteMatch","VerticalLayout","NavigationBar","BackToProposals","Spacer","OptionsWrapper","ProposalType","NewProposalTypePage","setProposalTypes","options","TitleRow","ListRow","borderBottom","UserPage","userInfo","historyItems","historyEvent","eventTime","eventTimeTs","ProposalHistoryEvent","HistoryEventText","ProposalInfoBox","renderEvents","componentsList","phrase","components","History","noMargins","useABIService","setABI","decodedCallData","contractABI","controllerCallDecoded","decodedAbi","decodeABI","recommendedCallUsed","callParameters","param","__length__","encodeFunctionName","encodedFunctionName","EtherscanErrors","CallParams","fontStyle","fontWeight","EtherscanCalls","showMore","check","functionType","HoverHighlight","RepDisplay","isHovering","setIsHovering","repNormalized","repPercent","onMouseEnter","onMouseLeave","RecommendedCalls","getComponentToRender","normalizeValue","decodedCallDetail","reactStringReplace","BaseCalls","ShowMore","setShowMore","TextCenter","ActionArea","SpaceAroundRow","Vote","AmountInput","Summary","PositiveSummary","NegativeSummary","SummaryTotal","SummaryDetails","ActionButton","Divider","getContractABI","setError","checkEtherscanErrors","etherscanResult","getContractSource","useEtherscanService","ProposalCallTexts","setProposalCallTexts","proposalCallArray","getProposalCalls","SignedVoteDetails","ConfirmVoteModal","voteDecision","toAdd","voteDetails","hashToETHMessage","setHashToETHMessage","shareSignatureOnOrbitDB","setShareSignatureOnOrbitDB","shareSignatureOnRinkeby","setShareSignatureOnRinkeby","voteConfirmed","networks","signVote","Votes","setSignVote","setDecision","votePercentage","setVotePercentage","signedVotesOfProposal","setSignedVotesOfProposal","loadingSignedOrbitDBVotes","setLoadingSignedOrbitDBVotes","signedVoteMessageId","finishTimeReached","isDXDVotingMachine","getLogs","signedVoteMessages","signedVoteMessageRaw","signedVoteMessage","signedVoteMessageSplitted","valid","parseSignedVoteMessage","alreadyAdded","s","repOfVoterForProposal","votedAmount","positiveVotesCount","negativeVotesCount","userRepAtProposalCreation","totalRepAtProposalCreation","repPercentageAtCreation","totalPositiveSignedVotes","signedVote","totalNegativeSignedVotes","voteEvent","textAlign","parseFloat","voteSignature","addLog","step","flex","useEtherSWR","swrResponse","useEtherSWRHook","mutate","useContractCalls","ABIs","Map","ERC20JSON","useBalance","fromAddress","Stakes","stakeAmount","setStakeAmount","stakedAmount","positiveStakesCount","negativeStakesCount","votingMachineTokenApproved","useAllowance","parseUnits","recommendedStakeToBoost","recommendedStakeToUnBoost","preBoostedProposals","upstakes","downstakes","threshold","pow","recommendedThreshold","stakeToBoost","stakeToUnBoost","calculateStakes","submitStake","votingMachineUsed","stakeEvent","borderTop","redeemer","ProposalDescription","Detail","Details","Status","executionTimeoutTime","autoStart","executePendingAction","ProposalInformationWrapper","InfoSidebarBox","ProposalInfoSection","SidebarDivider","ProposalPage","proposalDescription","setProposalDescription","proposalTitle","setProposalTitle","whiteSpace","MulticallJSON","useETHBalance","FinanceInfoWrapper","FinanceTable","CenteredRow","ExportRow","FinanceInformation","assets","indexOfAssetInTotal","assetHolder","assetsOfHolder","parseCamelCase","usd","toFormat","allAssets","holder","usdPrice","assetsExportable","ProposalTable","SchemesInformation","schemeProposals","votingMachineParameters","humanize","fromWei","GovernanceInfoWrapper","GovernanceTable","GovernanceInformation","governanceInfo","weiNumber","chartType","loader","legend","pieSliceText","pieStartAngle","sliceVisibilityThreshold","hAxis","vAxis","user","PermissionsTable","PermissionsInformation","rawPermissions","addressesNames","functionNames","InfoPageWrapper","InfoNavigation","InfoPage","searchPath","FormLabel","InputBox","Dropdown","FormContainer","ConfigPage","etherscanApiStatus","setEtherscanApiStatus","pinataKeyStatus","setPinataKeyStatus","infuraKeyStatus","setInfuraKeyStatus","poktStatus","setPoktStatus","alchemyKeyStatus","setAlchemyKeyStatus","customRpcUrlStatus","setCustomRpcUrlStatus","localConfig","onApiKeyValueChange","serviceName","clear","FAQPage","questionId","FAQBox","querySelectorAll","scrollIntoView","daoAddresses","FAQBody","ForumPage","lists","list","getAttribute","frameId","random","substr","removeAttribute","j","attributes","attr","iframe","join","frameBorder","scrolling","category","template","RowAlignedLeft","CopyButton","CachePage","setUpdateProposalTitles","buildingCacheState","setBuildingCacheState","updatedCacheHash","setUpdatedCacheHash","setResetCache","uploadToIPFS","upload","searchParams","zip","JSZip","folder","file","generateAsync","saveAs","updatedCache","getUpdatedCacheConfig","optionsLinkUrl","getOptionsLink","ButtonsWrapper","MarkdownWrapper","Editor","MDEditor","PreviewWrapper","PreviewHeader","CreateMetadataPage","proposalType","useParams","proposalConfig","setProposalConfig","setTitle","onTitleChange","innerHeight","MultichainContext","MultichainProvider","providers","JsonRpcProvider","Provider","useJsonRpcProvider","multichainProviders","walletChainId","Web3Provider","loggerMiddleware","useSWRNext","fetcher","EtherSWRManager","provider","refreshInterval","use","getLibrary","updateLocale","relativeTime","m","h","Routes","exact","Forum","FAQ","Cache","Info","User","Proposal","App","mainnetProvider","Root","getElementById","serviceWorker","ready","registration","unregister","messageHex","messageBuffer","Buffer","keccak256","toUpperCase","scalePow","scaleMul","ms","parsed","promise","timeToWait","toReturn"],"mappings":"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B,EACpBC,EAAW,GACXC,EAA0B,KAE1B,IAAIC,EAAsC,IAAtBH,EAA0B,CAACD,GAAY,GACvDK,EAAqB,EAEzB,GAAIJ,EAAoB,EACtB,IAAK,IAAIK,EAAI,EAAGA,EAAIN,EAASO,OAAQD,GAAKL,EACxCG,EAAcI,KAAKR,EAASS,MAAMH,EAAGA,EAAIL,IAE7C,KAAOI,EAAqBD,EAAcG,QAAUL,EAAW,GAC7D,WACSQ,QAAQC,IAAIP,EAAcC,KAAsBS,KACrD4C,IACED,EAAejH,OAAOmH,OAAOF,EAAcC,MAG/CrD,IACA,MAAOO,GACPnC,QAAQO,MAAM4B,GACdV,UACMb,YAAMc,GACK,IAAbD,GACFzB,QAAQO,MAAM,yCAGpB,OAAOyE,K,ut0CC7UT,IAAI3C,EAAM,CACT,eAAgB,CACf,KACA,GAED,kBAAmB,CAClB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,sBAAuB,CACtB,KACA,GAED,eAAgB,CACf,KACA,GAED,kBAAmB,CAClB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,sBAAuB,CACtB,KACA,GAED,uBAAwB,CACvB,KACA,GAED,0BAA2B,CAC1B,KACA,GAED,2BAA4B,CAC3B,KACA,GAED,8BAA+B,CAC9B,KACA,GAED,cAAe,CACd,KACA,GAED,iBAAkB,CACjB,KACA,GAED,kBAAmB,CAClB,KACA,GAED,qBAAsB,CACrB,KACA,GAED,eAAgB,CACf,KACA,GAED,kBAAmB,CAClB,KACA,GAED,mBAAoB,CACnB,KACA,GAED,sBAAuB,CACtB,KACA,GAED,aAAc,CACb,KACA,IAED,gBAAiB,CAChB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,0BAA2B,CAC1B,KACA,IAED,6BAA8B,CAC7B,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,eAAgB,CACf,KACA,IAED,kBAAmB,CAClB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,0BAA2B,CAC1B,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,eAAgB,CACf,KACA,IAED,kBAAmB,CAClB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,uBAAwB,CACvB,KACA,IAED,0BAA2B,CAC1B,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,8BAA+B,CAC9B,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,0BAA2B,CAC1B,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,8BAA+B,CAC9B,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,eAAgB,CACf,KACA,IAED,kBAAmB,CAClB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,cAAe,CACd,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,eAAgB,CACf,KACA,IAED,kBAAmB,CAClB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,cAAe,CACd,KACA,IAED,iBAAkB,CACjB,KACA,IAED,kBAAmB,CAClB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,gBAAiB,CAChB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,uBAAwB,CACvB,KACA,IAED,eAAgB,CACf,KACA,IAED,kBAAmB,CAClB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,sBAAuB,CACtB,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,4BAA6B,CAC5B,KACA,IAED,+BAAgC,CAC/B,KACA,IAED,iBAAkB,CACjB,KACA,IAED,oBAAqB,CACpB,KACA,IAED,qBAAsB,CACrB,KACA,IAED,wBAAyB,CACxB,KACA,IAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,+BAAgC,CAC/B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,mCAAoC,CACnC,KACA,KAED,sCAAuC,CACtC,KACA,KAED,uCAAwC,CACvC,KACA,KAED,0CAA2C,CAC1C,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,6BAA8B,CAC7B,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,6BAA8B,CAC7B,KACA,KAED,gCAAiC,CAChC,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,mBAAoB,CACnB,KAED,sBAAuB,CACtB,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,iBAAkB,CACjB,KAED,4BAA6B,CAC5B,KACA,KAED,+BAAgC,CAC/B,KACA,KAED,gCAAiC,CAChC,KACA,KAED,mCAAoC,CACnC,KACA,KAED,oBAAqB,CACpB,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,6BAA8B,CAC7B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,iCAAkC,CACjC,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,aAAc,CACb,KACA,KAED,gBAAiB,CAChB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,YAAa,CACZ,KACA,KAED,eAAgB,CACf,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,6BAA8B,CAC7B,KACA,KAED,gCAAiC,CAChC,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,+BAAgC,CAC/B,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,+BAAgC,CAC/B,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,+BAAgC,CAC/B,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,kBAAmB,CAClB,KACA,KAED,qBAAsB,CACrB,KACA,KAED,uBAAwB,CACvB,KACA,KAED,0BAA2B,CAC1B,KACA,KAED,2BAA4B,CAC3B,KACA,KAED,8BAA+B,CAC9B,KACA,KAED,qBAAsB,CACrB,KACA,KAED,wBAAyB,CACxB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,4BAA6B,CAC5B,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,eAAgB,CACf,KACA,KAED,kBAAmB,CAClB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,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","file":"static/js/main.chunk.js","sourcesContent":["import { BigNumber } from 'bignumber.js';\r\n\r\nBigNumber.config({\r\n  EXPONENTIAL_AT: [-100, 100],\r\n  ROUNDING_MODE: BigNumber.ROUND_DOWN,\r\n  DECIMAL_PLACES: 18,\r\n  FORMAT: {\r\n    groupSize: 3,\r\n    groupSeparator: ' ',\r\n    decimalSeparator: '.',\r\n  },\r\n});\r\n\r\nexport { BigNumber };\r\n","import { ChainConfig } from '../types/types';\r\n\r\nexport const MAX_UINT =\r\n  '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\r\nexport const ZERO_HASH =\r\n  '0x0000000000000000000000000000000000000000000000000000000000000000';\r\nexport const ZERO_ADDRESS = '0x0000000000000000000000000000000000000000';\r\nexport const ANY_ADDRESS = '0xaAaAaAaaAaAaAaaAaAAAAAAAAaaaAaAaAaaAaaAa';\r\nexport const ANY_FUNC_SIGNATURE = '0xaaaaaaaa';\r\nexport const ERC20_TRANSFER_SIGNATURE = '0xa9059cbb';\r\nexport const ERC20_APPROVE_SIGNATURE = '0x095ea7b3';\r\nexport const DEFAULT_TOKEN_DECIMALS = 18;\r\n\r\nexport const MAX_BLOCKS_PER_EVENTS_FETCH: number = 1000000;\r\n\r\nexport const CACHE_METADATA_ENS = 'cache.dxvote.eth';\r\n\r\nconst defaultAlchemyKey = '7i7fiiOx1b7bGmgWY_oI9twyQBCsuXKC';\r\n\r\nexport const DISCOURSE_URL_ROOT = 'https://daotalk.org';\r\n\r\nexport const MAINNET_ID = 1;\r\nexport const LOCALHOST_ID = 1337;\r\n\r\nexport const DEFAULT_CHAIN_ID =\r\n  process.env.NODE_ENV === 'development' ? LOCALHOST_ID : MAINNET_ID;\r\n\r\nexport const POKT_NETWORK_URLS = {\r\n  '1': 'https://eth-archival.gateway.pokt.network/v1/lb/61f86d630d66d80038fb8c38',\r\n  '4': 'https://eth-rinkeby.gateway.pokt.network/v1/lb/61116c81a585a20035149067',\r\n  '100':\r\n    'https://poa-xdai-archival.gateway.pokt.network/v1/lb/61d897d4a065f5003a113d9a',\r\n};\r\n\r\nexport const NETWORKS: ChainConfig[] =\r\n  process.env.NODE_ENV === 'development'\r\n    ? [\r\n        {\r\n          id: 1,\r\n          name: 'mainnet',\r\n          displayName: 'Ethereum Mainnet',\r\n          defaultRpc: `https://eth-mainnet.alchemyapi.io/v2/${defaultAlchemyKey}`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://etherscan.io',\r\n          api: 'https://api.etherscan.io',\r\n        },\r\n        {\r\n          id: 4,\r\n          name: 'rinkeby',\r\n          displayName: 'Rinkeby Testnet',\r\n          defaultRpc: POKT_NETWORK_URLS['4'],\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://rinkeby.etherscan.io/',\r\n          api: 'https://api-rinkeby.etherscan.io/',\r\n        },\r\n        {\r\n          id: 100,\r\n          name: 'xdai',\r\n          displayName: 'Gnosis Chain',\r\n          defaultRpc: POKT_NETWORK_URLS['100'],\r\n          nativeAsset: {\r\n            name: 'xDai',\r\n            symbol: 'xDAI',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://blockscout.com/xdai/mainnet/',\r\n          api: 'https://blockscout.com/xdai/mainnet/api',\r\n        },\r\n        {\r\n          id: 42161,\r\n          name: 'arbitrum',\r\n          displayName: 'Arbitrum One',\r\n          defaultRpc: `https://arb-mainnet.g.alchemy.com/v2/${defaultAlchemyKey}`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://arbiscan.io/',\r\n          api: 'https://api.arbiscan.io/',\r\n        },\r\n        {\r\n          id: 421611,\r\n          name: 'arbitrumTestnet',\r\n          displayName: 'Arbitrum Testnet',\r\n          defaultRpc: `https://arb-rinkeby.g.alchemy.com/v2/${defaultAlchemyKey}`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://rinkeby-explorer.arbitrum.io/',\r\n        },\r\n        {\r\n          id: 1337,\r\n          name: 'localhost',\r\n          displayName: 'Localhost',\r\n          defaultRpc: `http://127.0.0.1:8545`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n        },\r\n      ]\r\n    : [\r\n        {\r\n          id: 1,\r\n          name: 'mainnet',\r\n          displayName: 'Ethereum Mainnet',\r\n          defaultRpc: `https://eth-mainnet.alchemyapi.io/v2/${defaultAlchemyKey}`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://etherscan.io',\r\n          api: 'https://api.etherscan.io',\r\n        },\r\n        {\r\n          id: 100,\r\n          name: 'xdai',\r\n          displayName: 'Gnosis Chain',\r\n          defaultRpc: POKT_NETWORK_URLS['100'],\r\n          nativeAsset: {\r\n            name: 'xDai',\r\n            symbol: 'xDAI',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://blockscout.com/xdai/mainnet/',\r\n          api: 'https://blockscout.com/xdai/mainnet/api',\r\n        },\r\n        {\r\n          id: 42161,\r\n          name: 'arbitrum',\r\n          displayName: 'Arbitrum One',\r\n          defaultRpc: `https://arb-mainnet.g.alchemy.com/v2/${defaultAlchemyKey}`,\r\n          nativeAsset: {\r\n            name: 'Ethereum',\r\n            symbol: 'ETH',\r\n            decimals: 18,\r\n          },\r\n          blockExplorer: 'https://arbiscan.io/',\r\n          api: 'https://api.arbiscan.io/',\r\n        },\r\n      ];\r\n\r\nexport const NETWORK_NAMES: Record<ChainConfig['id'], ChainConfig['name']> =\r\n  NETWORKS.reduce((acc, network) => {\r\n    acc[network.id] = network.name;\r\n    return acc;\r\n  }, {});\r\n\r\nexport const getNetworkByName = function (networkName: string): ChainConfig {\r\n  return NETWORKS.find(network => network.name == networkName);\r\n};\r\n\r\nexport const getNetworkById = function (networkId: number): ChainConfig {\r\n  return NETWORKS.find(network => network.id == networkId);\r\n};\r\n\r\nexport const NETWORK_DISPLAY_NAMES: Record<\r\n  ChainConfig['id'],\r\n  ChainConfig['displayName']\r\n> = NETWORKS.reduce((acc, network) => {\r\n  acc[network.id] = network.displayName;\r\n  return acc;\r\n}, {});\r\n\r\nexport const DEFAULT_RPC_URLS: Record<\r\n  ChainConfig['id'],\r\n  ChainConfig['defaultRpc']\r\n> = NETWORKS.reduce((acc, network) => {\r\n  acc[network.id] = network.defaultRpc;\r\n  return acc;\r\n}, {});\r\n\r\nexport const NETWORK_EXPLORERS: { [name: string]: string } = NETWORKS.reduce(\r\n  (acc, network) => {\r\n    if (network?.blockExplorer) {\r\n      acc[network.name] = network.blockExplorer;\r\n    }\r\n    return acc;\r\n  },\r\n  {}\r\n);\r\n\r\nexport const NETWORK_ASSET_SYMBOL: Record<\r\n  ChainConfig['name'],\r\n  ChainConfig['nativeAsset']['symbol']\r\n> = NETWORKS.reduce((acc, network) => {\r\n  acc[network.name] = network.nativeAsset.symbol;\r\n  return acc;\r\n}, {});\r\n\r\nexport const INFURA_NETWORK_NAMES = {\r\n  '1': 'mainnet',\r\n  '4': 'rinkeby',\r\n  '42161': 'arbitrum-mainnet',\r\n  '421611': 'arbitrum-rinkeby',\r\n};\r\n\r\nexport const ALCHEMY_NETWORK_URLS = {\r\n  '1': 'eth-mainnet.alchemyapi.io',\r\n  '4': 'eth-rinkeby.alchemyapi.io',\r\n  '42161': 'arb-mainnet.g.alchemy.com',\r\n  '421611': 'arb-rinkeby.g.alchemy.com',\r\n};\r\n\r\nexport const NETWORK_APIS: { [name: string]: string } = NETWORKS.reduce(\r\n  (acc, network) => {\r\n    if (network?.blockExplorer) {\r\n      acc[network.name] = network.api;\r\n    }\r\n    return acc;\r\n  },\r\n  {}\r\n);\r\n","import { Contract } from 'ethers';\r\nimport _ from 'lodash';\r\nimport { MAX_BLOCKS_PER_EVENTS_FETCH } from './constants';\r\nimport { sleep } from './helpers';\r\n\r\nconst Web3 = require('web3');\r\nconst web3 = new Web3();\r\n\r\nconst arbitrum = require('../configs/arbitrum/config.json');\r\nconst arbitrumTestnet = require('../configs/arbitrumTestnet/config.json');\r\nconst mainnet = require('../configs/mainnet/config.json');\r\nconst xdai = require('../configs/xdai/config.json');\r\nconst rinkeby = require('../configs/rinkeby/config.json');\r\nconst localhost = require('../configs/localhost/config.json');\r\n\r\nconst proposalTitles = require('../configs/proposalTitles.json');\r\n\r\nconst defaultConfigHashes = require('../configs/default.json');\r\n\r\nexport const getDefaultConfigHashes = (): Record<string, string> => {\r\n  return defaultConfigHashes;\r\n};\r\n\r\nexport const getProposalTitles = (): Record<string, string> => {\r\n  return proposalTitles;\r\n};\r\n\r\nexport const getAppConfig = (): AppConfig => {\r\n  return {\r\n    arbitrum,\r\n    arbitrumTestnet,\r\n    mainnet,\r\n    xdai,\r\n    rinkeby,\r\n    localhost,\r\n  };\r\n};\r\n\r\n// Sort cache data, so the IPFS hash is consistent\r\nexport const sortNetworkCache = (\r\n  networkCache: DaoNetworkCache\r\n): DaoNetworkCache => {\r\n  Object.keys(networkCache.schemes).forEach(schemeId => {\r\n    networkCache.schemes[schemeId].proposalIds.sort();\r\n    networkCache.schemes[schemeId].newProposalEvents.sort((a, b) =>\r\n      a.proposalId.localeCompare(b.proposalId)\r\n    );\r\n  });\r\n  networkCache.proposals = Object.keys(networkCache.proposals)\r\n    .sort()\r\n    .reduce((obj, key) => {\r\n      obj[key] = networkCache.proposals[key];\r\n      return obj;\r\n    }, {});\r\n  networkCache.ipfsHashes = _.uniqBy(networkCache.ipfsHashes, 'name');\r\n  networkCache.ipfsHashes.sort((a, b) => a.name.localeCompare(b.name));\r\n\r\n  return networkCache;\r\n};\r\n\r\nexport const getEvents = async function (\r\n  web3,\r\n  contract,\r\n  fromBlock,\r\n  toBlock,\r\n  eventsToGet,\r\n  maxBlocksPerFetch = MAX_BLOCKS_PER_EVENTS_FETCH\r\n) {\r\n  if (web3._provider.host && web3._provider.host.indexOf('arbitrum.io/rpc') > 0)\r\n    maxBlocksPerFetch = 99000;\r\n  let events = [],\r\n    to = Math.min(fromBlock + maxBlocksPerFetch, toBlock),\r\n    from = fromBlock;\r\n  while (from < to) {\r\n    console.debug(\r\n      `Fetching events of ${contract._address} from blocks ${from} -> ${to}`\r\n    );\r\n    try {\r\n      let eventsFetched = await contract.getPastEvents(eventsToGet, {\r\n        fromBlock: from,\r\n        toBlock: to,\r\n      });\r\n      eventsFetched = await getTimestampOfEvents(web3, eventsFetched);\r\n      events = events.concat(eventsFetched);\r\n      from = to;\r\n      to = Math.min(from + maxBlocksPerFetch, toBlock);\r\n    } catch (error) {\r\n      if ((error as Error).message.indexOf('Relay attempts exhausted') > -1) {\r\n        const blocksToLower = Math.max(Math.trunc((to - from) / 2), 10000);\r\n        console.error('Relay attempts exhausted');\r\n        console.debug('Lowering toBlock', blocksToLower, 'blocks');\r\n        to = to - blocksToLower;\r\n        await sleep(5000);\r\n      } else if (\r\n        (error as Error).message.indexOf(\r\n          'You cannot query logs for more than 100000 blocks at once.'\r\n        ) > -1\r\n      ) {\r\n        maxBlocksPerFetch = Number((maxBlocksPerFetch / 4).toFixed(0));\r\n        to = from + 100000;\r\n        console.error(\r\n          'You cannot query logs for more than 100000 blocks at once.'\r\n        );\r\n        console.debug('Lowering toBlock to', to);\r\n      } else if (\r\n        (error as Error).message.indexOf('Relay attempts exhausted') === -1 &&\r\n        Math.trunc((to - from) / 2) > 10000\r\n      ) {\r\n        console.error('Error fetching blocks:', (error as Error).message);\r\n        const blocksToLower = Math.max(Math.trunc((to - from) / 2), 10000);\r\n        console.debug('Lowering toBlock', blocksToLower, 'blocks');\r\n        to = to - blocksToLower;\r\n      }\r\n    }\r\n  }\r\n  return sortEvents(events);\r\n};\r\n\r\nexport const getRawEvents = async function (\r\n  web3,\r\n  contractAddress,\r\n  fromBlock,\r\n  toBlock,\r\n  topicsToGet,\r\n  maxBlocksPerFetch = MAX_BLOCKS_PER_EVENTS_FETCH\r\n) {\r\n  if (web3._provider.host && web3._provider.host.indexOf('arbitrum.io/rpc') > 0)\r\n    maxBlocksPerFetch = 99000;\r\n  let events = [],\r\n    to = Math.min(fromBlock + maxBlocksPerFetch, toBlock),\r\n    from = fromBlock;\r\n  while (from < to) {\r\n    console.debug(\r\n      `Fetching logs of ${contractAddress} from blocks ${from} -> ${to}`,\r\n      {\r\n        address: contractAddress,\r\n        fromBlock: from,\r\n        toBlock: to,\r\n        topics: topicsToGet,\r\n      }\r\n    );\r\n    try {\r\n      let eventsFetched = await web3.eth.getPastLogs({\r\n        address: contractAddress,\r\n        fromBlock: from,\r\n        toBlock: to,\r\n        topics: topicsToGet,\r\n      });\r\n      eventsFetched = await getTimestampOfEvents(web3, eventsFetched);\r\n      events = events.concat(eventsFetched);\r\n      from = to;\r\n      to = Math.min(from + maxBlocksPerFetch, toBlock);\r\n    } catch (error) {\r\n      if ((error as Error).message.indexOf('Relay attempts exhausted') > -1) {\r\n        const blocksToLower = Math.max(Math.trunc((to - from) / 2), 10000);\r\n        console.error('Relay attempts exhausted');\r\n        console.debug('Lowering toBlock', blocksToLower, 'blocks');\r\n        to = to - blocksToLower;\r\n        await sleep(5000);\r\n      } else if (\r\n        (error as Error).message.indexOf(\r\n          'You cannot query logs for more than 100000 blocks at once.'\r\n        ) > -1\r\n      ) {\r\n        maxBlocksPerFetch = Number((maxBlocksPerFetch / 4).toFixed(0));\r\n        to = from + 100000;\r\n        console.error(\r\n          'You cannot query logs for more than 100000 blocks at once.'\r\n        );\r\n        console.debug('Lowering toBlock to', to);\r\n      } else if (\r\n        (error as Error).message.indexOf('Relay attempts exhausted') === -1 &&\r\n        Math.trunc((to - from) / 2) > 10000\r\n      ) {\r\n        console.error('Error fetching blocks:', error);\r\n        const blocksToLower = Math.max(Math.trunc((to - from) / 2), 10000);\r\n        console.debug('Lowering toBlock', blocksToLower, 'blocks');\r\n        to = to - blocksToLower;\r\n      }\r\n    }\r\n  }\r\n  return sortEvents(events);\r\n};\r\n\r\nexport const getTimestampOfEvents = async function (web3, events) {\r\n  await batchPromises(\r\n    events.map(async (event, i) => {\r\n      const blockInfo = await web3.eth.getBlock(event.blockNumber);\r\n      if (!blockInfo) console.log(event.blockNumber);\r\n      for (let i = 0; i < events.length; i++) {\r\n        if (events[i].blockNumber === blockInfo.number)\r\n          events[i].timestamp = blockInfo.timestamp;\r\n        if (blockInfo.l2BlockNumber)\r\n          events[i].blockNumber = Number(blockInfo.l2BlockNumber);\r\n      }\r\n    }),\r\n    100,\r\n    1000,\r\n    500\r\n  );\r\n  return events;\r\n};\r\n\r\nexport const sortEvents = function (events) {\r\n  return _.uniq(\r\n    _.orderBy(\r\n      events,\r\n      ['blockNumber', 'transactionIndex', 'logIndex'],\r\n      ['asc', 'asc', 'asc', 'asc']\r\n    )\r\n  );\r\n};\r\n\r\nexport const executeMulticall = async function (\r\n  multicall: Contract,\r\n  calls: any[]\r\n) {\r\n  const rawCalls = calls.map(call => {\r\n    const functionParams = [...call[1].matchAll(/\\(([^)]+)\\)/g)]\r\n      .flat()[1]\r\n      ?.split(',');\r\n    return [\r\n      call[0],\r\n      web3.eth.abi.encodeFunctionSignature(call[1]) +\r\n        (functionParams\r\n          ? web3.eth.abi.encodeParameters(functionParams, call[2]).substring(2)\r\n          : ''),\r\n    ];\r\n  });\r\n  const { returnData } = await multicall.methods.aggregate(rawCalls).call();\r\n\r\n  return {\r\n    returnData,\r\n    decodedReturnData: returnData.map((callResult, i) => {\r\n      return calls[i][3].length > 0\r\n        ? web3.eth.abi.decodeParameters(calls[i][3], callResult)\r\n        : '';\r\n    }),\r\n  };\r\n};\r\n\r\nexport const executeRawMulticall = async function (multicall, calls) {\r\n  const rawCalls = calls.map(call => {\r\n    return [call[0], call[1]];\r\n  });\r\n\r\n  const { returnData } = await multicall.methods.aggregate(rawCalls).call();\r\n\r\n  return {\r\n    returnData,\r\n  };\r\n};\r\n\r\nexport const isNode = function () {\r\n  return typeof module !== 'undefined' && module.exports;\r\n};\r\n\r\nexport const getSchemeConfig = function (networkContracts, schemeAddress) {\r\n  if (networkContracts.daostack && networkContracts.daostack[schemeAddress])\r\n    return {\r\n      type: networkContracts.daostack[schemeAddress].type,\r\n      name: networkContracts.daostack[schemeAddress].name,\r\n      contractToCall: networkContracts.daostack[schemeAddress].contractToCall,\r\n      newProposalTopics:\r\n        networkContracts.daostack[schemeAddress].newProposalTopics,\r\n      creationLogEncoding:\r\n        networkContracts.daostack[schemeAddress].creationLogEncoding,\r\n      votingMachine: networkContracts.daostack[schemeAddress].votingMachine,\r\n      voteParams: networkContracts.daostack[schemeAddress].voteParams,\r\n    };\r\n  else\r\n    return {\r\n      type: 'WalletScheme',\r\n      name: 'WalletScheme',\r\n      contractToCall: schemeAddress,\r\n      newProposalTopics: [\r\n        [\r\n          Web3.utils.soliditySha3('ProposalStateChange(bytes32,uint256)'),\r\n          null,\r\n          '0x0000000000000000000000000000000000000000000000000000000000000001',\r\n        ],\r\n      ],\r\n      creationLogEncoding: [],\r\n    };\r\n};\r\n\r\nexport async function tryCacheUpdates(promises, networkCache) {\r\n  let retry = true;\r\n  while (retry) {\r\n    try {\r\n      (await Promise.all(promises)).map(networkCacheUpdated => {\r\n        networkCache = Object.assign(networkCache, networkCacheUpdated);\r\n      });\r\n    } catch (e) {\r\n      console.error('[CACHE UPDATE] (trying again)');\r\n      console.error(e);\r\n    } finally {\r\n      retry = false;\r\n    }\r\n  }\r\n  return networkCache;\r\n}\r\n\r\nexport async function batchPromisesOntarget(\r\n  promises,\r\n  targetObject,\r\n  maxPromisesPerTry = 0,\r\n  maxTries = 10,\r\n  sleepTimeBetweenRetries = 100\r\n) {\r\n  let promisesBatch = maxPromisesPerTry === 0 ? [promises] : [];\r\n  let promisesBatchIndex = 0;\r\n\r\n  if (maxPromisesPerTry > 0)\r\n    for (var i = 0; i < promises.length; i += maxPromisesPerTry)\r\n      promisesBatch.push(promises.slice(i, i + maxPromisesPerTry));\r\n\r\n  while (promisesBatchIndex < promisesBatch.length && maxTries > 0) {\r\n    try {\r\n      (await Promise.all(promisesBatch[promisesBatchIndex])).map(\r\n        targetObjectUpdated => {\r\n          targetObject = Object.assign(targetObject, targetObjectUpdated);\r\n        }\r\n      );\r\n      promisesBatchIndex++;\r\n    } catch (e) {\r\n      console.error(e);\r\n      maxTries--;\r\n      await sleep(sleepTimeBetweenRetries);\r\n      if (maxTries === 0)\r\n        console.error('[BATCH PROMISES] (max errors reached)');\r\n    }\r\n  }\r\n  return targetObject;\r\n}\r\n\r\nexport async function batchPromises(\r\n  promises,\r\n  maxPromisesPerTry = 0,\r\n  maxTries = 10,\r\n  sleepTimeBetweenRetries = 100\r\n) {\r\n  let promisesBatch = maxPromisesPerTry === 0 ? [promises] : [];\r\n  let promisesBatchIndex = 0;\r\n\r\n  if (maxPromisesPerTry > 0)\r\n    for (var i = 0; i < promises.length; i += maxPromisesPerTry)\r\n      promisesBatch.push(promises.slice(i, i + maxPromisesPerTry));\r\n\r\n  while (promisesBatchIndex < promisesBatch.length && maxTries > 0) {\r\n    try {\r\n      await Promise.all(promisesBatch[promisesBatchIndex]);\r\n      promisesBatchIndex++;\r\n    } catch (e) {\r\n      console.error(e);\r\n      maxTries--;\r\n      await sleep(sleepTimeBetweenRetries);\r\n      if (maxTries === 0)\r\n        console.error('[BATCH PROMISES] (max errors reached)');\r\n    }\r\n  }\r\n  return;\r\n}\r\n","var map = {\n\t\"./prism-abap\": [\n\t\t1050,\n\t\t0\n\t],\n\t\"./prism-abap.js\": [\n\t\t1050,\n\t\t0\n\t],\n\t\"./prism-abap.min\": [\n\t\t1051,\n\t\t1\n\t],\n\t\"./prism-abap.min.js\": [\n\t\t1051,\n\t\t1\n\t],\n\t\"./prism-abnf\": [\n\t\t1052,\n\t\t2\n\t],\n\t\"./prism-abnf.js\": [\n\t\t1052,\n\t\t2\n\t],\n\t\"./prism-abnf.min\": [\n\t\t1053,\n\t\t3\n\t],\n\t\"./prism-abnf.min.js\": [\n\t\t1053,\n\t\t3\n\t],\n\t\"./prism-actionscript\": [\n\t\t1054,\n\t\t4\n\t],\n\t\"./prism-actionscript.js\": [\n\t\t1054,\n\t\t4\n\t],\n\t\"./prism-actionscript.min\": [\n\t\t1055,\n\t\t5\n\t],\n\t\"./prism-actionscript.min.js\": [\n\t\t1055,\n\t\t5\n\t],\n\t\"./prism-ada\": [\n\t\t1056,\n\t\t6\n\t],\n\t\"./prism-ada.js\": [\n\t\t1056,\n\t\t6\n\t],\n\t\"./prism-ada.min\": [\n\t\t1057,\n\t\t7\n\t],\n\t\"./prism-ada.min.js\": [\n\t\t1057,\n\t\t7\n\t],\n\t\"./prism-agda\": [\n\t\t1058,\n\t\t8\n\t],\n\t\"./prism-agda.js\": [\n\t\t1058,\n\t\t8\n\t],\n\t\"./prism-agda.min\": [\n\t\t1059,\n\t\t9\n\t],\n\t\"./prism-agda.min.js\": [\n\t\t1059,\n\t\t9\n\t],\n\t\"./prism-al\": [\n\t\t1060,\n\t\t10\n\t],\n\t\"./prism-al.js\": [\n\t\t1060,\n\t\t10\n\t],\n\t\"./prism-al.min\": [\n\t\t1061,\n\t\t11\n\t],\n\t\"./prism-al.min.js\": [\n\t\t1061,\n\t\t11\n\t],\n\t\"./prism-antlr4\": [\n\t\t1062,\n\t\t12\n\t],\n\t\"./prism-antlr4.js\": [\n\t\t1062,\n\t\t12\n\t],\n\t\"./prism-antlr4.min\": [\n\t\t1063,\n\t\t13\n\t],\n\t\"./prism-antlr4.min.js\": [\n\t\t1063,\n\t\t13\n\t],\n\t\"./prism-apacheconf\": [\n\t\t1064,\n\t\t14\n\t],\n\t\"./prism-apacheconf.js\": [\n\t\t1064,\n\t\t14\n\t],\n\t\"./prism-apacheconf.min\": [\n\t\t1065,\n\t\t15\n\t],\n\t\"./prism-apacheconf.min.js\": [\n\t\t1065,\n\t\t15\n\t],\n\t\"./prism-apl\": [\n\t\t1066,\n\t\t16\n\t],\n\t\"./prism-apl.js\": [\n\t\t1066,\n\t\t16\n\t],\n\t\"./prism-apl.min\": [\n\t\t1067,\n\t\t17\n\t],\n\t\"./prism-apl.min.js\": [\n\t\t1067,\n\t\t17\n\t],\n\t\"./prism-applescript\": [\n\t\t1068,\n\t\t18\n\t],\n\t\"./prism-applescript.js\": [\n\t\t1068,\n\t\t18\n\t],\n\t\"./prism-applescript.min\": [\n\t\t1069,\n\t\t19\n\t],\n\t\"./prism-applescript.min.js\": [\n\t\t1069,\n\t\t19\n\t],\n\t\"./prism-aql\": [\n\t\t1070,\n\t\t20\n\t],\n\t\"./prism-aql.js\": [\n\t\t1070,\n\t\t20\n\t],\n\t\"./prism-aql.min\": [\n\t\t1071,\n\t\t21\n\t],\n\t\"./prism-aql.min.js\": [\n\t\t1071,\n\t\t21\n\t],\n\t\"./prism-arduino\": [\n\t\t1072,\n\t\t22\n\t],\n\t\"./prism-arduino.js\": [\n\t\t1072,\n\t\t22\n\t],\n\t\"./prism-arduino.min\": [\n\t\t1073,\n\t\t23\n\t],\n\t\"./prism-arduino.min.js\": [\n\t\t1073,\n\t\t23\n\t],\n\t\"./prism-arff\": [\n\t\t1074,\n\t\t24\n\t],\n\t\"./prism-arff.js\": [\n\t\t1074,\n\t\t24\n\t],\n\t\"./prism-arff.min\": [\n\t\t1075,\n\t\t25\n\t],\n\t\"./prism-arff.min.js\": [\n\t\t1075,\n\t\t25\n\t],\n\t\"./prism-asciidoc\": [\n\t\t1076,\n\t\t26\n\t],\n\t\"./prism-asciidoc.js\": [\n\t\t1076,\n\t\t26\n\t],\n\t\"./prism-asciidoc.min\": [\n\t\t1077,\n\t\t27\n\t],\n\t\"./prism-asciidoc.min.js\": [\n\t\t1077,\n\t\t27\n\t],\n\t\"./prism-asm6502\": [\n\t\t1078,\n\t\t28\n\t],\n\t\"./prism-asm6502.js\": [\n\t\t1078,\n\t\t28\n\t],\n\t\"./prism-asm6502.min\": [\n\t\t1079,\n\t\t29\n\t],\n\t\"./prism-asm6502.min.js\": [\n\t\t1079,\n\t\t29\n\t],\n\t\"./prism-aspnet\": [\n\t\t1080,\n\t\t30\n\t],\n\t\"./prism-aspnet.js\": [\n\t\t1080,\n\t\t30\n\t],\n\t\"./prism-aspnet.min\": [\n\t\t1081,\n\t\t31\n\t],\n\t\"./prism-aspnet.min.js\": [\n\t\t1081,\n\t\t31\n\t],\n\t\"./prism-autohotkey\": [\n\t\t1082,\n\t\t32\n\t],\n\t\"./prism-autohotkey.js\": [\n\t\t1082,\n\t\t32\n\t],\n\t\"./prism-autohotkey.min\": [\n\t\t1083,\n\t\t33\n\t],\n\t\"./prism-autohotkey.min.js\": [\n\t\t1083,\n\t\t33\n\t],\n\t\"./prism-autoit\": [\n\t\t1084,\n\t\t34\n\t],\n\t\"./prism-autoit.js\": [\n\t\t1084,\n\t\t34\n\t],\n\t\"./prism-autoit.min\": [\n\t\t1085,\n\t\t35\n\t],\n\t\"./prism-autoit.min.js\": [\n\t\t1085,\n\t\t35\n\t],\n\t\"./prism-bash\": [\n\t\t1086,\n\t\t36\n\t],\n\t\"./prism-bash.js\": [\n\t\t1086,\n\t\t36\n\t],\n\t\"./prism-bash.min\": [\n\t\t1087,\n\t\t37\n\t],\n\t\"./prism-bash.min.js\": [\n\t\t1087,\n\t\t37\n\t],\n\t\"./prism-basic\": [\n\t\t1088,\n\t\t38\n\t],\n\t\"./prism-basic.js\": [\n\t\t1088,\n\t\t38\n\t],\n\t\"./prism-basic.min\": [\n\t\t1089,\n\t\t39\n\t],\n\t\"./prism-basic.min.js\": [\n\t\t1089,\n\t\t39\n\t],\n\t\"./prism-batch\": [\n\t\t1090,\n\t\t40\n\t],\n\t\"./prism-batch.js\": [\n\t\t1090,\n\t\t40\n\t],\n\t\"./prism-batch.min\": [\n\t\t1091,\n\t\t41\n\t],\n\t\"./prism-batch.min.js\": [\n\t\t1091,\n\t\t41\n\t],\n\t\"./prism-bbcode\": [\n\t\t1092,\n\t\t42\n\t],\n\t\"./prism-bbcode.js\": [\n\t\t1092,\n\t\t42\n\t],\n\t\"./prism-bbcode.min\": [\n\t\t1093,\n\t\t43\n\t],\n\t\"./prism-bbcode.min.js\": [\n\t\t1093,\n\t\t43\n\t],\n\t\"./prism-bison\": [\n\t\t1094,\n\t\t44\n\t],\n\t\"./prism-bison.js\": [\n\t\t1094,\n\t\t44\n\t],\n\t\"./prism-bison.min\": [\n\t\t1095,\n\t\t45\n\t],\n\t\"./prism-bison.min.js\": [\n\t\t1095,\n\t\t45\n\t],\n\t\"./prism-bnf\": [\n\t\t1096,\n\t\t46\n\t],\n\t\"./prism-bnf.js\": [\n\t\t1096,\n\t\t46\n\t],\n\t\"./prism-bnf.min\": [\n\t\t1097,\n\t\t47\n\t],\n\t\"./prism-bnf.min.js\": [\n\t\t1097,\n\t\t47\n\t],\n\t\"./prism-brainfuck\": [\n\t\t1098,\n\t\t48\n\t],\n\t\"./prism-brainfuck.js\": [\n\t\t1098,\n\t\t48\n\t],\n\t\"./prism-brainfuck.min\": [\n\t\t1099,\n\t\t49\n\t],\n\t\"./prism-brainfuck.min.js\": [\n\t\t1099,\n\t\t49\n\t],\n\t\"./prism-brightscript\": [\n\t\t1100,\n\t\t50\n\t],\n\t\"./prism-brightscript.js\": [\n\t\t1100,\n\t\t50\n\t],\n\t\"./prism-brightscript.min\": [\n\t\t1101,\n\t\t51\n\t],\n\t\"./prism-brightscript.min.js\": [\n\t\t1101,\n\t\t51\n\t],\n\t\"./prism-bro\": [\n\t\t1102,\n\t\t52\n\t],\n\t\"./prism-bro.js\": [\n\t\t1102,\n\t\t52\n\t],\n\t\"./prism-bro.min\": [\n\t\t1103,\n\t\t53\n\t],\n\t\"./prism-bro.min.js\": [\n\t\t1103,\n\t\t53\n\t],\n\t\"./prism-c\": [\n\t\t1104,\n\t\t54\n\t],\n\t\"./prism-c.js\": [\n\t\t1104,\n\t\t54\n\t],\n\t\"./prism-c.min\": [\n\t\t1105,\n\t\t55\n\t],\n\t\"./prism-c.min.js\": [\n\t\t1105,\n\t\t55\n\t],\n\t\"./prism-cil\": [\n\t\t1106,\n\t\t56\n\t],\n\t\"./prism-cil.js\": [\n\t\t1106,\n\t\t56\n\t],\n\t\"./prism-cil.min\": [\n\t\t1107,\n\t\t57\n\t],\n\t\"./prism-cil.min.js\": [\n\t\t1107,\n\t\t57\n\t],\n\t\"./prism-clike\": [\n\t\t1108,\n\t\t58\n\t],\n\t\"./prism-clike.js\": [\n\t\t1108,\n\t\t58\n\t],\n\t\"./prism-clike.min\": [\n\t\t1109,\n\t\t59\n\t],\n\t\"./prism-clike.min.js\": [\n\t\t1109,\n\t\t59\n\t],\n\t\"./prism-clojure\": [\n\t\t1110,\n\t\t60\n\t],\n\t\"./prism-clojure.js\": [\n\t\t1110,\n\t\t60\n\t],\n\t\"./prism-clojure.min\": [\n\t\t1111,\n\t\t61\n\t],\n\t\"./prism-clojure.min.js\": [\n\t\t1111,\n\t\t61\n\t],\n\t\"./prism-cmake\": [\n\t\t1112,\n\t\t62\n\t],\n\t\"./prism-cmake.js\": [\n\t\t1112,\n\t\t62\n\t],\n\t\"./prism-cmake.min\": [\n\t\t1113,\n\t\t63\n\t],\n\t\"./prism-cmake.min.js\": [\n\t\t1113,\n\t\t63\n\t],\n\t\"./prism-coffeescript\": [\n\t\t1114,\n\t\t64\n\t],\n\t\"./prism-coffeescript.js\": [\n\t\t1114,\n\t\t64\n\t],\n\t\"./prism-coffeescript.min\": [\n\t\t1115,\n\t\t65\n\t],\n\t\"./prism-coffeescript.min.js\": [\n\t\t1115,\n\t\t65\n\t],\n\t\"./prism-concurnas\": [\n\t\t1116,\n\t\t66\n\t],\n\t\"./prism-concurnas.js\": [\n\t\t1116,\n\t\t66\n\t],\n\t\"./prism-concurnas.min\": [\n\t\t1117,\n\t\t67\n\t],\n\t\"./prism-concurnas.min.js\": [\n\t\t1117,\n\t\t67\n\t],\n\t\"./prism-core\": [\n\t\t1118,\n\t\t68\n\t],\n\t\"./prism-core.js\": [\n\t\t1118,\n\t\t68\n\t],\n\t\"./prism-core.min\": [\n\t\t1119,\n\t\t69\n\t],\n\t\"./prism-core.min.js\": [\n\t\t1119,\n\t\t69\n\t],\n\t\"./prism-cpp\": [\n\t\t1120,\n\t\t70\n\t],\n\t\"./prism-cpp.js\": [\n\t\t1120,\n\t\t70\n\t],\n\t\"./prism-cpp.min\": [\n\t\t1121,\n\t\t71\n\t],\n\t\"./prism-cpp.min.js\": [\n\t\t1121,\n\t\t71\n\t],\n\t\"./prism-crystal\": [\n\t\t1122,\n\t\t72\n\t],\n\t\"./prism-crystal.js\": [\n\t\t1122,\n\t\t72\n\t],\n\t\"./prism-crystal.min\": [\n\t\t1123,\n\t\t73\n\t],\n\t\"./prism-crystal.min.js\": [\n\t\t1123,\n\t\t73\n\t],\n\t\"./prism-csharp\": [\n\t\t1124,\n\t\t74\n\t],\n\t\"./prism-csharp.js\": [\n\t\t1124,\n\t\t74\n\t],\n\t\"./prism-csharp.min\": [\n\t\t1125,\n\t\t75\n\t],\n\t\"./prism-csharp.min.js\": [\n\t\t1125,\n\t\t75\n\t],\n\t\"./prism-csp\": [\n\t\t1126,\n\t\t76\n\t],\n\t\"./prism-csp.js\": [\n\t\t1126,\n\t\t76\n\t],\n\t\"./prism-csp.min\": [\n\t\t1127,\n\t\t77\n\t],\n\t\"./prism-csp.min.js\": [\n\t\t1127,\n\t\t77\n\t],\n\t\"./prism-css\": [\n\t\t1130,\n\t\t80\n\t],\n\t\"./prism-css-extras\": [\n\t\t1128,\n\t\t78\n\t],\n\t\"./prism-css-extras.js\": [\n\t\t1128,\n\t\t78\n\t],\n\t\"./prism-css-extras.min\": [\n\t\t1129,\n\t\t79\n\t],\n\t\"./prism-css-extras.min.js\": [\n\t\t1129,\n\t\t79\n\t],\n\t\"./prism-css.js\": [\n\t\t1130,\n\t\t80\n\t],\n\t\"./prism-css.min\": [\n\t\t1131,\n\t\t81\n\t],\n\t\"./prism-css.min.js\": [\n\t\t1131,\n\t\t81\n\t],\n\t\"./prism-cypher\": [\n\t\t1132,\n\t\t82\n\t],\n\t\"./prism-cypher.js\": [\n\t\t1132,\n\t\t82\n\t],\n\t\"./prism-cypher.min\": [\n\t\t1133,\n\t\t83\n\t],\n\t\"./prism-cypher.min.js\": [\n\t\t1133,\n\t\t83\n\t],\n\t\"./prism-d\": [\n\t\t1134,\n\t\t84\n\t],\n\t\"./prism-d.js\": [\n\t\t1134,\n\t\t84\n\t],\n\t\"./prism-d.min\": [\n\t\t1135,\n\t\t85\n\t],\n\t\"./prism-d.min.js\": [\n\t\t1135,\n\t\t85\n\t],\n\t\"./prism-dart\": [\n\t\t1136,\n\t\t86\n\t],\n\t\"./prism-dart.js\": [\n\t\t1136,\n\t\t86\n\t],\n\t\"./prism-dart.min\": [\n\t\t1137,\n\t\t87\n\t],\n\t\"./prism-dart.min.js\": [\n\t\t1137,\n\t\t87\n\t],\n\t\"./prism-dax\": [\n\t\t1138,\n\t\t88\n\t],\n\t\"./prism-dax.js\": [\n\t\t1138,\n\t\t88\n\t],\n\t\"./prism-dax.min\": [\n\t\t1139,\n\t\t89\n\t],\n\t\"./prism-dax.min.js\": [\n\t\t1139,\n\t\t89\n\t],\n\t\"./prism-dhall\": [\n\t\t1140,\n\t\t90\n\t],\n\t\"./prism-dhall.js\": [\n\t\t1140,\n\t\t90\n\t],\n\t\"./prism-dhall.min\": [\n\t\t1141,\n\t\t91\n\t],\n\t\"./prism-dhall.min.js\": [\n\t\t1141,\n\t\t91\n\t],\n\t\"./prism-diff\": [\n\t\t1142,\n\t\t92\n\t],\n\t\"./prism-diff.js\": [\n\t\t1142,\n\t\t92\n\t],\n\t\"./prism-diff.min\": [\n\t\t1143,\n\t\t93\n\t],\n\t\"./prism-diff.min.js\": [\n\t\t1143,\n\t\t93\n\t],\n\t\"./prism-django\": [\n\t\t1144,\n\t\t94\n\t],\n\t\"./prism-django.js\": [\n\t\t1144,\n\t\t94\n\t],\n\t\"./prism-django.min\": [\n\t\t1145,\n\t\t95\n\t],\n\t\"./prism-django.min.js\": [\n\t\t1145,\n\t\t95\n\t],\n\t\"./prism-dns-zone-file\": [\n\t\t1146,\n\t\t96\n\t],\n\t\"./prism-dns-zone-file.js\": [\n\t\t1146,\n\t\t96\n\t],\n\t\"./prism-dns-zone-file.min\": [\n\t\t1147,\n\t\t97\n\t],\n\t\"./prism-dns-zone-file.min.js\": [\n\t\t1147,\n\t\t97\n\t],\n\t\"./prism-docker\": [\n\t\t1148,\n\t\t98\n\t],\n\t\"./prism-docker.js\": [\n\t\t1148,\n\t\t98\n\t],\n\t\"./prism-docker.min\": [\n\t\t1149,\n\t\t99\n\t],\n\t\"./prism-docker.min.js\": [\n\t\t1149,\n\t\t99\n\t],\n\t\"./prism-ebnf\": [\n\t\t1150,\n\t\t100\n\t],\n\t\"./prism-ebnf.js\": [\n\t\t1150,\n\t\t100\n\t],\n\t\"./prism-ebnf.min\": [\n\t\t1151,\n\t\t101\n\t],\n\t\"./prism-ebnf.min.js\": [\n\t\t1151,\n\t\t101\n\t],\n\t\"./prism-editorconfig\": [\n\t\t1152,\n\t\t102\n\t],\n\t\"./prism-editorconfig.js\": [\n\t\t1152,\n\t\t102\n\t],\n\t\"./prism-editorconfig.min\": [\n\t\t1153,\n\t\t103\n\t],\n\t\"./prism-editorconfig.min.js\": [\n\t\t1153,\n\t\t103\n\t],\n\t\"./prism-eiffel\": [\n\t\t1154,\n\t\t104\n\t],\n\t\"./prism-eiffel.js\": [\n\t\t1154,\n\t\t104\n\t],\n\t\"./prism-eiffel.min\": [\n\t\t1155,\n\t\t105\n\t],\n\t\"./prism-eiffel.min.js\": [\n\t\t1155,\n\t\t105\n\t],\n\t\"./prism-ejs\": [\n\t\t1156,\n\t\t106\n\t],\n\t\"./prism-ejs.js\": [\n\t\t1156,\n\t\t106\n\t],\n\t\"./prism-ejs.min\": [\n\t\t1157,\n\t\t107\n\t],\n\t\"./prism-ejs.min.js\": [\n\t\t1157,\n\t\t107\n\t],\n\t\"./prism-elixir\": [\n\t\t1158,\n\t\t108\n\t],\n\t\"./prism-elixir.js\": [\n\t\t1158,\n\t\t108\n\t],\n\t\"./prism-elixir.min\": [\n\t\t1159,\n\t\t109\n\t],\n\t\"./prism-elixir.min.js\": [\n\t\t1159,\n\t\t109\n\t],\n\t\"./prism-elm\": [\n\t\t1160,\n\t\t110\n\t],\n\t\"./prism-elm.js\": [\n\t\t1160,\n\t\t110\n\t],\n\t\"./prism-elm.min\": [\n\t\t1161,\n\t\t111\n\t],\n\t\"./prism-elm.min.js\": [\n\t\t1161,\n\t\t111\n\t],\n\t\"./prism-erb\": [\n\t\t1162,\n\t\t112\n\t],\n\t\"./prism-erb.js\": [\n\t\t1162,\n\t\t112\n\t],\n\t\"./prism-erb.min\": [\n\t\t1163,\n\t\t113\n\t],\n\t\"./prism-erb.min.js\": [\n\t\t1163,\n\t\t113\n\t],\n\t\"./prism-erlang\": [\n\t\t1164,\n\t\t114\n\t],\n\t\"./prism-erlang.js\": [\n\t\t1164,\n\t\t114\n\t],\n\t\"./prism-erlang.min\": [\n\t\t1165,\n\t\t115\n\t],\n\t\"./prism-erlang.min.js\": [\n\t\t1165,\n\t\t115\n\t],\n\t\"./prism-etlua\": [\n\t\t1166,\n\t\t116\n\t],\n\t\"./prism-etlua.js\": [\n\t\t1166,\n\t\t116\n\t],\n\t\"./prism-etlua.min\": [\n\t\t1167,\n\t\t117\n\t],\n\t\"./prism-etlua.min.js\": [\n\t\t1167,\n\t\t117\n\t],\n\t\"./prism-excel-formula\": [\n\t\t1168,\n\t\t118\n\t],\n\t\"./prism-excel-formula.js\": [\n\t\t1168,\n\t\t118\n\t],\n\t\"./prism-excel-formula.min\": [\n\t\t1169,\n\t\t119\n\t],\n\t\"./prism-excel-formula.min.js\": [\n\t\t1169,\n\t\t119\n\t],\n\t\"./prism-factor\": [\n\t\t1170,\n\t\t120\n\t],\n\t\"./prism-factor.js\": [\n\t\t1170,\n\t\t120\n\t],\n\t\"./prism-factor.min\": [\n\t\t1171,\n\t\t121\n\t],\n\t\"./prism-factor.min.js\": [\n\t\t1171,\n\t\t121\n\t],\n\t\"./prism-firestore-security-rules\": [\n\t\t1172,\n\t\t122\n\t],\n\t\"./prism-firestore-security-rules.js\": [\n\t\t1172,\n\t\t122\n\t],\n\t\"./prism-firestore-security-rules.min\": [\n\t\t1173,\n\t\t123\n\t],\n\t\"./prism-firestore-security-rules.min.js\": [\n\t\t1173,\n\t\t123\n\t],\n\t\"./prism-flow\": [\n\t\t1174,\n\t\t124\n\t],\n\t\"./prism-flow.js\": [\n\t\t1174,\n\t\t124\n\t],\n\t\"./prism-flow.min\": [\n\t\t1175,\n\t\t125\n\t],\n\t\"./prism-flow.min.js\": [\n\t\t1175,\n\t\t125\n\t],\n\t\"./prism-fortran\": [\n\t\t1176,\n\t\t126\n\t],\n\t\"./prism-fortran.js\": [\n\t\t1176,\n\t\t126\n\t],\n\t\"./prism-fortran.min\": [\n\t\t1177,\n\t\t127\n\t],\n\t\"./prism-fortran.min.js\": [\n\t\t1177,\n\t\t127\n\t],\n\t\"./prism-fsharp\": [\n\t\t1178,\n\t\t128\n\t],\n\t\"./prism-fsharp.js\": [\n\t\t1178,\n\t\t128\n\t],\n\t\"./prism-fsharp.min\": [\n\t\t1179,\n\t\t129\n\t],\n\t\"./prism-fsharp.min.js\": [\n\t\t1179,\n\t\t129\n\t],\n\t\"./prism-ftl\": [\n\t\t1180,\n\t\t130\n\t],\n\t\"./prism-ftl.js\": [\n\t\t1180,\n\t\t130\n\t],\n\t\"./prism-ftl.min\": [\n\t\t1181,\n\t\t131\n\t],\n\t\"./prism-ftl.min.js\": [\n\t\t1181,\n\t\t131\n\t],\n\t\"./prism-gcode\": [\n\t\t1182,\n\t\t132\n\t],\n\t\"./prism-gcode.js\": [\n\t\t1182,\n\t\t132\n\t],\n\t\"./prism-gcode.min\": [\n\t\t1183,\n\t\t133\n\t],\n\t\"./prism-gcode.min.js\": [\n\t\t1183,\n\t\t133\n\t],\n\t\"./prism-gdscript\": [\n\t\t1184,\n\t\t134\n\t],\n\t\"./prism-gdscript.js\": [\n\t\t1184,\n\t\t134\n\t],\n\t\"./prism-gdscript.min\": [\n\t\t1185,\n\t\t135\n\t],\n\t\"./prism-gdscript.min.js\": [\n\t\t1185,\n\t\t135\n\t],\n\t\"./prism-gedcom\": [\n\t\t1186,\n\t\t136\n\t],\n\t\"./prism-gedcom.js\": [\n\t\t1186,\n\t\t136\n\t],\n\t\"./prism-gedcom.min\": [\n\t\t1187,\n\t\t137\n\t],\n\t\"./prism-gedcom.min.js\": [\n\t\t1187,\n\t\t137\n\t],\n\t\"./prism-gherkin\": [\n\t\t1188,\n\t\t138\n\t],\n\t\"./prism-gherkin.js\": [\n\t\t1188,\n\t\t138\n\t],\n\t\"./prism-gherkin.min\": [\n\t\t1189,\n\t\t139\n\t],\n\t\"./prism-gherkin.min.js\": [\n\t\t1189,\n\t\t139\n\t],\n\t\"./prism-git\": [\n\t\t1190,\n\t\t140\n\t],\n\t\"./prism-git.js\": [\n\t\t1190,\n\t\t140\n\t],\n\t\"./prism-git.min\": [\n\t\t1191,\n\t\t141\n\t],\n\t\"./prism-git.min.js\": [\n\t\t1191,\n\t\t141\n\t],\n\t\"./prism-glsl\": [\n\t\t1192,\n\t\t142\n\t],\n\t\"./prism-glsl.js\": [\n\t\t1192,\n\t\t142\n\t],\n\t\"./prism-glsl.min\": [\n\t\t1193,\n\t\t143\n\t],\n\t\"./prism-glsl.min.js\": [\n\t\t1193,\n\t\t143\n\t],\n\t\"./prism-gml\": [\n\t\t1194,\n\t\t144\n\t],\n\t\"./prism-gml.js\": [\n\t\t1194,\n\t\t144\n\t],\n\t\"./prism-gml.min\": [\n\t\t1195,\n\t\t145\n\t],\n\t\"./prism-gml.min.js\": [\n\t\t1195,\n\t\t145\n\t],\n\t\"./prism-go\": [\n\t\t1196,\n\t\t146\n\t],\n\t\"./prism-go.js\": [\n\t\t1196,\n\t\t146\n\t],\n\t\"./prism-go.min\": [\n\t\t1197,\n\t\t147\n\t],\n\t\"./prism-go.min.js\": [\n\t\t1197,\n\t\t147\n\t],\n\t\"./prism-graphql\": [\n\t\t1198,\n\t\t148\n\t],\n\t\"./prism-graphql.js\": [\n\t\t1198,\n\t\t148\n\t],\n\t\"./prism-graphql.min\": [\n\t\t1199,\n\t\t149\n\t],\n\t\"./prism-graphql.min.js\": [\n\t\t1199,\n\t\t149\n\t],\n\t\"./prism-groovy\": [\n\t\t1200,\n\t\t150\n\t],\n\t\"./prism-groovy.js\": [\n\t\t1200,\n\t\t150\n\t],\n\t\"./prism-groovy.min\": [\n\t\t1201,\n\t\t151\n\t],\n\t\"./prism-groovy.min.js\": [\n\t\t1201,\n\t\t151\n\t],\n\t\"./prism-haml\": [\n\t\t1202,\n\t\t152\n\t],\n\t\"./prism-haml.js\": [\n\t\t1202,\n\t\t152\n\t],\n\t\"./prism-haml.min\": [\n\t\t1203,\n\t\t153\n\t],\n\t\"./prism-haml.min.js\": [\n\t\t1203,\n\t\t153\n\t],\n\t\"./prism-handlebars\": [\n\t\t1204,\n\t\t154\n\t],\n\t\"./prism-handlebars.js\": [\n\t\t1204,\n\t\t154\n\t],\n\t\"./prism-handlebars.min\": [\n\t\t1205,\n\t\t155\n\t],\n\t\"./prism-handlebars.min.js\": [\n\t\t1205,\n\t\t155\n\t],\n\t\"./prism-haskell\": [\n\t\t1206,\n\t\t156\n\t],\n\t\"./prism-haskell.js\": [\n\t\t1206,\n\t\t156\n\t],\n\t\"./prism-haskell.min\": [\n\t\t1207,\n\t\t157\n\t],\n\t\"./prism-haskell.min.js\": [\n\t\t1207,\n\t\t157\n\t],\n\t\"./prism-haxe\": [\n\t\t1208,\n\t\t158\n\t],\n\t\"./prism-haxe.js\": [\n\t\t1208,\n\t\t158\n\t],\n\t\"./prism-haxe.min\": [\n\t\t1209,\n\t\t159\n\t],\n\t\"./prism-haxe.min.js\": [\n\t\t1209,\n\t\t159\n\t],\n\t\"./prism-hcl\": [\n\t\t1210,\n\t\t160\n\t],\n\t\"./prism-hcl.js\": [\n\t\t1210,\n\t\t160\n\t],\n\t\"./prism-hcl.min\": [\n\t\t1211,\n\t\t161\n\t],\n\t\"./prism-hcl.min.js\": [\n\t\t1211,\n\t\t161\n\t],\n\t\"./prism-hlsl\": [\n\t\t1212,\n\t\t162\n\t],\n\t\"./prism-hlsl.js\": [\n\t\t1212,\n\t\t162\n\t],\n\t\"./prism-hlsl.min\": [\n\t\t1213,\n\t\t163\n\t],\n\t\"./prism-hlsl.min.js\": [\n\t\t1213,\n\t\t163\n\t],\n\t\"./prism-hpkp\": [\n\t\t1214,\n\t\t164\n\t],\n\t\"./prism-hpkp.js\": [\n\t\t1214,\n\t\t164\n\t],\n\t\"./prism-hpkp.min\": [\n\t\t1215,\n\t\t165\n\t],\n\t\"./prism-hpkp.min.js\": [\n\t\t1215,\n\t\t165\n\t],\n\t\"./prism-hsts\": [\n\t\t1216,\n\t\t166\n\t],\n\t\"./prism-hsts.js\": [\n\t\t1216,\n\t\t166\n\t],\n\t\"./prism-hsts.min\": [\n\t\t1217,\n\t\t167\n\t],\n\t\"./prism-hsts.min.js\": [\n\t\t1217,\n\t\t167\n\t],\n\t\"./prism-http\": [\n\t\t1218,\n\t\t168\n\t],\n\t\"./prism-http.js\": [\n\t\t1218,\n\t\t168\n\t],\n\t\"./prism-http.min\": [\n\t\t1219,\n\t\t169\n\t],\n\t\"./prism-http.min.js\": [\n\t\t1219,\n\t\t169\n\t],\n\t\"./prism-ichigojam\": [\n\t\t1220,\n\t\t170\n\t],\n\t\"./prism-ichigojam.js\": [\n\t\t1220,\n\t\t170\n\t],\n\t\"./prism-ichigojam.min\": [\n\t\t1221,\n\t\t171\n\t],\n\t\"./prism-ichigojam.min.js\": [\n\t\t1221,\n\t\t171\n\t],\n\t\"./prism-icon\": [\n\t\t1222,\n\t\t172\n\t],\n\t\"./prism-icon.js\": [\n\t\t1222,\n\t\t172\n\t],\n\t\"./prism-icon.min\": [\n\t\t1223,\n\t\t173\n\t],\n\t\"./prism-icon.min.js\": [\n\t\t1223,\n\t\t173\n\t],\n\t\"./prism-iecst\": [\n\t\t1224,\n\t\t174\n\t],\n\t\"./prism-iecst.js\": [\n\t\t1224,\n\t\t174\n\t],\n\t\"./prism-iecst.min\": [\n\t\t1225,\n\t\t175\n\t],\n\t\"./prism-iecst.min.js\": [\n\t\t1225,\n\t\t175\n\t],\n\t\"./prism-ignore\": [\n\t\t1226,\n\t\t176\n\t],\n\t\"./prism-ignore.js\": [\n\t\t1226,\n\t\t176\n\t],\n\t\"./prism-ignore.min\": [\n\t\t1227,\n\t\t177\n\t],\n\t\"./prism-ignore.min.js\": [\n\t\t1227,\n\t\t177\n\t],\n\t\"./prism-inform7\": [\n\t\t1228,\n\t\t178\n\t],\n\t\"./prism-inform7.js\": [\n\t\t1228,\n\t\t178\n\t],\n\t\"./prism-inform7.min\": [\n\t\t1229,\n\t\t179\n\t],\n\t\"./prism-inform7.min.js\": [\n\t\t1229,\n\t\t179\n\t],\n\t\"./prism-ini\": [\n\t\t1230,\n\t\t180\n\t],\n\t\"./prism-ini.js\": [\n\t\t1230,\n\t\t180\n\t],\n\t\"./prism-ini.min\": [\n\t\t1231,\n\t\t181\n\t],\n\t\"./prism-ini.min.js\": [\n\t\t1231,\n\t\t181\n\t],\n\t\"./prism-io\": [\n\t\t1232,\n\t\t182\n\t],\n\t\"./prism-io.js\": [\n\t\t1232,\n\t\t182\n\t],\n\t\"./prism-io.min\": [\n\t\t1233,\n\t\t183\n\t],\n\t\"./prism-io.min.js\": [\n\t\t1233,\n\t\t183\n\t],\n\t\"./prism-j\": [\n\t\t1234,\n\t\t184\n\t],\n\t\"./prism-j.js\": [\n\t\t1234,\n\t\t184\n\t],\n\t\"./prism-j.min\": [\n\t\t1235,\n\t\t185\n\t],\n\t\"./prism-j.min.js\": [\n\t\t1235,\n\t\t185\n\t],\n\t\"./prism-java\": [\n\t\t1236,\n\t\t186\n\t],\n\t\"./prism-java.js\": [\n\t\t1236,\n\t\t186\n\t],\n\t\"./prism-java.min\": [\n\t\t1237,\n\t\t187\n\t],\n\t\"./prism-java.min.js\": [\n\t\t1237,\n\t\t187\n\t],\n\t\"./prism-javadoc\": [\n\t\t1238,\n\t\t188\n\t],\n\t\"./prism-javadoc.js\": [\n\t\t1238,\n\t\t188\n\t],\n\t\"./prism-javadoc.min\": [\n\t\t1239,\n\t\t189\n\t],\n\t\"./prism-javadoc.min.js\": [\n\t\t1239,\n\t\t189\n\t],\n\t\"./prism-javadoclike\": [\n\t\t1240,\n\t\t190\n\t],\n\t\"./prism-javadoclike.js\": [\n\t\t1240,\n\t\t190\n\t],\n\t\"./prism-javadoclike.min\": [\n\t\t1241,\n\t\t191\n\t],\n\t\"./prism-javadoclike.min.js\": [\n\t\t1241,\n\t\t191\n\t],\n\t\"./prism-javascript\": [\n\t\t1242,\n\t\t192\n\t],\n\t\"./prism-javascript.js\": [\n\t\t1242,\n\t\t192\n\t],\n\t\"./prism-javascript.min\": [\n\t\t1243,\n\t\t193\n\t],\n\t\"./prism-javascript.min.js\": [\n\t\t1243,\n\t\t193\n\t],\n\t\"./prism-javastacktrace\": [\n\t\t1244,\n\t\t194\n\t],\n\t\"./prism-javastacktrace.js\": [\n\t\t1244,\n\t\t194\n\t],\n\t\"./prism-javastacktrace.min\": [\n\t\t1245,\n\t\t195\n\t],\n\t\"./prism-javastacktrace.min.js\": [\n\t\t1245,\n\t\t195\n\t],\n\t\"./prism-jolie\": [\n\t\t1246,\n\t\t196\n\t],\n\t\"./prism-jolie.js\": [\n\t\t1246,\n\t\t196\n\t],\n\t\"./prism-jolie.min\": [\n\t\t1247,\n\t\t197\n\t],\n\t\"./prism-jolie.min.js\": [\n\t\t1247,\n\t\t197\n\t],\n\t\"./prism-jq\": [\n\t\t1248,\n\t\t198\n\t],\n\t\"./prism-jq.js\": [\n\t\t1248,\n\t\t198\n\t],\n\t\"./prism-jq.min\": [\n\t\t1249,\n\t\t199\n\t],\n\t\"./prism-jq.min.js\": [\n\t\t1249,\n\t\t199\n\t],\n\t\"./prism-js-extras\": [\n\t\t1250,\n\t\t200\n\t],\n\t\"./prism-js-extras.js\": [\n\t\t1250,\n\t\t200\n\t],\n\t\"./prism-js-extras.min\": [\n\t\t1251,\n\t\t201\n\t],\n\t\"./prism-js-extras.min.js\": [\n\t\t1251,\n\t\t201\n\t],\n\t\"./prism-js-templates\": [\n\t\t1252,\n\t\t202\n\t],\n\t\"./prism-js-templates.js\": [\n\t\t1252,\n\t\t202\n\t],\n\t\"./prism-js-templates.min\": [\n\t\t1253,\n\t\t203\n\t],\n\t\"./prism-js-templates.min.js\": [\n\t\t1253,\n\t\t203\n\t],\n\t\"./prism-jsdoc\": [\n\t\t1254,\n\t\t204\n\t],\n\t\"./prism-jsdoc.js\": [\n\t\t1254,\n\t\t204\n\t],\n\t\"./prism-jsdoc.min\": [\n\t\t1255,\n\t\t205\n\t],\n\t\"./prism-jsdoc.min.js\": [\n\t\t1255,\n\t\t205\n\t],\n\t\"./prism-json\": [\n\t\t1256,\n\t\t206\n\t],\n\t\"./prism-json.js\": [\n\t\t1256,\n\t\t206\n\t],\n\t\"./prism-json.min\": [\n\t\t1257,\n\t\t207\n\t],\n\t\"./prism-json.min.js\": [\n\t\t1257,\n\t\t207\n\t],\n\t\"./prism-json5\": [\n\t\t1258,\n\t\t208\n\t],\n\t\"./prism-json5.js\": [\n\t\t1258,\n\t\t208\n\t],\n\t\"./prism-json5.min\": [\n\t\t1259,\n\t\t209\n\t],\n\t\"./prism-json5.min.js\": [\n\t\t1259,\n\t\t209\n\t],\n\t\"./prism-jsonp\": [\n\t\t1260,\n\t\t210\n\t],\n\t\"./prism-jsonp.js\": [\n\t\t1260,\n\t\t210\n\t],\n\t\"./prism-jsonp.min\": [\n\t\t1261,\n\t\t211\n\t],\n\t\"./prism-jsonp.min.js\": [\n\t\t1261,\n\t\t211\n\t],\n\t\"./prism-jsstacktrace\": [\n\t\t1262,\n\t\t212\n\t],\n\t\"./prism-jsstacktrace.js\": [\n\t\t1262,\n\t\t212\n\t],\n\t\"./prism-jsstacktrace.min\": [\n\t\t1263,\n\t\t213\n\t],\n\t\"./prism-jsstacktrace.min.js\": [\n\t\t1263,\n\t\t213\n\t],\n\t\"./prism-jsx\": [\n\t\t1264,\n\t\t214\n\t],\n\t\"./prism-jsx.js\": [\n\t\t1264,\n\t\t214\n\t],\n\t\"./prism-jsx.min\": [\n\t\t1265,\n\t\t215\n\t],\n\t\"./prism-jsx.min.js\": [\n\t\t1265,\n\t\t215\n\t],\n\t\"./prism-julia\": [\n\t\t1266,\n\t\t216\n\t],\n\t\"./prism-julia.js\": [\n\t\t1266,\n\t\t216\n\t],\n\t\"./prism-julia.min\": [\n\t\t1267,\n\t\t217\n\t],\n\t\"./prism-julia.min.js\": [\n\t\t1267,\n\t\t217\n\t],\n\t\"./prism-keyman\": [\n\t\t1268,\n\t\t218\n\t],\n\t\"./prism-keyman.js\": [\n\t\t1268,\n\t\t218\n\t],\n\t\"./prism-keyman.min\": [\n\t\t1269,\n\t\t219\n\t],\n\t\"./prism-keyman.min.js\": [\n\t\t1269,\n\t\t219\n\t],\n\t\"./prism-kotlin\": [\n\t\t1270,\n\t\t220\n\t],\n\t\"./prism-kotlin.js\": [\n\t\t1270,\n\t\t220\n\t],\n\t\"./prism-kotlin.min\": [\n\t\t1271,\n\t\t221\n\t],\n\t\"./prism-kotlin.min.js\": [\n\t\t1271,\n\t\t221\n\t],\n\t\"./prism-latex\": [\n\t\t1272,\n\t\t222\n\t],\n\t\"./prism-latex.js\": [\n\t\t1272,\n\t\t222\n\t],\n\t\"./prism-latex.min\": [\n\t\t1273,\n\t\t223\n\t],\n\t\"./prism-latex.min.js\": [\n\t\t1273,\n\t\t223\n\t],\n\t\"./prism-latte\": [\n\t\t1274,\n\t\t224\n\t],\n\t\"./prism-latte.js\": [\n\t\t1274,\n\t\t224\n\t],\n\t\"./prism-latte.min\": [\n\t\t1275,\n\t\t225\n\t],\n\t\"./prism-latte.min.js\": [\n\t\t1275,\n\t\t225\n\t],\n\t\"./prism-less\": [\n\t\t1276,\n\t\t226\n\t],\n\t\"./prism-less.js\": [\n\t\t1276,\n\t\t226\n\t],\n\t\"./prism-less.min\": [\n\t\t1277,\n\t\t227\n\t],\n\t\"./prism-less.min.js\": [\n\t\t1277,\n\t\t227\n\t],\n\t\"./prism-lilypond\": [\n\t\t1278,\n\t\t228\n\t],\n\t\"./prism-lilypond.js\": [\n\t\t1278,\n\t\t228\n\t],\n\t\"./prism-lilypond.min\": [\n\t\t1279,\n\t\t229\n\t],\n\t\"./prism-lilypond.min.js\": [\n\t\t1279,\n\t\t229\n\t],\n\t\"./prism-liquid\": [\n\t\t1280,\n\t\t230\n\t],\n\t\"./prism-liquid.js\": [\n\t\t1280,\n\t\t230\n\t],\n\t\"./prism-liquid.min\": [\n\t\t1281,\n\t\t231\n\t],\n\t\"./prism-liquid.min.js\": [\n\t\t1281,\n\t\t231\n\t],\n\t\"./prism-lisp\": [\n\t\t1282,\n\t\t232\n\t],\n\t\"./prism-lisp.js\": [\n\t\t1282,\n\t\t232\n\t],\n\t\"./prism-lisp.min\": [\n\t\t1283,\n\t\t233\n\t],\n\t\"./prism-lisp.min.js\": [\n\t\t1283,\n\t\t233\n\t],\n\t\"./prism-livescript\": [\n\t\t1284,\n\t\t234\n\t],\n\t\"./prism-livescript.js\": [\n\t\t1284,\n\t\t234\n\t],\n\t\"./prism-livescript.min\": [\n\t\t1285,\n\t\t235\n\t],\n\t\"./prism-livescript.min.js\": [\n\t\t1285,\n\t\t235\n\t],\n\t\"./prism-llvm\": [\n\t\t1286,\n\t\t236\n\t],\n\t\"./prism-llvm.js\": [\n\t\t1286,\n\t\t236\n\t],\n\t\"./prism-llvm.min\": [\n\t\t1287,\n\t\t237\n\t],\n\t\"./prism-llvm.min.js\": [\n\t\t1287,\n\t\t237\n\t],\n\t\"./prism-lolcode\": [\n\t\t1288,\n\t\t238\n\t],\n\t\"./prism-lolcode.js\": [\n\t\t1288,\n\t\t238\n\t],\n\t\"./prism-lolcode.min\": [\n\t\t1289,\n\t\t239\n\t],\n\t\"./prism-lolcode.min.js\": [\n\t\t1289,\n\t\t239\n\t],\n\t\"./prism-lua\": [\n\t\t1290,\n\t\t240\n\t],\n\t\"./prism-lua.js\": [\n\t\t1290,\n\t\t240\n\t],\n\t\"./prism-lua.min\": [\n\t\t1291,\n\t\t241\n\t],\n\t\"./prism-lua.min.js\": [\n\t\t1291,\n\t\t241\n\t],\n\t\"./prism-makefile\": [\n\t\t1292,\n\t\t242\n\t],\n\t\"./prism-makefile.js\": [\n\t\t1292,\n\t\t242\n\t],\n\t\"./prism-makefile.min\": [\n\t\t1293,\n\t\t243\n\t],\n\t\"./prism-makefile.min.js\": [\n\t\t1293,\n\t\t243\n\t],\n\t\"./prism-markdown\": [\n\t\t594\n\t],\n\t\"./prism-markdown.js\": [\n\t\t594\n\t],\n\t\"./prism-markdown.min\": [\n\t\t1294,\n\t\t244\n\t],\n\t\"./prism-markdown.min.js\": [\n\t\t1294,\n\t\t244\n\t],\n\t\"./prism-markup\": [\n\t\t588\n\t],\n\t\"./prism-markup-templating\": [\n\t\t1295,\n\t\t245\n\t],\n\t\"./prism-markup-templating.js\": [\n\t\t1295,\n\t\t245\n\t],\n\t\"./prism-markup-templating.min\": [\n\t\t1296,\n\t\t246\n\t],\n\t\"./prism-markup-templating.min.js\": [\n\t\t1296,\n\t\t246\n\t],\n\t\"./prism-markup.js\": [\n\t\t588\n\t],\n\t\"./prism-markup.min\": [\n\t\t1297,\n\t\t247\n\t],\n\t\"./prism-markup.min.js\": [\n\t\t1297,\n\t\t247\n\t],\n\t\"./prism-matlab\": [\n\t\t1298,\n\t\t248\n\t],\n\t\"./prism-matlab.js\": [\n\t\t1298,\n\t\t248\n\t],\n\t\"./prism-matlab.min\": [\n\t\t1299,\n\t\t249\n\t],\n\t\"./prism-matlab.min.js\": [\n\t\t1299,\n\t\t249\n\t],\n\t\"./prism-mel\": [\n\t\t1300,\n\t\t250\n\t],\n\t\"./prism-mel.js\": [\n\t\t1300,\n\t\t250\n\t],\n\t\"./prism-mel.min\": [\n\t\t1301,\n\t\t251\n\t],\n\t\"./prism-mel.min.js\": [\n\t\t1301,\n\t\t251\n\t],\n\t\"./prism-mizar\": [\n\t\t1302,\n\t\t252\n\t],\n\t\"./prism-mizar.js\": [\n\t\t1302,\n\t\t252\n\t],\n\t\"./prism-mizar.min\": [\n\t\t1303,\n\t\t253\n\t],\n\t\"./prism-mizar.min.js\": [\n\t\t1303,\n\t\t253\n\t],\n\t\"./prism-monkey\": [\n\t\t1304,\n\t\t254\n\t],\n\t\"./prism-monkey.js\": [\n\t\t1304,\n\t\t254\n\t],\n\t\"./prism-monkey.min\": [\n\t\t1305,\n\t\t255\n\t],\n\t\"./prism-monkey.min.js\": [\n\t\t1305,\n\t\t255\n\t],\n\t\"./prism-moonscript\": [\n\t\t1306,\n\t\t256\n\t],\n\t\"./prism-moonscript.js\": [\n\t\t1306,\n\t\t256\n\t],\n\t\"./prism-moonscript.min\": [\n\t\t1307,\n\t\t257\n\t],\n\t\"./prism-moonscript.min.js\": [\n\t\t1307,\n\t\t257\n\t],\n\t\"./prism-n1ql\": [\n\t\t1308,\n\t\t258\n\t],\n\t\"./prism-n1ql.js\": [\n\t\t1308,\n\t\t258\n\t],\n\t\"./prism-n1ql.min\": [\n\t\t1309,\n\t\t259\n\t],\n\t\"./prism-n1ql.min.js\": [\n\t\t1309,\n\t\t259\n\t],\n\t\"./prism-n4js\": [\n\t\t1310,\n\t\t260\n\t],\n\t\"./prism-n4js.js\": [\n\t\t1310,\n\t\t260\n\t],\n\t\"./prism-n4js.min\": [\n\t\t1311,\n\t\t261\n\t],\n\t\"./prism-n4js.min.js\": [\n\t\t1311,\n\t\t261\n\t],\n\t\"./prism-nand2tetris-hdl\": [\n\t\t1312,\n\t\t262\n\t],\n\t\"./prism-nand2tetris-hdl.js\": [\n\t\t1312,\n\t\t262\n\t],\n\t\"./prism-nand2tetris-hdl.min\": [\n\t\t1313,\n\t\t263\n\t],\n\t\"./prism-nand2tetris-hdl.min.js\": [\n\t\t1313,\n\t\t263\n\t],\n\t\"./prism-nasm\": [\n\t\t1314,\n\t\t264\n\t],\n\t\"./prism-nasm.js\": [\n\t\t1314,\n\t\t264\n\t],\n\t\"./prism-nasm.min\": [\n\t\t1315,\n\t\t265\n\t],\n\t\"./prism-nasm.min.js\": [\n\t\t1315,\n\t\t265\n\t],\n\t\"./prism-neon\": [\n\t\t1316,\n\t\t266\n\t],\n\t\"./prism-neon.js\": [\n\t\t1316,\n\t\t266\n\t],\n\t\"./prism-neon.min\": [\n\t\t1317,\n\t\t267\n\t],\n\t\"./prism-neon.min.js\": [\n\t\t1317,\n\t\t267\n\t],\n\t\"./prism-nginx\": [\n\t\t1318,\n\t\t268\n\t],\n\t\"./prism-nginx.js\": [\n\t\t1318,\n\t\t268\n\t],\n\t\"./prism-nginx.min\": [\n\t\t1319,\n\t\t269\n\t],\n\t\"./prism-nginx.min.js\": [\n\t\t1319,\n\t\t269\n\t],\n\t\"./prism-nim\": [\n\t\t1320,\n\t\t270\n\t],\n\t\"./prism-nim.js\": [\n\t\t1320,\n\t\t270\n\t],\n\t\"./prism-nim.min\": [\n\t\t1321,\n\t\t271\n\t],\n\t\"./prism-nim.min.js\": [\n\t\t1321,\n\t\t271\n\t],\n\t\"./prism-nix\": [\n\t\t1322,\n\t\t272\n\t],\n\t\"./prism-nix.js\": [\n\t\t1322,\n\t\t272\n\t],\n\t\"./prism-nix.min\": [\n\t\t1323,\n\t\t273\n\t],\n\t\"./prism-nix.min.js\": [\n\t\t1323,\n\t\t273\n\t],\n\t\"./prism-nsis\": [\n\t\t1324,\n\t\t274\n\t],\n\t\"./prism-nsis.js\": [\n\t\t1324,\n\t\t274\n\t],\n\t\"./prism-nsis.min\": [\n\t\t1325,\n\t\t275\n\t],\n\t\"./prism-nsis.min.js\": [\n\t\t1325,\n\t\t275\n\t],\n\t\"./prism-objectivec\": [\n\t\t1326,\n\t\t276\n\t],\n\t\"./prism-objectivec.js\": [\n\t\t1326,\n\t\t276\n\t],\n\t\"./prism-objectivec.min\": [\n\t\t1327,\n\t\t277\n\t],\n\t\"./prism-objectivec.min.js\": [\n\t\t1327,\n\t\t277\n\t],\n\t\"./prism-ocaml\": [\n\t\t1328,\n\t\t278\n\t],\n\t\"./prism-ocaml.js\": [\n\t\t1328,\n\t\t278\n\t],\n\t\"./prism-ocaml.min\": [\n\t\t1329,\n\t\t279\n\t],\n\t\"./prism-ocaml.min.js\": [\n\t\t1329,\n\t\t279\n\t],\n\t\"./prism-opencl\": [\n\t\t1330,\n\t\t280\n\t],\n\t\"./prism-opencl.js\": [\n\t\t1330,\n\t\t280\n\t],\n\t\"./prism-opencl.min\": [\n\t\t1331,\n\t\t281\n\t],\n\t\"./prism-opencl.min.js\": [\n\t\t1331,\n\t\t281\n\t],\n\t\"./prism-oz\": [\n\t\t1332,\n\t\t282\n\t],\n\t\"./prism-oz.js\": [\n\t\t1332,\n\t\t282\n\t],\n\t\"./prism-oz.min\": [\n\t\t1333,\n\t\t283\n\t],\n\t\"./prism-oz.min.js\": [\n\t\t1333,\n\t\t283\n\t],\n\t\"./prism-parigp\": [\n\t\t1334,\n\t\t284\n\t],\n\t\"./prism-parigp.js\": [\n\t\t1334,\n\t\t284\n\t],\n\t\"./prism-parigp.min\": [\n\t\t1335,\n\t\t285\n\t],\n\t\"./prism-parigp.min.js\": [\n\t\t1335,\n\t\t285\n\t],\n\t\"./prism-parser\": [\n\t\t1336,\n\t\t286\n\t],\n\t\"./prism-parser.js\": [\n\t\t1336,\n\t\t286\n\t],\n\t\"./prism-parser.min\": [\n\t\t1337,\n\t\t287\n\t],\n\t\"./prism-parser.min.js\": [\n\t\t1337,\n\t\t287\n\t],\n\t\"./prism-pascal\": [\n\t\t1338,\n\t\t288\n\t],\n\t\"./prism-pascal.js\": [\n\t\t1338,\n\t\t288\n\t],\n\t\"./prism-pascal.min\": [\n\t\t1339,\n\t\t289\n\t],\n\t\"./prism-pascal.min.js\": [\n\t\t1339,\n\t\t289\n\t],\n\t\"./prism-pascaligo\": [\n\t\t1340,\n\t\t290\n\t],\n\t\"./prism-pascaligo.js\": [\n\t\t1340,\n\t\t290\n\t],\n\t\"./prism-pascaligo.min\": [\n\t\t1341,\n\t\t291\n\t],\n\t\"./prism-pascaligo.min.js\": [\n\t\t1341,\n\t\t291\n\t],\n\t\"./prism-pcaxis\": [\n\t\t1342,\n\t\t292\n\t],\n\t\"./prism-pcaxis.js\": [\n\t\t1342,\n\t\t292\n\t],\n\t\"./prism-pcaxis.min\": [\n\t\t1343,\n\t\t293\n\t],\n\t\"./prism-pcaxis.min.js\": [\n\t\t1343,\n\t\t293\n\t],\n\t\"./prism-peoplecode\": [\n\t\t1344,\n\t\t294\n\t],\n\t\"./prism-peoplecode.js\": [\n\t\t1344,\n\t\t294\n\t],\n\t\"./prism-peoplecode.min\": [\n\t\t1345,\n\t\t295\n\t],\n\t\"./prism-peoplecode.min.js\": [\n\t\t1345,\n\t\t295\n\t],\n\t\"./prism-perl\": [\n\t\t1346,\n\t\t296\n\t],\n\t\"./prism-perl.js\": [\n\t\t1346,\n\t\t296\n\t],\n\t\"./prism-perl.min\": [\n\t\t1347,\n\t\t297\n\t],\n\t\"./prism-perl.min.js\": [\n\t\t1347,\n\t\t297\n\t],\n\t\"./prism-php\": [\n\t\t1350,\n\t\t300\n\t],\n\t\"./prism-php-extras\": [\n\t\t1348,\n\t\t298\n\t],\n\t\"./prism-php-extras.js\": [\n\t\t1348,\n\t\t298\n\t],\n\t\"./prism-php-extras.min\": [\n\t\t1349,\n\t\t299\n\t],\n\t\"./prism-php-extras.min.js\": [\n\t\t1349,\n\t\t299\n\t],\n\t\"./prism-php.js\": [\n\t\t1350,\n\t\t300\n\t],\n\t\"./prism-php.min\": [\n\t\t1351,\n\t\t301\n\t],\n\t\"./prism-php.min.js\": [\n\t\t1351,\n\t\t301\n\t],\n\t\"./prism-phpdoc\": [\n\t\t1352,\n\t\t302\n\t],\n\t\"./prism-phpdoc.js\": [\n\t\t1352,\n\t\t302\n\t],\n\t\"./prism-phpdoc.min\": [\n\t\t1353,\n\t\t303\n\t],\n\t\"./prism-phpdoc.min.js\": [\n\t\t1353,\n\t\t303\n\t],\n\t\"./prism-plsql\": [\n\t\t1354,\n\t\t304\n\t],\n\t\"./prism-plsql.js\": [\n\t\t1354,\n\t\t304\n\t],\n\t\"./prism-plsql.min\": [\n\t\t1355,\n\t\t305\n\t],\n\t\"./prism-plsql.min.js\": [\n\t\t1355,\n\t\t305\n\t],\n\t\"./prism-powerquery\": [\n\t\t1356,\n\t\t306\n\t],\n\t\"./prism-powerquery.js\": [\n\t\t1356,\n\t\t306\n\t],\n\t\"./prism-powerquery.min\": [\n\t\t1357,\n\t\t307\n\t],\n\t\"./prism-powerquery.min.js\": [\n\t\t1357,\n\t\t307\n\t],\n\t\"./prism-powershell\": [\n\t\t1358,\n\t\t308\n\t],\n\t\"./prism-powershell.js\": [\n\t\t1358,\n\t\t308\n\t],\n\t\"./prism-powershell.min\": [\n\t\t1359,\n\t\t309\n\t],\n\t\"./prism-powershell.min.js\": [\n\t\t1359,\n\t\t309\n\t],\n\t\"./prism-processing\": [\n\t\t1360,\n\t\t310\n\t],\n\t\"./prism-processing.js\": [\n\t\t1360,\n\t\t310\n\t],\n\t\"./prism-processing.min\": [\n\t\t1361,\n\t\t311\n\t],\n\t\"./prism-processing.min.js\": [\n\t\t1361,\n\t\t311\n\t],\n\t\"./prism-prolog\": [\n\t\t1362,\n\t\t312\n\t],\n\t\"./prism-prolog.js\": [\n\t\t1362,\n\t\t312\n\t],\n\t\"./prism-prolog.min\": [\n\t\t1363,\n\t\t313\n\t],\n\t\"./prism-prolog.min.js\": [\n\t\t1363,\n\t\t313\n\t],\n\t\"./prism-properties\": [\n\t\t1364,\n\t\t314\n\t],\n\t\"./prism-properties.js\": [\n\t\t1364,\n\t\t314\n\t],\n\t\"./prism-properties.min\": [\n\t\t1365,\n\t\t315\n\t],\n\t\"./prism-properties.min.js\": [\n\t\t1365,\n\t\t315\n\t],\n\t\"./prism-protobuf\": [\n\t\t1366,\n\t\t316\n\t],\n\t\"./prism-protobuf.js\": [\n\t\t1366,\n\t\t316\n\t],\n\t\"./prism-protobuf.min\": [\n\t\t1367,\n\t\t317\n\t],\n\t\"./prism-protobuf.min.js\": [\n\t\t1367,\n\t\t317\n\t],\n\t\"./prism-pug\": [\n\t\t1368,\n\t\t318\n\t],\n\t\"./prism-pug.js\": [\n\t\t1368,\n\t\t318\n\t],\n\t\"./prism-pug.min\": [\n\t\t1369,\n\t\t319\n\t],\n\t\"./prism-pug.min.js\": [\n\t\t1369,\n\t\t319\n\t],\n\t\"./prism-puppet\": [\n\t\t1370,\n\t\t320\n\t],\n\t\"./prism-puppet.js\": [\n\t\t1370,\n\t\t320\n\t],\n\t\"./prism-puppet.min\": [\n\t\t1371,\n\t\t321\n\t],\n\t\"./prism-puppet.min.js\": [\n\t\t1371,\n\t\t321\n\t],\n\t\"./prism-pure\": [\n\t\t1372,\n\t\t322\n\t],\n\t\"./prism-pure.js\": [\n\t\t1372,\n\t\t322\n\t],\n\t\"./prism-pure.min\": [\n\t\t1373,\n\t\t323\n\t],\n\t\"./prism-pure.min.js\": [\n\t\t1373,\n\t\t323\n\t],\n\t\"./prism-purebasic\": [\n\t\t1374,\n\t\t324\n\t],\n\t\"./prism-purebasic.js\": [\n\t\t1374,\n\t\t324\n\t],\n\t\"./prism-purebasic.min\": [\n\t\t1375,\n\t\t325\n\t],\n\t\"./prism-purebasic.min.js\": [\n\t\t1375,\n\t\t325\n\t],\n\t\"./prism-python\": [\n\t\t1376,\n\t\t326\n\t],\n\t\"./prism-python.js\": [\n\t\t1376,\n\t\t326\n\t],\n\t\"./prism-python.min\": [\n\t\t1377,\n\t\t327\n\t],\n\t\"./prism-python.min.js\": [\n\t\t1377,\n\t\t327\n\t],\n\t\"./prism-q\": [\n\t\t1378,\n\t\t328\n\t],\n\t\"./prism-q.js\": [\n\t\t1378,\n\t\t328\n\t],\n\t\"./prism-q.min\": [\n\t\t1379,\n\t\t329\n\t],\n\t\"./prism-q.min.js\": [\n\t\t1379,\n\t\t329\n\t],\n\t\"./prism-qml\": [\n\t\t1380,\n\t\t330\n\t],\n\t\"./prism-qml.js\": [\n\t\t1380,\n\t\t330\n\t],\n\t\"./prism-qml.min\": [\n\t\t1381,\n\t\t331\n\t],\n\t\"./prism-qml.min.js\": [\n\t\t1381,\n\t\t331\n\t],\n\t\"./prism-qore\": [\n\t\t1382,\n\t\t332\n\t],\n\t\"./prism-qore.js\": [\n\t\t1382,\n\t\t332\n\t],\n\t\"./prism-qore.min\": [\n\t\t1383,\n\t\t333\n\t],\n\t\"./prism-qore.min.js\": [\n\t\t1383,\n\t\t333\n\t],\n\t\"./prism-r\": [\n\t\t1384,\n\t\t334\n\t],\n\t\"./prism-r.js\": [\n\t\t1384,\n\t\t334\n\t],\n\t\"./prism-r.min\": [\n\t\t1385,\n\t\t335\n\t],\n\t\"./prism-r.min.js\": [\n\t\t1385,\n\t\t335\n\t],\n\t\"./prism-racket\": [\n\t\t1386,\n\t\t336\n\t],\n\t\"./prism-racket.js\": [\n\t\t1386,\n\t\t336\n\t],\n\t\"./prism-racket.min\": [\n\t\t1387,\n\t\t337\n\t],\n\t\"./prism-racket.min.js\": [\n\t\t1387,\n\t\t337\n\t],\n\t\"./prism-reason\": [\n\t\t1388,\n\t\t338\n\t],\n\t\"./prism-reason.js\": [\n\t\t1388,\n\t\t338\n\t],\n\t\"./prism-reason.min\": [\n\t\t1389,\n\t\t339\n\t],\n\t\"./prism-reason.min.js\": [\n\t\t1389,\n\t\t339\n\t],\n\t\"./prism-regex\": [\n\t\t1390,\n\t\t340\n\t],\n\t\"./prism-regex.js\": [\n\t\t1390,\n\t\t340\n\t],\n\t\"./prism-regex.min\": [\n\t\t1391,\n\t\t341\n\t],\n\t\"./prism-regex.min.js\": [\n\t\t1391,\n\t\t341\n\t],\n\t\"./prism-renpy\": [\n\t\t1392,\n\t\t342\n\t],\n\t\"./prism-renpy.js\": [\n\t\t1392,\n\t\t342\n\t],\n\t\"./prism-renpy.min\": [\n\t\t1393,\n\t\t343\n\t],\n\t\"./prism-renpy.min.js\": [\n\t\t1393,\n\t\t343\n\t],\n\t\"./prism-rest\": [\n\t\t1394,\n\t\t344\n\t],\n\t\"./prism-rest.js\": [\n\t\t1394,\n\t\t344\n\t],\n\t\"./prism-rest.min\": [\n\t\t1395,\n\t\t345\n\t],\n\t\"./prism-rest.min.js\": [\n\t\t1395,\n\t\t345\n\t],\n\t\"./prism-rip\": [\n\t\t1396,\n\t\t346\n\t],\n\t\"./prism-rip.js\": [\n\t\t1396,\n\t\t346\n\t],\n\t\"./prism-rip.min\": [\n\t\t1397,\n\t\t347\n\t],\n\t\"./prism-rip.min.js\": [\n\t\t1397,\n\t\t347\n\t],\n\t\"./prism-roboconf\": [\n\t\t1398,\n\t\t348\n\t],\n\t\"./prism-roboconf.js\": [\n\t\t1398,\n\t\t348\n\t],\n\t\"./prism-roboconf.min\": [\n\t\t1399,\n\t\t349\n\t],\n\t\"./prism-roboconf.min.js\": [\n\t\t1399,\n\t\t349\n\t],\n\t\"./prism-robotframework\": [\n\t\t1400,\n\t\t350\n\t],\n\t\"./prism-robotframework.js\": [\n\t\t1400,\n\t\t350\n\t],\n\t\"./prism-robotframework.min\": [\n\t\t1401,\n\t\t351\n\t],\n\t\"./prism-robotframework.min.js\": [\n\t\t1401,\n\t\t351\n\t],\n\t\"./prism-ruby\": [\n\t\t1402,\n\t\t352\n\t],\n\t\"./prism-ruby.js\": [\n\t\t1402,\n\t\t352\n\t],\n\t\"./prism-ruby.min\": [\n\t\t1403,\n\t\t353\n\t],\n\t\"./prism-ruby.min.js\": [\n\t\t1403,\n\t\t353\n\t],\n\t\"./prism-rust\": [\n\t\t1404,\n\t\t354\n\t],\n\t\"./prism-rust.js\": [\n\t\t1404,\n\t\t354\n\t],\n\t\"./prism-rust.min\": [\n\t\t1405,\n\t\t355\n\t],\n\t\"./prism-rust.min.js\": [\n\t\t1405,\n\t\t355\n\t],\n\t\"./prism-sas\": [\n\t\t1406,\n\t\t356\n\t],\n\t\"./prism-sas.js\": [\n\t\t1406,\n\t\t356\n\t],\n\t\"./prism-sas.min\": [\n\t\t1407,\n\t\t357\n\t],\n\t\"./prism-sas.min.js\": [\n\t\t1407,\n\t\t357\n\t],\n\t\"./prism-sass\": [\n\t\t1408,\n\t\t358\n\t],\n\t\"./prism-sass.js\": [\n\t\t1408,\n\t\t358\n\t],\n\t\"./prism-sass.min\": [\n\t\t1409,\n\t\t359\n\t],\n\t\"./prism-sass.min.js\": [\n\t\t1409,\n\t\t359\n\t],\n\t\"./prism-scala\": [\n\t\t1410,\n\t\t360\n\t],\n\t\"./prism-scala.js\": [\n\t\t1410,\n\t\t360\n\t],\n\t\"./prism-scala.min\": [\n\t\t1411,\n\t\t361\n\t],\n\t\"./prism-scala.min.js\": [\n\t\t1411,\n\t\t361\n\t],\n\t\"./prism-scheme\": [\n\t\t1412,\n\t\t362\n\t],\n\t\"./prism-scheme.js\": [\n\t\t1412,\n\t\t362\n\t],\n\t\"./prism-scheme.min\": [\n\t\t1413,\n\t\t363\n\t],\n\t\"./prism-scheme.min.js\": [\n\t\t1413,\n\t\t363\n\t],\n\t\"./prism-scss\": [\n\t\t1414,\n\t\t364\n\t],\n\t\"./prism-scss.js\": [\n\t\t1414,\n\t\t364\n\t],\n\t\"./prism-scss.min\": [\n\t\t1415,\n\t\t365\n\t],\n\t\"./prism-scss.min.js\": [\n\t\t1415,\n\t\t365\n\t],\n\t\"./prism-shell-session\": [\n\t\t1416,\n\t\t366\n\t],\n\t\"./prism-shell-session.js\": [\n\t\t1416,\n\t\t366\n\t],\n\t\"./prism-shell-session.min\": [\n\t\t1417,\n\t\t367\n\t],\n\t\"./prism-shell-session.min.js\": [\n\t\t1417,\n\t\t367\n\t],\n\t\"./prism-smali\": [\n\t\t1418,\n\t\t368\n\t],\n\t\"./prism-smali.js\": [\n\t\t1418,\n\t\t368\n\t],\n\t\"./prism-smali.min\": [\n\t\t1419,\n\t\t369\n\t],\n\t\"./prism-smali.min.js\": [\n\t\t1419,\n\t\t369\n\t],\n\t\"./prism-smalltalk\": [\n\t\t1420,\n\t\t370\n\t],\n\t\"./prism-smalltalk.js\": [\n\t\t1420,\n\t\t370\n\t],\n\t\"./prism-smalltalk.min\": [\n\t\t1421,\n\t\t371\n\t],\n\t\"./prism-smalltalk.min.js\": [\n\t\t1421,\n\t\t371\n\t],\n\t\"./prism-smarty\": [\n\t\t1422,\n\t\t372\n\t],\n\t\"./prism-smarty.js\": [\n\t\t1422,\n\t\t372\n\t],\n\t\"./prism-smarty.min\": [\n\t\t1423,\n\t\t373\n\t],\n\t\"./prism-smarty.min.js\": [\n\t\t1423,\n\t\t373\n\t],\n\t\"./prism-solidity\": [\n\t\t1424,\n\t\t374\n\t],\n\t\"./prism-solidity.js\": [\n\t\t1424,\n\t\t374\n\t],\n\t\"./prism-solidity.min\": [\n\t\t1425,\n\t\t375\n\t],\n\t\"./prism-solidity.min.js\": [\n\t\t1425,\n\t\t375\n\t],\n\t\"./prism-solution-file\": [\n\t\t1426,\n\t\t376\n\t],\n\t\"./prism-solution-file.js\": [\n\t\t1426,\n\t\t376\n\t],\n\t\"./prism-solution-file.min\": [\n\t\t1427,\n\t\t377\n\t],\n\t\"./prism-solution-file.min.js\": [\n\t\t1427,\n\t\t377\n\t],\n\t\"./prism-soy\": [\n\t\t1428,\n\t\t378\n\t],\n\t\"./prism-soy.js\": [\n\t\t1428,\n\t\t378\n\t],\n\t\"./prism-soy.min\": [\n\t\t1429,\n\t\t379\n\t],\n\t\"./prism-soy.min.js\": [\n\t\t1429,\n\t\t379\n\t],\n\t\"./prism-sparql\": [\n\t\t1430,\n\t\t380\n\t],\n\t\"./prism-sparql.js\": [\n\t\t1430,\n\t\t380\n\t],\n\t\"./prism-sparql.min\": [\n\t\t1431,\n\t\t381\n\t],\n\t\"./prism-sparql.min.js\": [\n\t\t1431,\n\t\t381\n\t],\n\t\"./prism-splunk-spl\": [\n\t\t1432,\n\t\t382\n\t],\n\t\"./prism-splunk-spl.js\": [\n\t\t1432,\n\t\t382\n\t],\n\t\"./prism-splunk-spl.min\": [\n\t\t1433,\n\t\t383\n\t],\n\t\"./prism-splunk-spl.min.js\": [\n\t\t1433,\n\t\t383\n\t],\n\t\"./prism-sqf\": [\n\t\t1434,\n\t\t384\n\t],\n\t\"./prism-sqf.js\": [\n\t\t1434,\n\t\t384\n\t],\n\t\"./prism-sqf.min\": [\n\t\t1435,\n\t\t385\n\t],\n\t\"./prism-sqf.min.js\": [\n\t\t1435,\n\t\t385\n\t],\n\t\"./prism-sql\": [\n\t\t1436,\n\t\t386\n\t],\n\t\"./prism-sql.js\": [\n\t\t1436,\n\t\t386\n\t],\n\t\"./prism-sql.min\": [\n\t\t1437,\n\t\t387\n\t],\n\t\"./prism-sql.min.js\": [\n\t\t1437,\n\t\t387\n\t],\n\t\"./prism-stylus\": [\n\t\t1438,\n\t\t388\n\t],\n\t\"./prism-stylus.js\": [\n\t\t1438,\n\t\t388\n\t],\n\t\"./prism-stylus.min\": [\n\t\t1439,\n\t\t389\n\t],\n\t\"./prism-stylus.min.js\": [\n\t\t1439,\n\t\t389\n\t],\n\t\"./prism-swift\": [\n\t\t1440,\n\t\t390\n\t],\n\t\"./prism-swift.js\": [\n\t\t1440,\n\t\t390\n\t],\n\t\"./prism-swift.min\": [\n\t\t1441,\n\t\t391\n\t],\n\t\"./prism-swift.min.js\": [\n\t\t1441,\n\t\t391\n\t],\n\t\"./prism-t4-cs\": [\n\t\t1442,\n\t\t392\n\t],\n\t\"./prism-t4-cs.js\": [\n\t\t1442,\n\t\t392\n\t],\n\t\"./prism-t4-cs.min\": [\n\t\t1443,\n\t\t393\n\t],\n\t\"./prism-t4-cs.min.js\": [\n\t\t1443,\n\t\t393\n\t],\n\t\"./prism-t4-templating\": [\n\t\t1444,\n\t\t394\n\t],\n\t\"./prism-t4-templating.js\": [\n\t\t1444,\n\t\t394\n\t],\n\t\"./prism-t4-templating.min\": [\n\t\t1445,\n\t\t395\n\t],\n\t\"./prism-t4-templating.min.js\": [\n\t\t1445,\n\t\t395\n\t],\n\t\"./prism-t4-vb\": [\n\t\t1446,\n\t\t396\n\t],\n\t\"./prism-t4-vb.js\": [\n\t\t1446,\n\t\t396\n\t],\n\t\"./prism-t4-vb.min\": [\n\t\t1447,\n\t\t397\n\t],\n\t\"./prism-t4-vb.min.js\": [\n\t\t1447,\n\t\t397\n\t],\n\t\"./prism-tap\": [\n\t\t1448,\n\t\t398\n\t],\n\t\"./prism-tap.js\": [\n\t\t1448,\n\t\t398\n\t],\n\t\"./prism-tap.min\": [\n\t\t1449,\n\t\t399\n\t],\n\t\"./prism-tap.min.js\": [\n\t\t1449,\n\t\t399\n\t],\n\t\"./prism-tcl\": [\n\t\t1450,\n\t\t400\n\t],\n\t\"./prism-tcl.js\": [\n\t\t1450,\n\t\t400\n\t],\n\t\"./prism-tcl.min\": [\n\t\t1451,\n\t\t401\n\t],\n\t\"./prism-tcl.min.js\": [\n\t\t1451,\n\t\t401\n\t],\n\t\"./prism-textile\": [\n\t\t1452,\n\t\t402\n\t],\n\t\"./prism-textile.js\": [\n\t\t1452,\n\t\t402\n\t],\n\t\"./prism-textile.min\": [\n\t\t1453,\n\t\t403\n\t],\n\t\"./prism-textile.min.js\": [\n\t\t1453,\n\t\t403\n\t],\n\t\"./prism-toml\": [\n\t\t1454,\n\t\t404\n\t],\n\t\"./prism-toml.js\": [\n\t\t1454,\n\t\t404\n\t],\n\t\"./prism-toml.min\": [\n\t\t1455,\n\t\t405\n\t],\n\t\"./prism-toml.min.js\": [\n\t\t1455,\n\t\t405\n\t],\n\t\"./prism-tsx\": [\n\t\t1456,\n\t\t406\n\t],\n\t\"./prism-tsx.js\": [\n\t\t1456,\n\t\t406\n\t],\n\t\"./prism-tsx.min\": [\n\t\t1457,\n\t\t407\n\t],\n\t\"./prism-tsx.min.js\": [\n\t\t1457,\n\t\t407\n\t],\n\t\"./prism-tt2\": [\n\t\t1458,\n\t\t408\n\t],\n\t\"./prism-tt2.js\": [\n\t\t1458,\n\t\t408\n\t],\n\t\"./prism-tt2.min\": [\n\t\t1459,\n\t\t409\n\t],\n\t\"./prism-tt2.min.js\": [\n\t\t1459,\n\t\t409\n\t],\n\t\"./prism-turtle\": [\n\t\t1460,\n\t\t410\n\t],\n\t\"./prism-turtle.js\": [\n\t\t1460,\n\t\t410\n\t],\n\t\"./prism-turtle.min\": [\n\t\t1461,\n\t\t411\n\t],\n\t\"./prism-turtle.min.js\": [\n\t\t1461,\n\t\t411\n\t],\n\t\"./prism-twig\": [\n\t\t1462,\n\t\t412\n\t],\n\t\"./prism-twig.js\": [\n\t\t1462,\n\t\t412\n\t],\n\t\"./prism-twig.min\": [\n\t\t1463,\n\t\t413\n\t],\n\t\"./prism-twig.min.js\": [\n\t\t1463,\n\t\t413\n\t],\n\t\"./prism-typescript\": [\n\t\t1464,\n\t\t414\n\t],\n\t\"./prism-typescript.js\": [\n\t\t1464,\n\t\t414\n\t],\n\t\"./prism-typescript.min\": [\n\t\t1465,\n\t\t415\n\t],\n\t\"./prism-typescript.min.js\": [\n\t\t1465,\n\t\t415\n\t],\n\t\"./prism-unrealscript\": [\n\t\t1466,\n\t\t416\n\t],\n\t\"./prism-unrealscript.js\": [\n\t\t1466,\n\t\t416\n\t],\n\t\"./prism-unrealscript.min\": [\n\t\t1467,\n\t\t417\n\t],\n\t\"./prism-unrealscript.min.js\": [\n\t\t1467,\n\t\t417\n\t],\n\t\"./prism-vala\": [\n\t\t1468,\n\t\t418\n\t],\n\t\"./prism-vala.js\": [\n\t\t1468,\n\t\t418\n\t],\n\t\"./prism-vala.min\": [\n\t\t1469,\n\t\t419\n\t],\n\t\"./prism-vala.min.js\": [\n\t\t1469,\n\t\t419\n\t],\n\t\"./prism-vbnet\": [\n\t\t1470,\n\t\t420\n\t],\n\t\"./prism-vbnet.js\": [\n\t\t1470,\n\t\t420\n\t],\n\t\"./prism-vbnet.min\": [\n\t\t1471,\n\t\t421\n\t],\n\t\"./prism-vbnet.min.js\": [\n\t\t1471,\n\t\t421\n\t],\n\t\"./prism-velocity\": [\n\t\t1472,\n\t\t422\n\t],\n\t\"./prism-velocity.js\": [\n\t\t1472,\n\t\t422\n\t],\n\t\"./prism-velocity.min\": [\n\t\t1473,\n\t\t423\n\t],\n\t\"./prism-velocity.min.js\": [\n\t\t1473,\n\t\t423\n\t],\n\t\"./prism-verilog\": [\n\t\t1474,\n\t\t424\n\t],\n\t\"./prism-verilog.js\": [\n\t\t1474,\n\t\t424\n\t],\n\t\"./prism-verilog.min\": [\n\t\t1475,\n\t\t425\n\t],\n\t\"./prism-verilog.min.js\": [\n\t\t1475,\n\t\t425\n\t],\n\t\"./prism-vhdl\": [\n\t\t1476,\n\t\t426\n\t],\n\t\"./prism-vhdl.js\": [\n\t\t1476,\n\t\t426\n\t],\n\t\"./prism-vhdl.min\": [\n\t\t1477,\n\t\t427\n\t],\n\t\"./prism-vhdl.min.js\": [\n\t\t1477,\n\t\t427\n\t],\n\t\"./prism-vim\": [\n\t\t1478,\n\t\t428\n\t],\n\t\"./prism-vim.js\": [\n\t\t1478,\n\t\t428\n\t],\n\t\"./prism-vim.min\": [\n\t\t1479,\n\t\t429\n\t],\n\t\"./prism-vim.min.js\": [\n\t\t1479,\n\t\t429\n\t],\n\t\"./prism-visual-basic\": [\n\t\t1480,\n\t\t430\n\t],\n\t\"./prism-visual-basic.js\": [\n\t\t1480,\n\t\t430\n\t],\n\t\"./prism-visual-basic.min\": [\n\t\t1481,\n\t\t431\n\t],\n\t\"./prism-visual-basic.min.js\": [\n\t\t1481,\n\t\t431\n\t],\n\t\"./prism-warpscript\": [\n\t\t1482,\n\t\t432\n\t],\n\t\"./prism-warpscript.js\": [\n\t\t1482,\n\t\t432\n\t],\n\t\"./prism-warpscript.min\": [\n\t\t1483,\n\t\t433\n\t],\n\t\"./prism-warpscript.min.js\": [\n\t\t1483,\n\t\t433\n\t],\n\t\"./prism-wasm\": [\n\t\t1484,\n\t\t434\n\t],\n\t\"./prism-wasm.js\": [\n\t\t1484,\n\t\t434\n\t],\n\t\"./prism-wasm.min\": [\n\t\t1485,\n\t\t435\n\t],\n\t\"./prism-wasm.min.js\": [\n\t\t1485,\n\t\t435\n\t],\n\t\"./prism-wiki\": [\n\t\t1486,\n\t\t436\n\t],\n\t\"./prism-wiki.js\": [\n\t\t1486,\n\t\t436\n\t],\n\t\"./prism-wiki.min\": [\n\t\t1487,\n\t\t437\n\t],\n\t\"./prism-wiki.min.js\": [\n\t\t1487,\n\t\t437\n\t],\n\t\"./prism-xeora\": [\n\t\t1488,\n\t\t438\n\t],\n\t\"./prism-xeora.js\": [\n\t\t1488,\n\t\t438\n\t],\n\t\"./prism-xeora.min\": [\n\t\t1489,\n\t\t439\n\t],\n\t\"./prism-xeora.min.js\": [\n\t\t1489,\n\t\t439\n\t],\n\t\"./prism-xml-doc\": [\n\t\t1490,\n\t\t440\n\t],\n\t\"./prism-xml-doc.js\": [\n\t\t1490,\n\t\t440\n\t],\n\t\"./prism-xml-doc.min\": [\n\t\t1491,\n\t\t441\n\t],\n\t\"./prism-xml-doc.min.js\": [\n\t\t1491,\n\t\t441\n\t],\n\t\"./prism-xojo\": [\n\t\t1492,\n\t\t442\n\t],\n\t\"./prism-xojo.js\": [\n\t\t1492,\n\t\t442\n\t],\n\t\"./prism-xojo.min\": [\n\t\t1493,\n\t\t443\n\t],\n\t\"./prism-xojo.min.js\": [\n\t\t1493,\n\t\t443\n\t],\n\t\"./prism-xquery\": [\n\t\t1494,\n\t\t444\n\t],\n\t\"./prism-xquery.js\": [\n\t\t1494,\n\t\t444\n\t],\n\t\"./prism-xquery.min\": [\n\t\t1495,\n\t\t445\n\t],\n\t\"./prism-xquery.min.js\": [\n\t\t1495,\n\t\t445\n\t],\n\t\"./prism-yaml\": [\n\t\t1496,\n\t\t446\n\t],\n\t\"./prism-yaml.js\": [\n\t\t1496,\n\t\t446\n\t],\n\t\"./prism-yaml.min\": [\n\t\t1497,\n\t\t447\n\t],\n\t\"./prism-yaml.min.js\": [\n\t\t1497,\n\t\t447\n\t],\n\t\"./prism-yang\": [\n\t\t1498,\n\t\t448\n\t],\n\t\"./prism-yang.js\": [\n\t\t1498,\n\t\t448\n\t],\n\t\"./prism-yang.min\": [\n\t\t1499,\n\t\t449\n\t],\n\t\"./prism-yang.min.js\": [\n\t\t1499,\n\t\t449\n\t],\n\t\"./prism-zig\": [\n\t\t1500,\n\t\t450\n\t],\n\t\"./prism-zig.js\": [\n\t\t1500,\n\t\t450\n\t],\n\t\"./prism-zig.min\": [\n\t\t1501,\n\t\t451\n\t],\n\t\"./prism-zig.min.js\": [\n\t\t1501,\n\t\t451\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 3114;\nmodule.exports = webpackAsyncContext;","import { ethers, utils } from 'ethers';\r\nimport { NETWORK_EXPLORERS } from './index';\r\n\r\nconst arbitrum = require('../configs/arbitrum/config.json');\r\nconst arbitrumTestnet = require('../configs/arbitrumTestnet/config.json');\r\nconst mainnet = require('../configs/mainnet/config.json');\r\nconst xdai = require('../configs/xdai/config.json');\r\nconst rinkeby = require('../configs/rinkeby/config.json');\r\nconst localhost = require('../configs/localhost/config.json');\r\n\r\nconst appConfig: AppConfig = {\r\n  arbitrum,\r\n  arbitrumTestnet,\r\n  mainnet,\r\n  xdai,\r\n  rinkeby,\r\n  localhost,\r\n};\r\n\r\nexport function shortenAddress(address, digits = 4) {\r\n  if (!isAddress(address)) {\r\n    throw Error(`Invalid 'address' parameter '${address}'.`);\r\n  }\r\n  return `${address.substring(0, digits + 2)}...${address.substring(\r\n    42 - digits\r\n  )}`;\r\n}\r\n\r\nexport function isAddress(value: string) {\r\n  try {\r\n    return ethers.utils.getAddress(value.toLowerCase());\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function toChecksum(address) {\r\n  return utils.getAddress(address);\r\n}\r\n\r\nexport function toAddressStub(address, size = 'default') {\r\n  const start = address.slice(0, 6);\r\n  const end = address.slice(-4);\r\n\r\n  switch (size) {\r\n    case 'short':\r\n      return `${start}..`;\r\n    case 'long':\r\n      return address;\r\n    default:\r\n      return `${start}...${end}`;\r\n  }\r\n}\r\n\r\nexport function getBlockchainLink(\r\n  address: string,\r\n  networkName: string,\r\n  type?: string\r\n) {\r\n  switch (type) {\r\n    case 'user':\r\n      return `${window.location.pathname}#/user/${address}`;\r\n    case 'address':\r\n      return `${NETWORK_EXPLORERS[networkName]}/address/${address}`;\r\n    default:\r\n      return `${NETWORK_EXPLORERS[networkName]}/tx/${address}`;\r\n  }\r\n}\r\n\r\nexport function getERC20Token(address) {\r\n  let tokenObject;\r\n  Object.entries(appConfig).forEach(([_, value]) => {\r\n    if (!tokenObject)\r\n      tokenObject = value?.tokens?.find(token => token.address === address);\r\n  });\r\n  return tokenObject;\r\n}\r\n\r\nexport function getDxVoteContract(address) {\r\n  let contract;\r\n  Object.entries(appConfig).forEach(([_, value]) => {\r\n    Object.entries(value?.contracts).forEach(([name, value]) => {\r\n      if (!contract && value === address)\r\n        contract = { contract: name, address: value };\r\n    });\r\n  });\r\n  return contract;\r\n}\r\n","import moment from 'moment';\r\nimport { BigNumber } from './bignumber';\r\n\r\nexport const formatDate = (date: Date) => {\r\n  return moment(date).format('DD.MM - HH:mm');\r\n};\r\n\r\nexport const timestampToDate = (timestamp: BigNumber) => {\r\n  return moment.unix(timestamp.toNumber()).format('YYYY.DD.MM - HH:mm');\r\n};\r\n\r\nexport const timeToTimestamp = (timestamp: BigNumber) => {\r\n  if (timestamp.toNumber() > moment().unix())\r\n    return moment().to(moment.unix(timestamp.toNumber())).toString();\r\n  else return '';\r\n};\r\n\r\nexport const addZero = value => {\r\n  return value > 9 ? value : `0${value}`;\r\n};\r\n","export enum Web3Errors {\r\n  UNKNOWN_ERROR,\r\n  SIGNATURE_REJECTED,\r\n}\r\nexport enum TXEvents {\r\n  TX_HASH = 'txhash',\r\n  RECEIPT = 'receipt',\r\n  CONFIRMATION = 'confirmation',\r\n  TX_ERROR = 'txerror',\r\n  FINALLY = 'finally',\r\n  INVARIANT = 'invariant',\r\n}\r\n\r\nexport enum VoteDecision {\r\n  None,\r\n  YES,\r\n  NO,\r\n}\r\n\r\nexport enum WalletSchemeProposalState {\r\n  None,\r\n  Submitted,\r\n  Rejected,\r\n  ExecutionSucceded,\r\n  ExecutionTimeout,\r\n}\r\n\r\nexport enum VotingMachineProposalState {\r\n  None,\r\n  ExpiredInQueue,\r\n  Executed,\r\n  Queued,\r\n  PreBoosted,\r\n  Boosted,\r\n  QuietEndingPeriod,\r\n  Rejected,\r\n  Passed,\r\n}\r\n\r\nexport enum PendingAction {\r\n  'None',\r\n  'Boost',\r\n  'Execute',\r\n  'Finish',\r\n  'Redeem',\r\n  'RedeemForBeneficiary',\r\n}\r\n\r\nexport const enumKeys = <O extends object, K extends keyof O = keyof O>(\r\n  obj: O\r\n): K[] => Object.keys(obj).filter(k => Number.isNaN(+k)) as K[];\r\n","import { useCallback, useEffect, useRef, useState } from 'react';\r\nimport copy from 'copy-to-clipboard';\r\n\r\nexport function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest function.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      // @ts-ignore\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      tick();\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    } else {\r\n      return null;\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\nexport function useCopyClipboard(\r\n  timeout = 500\r\n  // @ts-ignore\r\n): [S, Dispatch<SetStateAction<S>>] {\r\n  const [isCopied, setIsCopied] = useState(false);\r\n\r\n  const staticCopy = useCallback(text => {\r\n    const didCopy = copy(text);\r\n    setIsCopied(didCopy);\r\n  }, []);\r\n  // @ts-ignore\r\n  useEffect(() => {\r\n    if (isCopied) {\r\n      const hide = setTimeout(() => {\r\n        setIsCopied(false);\r\n      }, timeout);\r\n\r\n      return () => {\r\n        clearTimeout(hide);\r\n      };\r\n    }\r\n  }, [isCopied, setIsCopied, timeout]);\r\n\r\n  return [isCopied, staticCopy];\r\n}\r\n\r\n// modified from https://usehooks.com/usePrevious/\r\nexport function usePrevious(value) {\r\n  // The ref object is a generic container whose current property is mutable ...\r\n  // ... and can hold any value, similar to an instance property on a class\r\n  const ref = useRef();\r\n\r\n  // Store current value in ref\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]); // Only re-run if value changes\r\n\r\n  // Return previous value (happens before update in useEffect above)\r\n  return ref.current;\r\n}\r\n","import { BigNumber } from './bignumber';\r\nimport { bnum, DEFAULT_TOKEN_DECIMALS, scale } from './index';\r\n\r\nexport function formatFee(fee: BigNumber) {\r\n  return fee.times(100).toString() + '%';\r\n}\r\n\r\nexport function formatPercentage(\r\n  value: BigNumber,\r\n  decimals: number,\r\n  useLowerLimit = true\r\n): string {\r\n  if (\r\n    value.times(100).decimalPlaces(decimals).lte(0.1) &&\r\n    value.gt(0) &&\r\n    useLowerLimit\r\n  ) {\r\n    return '<0.1%';\r\n  }\r\n  return `${value.times(100).decimalPlaces(decimals).toString()}%`;\r\n}\r\n\r\nexport function fromPercentage(value: BigNumber | string): BigNumber {\r\n  const bn = bnum(value.toString());\r\n  return bn.div(100);\r\n}\r\n\r\nexport function toPercentage(value: BigNumber | string): BigNumber {\r\n  const bn = bnum(value.toString());\r\n  return bn.times(100);\r\n}\r\n\r\nexport const normalizePriceValues = (\r\n  inputValue: BigNumber,\r\n  outputValue: BigNumber\r\n): {\r\n  normalizedInput: BigNumber;\r\n  normalizedOutput: BigNumber;\r\n} => {\r\n  const multiplier = bnum(1).div(inputValue);\r\n  return {\r\n    normalizedInput: bnum(1),\r\n    normalizedOutput: outputValue.times(multiplier),\r\n  };\r\n};\r\n\r\nexport const formatCurrency = (balance: BigNumber): string => {\r\n  const fmt = {\r\n    groupSize: 3,\r\n    groupSeparator: ' ',\r\n    decimalSeparator: '.',\r\n  };\r\n  return balance.toFormat(2, BigNumber.ROUND_DOWN, fmt);\r\n};\r\n\r\nexport const numDigits = (value: BigNumber): number => {\r\n  return value.toString().length;\r\n};\r\n\r\nexport const roundUpToScale = (value: BigNumber): BigNumber => {\r\n  const placesValue = numDigits(value.integerValue()) - 1;\r\n  const scaledValue = value.shiftedBy(-placesValue);\r\n  return scaledValue.integerValue(BigNumber.ROUND_UP).shiftedBy(placesValue);\r\n};\r\n\r\n// ether -> wei\r\nexport const denormalizeBalance = (\r\n  normalizedBalance: string | BigNumber,\r\n  decimals: number = DEFAULT_TOKEN_DECIMALS\r\n): BigNumber => {\r\n  return scale(bnum(normalizedBalance), decimals);\r\n};\r\n\r\n// wei -> ether\r\nexport const normalizeBalance = (\r\n  amount: BigNumber,\r\n  decimals: number = DEFAULT_TOKEN_DECIMALS\r\n): BigNumber => {\r\n  return scale(bnum(amount), -decimals);\r\n};\r\n\r\nexport const formatNumberValue = (\r\n  normalizedBalance: BigNumber,\r\n  displayPrecision: number = 4,\r\n  truncateAt?: number,\r\n  roundDown: boolean = true\r\n): string => {\r\n  if (normalizedBalance.eq(0)) {\r\n    return bnum(0).toFixed(displayPrecision);\r\n  }\r\n\r\n  let result = bnum(normalizedBalance)\r\n    .decimalPlaces(\r\n      displayPrecision,\r\n      roundDown ? BigNumber.ROUND_DOWN : BigNumber.ROUND_UP\r\n    )\r\n    .toString();\r\n\r\n  result = padToDecimalPlaces(result, displayPrecision);\r\n\r\n  if (truncateAt && result.length > truncateAt) {\r\n    return result.substring(0, 20) + '...';\r\n  } else {\r\n    return result;\r\n  }\r\n};\r\n\r\nexport const formatBalance = (\r\n  balance: BigNumber,\r\n  decimals: number = 18,\r\n  precision: number = 4,\r\n  roundDown: boolean = true\r\n): string => {\r\n  if (balance.eq(0)) {\r\n    return bnum(0).toFixed(precision);\r\n  }\r\n\r\n  const result = scale(balance, -decimals)\r\n    .decimalPlaces(\r\n      precision,\r\n      roundDown ? BigNumber.ROUND_DOWN : BigNumber.ROUND_UP\r\n    )\r\n    .toString();\r\n\r\n  return padToDecimalPlaces(result, precision);\r\n};\r\n\r\nexport const padToDecimalPlaces = (\r\n  value: string,\r\n  minDecimals: number\r\n): string => {\r\n  const split = value.split('.');\r\n  const zerosToPad = split[1] ? minDecimals - split[1].length : minDecimals;\r\n\r\n  if (zerosToPad > 0) {\r\n    let pad = '';\r\n\r\n    // Add decimal point if no decimal portion in original number\r\n    if (zerosToPad === minDecimals) {\r\n      pad += '.';\r\n    }\r\n    for (let i = 0; i < zerosToPad; i++) {\r\n      pad += '0';\r\n    }\r\n    return value + pad;\r\n  }\r\n  return value;\r\n};\r\n","const binaryToHex = function (binaryString) {\r\n  const lookup = {\r\n    '0000': '0',\r\n    '0001': '1',\r\n    '0010': '2',\r\n    '0011': '3',\r\n    '0100': '4',\r\n    '0101': '5',\r\n    '0110': '6',\r\n    '0111': '7',\r\n    '1000': '8',\r\n    '1001': '9',\r\n    '1010': 'A',\r\n    '1011': 'B',\r\n    '1100': 'C',\r\n    '1101': 'D',\r\n    '1110': 'E',\r\n    '1111': 'F',\r\n  };\r\n  var ret = '';\r\n  binaryString = binaryString.split(' ');\r\n  for (var i = 0; i < binaryString.length; i++) {\r\n    ret += lookup[binaryString[i]];\r\n  }\r\n  return ret;\r\n};\r\n\r\nconst hexToBinary = function (hexString) {\r\n  hexString = hexString.replace(/^0x+/, '');\r\n  const lookup = {\r\n    '0': '0000',\r\n    '1': '0001',\r\n    '2': '0010',\r\n    '3': '0011',\r\n    '4': '0100',\r\n    '5': '0101',\r\n    '6': '0110',\r\n    '7': '0111',\r\n    '8': '1000',\r\n    '9': '1001',\r\n    a: '1010',\r\n    b: '1011',\r\n    c: '1100',\r\n    d: '1101',\r\n    e: '1110',\r\n    f: '1111',\r\n    A: '1010',\r\n    B: '1011',\r\n    C: '1100',\r\n    D: '1101',\r\n    E: '1110',\r\n    F: '1111',\r\n  };\r\n\r\n  var ret = '';\r\n  for (var i = 0, len = hexString.length; i < len; i++) {\r\n    if (hexString[i] !== '0') ret += lookup[hexString[i]];\r\n  }\r\n  return ret;\r\n};\r\n\r\n// All 0: Not registered,\r\n// 1st bit: Flag if the scheme is registered,\r\n// 2nd bit: Scheme can register other schemes\r\n// 3rd bit: Scheme can add/remove global constraints\r\n// 4th bit: Scheme can upgrade the controller\r\n// 5th bit: Scheme can call genericCall on behalf of the organization avatar\r\nexport const encodePermission = function (permissions) {\r\n  const canGenericCall = permissions.canGenericCall || false;\r\n  const canUpgrade = permissions.canUpgrade || false;\r\n  const canChangeConstraints = permissions.canChangeConstraints || false;\r\n  const canRegisterSchemes = permissions.canRegisterSchemes || false;\r\n  const permissionBytes = `000${canGenericCall ? 1 : 0} ${canUpgrade ? 1 : 0}${\r\n    canChangeConstraints ? 1 : 0\r\n  }${canRegisterSchemes ? 1 : 0}1`;\r\n  return '0x000000' + binaryToHex(permissionBytes);\r\n};\r\nexport const decodePermission = function (permission) {\r\n  permission = hexToBinary(permission);\r\n  return {\r\n    canRegisterSchemes: permission.length > 3 && permission[4] === '1',\r\n    canChangeConstraints: permission.length > 3 && permission[5] === '1',\r\n    canUpgrade: permission.length > 3 && permission[6] === '1',\r\n    canGenericCall: permission.length > 3 && permission[7] === '1',\r\n  };\r\n};\r\n","import {\r\n  bnum,\r\n  WalletSchemeProposalState,\r\n  VotingMachineProposalState,\r\n} from './index';\r\nimport moment from 'moment';\r\n\r\nimport { PendingAction, BigNumber } from '../utils';\r\n\r\n// constant used to the initial order of the proposals (Any Status).\r\nexport const QUEUED_PRIORITY_THRESHOLD = 10;\r\n\r\nexport const isExpired = (proposal: Proposal): boolean => {\r\n  return (\r\n    proposal.stateInVotingMachine === VotingMachineProposalState.ExpiredInQueue\r\n  );\r\n};\r\n\r\n// Checks for whether vote was made before boosting activated\r\n// Returns false if proposal was not boosted at all\r\nexport const votedBeforeBoosted = (proposal: Proposal, vote: Vote): boolean => {\r\n  const boosted = proposal.boostedPhaseTime.toNumber() > 0;\r\n  const votedBeforeBoosted =\r\n    vote.timestamp < proposal.boostedPhaseTime.toNumber();\r\n  const notBoosted = proposal.boostedPhaseTime.toNumber() === 0;\r\n  return (boosted && votedBeforeBoosted) || notBoosted;\r\n};\r\n\r\nexport const isNotActive = (proposal: Proposal): boolean => {\r\n  return proposal.stateInVotingMachine < 3;\r\n};\r\n\r\nexport const hasLostReputation = (\r\n  voteParameters: VotingMachineParameters\r\n): boolean => {\r\n  return voteParameters.votersReputationLossRatio.toNumber() > 0;\r\n};\r\n\r\nexport const isWinningVote = (\r\n  proposal: Proposal,\r\n  vote: Vote | Stake\r\n): boolean => {\r\n  return proposal.winningVote === vote.vote;\r\n};\r\nexport const calculateStakes = function (\r\n  thresholdConst,\r\n  boostedProposals,\r\n  preBoostedProposals,\r\n  upstakes,\r\n  downstakes\r\n) {\r\n  // No idea why but the estimation of staking token by diving the thresholdConst get on chain by 0.90...\r\n  // I think it might be due to the precision magic used in the real number library used in teh GenensisProtocol\r\n  thresholdConst = thresholdConst.times(0.90949470177);\r\n  let threshold = thresholdConst.div(10 ** 12).pow(boostedProposals);\r\n  if (threshold.lt(1.0001)) threshold = bnum('1.0001');\r\n\r\n  let recommendedThreshold = thresholdConst\r\n    .div(10 ** 12)\r\n    .pow(Number(boostedProposals) + Number(preBoostedProposals));\r\n  if (recommendedThreshold.lt(1.0001)) recommendedThreshold = bnum('1.0001');\r\n\r\n  return {\r\n    stakeToBoost: downstakes.times(threshold).minus(upstakes),\r\n    stakeToUnBoost: upstakes.div(threshold).minus(downstakes),\r\n    recommendedStakeToBoost: downstakes\r\n      .times(recommendedThreshold)\r\n      .minus(upstakes),\r\n    recommendedStakeToUnBoost: upstakes\r\n      .div(recommendedThreshold)\r\n      .minus(downstakes),\r\n  };\r\n};\r\n\r\nexport const getProposalMutableData = function (\r\n  networkCache: DaoNetworkCache,\r\n  proposalId: string\r\n): {\r\n  votes: {\r\n    [decision: number]: BigNumber;\r\n  };\r\n  stakes: {\r\n    [decision: number]: BigNumber;\r\n  };\r\n  stateInVotingMachine: VotingMachineProposalState;\r\n  preBoostTimestamp: BigNumber;\r\n  boostTimestamp: BigNumber;\r\n  finishTimestamp: BigNumber;\r\n} {\r\n  const proposal = networkCache.proposals[proposalId];\r\n  const scheme = networkCache.schemes[proposal.scheme];\r\n  const votingMachineOfProposal = scheme.votingMachine;\r\n  const votingMachineEvents =\r\n    networkCache.votingMachines[votingMachineOfProposal].events;\r\n  let proposalMutableData = {\r\n    votes: {},\r\n    stakes: {},\r\n    stateInVotingMachine: 0,\r\n    preBoostTimestamp: bnum(0),\r\n    boostTimestamp: bnum(0),\r\n    finishTimestamp: bnum(0),\r\n  };\r\n\r\n  votingMachineEvents.votes.map(voteEvent => {\r\n    if (!proposalMutableData.votes[voteEvent.vote])\r\n      proposalMutableData.votes[voteEvent.vote] = bnum(voteEvent.amount);\r\n    else\r\n      proposalMutableData.votes[voteEvent.vote] = proposalMutableData.votes[\r\n        voteEvent.vote\r\n      ].plus(voteEvent.amount);\r\n  });\r\n  votingMachineEvents.stakes.map(stake => {\r\n    if (!proposalMutableData.stakes[stake.vote])\r\n      proposalMutableData.stakes[stake.vote] = bnum(stake.amount);\r\n    else\r\n      proposalMutableData.stakes[stake.vote] = proposalMutableData.stakes[\r\n        stake.vote\r\n      ].plus(stake.amount);\r\n  });\r\n\r\n  const proposalStatus = decodeProposalStatus(\r\n    proposal,\r\n    votingMachineEvents.proposalStateChanges,\r\n    proposal.paramsHash ===\r\n      '0x0000000000000000000000000000000000000000000000000000000000000000'\r\n      ? networkCache.votingMachines[votingMachineOfProposal].votingParameters[\r\n          scheme.paramsHash\r\n        ]\r\n      : networkCache.votingMachines[votingMachineOfProposal].votingParameters[\r\n          proposal.paramsHash\r\n        ],\r\n    scheme.maxSecondsForExecution,\r\n    false,\r\n    scheme.type\r\n  );\r\n\r\n  proposalMutableData.preBoostTimestamp = bnum(\r\n    votingMachineEvents.proposalStateChanges.find(\r\n      votingMachineEvent =>\r\n        votingMachineEvent.proposalId == proposalId &&\r\n        Number(votingMachineEvent.state) ==\r\n          VotingMachineProposalState.PreBoosted\r\n    )?.timestamp || '0'\r\n  );\r\n  proposalMutableData.boostTimestamp = proposalStatus.boostTime;\r\n  proposalMutableData.finishTimestamp = proposalStatus.finishTime;\r\n  proposalMutableData.stateInVotingMachine =\r\n    VotingMachineProposalState[\r\n      votingMachineEvents.proposalStateChanges\r\n        .filter(\r\n          votingMachineEvent => votingMachineEvent.proposalId == proposalId\r\n        )\r\n        .at(-1)?.state\r\n    ];\r\n\r\n  return proposalMutableData;\r\n};\r\n\r\n// @ts-ignore\r\nexport const decodeProposalStatus = function (\r\n  proposal,\r\n  proposalStateChangeEvents,\r\n  votingMachineParams,\r\n  maxSecondsForExecution,\r\n  autoBoost,\r\n  schemeType\r\n): {\r\n  status: string;\r\n  boostTime: BigNumber;\r\n  finishTime: BigNumber;\r\n  pendingAction: PendingAction;\r\n} {\r\n  const timeNow = bnum(moment().unix());\r\n  const queuedVotePeriodLimit = votingMachineParams.queuedVotePeriodLimit;\r\n  const boostedVotePeriodLimit = votingMachineParams.boostedVotePeriodLimit;\r\n  const preBoostedVotePeriodLimit =\r\n    votingMachineParams.preBoostedVotePeriodLimit;\r\n  const quietEndingPeriod = votingMachineParams.quietEndingPeriod;\r\n  const boostedPhaseTime = bnum(proposal.boostedPhaseTime);\r\n  const submittedTime = bnum(proposal.submittedTime);\r\n  const preBoostedPhaseTime = proposal.preBoostedPhaseTime;\r\n\r\n  switch (proposal.stateInVotingMachine) {\r\n    case VotingMachineProposalState.ExpiredInQueue:\r\n      return {\r\n        status: 'Expired in Queue',\r\n        boostTime: bnum(0),\r\n        finishTime: proposalStateChangeEvents.find(\r\n          event =>\r\n            Number(event.state) === VotingMachineProposalState.ExpiredInQueue\r\n        )\r\n          ? bnum(\r\n              proposalStateChangeEvents.find(\r\n                event =>\r\n                  Number(event.state) ===\r\n                  VotingMachineProposalState.ExpiredInQueue\r\n              ).timestamp\r\n            )\r\n          : bnum(0),\r\n        pendingAction: PendingAction.None,\r\n      };\r\n    case VotingMachineProposalState.Executed:\r\n      if (proposal.stateInScheme === WalletSchemeProposalState.Rejected)\r\n        return {\r\n          status: 'Proposal Rejected',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: proposalStateChangeEvents.find(\r\n            event => Number(event.state) === VotingMachineProposalState.Executed\r\n          )\r\n            ? bnum(\r\n                proposalStateChangeEvents.find(\r\n                  event =>\r\n                    Number(event.state) === VotingMachineProposalState.Executed\r\n                ).timestamp\r\n              )\r\n            : bnum(0),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      else if (\r\n        proposal.stateInScheme === WalletSchemeProposalState.ExecutionSucceded\r\n      )\r\n        return {\r\n          status: 'Execution Succeeded',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: proposalStateChangeEvents.find(\r\n            event => Number(event.state) === VotingMachineProposalState.Executed\r\n          )\r\n            ? bnum(\r\n                proposalStateChangeEvents.find(\r\n                  event =>\r\n                    Number(event.state) === VotingMachineProposalState.Executed\r\n                ).timestamp\r\n              )\r\n            : bnum(0),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      else if (\r\n        proposal.stateInScheme === WalletSchemeProposalState.ExecutionTimeout\r\n      )\r\n        return {\r\n          status: 'Execution Failed',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: proposalStateChangeEvents.find(\r\n            event => Number(event.state) === VotingMachineProposalState.Executed\r\n          )\r\n            ? bnum(\r\n                proposalStateChangeEvents.find(\r\n                  event =>\r\n                    Number(event.state) === VotingMachineProposalState.Executed\r\n                ).timestamp\r\n              )\r\n            : bnum(0),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      else if (proposal.stateInScheme === WalletSchemeProposalState.Submitted)\r\n        return {\r\n          status: 'Passed',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: proposalStateChangeEvents.find(\r\n            event => Number(event.state) === VotingMachineProposalState.Executed\r\n          )\r\n            ? bnum(\r\n                proposalStateChangeEvents.find(\r\n                  event =>\r\n                    Number(event.state) === VotingMachineProposalState.Executed\r\n                ).timestamp\r\n              )\r\n            : bnum(0),\r\n          pendingAction:\r\n            schemeType === 'ContributionReward'\r\n              ? PendingAction.Redeem\r\n              : schemeType === 'GenericMulticall'\r\n              ? 5\r\n              : PendingAction.RedeemForBeneficiary,\r\n        };\r\n      else\r\n        return {\r\n          status: 'Passed',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: proposalStateChangeEvents.find(\r\n            event => Number(event.state) === VotingMachineProposalState.Executed\r\n          )\r\n            ? bnum(\r\n                proposalStateChangeEvents.find(\r\n                  event =>\r\n                    Number(event.state) === VotingMachineProposalState.Executed\r\n                ).timestamp\r\n              )\r\n            : bnum(0),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n    case VotingMachineProposalState.Queued:\r\n      if (timeNow.gt(submittedTime.plus(queuedVotePeriodLimit))) {\r\n        return {\r\n          status: 'Expired in Queue',\r\n          boostTime: bnum(0),\r\n          finishTime: submittedTime.plus(queuedVotePeriodLimit),\r\n          pendingAction: PendingAction.Finish,\r\n        };\r\n      } else {\r\n        return {\r\n          status: 'In Queue',\r\n          boostTime: bnum(0),\r\n          finishTime: submittedTime.plus(queuedVotePeriodLimit),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      }\r\n    case VotingMachineProposalState.PreBoosted:\r\n      if (\r\n        timeNow.gt(\r\n          preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit)\r\n            .plus(maxSecondsForExecution)\r\n        ) &&\r\n        proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'Execution Timeout',\r\n          boostTime: preBoostedPhaseTime.plus(preBoostedVotePeriodLimit),\r\n          finishTime: preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.Finish,\r\n        };\r\n      } else if (\r\n        timeNow >\r\n          preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit)\r\n            .toNumber() &&\r\n        proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'Pending Execution',\r\n          boostTime: preBoostedPhaseTime.plus(preBoostedVotePeriodLimit),\r\n          finishTime: preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.Execute,\r\n        };\r\n      } else if (\r\n        timeNow.gt(preBoostedPhaseTime.plus(preBoostedVotePeriodLimit)) &&\r\n        proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'Pending Boost',\r\n          boostTime: preBoostedPhaseTime.plus(preBoostedVotePeriodLimit),\r\n          finishTime: autoBoost\r\n            ? preBoostedPhaseTime\r\n                .plus(preBoostedVotePeriodLimit)\r\n                .plus(boostedVotePeriodLimit)\r\n            : timeNow.plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.Boost,\r\n        };\r\n      } else if (\r\n        autoBoost &&\r\n        timeNow.gt(\r\n          preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit)\r\n        ) &&\r\n        proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'Pending Execution',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: preBoostedPhaseTime\r\n            .plus(preBoostedVotePeriodLimit)\r\n            .plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.Execute,\r\n        };\r\n      } else if (\r\n        timeNow.gt(submittedTime.plus(queuedVotePeriodLimit)) &&\r\n        !proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'Pending Execution',\r\n          boostTime: bnum(0),\r\n          finishTime: submittedTime.plus(queuedVotePeriodLimit),\r\n          pendingAction: PendingAction.Execute,\r\n        };\r\n      } else if (\r\n        timeNow > preBoostedPhaseTime.plus(preBoostedVotePeriodLimit) &&\r\n        !proposal.shouldBoost\r\n      ) {\r\n        return {\r\n          status: 'In Queue',\r\n          boostTime: bnum(0),\r\n          finishTime: submittedTime.plus(queuedVotePeriodLimit),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      } else {\r\n        return {\r\n          status: 'Pre Boosted',\r\n          boostTime: preBoostedPhaseTime.plus(preBoostedVotePeriodLimit),\r\n          finishTime: autoBoost\r\n            ? preBoostedPhaseTime\r\n                .plus(preBoostedVotePeriodLimit)\r\n                .plus(boostedVotePeriodLimit)\r\n            : timeNow.plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      }\r\n    case VotingMachineProposalState.Boosted:\r\n      if (timeNow.gt(boostedPhaseTime.plus(boostedVotePeriodLimit))) {\r\n        return {\r\n          status: 'Pending Execution',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: boostedPhaseTime.plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.Execute,\r\n        };\r\n      } else {\r\n        return {\r\n          status: 'Boosted',\r\n          boostTime: boostedPhaseTime,\r\n          finishTime: boostedPhaseTime.plus(boostedVotePeriodLimit),\r\n          pendingAction: PendingAction.None,\r\n        };\r\n      }\r\n    // VotingMachineProposalState.QuietEndingPeriod\r\n    default:\r\n      const finishTime =\r\n        bnum(\r\n          proposalStateChangeEvents.find(\r\n            event =>\r\n              Number(event.state) ===\r\n              VotingMachineProposalState.QuietEndingPeriod\r\n          ).timestamp\r\n        ).plus(quietEndingPeriod) || bnum(0);\r\n      return {\r\n        status: 'Quiet Ending Period',\r\n        boostTime: boostedPhaseTime,\r\n        finishTime: finishTime,\r\n        pendingAction: finishTime.lt(timeNow)\r\n          ? PendingAction.Finish\r\n          : PendingAction.None,\r\n      };\r\n  }\r\n};\r\n","import { bnum } from './helpers';\r\n\r\nexport const decodeSchemeParameters = function (rawParameters) {\r\n  return {\r\n    queuedVoteRequiredPercentage: bnum(\r\n      rawParameters.queuedVoteRequiredPercentage.toString()\r\n    ),\r\n    queuedVotePeriodLimit: bnum(rawParameters.queuedVotePeriodLimit.toString()),\r\n    boostedVotePeriodLimit: bnum(\r\n      rawParameters.boostedVotePeriodLimit.toString()\r\n    ),\r\n    preBoostedVotePeriodLimit: bnum(\r\n      rawParameters.preBoostedVotePeriodLimit.toString()\r\n    ),\r\n    thresholdConst: bnum(rawParameters.thresholdConst.toString()),\r\n    limitExponentValue: bnum(rawParameters.limitExponentValue.toString()),\r\n    quietEndingPeriod: bnum(rawParameters.quietEndingPeriod.toString()),\r\n    proposingRepReward: bnum(rawParameters.proposingRepReward.toString()),\r\n    votersReputationLossRatio: bnum(\r\n      rawParameters.votersReputationLossRatio.toString()\r\n    ),\r\n    minimumDaoBounty: bnum(rawParameters.minimumDaoBounty.toString()),\r\n    daoBountyConst: bnum(rawParameters.daoBountyConst.toString()),\r\n    activationTime: bnum(rawParameters.activationTime.toString()),\r\n  };\r\n};\r\n\r\nexport const isWalletScheme = function (scheme: Scheme) {\r\n  return scheme.type.indexOf('Wallet Scheme') > -1;\r\n};\r\n","export const flatten = (arr: any[]) =>\r\n  arr.reduce(\r\n    (acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val),\r\n    []\r\n  );\r\n\r\nexport const arrayBufferHex = arrayBuffer => {\r\n  return Array.prototype.map\r\n    .call(new Uint8Array(arrayBuffer), n => n.toString(16).padStart(2, '0'))\r\n    .join('');\r\n};\r\n","import { utils } from 'ethers';\r\nimport Web3 from 'web3';\r\nimport { toEthSignedMessageHash } from './signature';\r\n\r\nexport const hashVote = function (\r\n  votingMachineAddress: string,\r\n  proposalId: string,\r\n  voter: string,\r\n  decision: string,\r\n  repAmount: string\r\n) {\r\n  return Web3.utils.soliditySha3(\r\n    { type: 'address', value: votingMachineAddress },\r\n    { type: 'bytes32', value: proposalId },\r\n    { type: 'address', value: voter },\r\n    { type: 'uint256', value: decision },\r\n    { type: 'uint256', value: repAmount }\r\n  );\r\n};\r\n\r\nexport const verifySignedVote = function (\r\n  votingMachineAddress: string,\r\n  proposalId: string,\r\n  voter: string,\r\n  decision: string,\r\n  repAmount: string,\r\n  signature: string\r\n) {\r\n  try {\r\n    const signer = utils.recoverAddress(\r\n      toEthSignedMessageHash(\r\n        hashVote(votingMachineAddress, proposalId, voter, decision, repAmount)\r\n      ),\r\n      signature\r\n    );\r\n    return signer == voter;\r\n  } catch (error) {\r\n    console.error('Error verifying vote signature', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const parseSignedVoteMessage = function (signedVoteMessage: string): {\r\n  valid: boolean;\r\n  votingMachine: string;\r\n  proposalId: string;\r\n  voter: string;\r\n  decision: string;\r\n  repAmount: string;\r\n  signature: string;\r\n} {\r\n  if (\r\n    signedVoteMessage &&\r\n    signedVoteMessage.length > 0 &&\r\n    signedVoteMessage.split(':').length > 6\r\n  ) {\r\n    const signedVoteMessageSplitted = signedVoteMessage.split(':');\r\n    return {\r\n      valid: verifySignedVote(\r\n        signedVoteMessageSplitted[1],\r\n        signedVoteMessageSplitted[2],\r\n        signedVoteMessageSplitted[3],\r\n        signedVoteMessageSplitted[4],\r\n        signedVoteMessageSplitted[5],\r\n        signedVoteMessageSplitted[6]\r\n      ),\r\n      votingMachine: signedVoteMessageSplitted[1],\r\n      proposalId: signedVoteMessageSplitted[2],\r\n      voter: signedVoteMessageSplitted[3],\r\n      decision: signedVoteMessageSplitted[4],\r\n      repAmount: signedVoteMessageSplitted[5],\r\n      signature: signedVoteMessageSplitted[6],\r\n    };\r\n  } else {\r\n    return {\r\n      valid: false,\r\n      votingMachine: '',\r\n      proposalId: '',\r\n      voter: '',\r\n      decision: '',\r\n      repAmount: '',\r\n      signature: '',\r\n    };\r\n  }\r\n};\r\n\r\nexport const isVoteYes = function (vote) {\r\n  return vote && vote.toString() == '1';\r\n};\r\n\r\nexport const isVoteNo = function (vote) {\r\n  return vote && vote.toString() == '2';\r\n};\r\n","import axios, { AxiosResponse } from 'axios';\r\nimport contentHash from 'content-hash';\r\n\r\nexport const getIPFSFile = async function (\r\n  ipfsHash,\r\n  timeout = 1000\r\n): Promise<AxiosResponse<any>> {\r\n  try {\r\n    return await Promise.any([\r\n      axios.request({\r\n        url: 'https://ipfs.io/ipfs/' + ipfsHash,\r\n        method: 'GET',\r\n        timeout: timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://gateway.ipfs.io/ipfs/' + ipfsHash,\r\n        method: 'GET',\r\n        timeout: timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://gateway.pinata.cloud/ipfs/' + ipfsHash,\r\n        method: 'GET',\r\n        timeout: timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://dweb.link/ipfs/' + ipfsHash,\r\n        method: 'GET',\r\n        timeout: timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://infura-ipfs.io/ipfs/' + ipfsHash,\r\n        method: 'GET',\r\n        timeout: timeout,\r\n      }),\r\n    ]);\r\n  } catch (e) {\r\n    console.warn(e);\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const descriptionHashToIPFSHash = function (descriptionHash) {\r\n  try {\r\n    if (contentHash.getCodec(descriptionHash) === 'ipfs-ns')\r\n      return contentHash.decode(descriptionHash);\r\n    else if (\r\n      descriptionHash.length > 1 &&\r\n      descriptionHash.substring(0, 2) !== 'Qm'\r\n    )\r\n      return descriptionHash;\r\n    else return '';\r\n  } catch (error) {\r\n    return '';\r\n  }\r\n};\r\n\r\nexport const ipfsHashToDescriptionHash = function (ipfsHash) {\r\n  try {\r\n    if (ipfsHash.length > 1 && ipfsHash.substring(0, 2) === 'Qm')\r\n      return contentHash.fromIpfs(ipfsHash);\r\n    else if (contentHash.getCodec(ipfsHash) === 'ipfs-ns') return ipfsHash;\r\n    else return '';\r\n  } catch (error) {\r\n    return '';\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/metamask.02e3ec27.png\";","export default __webpack_public_path__ + \"static/media/walletconnect.80a855f2.png\";","import { InjectedConnector } from '@web3-react/injected-connector';\r\nimport { WalletConnectConnector } from '@web3-react/walletconnect-connector';\r\nimport { NetworkConnector } from '@web3-react/network-connector';\r\nimport { NETWORKS } from 'utils';\r\nimport metamaskIcon from 'assets/images/metamask.png';\r\nimport walletConnectIcon from 'assets/images/walletconnect.png';\r\nimport { ChainConfig } from '../types/types';\r\nexport const ACTIVE_NETWORK_NAMES =\r\n  process.env.NODE_ENV === 'production'\r\n    ? ['mainnet', 'xdai', 'arbitrum', 'rinkeby', 'arbitrumTestnet']\r\n    : [\r\n        'mainnet',\r\n        'xdai',\r\n        'arbitrum',\r\n        'rinkeby',\r\n        'arbitrumTestnet',\r\n        'localhost',\r\n      ];\r\nexport const ACTIVE_NETWORKS = NETWORKS.filter(network =>\r\n  ACTIVE_NETWORK_NAMES.includes(network.name)\r\n);\r\n\r\nexport const ETH_NETWORKS_IDS = ACTIVE_NETWORKS.map(network => network.id);\r\n\r\nexport const isChainIdSupported = (chainId: ChainConfig['id']): boolean => {\r\n  return ETH_NETWORKS_IDS ? ETH_NETWORKS_IDS.indexOf(chainId) >= 0 : false;\r\n};\r\n\r\nexport const injected = new InjectedConnector({\r\n  supportedChainIds: ETH_NETWORKS_IDS,\r\n});\r\n\r\nexport function getWalletConnectConnector(\r\n  customRpcUrls: Record<ChainConfig['id'], string>\r\n) {\r\n  return new WalletConnectConnector({\r\n    rpc: customRpcUrls,\r\n    qrcode: true,\r\n  });\r\n}\r\n\r\nexport function getNetworkConnector(\r\n  customRpcUrls: Record<ChainConfig['id'], string>,\r\n  defaultChainId: ChainConfig['id']\r\n) {\r\n  return new NetworkConnector({\r\n    urls: customRpcUrls,\r\n    defaultChainId,\r\n  });\r\n}\r\n\r\nexport const getWallets = (\r\n  customRpcUrls: Record<ChainConfig['id'], string>\r\n) => ({\r\n  INJECTED: {\r\n    connector: injected,\r\n    name: 'Injected',\r\n    iconName: 'arrow-right.svg',\r\n    description: 'Injected web3 provider.',\r\n    href: null,\r\n    color: '#010101',\r\n    primary: true,\r\n  },\r\n  METAMASK: {\r\n    connector: injected,\r\n    name: 'MetaMask',\r\n    description: 'Easy-to-use browser extension.',\r\n    href: null,\r\n    color: '#E8831D',\r\n    icon: metamaskIcon,\r\n  },\r\n  WALLETCONNECT: {\r\n    connector: getWalletConnectConnector(customRpcUrls),\r\n    name: 'WalletConnect',\r\n    description: 'Open protocol for connecting Wallets to Dapps.',\r\n    href: null,\r\n    color: '#E8831D',\r\n    icon: walletConnectIcon,\r\n  },\r\n});\r\n\r\nexport const findWalletType = (connector: any) => {\r\n  if (connector instanceof InjectedConnector) {\r\n    return 'MetaMask';\r\n  } else if (connector instanceof WalletConnectConnector) {\r\n    return 'WalletConnect';\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const getChains = (\r\n  customRpcUrls?: Record<ChainConfig['id'], string>\r\n) => {\r\n  return ACTIVE_NETWORKS.map(network => ({\r\n    ...network,\r\n    rpcUrl: customRpcUrls?.[network.id] || network.defaultRpc,\r\n  }));\r\n};\r\n","import { utils } from 'ethers';\r\nimport { ContractType } from 'stores/Provider';\r\nimport RootContext from '../contexts';\r\n\r\nexport const schema = {\r\n  Avatar: require('../contracts/DxAvatar').abi,\r\n  Controller: require('../contracts/DxController').abi,\r\n  VotingMachine: require('../contracts/GenesisProtocol').abi,\r\n  DXDVotingMachine: require('../contracts/DXDVotingMachine').abi,\r\n  Reputation: require('../contracts/DxReputation').abi,\r\n  WalletScheme1_0: require('../contracts/WalletScheme1_0').abi,\r\n  WalletScheme1_1: require('../contracts/WalletScheme1_1').abi,\r\n  ERC20: require('../contracts/ERC20').abi,\r\n  PermissionRegistry: require('../contracts/PermissionRegistry').abi,\r\n  Multicall: require('../contracts/Multicall').abi,\r\n  ContributionReward: require('../contracts/ContributionReward').abi,\r\n  SchemeRegistrar: require('../contracts/SchemeRegistrar').abi,\r\n  Redeemer: require('../contracts/Redeemer').abi,\r\n};\r\n\r\nexport default class ABIService {\r\n  context: RootContext;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  getAbi(contractType: ContractType) {\r\n    return schema[contractType];\r\n  }\r\n  /**\r\n   * @param data Transaction call data\r\n   * @param contractType e.g. controller/avatar/votingMachine etc\r\n   * @returns\r\n   */\r\n  decodeCall(data: string, contractType?: ContractType, ABI?: any) {\r\n    const { providerStore } = this.context;\r\n    let contractInterface = new utils.Interface(\r\n      ABI || this.getAbi(contractType)\r\n    );\r\n\r\n    const { library } = providerStore.getActiveWeb3React();\r\n\r\n    const functionSignature = data.substring(0, 10);\r\n    for (const functionName in contractInterface.functions) {\r\n      if (\r\n        utils.Interface.getSighash(\r\n          contractInterface.getFunction(functionName)\r\n        ) === functionSignature\r\n      ) {\r\n        return {\r\n          function: contractInterface.getFunction(functionName),\r\n          args: library.eth.abi.decodeParameters(\r\n            contractInterface.getFunction(functionName).inputs.map(input => {\r\n              return input.type;\r\n            }),\r\n            data.substring(10)\r\n          ),\r\n        };\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","import { Web3Errors } from '../../utils';\r\n\r\nconst errorCodeMapping = {\r\n  '4001': Web3Errors.SIGNATURE_REJECTED,\r\n};\r\n\r\nexport const isKnownErrorCode = (code: number): boolean => {\r\n  const codeStr = code.toString();\r\n  return !!errorCodeMapping[codeStr];\r\n};\r\n\r\nexport const getErrorByCode = (code: number): Web3Errors => {\r\n  const codeStr = code.toString();\r\n  if (isKnownErrorCode(code)) {\r\n    return errorCodeMapping[codeStr];\r\n  } else {\r\n    return Web3Errors.UNKNOWN_ERROR;\r\n  }\r\n};\r\n","import { Contract } from 'ethers';\r\nimport { TXEvents } from '../../utils';\r\nimport { getErrorByCode, isKnownErrorCode } from './error';\r\nimport PromiEvent from 'promievent';\r\n\r\ninterface ActionRequest {\r\n  contract: Contract;\r\n  action: string;\r\n  sender: string;\r\n  data: any[];\r\n  overrides: any;\r\n}\r\n\r\nexport interface ActionResponse {\r\n  contract: Contract;\r\n  action: string;\r\n  sender: string;\r\n  data: object;\r\n  txResponse: any | undefined;\r\n  error: any | undefined;\r\n}\r\n\r\nconst preLog = (params: ActionRequest) => {\r\n  console.debug(`[@action start: ${params.action}]`, {\r\n    contract: params.contract,\r\n    action: params.action,\r\n    sender: params.sender,\r\n    data: params.data,\r\n    overrides: params.overrides,\r\n  });\r\n};\r\n\r\nexport const sendAction = (params: ActionRequest): PromiEvent<any> => {\r\n  const { contract, action, sender, data, overrides } = params;\r\n  preLog(params);\r\n\r\n  const promiEvent = new PromiEvent<any>(() => {\r\n    contract.methods[action](...data)\r\n      .send({ from: sender, ...overrides })\r\n      .once('transactionHash', hash => {\r\n        promiEvent.emit(TXEvents.TX_HASH, hash);\r\n        console.debug(TXEvents.TX_HASH, hash);\r\n      })\r\n      .once('receipt', receipt => {\r\n        promiEvent.emit(TXEvents.RECEIPT, receipt);\r\n        console.debug(TXEvents.RECEIPT, receipt);\r\n      })\r\n      .once('confirmation', (confNumber, receipt) => {\r\n        promiEvent.emit(TXEvents.CONFIRMATION, {\r\n          confNumber,\r\n          receipt,\r\n        });\r\n        console.debug(TXEvents.CONFIRMATION, {\r\n          confNumber,\r\n          receipt,\r\n        });\r\n      })\r\n      .on('error', error => {\r\n        console.debug(error.code);\r\n        if (error.code && isKnownErrorCode(error.code)) {\r\n          promiEvent.emit(TXEvents.TX_ERROR, getErrorByCode(error.code));\r\n          console.debug(TXEvents.TX_ERROR, getErrorByCode(error.code));\r\n        } else {\r\n          promiEvent.emit(TXEvents.INVARIANT, error);\r\n          console.debug(TXEvents.INVARIANT, error);\r\n        }\r\n      })\r\n      .then(receipt => {\r\n        promiEvent.emit(TXEvents.FINALLY, receipt);\r\n        console.debug(TXEvents.FINALLY, receipt);\r\n      })\r\n      .catch(e => {\r\n        console.debug('rejected', e);\r\n      });\r\n  });\r\n\r\n  return promiEvent;\r\n};\r\n","import { makeObservable, observable, action } from 'mobx';\r\nimport { ethers } from 'ethers';\r\nimport PromiEvent from 'promievent';\r\nimport { Web3ReactContextInterface } from '@web3-react/core/dist/types';\r\nimport RootContext from '../contexts';\r\nimport { sendAction } from './actions/actions';\r\nimport { TXEvents } from '../utils';\r\nimport { schema } from '../services/ABIService';\r\n\r\nexport enum ContractType {\r\n  ERC20 = 'ERC20',\r\n  Avatar = 'Avatar',\r\n  Controller = 'Controller',\r\n  Reputation = 'Reputation',\r\n  PermissionRegistry = 'PermissionRegistry',\r\n  VotingMachine = 'VotingMachine',\r\n  DXDVotingMachine = 'DXDVotingMachine',\r\n  WalletScheme1_0 = 'WalletScheme1_0',\r\n  WalletScheme1_1 = 'WalletScheme1_0',\r\n  Multicall = 'Multicall',\r\n  Redeemer = 'Redeemer',\r\n}\r\n\r\nexport interface ChainData {\r\n  currentBlockNumber: number;\r\n}\r\n\r\nenum ERRORS {\r\n  UntrackedChainId = 'Attempting to access data for untracked chainId',\r\n  ContextNotFound = 'Specified context name note stored',\r\n  BlockchainActionNoAccount = 'Attempting to do blockchain transaction with no account',\r\n  BlockchainActionNoChainId = 'Attempting to do blockchain transaction with no chainId',\r\n  BlockchainActionNoResponse = 'No error or response received from blockchain action',\r\n}\r\n\r\nexport default class ProviderStore {\r\n  context: RootContext;\r\n  web3Context: Web3ReactContextInterface;\r\n  chainData: ChainData;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n    this.web3Context = null;\r\n    this.chainData = { currentBlockNumber: -1 };\r\n\r\n    makeObservable(this, {\r\n      web3Context: observable,\r\n      chainData: observable,\r\n      setWeb3Context: action,\r\n      sendTransaction: action,\r\n      sendRawTransaction: action,\r\n      setCurrentBlockNumber: action,\r\n    });\r\n  }\r\n\r\n  getCurrentBlockNumber(): number {\r\n    return this.chainData.currentBlockNumber;\r\n  }\r\n\r\n  setCurrentBlockNumber(blockNumber: number): void {\r\n    console.debug('[ProviderStore] Setting current block number', blockNumber);\r\n    this.chainData.currentBlockNumber = blockNumber;\r\n  }\r\n\r\n  getContract(\r\n    web3React: Web3ReactContextInterface,\r\n    type: ContractType,\r\n    address: string,\r\n    signerAccount?: string\r\n  ): ethers.Contract {\r\n    const { library } = web3React;\r\n\r\n    if (signerAccount) {\r\n      return new library.eth.Contract(schema[type], address, {\r\n        from: signerAccount,\r\n      });\r\n    }\r\n\r\n    return new library.eth.Contract(schema[type], address);\r\n  }\r\n\r\n  getActiveWeb3React(): Web3ReactContextInterface {\r\n    return this.web3Context;\r\n  }\r\n\r\n  setWeb3Context(context: Web3ReactContextInterface) {\r\n    console.debug('[ProviderStore] Setting Web3 context', context);\r\n    this.web3Context = context;\r\n  }\r\n\r\n  sendTransaction = (\r\n    web3React: Web3ReactContextInterface,\r\n    contractType: ContractType,\r\n    contractAddress: string,\r\n    action: string,\r\n    params: any[],\r\n    overrides?: any\r\n  ): PromiEvent<any> => {\r\n    const { transactionStore } = this.context;\r\n    const { chainId, account } = web3React;\r\n\r\n    overrides = overrides ? overrides : {};\r\n\r\n    if (!account) {\r\n      throw new Error(ERRORS.BlockchainActionNoAccount);\r\n    }\r\n\r\n    if (!chainId) {\r\n      throw new Error(ERRORS.BlockchainActionNoChainId);\r\n    }\r\n\r\n    const contract = this.getContract(\r\n      web3React,\r\n      contractType,\r\n      contractAddress,\r\n      account\r\n    );\r\n\r\n    const response = sendAction({\r\n      contract,\r\n      action,\r\n      sender: account,\r\n      data: params,\r\n      overrides,\r\n    }).on(TXEvents.TX_HASH, hash => {\r\n      transactionStore.addTransactionRecord(account, hash);\r\n    });\r\n\r\n    return response;\r\n  };\r\n\r\n  sign = (\r\n    web3React: Web3ReactContextInterface,\r\n    dataToSign: any\r\n  ): Promise<any> => {\r\n    const { chainId, account } = web3React;\r\n\r\n    if (!account) {\r\n      throw new Error(ERRORS.BlockchainActionNoAccount);\r\n    }\r\n\r\n    if (!chainId) {\r\n      throw new Error(ERRORS.BlockchainActionNoChainId);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      web3React.library.eth.currentProvider.sendAsync(\r\n        {\r\n          method: 'eth_sign',\r\n          params: [account, dataToSign],\r\n          from: account,\r\n        },\r\n        function (err, result) {\r\n          if (err) console.error(err);\r\n          resolve(result);\r\n        }\r\n      );\r\n    });\r\n  };\r\n\r\n  signTypedV3 = (\r\n    web3React: Web3ReactContextInterface,\r\n    dataToSign: any\r\n  ): Promise<any> => {\r\n    const { chainId, account } = web3React;\r\n\r\n    if (!account) {\r\n      throw new Error(ERRORS.BlockchainActionNoAccount);\r\n    }\r\n\r\n    if (!chainId) {\r\n      throw new Error(ERRORS.BlockchainActionNoChainId);\r\n    }\r\n    const msgParams = JSON.stringify({\r\n      types: {\r\n        EIP712Domain: [\r\n          { name: 'name', type: 'string' },\r\n          { name: 'version', type: 'string' },\r\n          { name: 'chainId', type: 'uint256' },\r\n          { name: 'verifyingContract', type: 'address' },\r\n        ],\r\n        Broadcast: [\r\n          { name: 'topic', type: 'bytes32' },\r\n          { name: 'message', type: 'string' },\r\n        ],\r\n      },\r\n      primaryType: 'Broadcast',\r\n      domain: {\r\n        name: 'MessageLogger',\r\n        version: '1',\r\n        chainId: '0x04',\r\n        verifyingContract: '0x0c850e40f72bdc012578788e25a02aadc0da85da',\r\n      },\r\n      message: dataToSign,\r\n    });\r\n\r\n    return new Promise((resolve, reject) => {\r\n      web3React.library.eth.currentProvider.sendAsync(\r\n        {\r\n          method: 'eth_signTypedData_v3',\r\n          params: [account, msgParams],\r\n          from: account,\r\n        },\r\n        function (err, result) {\r\n          if (err) console.error(err);\r\n          resolve(result);\r\n        }\r\n      );\r\n    });\r\n  };\r\n\r\n  sendRawTransaction = (\r\n    web3React: Web3ReactContextInterface,\r\n    to: string,\r\n    data: string,\r\n    value: string\r\n  ): PromiEvent<any> => {\r\n    const { transactionStore } = this.context;\r\n    const { chainId, account } = web3React;\r\n\r\n    if (!account) {\r\n      throw new Error(ERRORS.BlockchainActionNoAccount);\r\n    }\r\n\r\n    if (!chainId) {\r\n      throw new Error(ERRORS.BlockchainActionNoChainId);\r\n    }\r\n\r\n    const promiEvent = new PromiEvent<any>(() => {\r\n      web3React.library.eth\r\n        .sendTransaction({ from: account, to: to, data: data, value: value })\r\n        .once('transactionHash', hash => {\r\n          transactionStore.addTransactionRecord(account, hash);\r\n          promiEvent.emit(TXEvents.TX_HASH, hash);\r\n          console.debug(TXEvents.TX_HASH, hash);\r\n        })\r\n        .once('receipt', receipt => {\r\n          promiEvent.emit(TXEvents.RECEIPT, receipt);\r\n          console.debug(TXEvents.RECEIPT, receipt);\r\n        })\r\n        .once('confirmation', (confNumber, receipt) => {\r\n          promiEvent.emit(TXEvents.CONFIRMATION, {\r\n            confNumber,\r\n            receipt,\r\n          });\r\n          console.debug(TXEvents.CONFIRMATION, {\r\n            confNumber,\r\n            receipt,\r\n          });\r\n        })\r\n        .on('error', error => {\r\n          console.debug(error.code);\r\n          promiEvent.emit(TXEvents.INVARIANT, error);\r\n          console.debug(TXEvents.INVARIANT, error);\r\n        })\r\n        .then(receipt => {\r\n          promiEvent.emit(TXEvents.FINALLY, receipt);\r\n          console.debug(TXEvents.FINALLY, receipt);\r\n        })\r\n        .catch(e => {\r\n          console.debug('rejected', e);\r\n        });\r\n    });\r\n\r\n    return promiEvent;\r\n  };\r\n}\r\n","import { action, makeObservable } from 'mobx';\r\nimport contentHash from 'content-hash';\r\nimport PromiEvent from 'promievent';\r\nimport RootContext from '../contexts';\r\nimport { ContractType } from '../stores/Provider';\r\nimport {\r\n  BigNumber,\r\n  hashVote,\r\n  MAX_UINT,\r\n  toEthSignedMessageHash,\r\n} from '../utils';\r\n\r\nexport default class DaoService {\r\n  context: RootContext;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n\r\n    makeObservable(this, {\r\n      createProposal: action,\r\n      vote: action,\r\n      approveVotingMachineToken: action,\r\n      stake: action,\r\n      execute: action,\r\n      redeem: action,\r\n    });\r\n  }\r\n\r\n  encodeControllerGenericCall(to: string, callData: string, value: BigNumber) {\r\n    const { providerStore, configStore } = this.context;\r\n    const controller = providerStore.getContract(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.Controller,\r\n      configStore.getNetworkContracts().controller\r\n    );\r\n    const avatarAddress = configStore.getNetworkContracts().avatar;\r\n    return controller.methods\r\n      .genericCall(to, callData, avatarAddress, value)\r\n      .encodeABI();\r\n  }\r\n\r\n  createProposal(\r\n    scheme: string,\r\n    schemeType: string,\r\n    proposalData: any\r\n  ): PromiEvent<any> {\r\n    const { providerStore, configStore } = this.context;\r\n    const networkContracts = configStore.getNetworkContracts();\r\n    const { library } = providerStore.getActiveWeb3React();\r\n\r\n    if (schemeType === 'ContributionReward') {\r\n      // function proposeContributionReward(\r\n      //   Avatar _avatar,\r\n      //   string memory _descriptionHash,\r\n      //   int256 _reputationChange,\r\n      //   uint256[5] memory _rewards,\r\n      //   IERC20 _externalToken,\r\n      //   address payable _beneficiary\r\n      // )\r\n      return providerStore.sendRawTransaction(\r\n        providerStore.getActiveWeb3React(),\r\n        scheme,\r\n        library.eth.abi.encodeFunctionCall(\r\n          {\r\n            name: 'proposeContributionReward',\r\n            type: 'function',\r\n            inputs: [\r\n              { type: 'address', name: '_avatar' },\r\n              { type: 'string', name: '_descriptionHash' },\r\n              { type: 'int256', name: '_reputationChange' },\r\n              { type: 'uint256[5]', name: '_rewards' },\r\n              { type: 'address', name: '_externalToken' },\r\n              { type: 'address', name: '_beneficiary' },\r\n            ],\r\n          },\r\n          [\r\n            networkContracts.avatar,\r\n            contentHash.decode(proposalData.descriptionHash),\r\n            proposalData.reputationChange,\r\n            [0, proposalData.ethValue, proposalData.tokenValue, 0, 1],\r\n            proposalData.externalToken,\r\n            proposalData.beneficiary,\r\n          ]\r\n        ),\r\n        '0'\r\n      );\r\n    } else if (schemeType === 'GenericMulticall') {\r\n      // function proposeCalls(\r\n      //   address[] memory _contractsToCall,\r\n      //   bytes[] memory _callsData,\r\n      //   uint256[] memory _values,\r\n      //   string memory _descriptionHash\r\n      // )\r\n      return providerStore.sendRawTransaction(\r\n        providerStore.getActiveWeb3React(),\r\n        scheme,\r\n        library.eth.abi.encodeFunctionCall(\r\n          {\r\n            name: 'proposeCalls',\r\n            type: 'function',\r\n            inputs: [\r\n              { type: 'address[]', name: '_contractsToCall' },\r\n              { type: 'bytes[]', name: '_callsData' },\r\n              { type: 'uint256[]', name: '_values' },\r\n              { type: 'string', name: '_descriptionHash' },\r\n            ],\r\n          },\r\n          [\r\n            proposalData.to,\r\n            proposalData.data,\r\n            proposalData.value,\r\n            contentHash.decode(proposalData.descriptionHash),\r\n          ]\r\n        ),\r\n        '0'\r\n      );\r\n    } else if (schemeType === 'SchemeRegistrar') {\r\n      // function proposeScheme(\r\n      //     Avatar _avatar,\r\n      //     address _scheme,\r\n      //     bytes32 _parametersHash,\r\n      //     bytes4 _permissions,\r\n      //     string memory _descriptionHash\r\n      // )\r\n      if (proposalData.register) {\r\n        return providerStore.sendRawTransaction(\r\n          providerStore.getActiveWeb3React(),\r\n          scheme,\r\n          library.eth.abi.encodeFunctionCall(\r\n            {\r\n              name: 'proposeScheme',\r\n              type: 'function',\r\n              inputs: [\r\n                { type: 'address', name: '_avatar' },\r\n                { type: 'address', name: '_scheme' },\r\n                { type: 'bytes32', name: '_parametersHash' },\r\n                { type: 'bytes4', name: '_permissions' },\r\n                { type: 'string', name: '_descriptionHash' },\r\n              ],\r\n            },\r\n            [\r\n              networkContracts.avatar,\r\n              proposalData.schemeAddress,\r\n              proposalData.parametersHash,\r\n              proposalData.permissions,\r\n              contentHash.decode(proposalData.descriptionHash),\r\n            ]\r\n          ),\r\n          '0'\r\n        );\r\n        // function proposeToRemoveScheme(\r\n        //   Avatar _avatar, address _scheme, string memory _descriptionHash\r\n        // )\r\n      } else {\r\n        return providerStore.sendRawTransaction(\r\n          providerStore.getActiveWeb3React(),\r\n          scheme,\r\n          library.eth.abi.encodeFunctionCall(\r\n            {\r\n              name: 'proposeToRemoveScheme',\r\n              type: 'function',\r\n              inputs: [\r\n                { type: 'address', name: '_avatar' },\r\n                { type: 'address', name: '_scheme' },\r\n                { type: 'string', name: '_descriptionHash' },\r\n              ],\r\n            },\r\n            [\r\n              networkContracts.avatar,\r\n              proposalData.schemeAddress,\r\n              contentHash.decode(proposalData.descriptionHash),\r\n            ]\r\n          ),\r\n          '0'\r\n        );\r\n      }\r\n    } else {\r\n      return providerStore.sendTransaction(\r\n        providerStore.getActiveWeb3React(),\r\n        ContractType.WalletScheme1_0,\r\n        scheme,\r\n        'proposeCalls',\r\n        [\r\n          proposalData.to,\r\n          proposalData.data,\r\n          proposalData.value,\r\n          proposalData.titleText,\r\n          proposalData.descriptionHash,\r\n        ],\r\n        {}\r\n      );\r\n    }\r\n  }\r\n\r\n  vote(decision: string, amount: string, proposalId: string): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    const { account } = providerStore.getActiveWeb3React();\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.VotingMachine,\r\n      daoStore.getVotingMachineOfProposal(proposalId).address,\r\n      'vote',\r\n      [proposalId, decision, amount, account],\r\n      {}\r\n    );\r\n  }\r\n\r\n  async signVote(\r\n    votingMachineAddress: string,\r\n    proposalId: string,\r\n    decision: string,\r\n    repAmount: string,\r\n    addSignatureDomain: boolean = true\r\n  ): Promise<string> {\r\n    const { account } = this.context.providerStore.getActiveWeb3React();\r\n\r\n    // Step 1: The Vote is hashed, and the hash is signed.\r\n    // keccak256(abi.encodePacked( votingMachine, proposalId, voter, voteDecision, amount ));\r\n    const hashedVote = hashVote(\r\n      votingMachineAddress,\r\n      proposalId,\r\n      account,\r\n      decision,\r\n      repAmount\r\n    );\r\n    console.log('Hashed vote:', hashedVote);\r\n\r\n    const voteSignature = await this.context.providerStore.sign(\r\n      this.context.providerStore.getActiveWeb3React(),\r\n      addSignatureDomain ? toEthSignedMessageHash(hashedVote) : hashedVote\r\n    );\r\n\r\n    return voteSignature.result;\r\n  }\r\n\r\n  executeSignedVote(\r\n    votingMachineAddress: string,\r\n    proposalId: string,\r\n    voter: string,\r\n    decision: string,\r\n    amount: string,\r\n    signature: string\r\n  ): PromiEvent<any> {\r\n    const { providerStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.DXDVotingMachine,\r\n      votingMachineAddress,\r\n      'executeSignedVote',\r\n      [votingMachineAddress, proposalId, voter, decision, amount, signature],\r\n      {}\r\n    );\r\n  }\r\n\r\n  approveVotingMachineToken(votingMachineAddress): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.ERC20,\r\n      daoStore.daoCache.votingMachines[votingMachineAddress.address].token,\r\n      'approve',\r\n      [votingMachineAddress.address, MAX_UINT],\r\n      {}\r\n    );\r\n  }\r\n\r\n  stake(decision: string, amount: string, proposalId: string): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.VotingMachine,\r\n      daoStore.getVotingMachineOfProposal(proposalId).address,\r\n      'stake',\r\n      [proposalId, decision, amount],\r\n      {}\r\n    );\r\n  }\r\n\r\n  execute(proposalId: string): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.VotingMachine,\r\n      daoStore.getVotingMachineOfProposal(proposalId).address,\r\n      'execute',\r\n      [proposalId],\r\n      {}\r\n    );\r\n  }\r\n\r\n  redeem(proposalId: string, account: string): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.VotingMachine,\r\n      daoStore.getVotingMachineOfProposal(proposalId).address,\r\n      'redeem',\r\n      [proposalId, account],\r\n      {}\r\n    );\r\n  }\r\n\r\n  redeemDaoBounty(proposalId: string, account: string): PromiEvent<any> {\r\n    const { providerStore, daoStore } = this.context;\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.VotingMachine,\r\n      daoStore.getVotingMachineOfProposal(proposalId).address,\r\n      'redeemDaoBounty',\r\n      [proposalId, account],\r\n      {}\r\n    );\r\n  }\r\n\r\n  redeemContributionReward(\r\n    redeemerAddress: string,\r\n    votingMachineAddress: string,\r\n    schemeAddress: string,\r\n    proposalId: string,\r\n    beneficiary: string\r\n  ): PromiEvent<any> {\r\n    const { providerStore, configStore } = this.context;\r\n    // I have NO IDEA why it works with the voting machine address and scheme address are inverted in the function call,\r\n    // Alchemy uses it like that, weird.\r\n    return providerStore.sendTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      ContractType.Redeemer,\r\n      redeemerAddress,\r\n      'redeem',\r\n      [\r\n        votingMachineAddress,\r\n        schemeAddress,\r\n        proposalId,\r\n        configStore.getNetworkContracts().avatar,\r\n        beneficiary,\r\n      ],\r\n      {}\r\n    );\r\n  }\r\n\r\n  redeemContributionRewardCall(\r\n    redeemerAddress: string,\r\n    votingMachineAddress: string,\r\n    schemeAddress: string,\r\n    proposalId: string,\r\n    beneficiary: string\r\n  ): PromiEvent<any> {\r\n    const { providerStore, configStore } = this.context;\r\n    const web3 = providerStore.getActiveWeb3React().library;\r\n    return web3.eth.call({\r\n      to: redeemerAddress,\r\n      data: web3.eth.abi.encodeFunctionCall(\r\n        {\r\n          name: 'redeem',\r\n          type: 'function',\r\n          inputs: [\r\n            {\r\n              type: 'address',\r\n              name: '_contributionReward',\r\n            },\r\n            {\r\n              type: 'address',\r\n              name: '_genesisProtocol',\r\n            },\r\n            {\r\n              type: 'bytes32',\r\n              name: '_proposalId',\r\n            },\r\n            {\r\n              type: 'address',\r\n              name: '_avatar',\r\n            },\r\n            {\r\n              type: 'address',\r\n              name: '_beneficiary',\r\n            },\r\n          ],\r\n        },\r\n        [\r\n          votingMachineAddress,\r\n          schemeAddress,\r\n          proposalId,\r\n          configStore.getNetworkContracts().avatar,\r\n          beneficiary,\r\n        ]\r\n      ),\r\n    });\r\n  }\r\n\r\n  executeMulticall(schemeAddress: string, proposalId: string): PromiEvent<any> {\r\n    const { providerStore } = this.context;\r\n    const web3 = providerStore.getActiveWeb3React().library;\r\n    return providerStore.sendRawTransaction(\r\n      providerStore.getActiveWeb3React(),\r\n      schemeAddress,\r\n      web3.eth.abi.encodeFunctionCall(\r\n        {\r\n          name: 'execute',\r\n          type: 'function',\r\n          inputs: [\r\n            {\r\n              type: 'bytes32',\r\n              name: '_proposalId',\r\n            },\r\n          ],\r\n        },\r\n        [proposalId]\r\n      ),\r\n      '0'\r\n    );\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport _ from 'lodash';\r\nimport { ContractType } from '../stores/Provider';\r\n\r\nexport interface EventCall {\r\n  contractType: ContractType;\r\n  address: string;\r\n  eventName: string;\r\n  fromBlock: number;\r\n  toBlock: number;\r\n  executed?: boolean;\r\n}\r\n\r\nexport default class EventsService {\r\n  context: RootContext;\r\n\r\n  activeEventsCalls: EventCall[];\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n    this.activeEventsCalls = [];\r\n  }\r\n\r\n  async getEvents(\r\n    contractType: ContractType,\r\n    address: string,\r\n    eventName: string,\r\n    fromBlock: number,\r\n    toBlock: number\r\n  ) {\r\n    const { providerStore } = this.context;\r\n    const contract = providerStore.getContract(\r\n      providerStore.getActiveWeb3React(),\r\n      contractType,\r\n      address\r\n    );\r\n    return _.orderBy(\r\n      await contract.getPastEvents(eventName, {\r\n        fromBlock: fromBlock,\r\n        toBlock: toBlock,\r\n      }),\r\n      ['blockNumber', 'transactionIndex', 'logIndex'],\r\n      ['asc', 'asc', 'asc']\r\n    );\r\n  }\r\n\r\n  async executeActiveEventCalls() {\r\n    return await Promise.all(\r\n      this.activeEventsCalls.map(async activeEventCall => {\r\n        return await this.getEvents(\r\n          activeEventCall.contractType,\r\n          activeEventCall.address,\r\n          activeEventCall.eventName,\r\n          activeEventCall.fromBlock,\r\n          activeEventCall.toBlock\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  addEventsCalls(events: EventCall[]) {\r\n    events.forEach(event => this.addEventCall(event));\r\n  }\r\n\r\n  addEventCall(event: EventCall) {\r\n    this.activeEventsCalls.push(event);\r\n  }\r\n\r\n  resetActiveEventCalls() {\r\n    this.activeEventsCalls = [];\r\n  }\r\n}\r\n","import axios from 'axios';\r\nimport * as IPFS from 'ipfs';\r\nimport CID from 'cids';\r\nimport { sleep } from '../utils';\r\nimport RootContext from '../contexts';\r\n\r\nexport default class IPFSService {\r\n  private static SLEEP_MS = 1000;\r\n\r\n  context: RootContext;\r\n  starting: Boolean = false;\r\n  private ipfs: IPFS.IPFS = null;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async getIpfs(): Promise<IPFS.IPFS> {\r\n    if (this.starting) {\r\n      console.debug(\r\n        `[IPFS] IPFS is still starting. Sleeping for ${IPFSService.SLEEP_MS}ms.`\r\n      );\r\n      await sleep(IPFSService.SLEEP_MS);\r\n      return this.getIpfs();\r\n    }\r\n\r\n    if (!this.ipfs) {\r\n      console.debug('[IPFS] Initializing IPFS instance...');\r\n      await this.start();\r\n    } else {\r\n      console.debug('[IPFS] Reusing existing IPFS instance.');\r\n    }\r\n\r\n    return this.ipfs;\r\n  }\r\n\r\n  async add(content: string) {\r\n    const ipfs = await this.getIpfs();\r\n    const { cid } = await ipfs.add(content);\r\n    console.debug(`[IPFS] Added content with CID ${cid.toString()}.`);\r\n    return cid.toString();\r\n  }\r\n\r\n  async pin(hash: string) {\r\n    const ipfs = await this.getIpfs();\r\n    const cid = new CID(hash);\r\n    console.debug('[IPFS] Pinning IPFS CID', cid);\r\n    return ipfs.pin.add(cid.toString());\r\n  }\r\n\r\n  async getContentFromIPFS(hash: string, timeout = 60000) {\r\n    const response = await Promise.any([\r\n      axios.request({\r\n        url: 'https://dxgov.mypinata.cloud/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://ipfs.io/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://gateway.ipfs.io/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://cloudflare-ipfs.com/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://dweb.link/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n      axios.request({\r\n        url: 'https://infura-ipfs.io/ipfs/' + hash,\r\n        method: 'GET',\r\n        timeout,\r\n      }),\r\n    ]);\r\n    return response.data;\r\n  }\r\n\r\n  async uploadProposalMetadata(\r\n    title: string,\r\n    description: string,\r\n    tags: string[],\r\n    pinataService\r\n  ) {\r\n    const bodyTextToUpload = JSON.stringify({\r\n      description,\r\n      title,\r\n      tags: [...tags, 'dxvote'],\r\n      url: '',\r\n    });\r\n\r\n    const hash = await this.add(bodyTextToUpload);\r\n    localStorage.setItem('dxvote-newProposal-hash', hash);\r\n\r\n    if (pinataService.auth) {\r\n      const pinataPin = await pinataService.pin(hash);\r\n      console.debug('[PINATA PIN]', pinataPin.toString());\r\n    } else {\r\n      console.debug('[PINATA PIN] NOT AUTHENTICATED');\r\n    }\r\n    const ipfsPin = await this.pin(hash);\r\n    console.debug('[IPFS PIN]', ipfsPin);\r\n\r\n    let uploaded = false;\r\n    while (!uploaded) {\r\n      await sleep(1000);\r\n      const ipfsContent = await this.getContentFromIPFS(hash, 5000);\r\n      console.debug('[IPFS CONTENT]', ipfsContent);\r\n      if (JSON.stringify(ipfsContent) === bodyTextToUpload) uploaded = true;\r\n    }\r\n    return hash;\r\n  }\r\n\r\n  async upload(content: string) {\r\n    const hash = await this.add(content);\r\n\r\n    if (this.context.pinataService.auth) {\r\n      const pinataPin = await this.context.pinataService.pin(hash);\r\n      console.debug('[PINATA PIN]', pinataPin.toString());\r\n    }\r\n    const ipfsPin = await this.pin(hash);\r\n    console.debug('[IPFS PIN]', ipfsPin);\r\n\r\n    let uploaded = false;\r\n    while (!uploaded) {\r\n      await sleep(1000);\r\n      const ipfsContent = await this.getContentFromIPFS(hash, 5000);\r\n      console.debug('[IPFS CONTENT]', ipfsContent);\r\n      if (content === content) uploaded = true;\r\n    }\r\n    return hash;\r\n  }\r\n\r\n  private async start() {\r\n    if (this.starting) return;\r\n\r\n    this.starting = true;\r\n    try {\r\n      this.ipfs = await IPFS.create();\r\n      console.debug('[IPFS] Initialized IPFS instance.');\r\n    } catch (e) {\r\n      console.error('[IPFS] Error initializing IPFS instance.', e);\r\n    } finally {\r\n      this.starting = false;\r\n    }\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport contentHash from 'content-hash';\r\n\r\nexport default class PinataService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n  defaultApiKey =\r\n    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI4MTJmMzIwZC1iOTA1LTQwOTgtYmViZC1jMjMwNzhlNDNmM2MiLCJlbWFpbCI6ImZsdWlkZHJvcDU2NDgyM0BnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwicGluX3BvbGljeSI6eyJyZWdpb25zIjpbeyJpZCI6Ik5ZQzEiLCJkZXNpcmVkUmVwbGljYXRpb25Db3VudCI6MX1dLCJ2ZXJzaW9uIjoxfSwibWZhX2VuYWJsZWQiOmZhbHNlfSwiYXV0aGVudGljYXRpb25UeXBlIjoic2NvcGVkS2V5Iiwic2NvcGVkS2V5S2V5IjoiYmFhMjllYjUxZWYzZWQyMDY4MWEiLCJzY29wZWRLZXlTZWNyZXQiOiI0OTIyYzQ2MThhYWZlNzZmNzhiNWQzNzU0NzY4MjBiNTk1MWM5MjdkZjFiNzY3ZGI3OWUzMGY5OTI3MDBmYTc5IiwiaWF0IjoxNjUyMTg4MjAyfQ.c8CpCVxvdknULzW6dJALyWgHD_DMq5167Nlb1KkXNRI';\r\n\r\n  async updatePinList() {\r\n    // const pinList = await this.getPinList();\r\n    const ipfsHashes = this.context.daoStore.daoCache.ipfsHashes;\r\n    // const alreadyPinned = pinList.data.rows;\r\n    for (let i = 0; i < ipfsHashes.length; i++) {\r\n      // if (alreadyPinned.indexOf(pinned => alreadyPinned.ipfs_pin_hash === ipfsHashes[i].hash) < 0) {\r\n      //   console.debug('[PINATA] Pinning:', ipfsHashes[i].hash);\r\n      // } else {\r\n      //   console.debug('[PINATA] Alpready pinned:', ipfsHashes[i].hash);\r\n      // }\r\n    }\r\n  }\r\n\r\n  async isAuthenticated() {\r\n    const pinataApiKey = this.context.configStore.getLocalConfig().pinata;\r\n    try {\r\n      const auth = await axios({\r\n        method: 'GET',\r\n        url: 'https://api.pinata.cloud/data/testAuthentication',\r\n        headers: {\r\n          Authorization: `Bearer ${\r\n            pinataApiKey ? pinataApiKey : this.defaultApiKey\r\n          }`,\r\n        },\r\n      });\r\n      this.auth = auth.status === 200;\r\n    } catch (error) {\r\n      this.auth = false;\r\n    }\r\n  }\r\n\r\n  async pin(hashToPin: String) {\r\n    const pinataApiKey = this.context.configStore.getLocalConfig().pinata;\r\n    return axios({\r\n      method: 'POST',\r\n      url: 'https://api.pinata.cloud/pinning/pinByHash',\r\n      data: {\r\n        hashToPin,\r\n        pinataMetadata: {\r\n          name: `DXdao ${this.context.configStore.getActiveChainName()} DescriptionHash ${contentHash.fromIpfs(\r\n            hashToPin\r\n          )}`,\r\n          keyValues: { type: 'proposal' },\r\n        },\r\n      },\r\n      headers: {\r\n        Authorization: `Bearer ${\r\n          pinataApiKey ? pinataApiKey : this.defaultApiKey\r\n        }`,\r\n      },\r\n    });\r\n  }\r\n\r\n  async getPinList() {\r\n    const pinataApiKey = this.context.configStore.getLocalConfig().pinata;\r\n    return axios({\r\n      method: 'GET',\r\n      url: `https://api.pinata.cloud/data/pinList?pageLimit=1000&metadata[name]=DXdao ${this.context.configStore.getActiveChainName()}`,\r\n      headers: {\r\n        Authorization: `Bearer ${\r\n          pinataApiKey ? pinataApiKey : this.defaultApiKey\r\n        }`,\r\n      },\r\n    });\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport { appendEthAPIKey, NETWORK_APIS } from 'utils';\r\n\r\nexport default class EtherscanService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n  etherscanAPIKey: string;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n    this.etherscanAPIKey = this.context.configStore.getLocalConfig().etherscan;\r\n  }\r\n\r\n  async isAuthenticated(networkName: string) {\r\n    const { account } = this.context.providerStore.getActiveWeb3React();\r\n    let getContractURL: URL | undefined;\r\n    if (account && this.etherscanAPIKey && this.etherscanAPIKey.length > 0) {\r\n      const params = new URLSearchParams({\r\n        module: 'account',\r\n        action: 'balance',\r\n        address: account,\r\n        apikey: appendEthAPIKey(networkName, this.etherscanAPIKey),\r\n        tag: 'latest',\r\n      });\r\n      getContractURL = new URL(\r\n        '/api?' + params.toString(),\r\n        NETWORK_APIS[networkName]\r\n      );\r\n      this.auth = false;\r\n    }\r\n\r\n    if (this.etherscanAPIKey && this.etherscanAPIKey.length > 0) {\r\n      const auth = await axios({\r\n        method: 'GET',\r\n        url: getContractURL.toString(),\r\n      });\r\n      this.auth = auth.data.status === 1;\r\n    }\r\n  }\r\n\r\n  async getContractABI(address: string, networkName: string) {\r\n    const params = new URLSearchParams({\r\n      module: 'contract',\r\n      action: 'getabi',\r\n      address: address,\r\n      apikey: appendEthAPIKey(networkName, this.etherscanAPIKey),\r\n    });\r\n    const getContractURL = new URL(\r\n      '/api?' + params.toString(),\r\n      NETWORK_APIS[networkName]\r\n    );\r\n    return axios({\r\n      method: 'GET',\r\n      url: getContractURL.toString(),\r\n    });\r\n  }\r\n\r\n  async getContractSource(address: string, networkName: string) {\r\n    const params = new URLSearchParams({\r\n      module: 'contract',\r\n      action: 'getsourcecode',\r\n      address: address,\r\n      apikey: appendEthAPIKey(networkName, this.etherscanAPIKey),\r\n    });\r\n\r\n    const getContractURL = new URL(\r\n      '/api?' + params.toString(),\r\n      NETWORK_APIS[networkName]\r\n    );\r\n\r\n    return axios({\r\n      method: 'GET',\r\n      url: getContractURL.toString(),\r\n    });\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport web3 from 'web3';\r\n\r\nexport default class CoingeckoService {\r\n  context: RootContext;\r\n  prices: any = {};\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async loadPrices() {\r\n    const tokens = this.context.configStore.getTokensToFetchPrice();\r\n    const networkName =\r\n      this.context.configStore.getActiveChainName() === 'mainnet'\r\n        ? 'ethereum'\r\n        : this.context.configStore.getActiveChainName() === 'xdai'\r\n        ? 'xdai'\r\n        : '';\r\n\r\n    if (networkName === 'ethereum' || networkName === 'xdai') {\r\n      let tokenAddresses = '';\r\n      tokens.map((token, i) => {\r\n        if (i === tokens.length - 1) tokenAddresses += token.address;\r\n        else tokenAddresses += token.address + '%2C';\r\n      });\r\n      const pricesResponse = await Promise.all([\r\n        axios({\r\n          method: 'GET',\r\n          url: `https://api.coingecko.com/api/v3/simple/token_price/${networkName}?contract_addresses=${tokenAddresses}&vs_currencies=usd`,\r\n        }),\r\n        axios({\r\n          method: 'GET',\r\n          url: `https://api.coingecko.com/api/v3/simple/price?ids=${networkName}&vs_currencies=usd`,\r\n        }),\r\n      ]);\r\n\r\n      if (\r\n        pricesResponse[0].status === 200 &&\r\n        pricesResponse[1].status === 200\r\n      ) {\r\n        this.prices = pricesResponse[0].data;\r\n\r\n        Object.keys(this.prices).map(tokenAddress => {\r\n          this.prices[web3.utils.toChecksumAddress(tokenAddress)] =\r\n            this.prices[tokenAddress];\r\n          delete this.prices[tokenAddress];\r\n        });\r\n\r\n        this.prices['0x0000000000000000000000000000000000000000'] =\r\n          pricesResponse[1].data[networkName];\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  getPrices() {\r\n    return this.prices;\r\n  }\r\n\r\n  async getCoinData(token: String) {\r\n    return (\r\n      await axios({\r\n        method: 'GET',\r\n        url: `https://api.coingecko.com/api/v3/coins/${token}`,\r\n      })\r\n    ).data;\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport { ETH_NETWORKS_IDS } from 'provider/connectors';\r\nimport { DEFAULT_RPC_URLS, INFURA_NETWORK_NAMES } from 'utils';\r\n\r\nexport default class InfuraService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async isAuthenticated() {\r\n    const infuraAPIKey = this.context.configStore.getLocalConfig().infura;\r\n    const networkName = INFURA_NETWORK_NAMES[1];\r\n\r\n    if (infuraAPIKey && infuraAPIKey.length > 0) {\r\n      try {\r\n        const auth = await axios({\r\n          method: 'POST',\r\n          url: `https://${networkName}.infura.io/v3/${infuraAPIKey}`,\r\n          data: {\r\n            jsonrpc: '2.0',\r\n            method: 'eth_blockNumber',\r\n            params: [],\r\n            id: 1,\r\n          },\r\n        });\r\n        this.auth = auth.status === 200;\r\n      } catch (e) {\r\n        this.auth = false;\r\n      }\r\n    } else {\r\n      this.auth = false;\r\n    }\r\n  }\r\n\r\n  getRpcUrls() {\r\n    const infuraAPIKey = this.context.configStore.getLocalConfig().infura;\r\n    if (!infuraAPIKey) return null;\r\n\r\n    return ETH_NETWORKS_IDS.reduce((prevUrls, chainId) => {\r\n      const infuraNetworkName = INFURA_NETWORK_NAMES[chainId];\r\n\r\n      let infuraUrl: string = null;\r\n      if (infuraNetworkName) {\r\n        infuraUrl = `https://${infuraNetworkName}.infura.io/v3/${infuraAPIKey}`;\r\n      } else {\r\n        infuraUrl = DEFAULT_RPC_URLS[chainId];\r\n      }\r\n\r\n      prevUrls[chainId] = infuraUrl;\r\n      return prevUrls;\r\n    }, {} as Record<number, string>);\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport { ETH_NETWORKS_IDS } from 'provider/connectors';\r\nimport { DEFAULT_RPC_URLS, POKT_NETWORK_URLS } from 'utils';\r\n\r\nexport default class poktService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async isAuthenticated() {\r\n    const poktAPIKey = this.context.configStore.getLocalConfig().pokt;\r\n\r\n    if (poktAPIKey && poktAPIKey.length > 0) {\r\n      try {\r\n        const auth = await axios({\r\n          method: 'POST',\r\n          url: POKT_NETWORK_URLS[1],\r\n          data: {\r\n            jsonrpc: '2.0',\r\n            method: 'eth_blockNumber',\r\n            params: [],\r\n            id: 1,\r\n          },\r\n        });\r\n        this.auth = auth.status === 200;\r\n      } catch (e) {\r\n        this.auth = false;\r\n      }\r\n    } else {\r\n      this.auth = false;\r\n    }\r\n  }\r\n\r\n  getRpcUrls() {\r\n    const poktAPIKey = this.context.configStore.getLocalConfig().pokt;\r\n    if (!poktAPIKey) return null;\r\n\r\n    return ETH_NETWORKS_IDS.reduce((prevUrls, chainId) => {\r\n      const poktNetworkName = POKT_NETWORK_URLS[chainId];\r\n\r\n      let poktUrl: string = null;\r\n      if (poktNetworkName) {\r\n        poktUrl = poktNetworkName;\r\n      } else {\r\n        poktUrl = DEFAULT_RPC_URLS[chainId];\r\n      }\r\n\r\n      prevUrls[chainId] = poktUrl;\r\n      return prevUrls;\r\n    }, {} as Record<number, string>);\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport { ETH_NETWORKS_IDS } from 'provider/connectors';\r\nimport { ALCHEMY_NETWORK_URLS, DEFAULT_RPC_URLS } from 'utils';\r\n\r\nexport default class AlchemyService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async isAuthenticated() {\r\n    const alchemyAPIKey = this.context.configStore.getLocalConfig().alchemy;\r\n    const networkUrl = ALCHEMY_NETWORK_URLS[1];\r\n\r\n    if (alchemyAPIKey && alchemyAPIKey.length > 0) {\r\n      try {\r\n        const auth = await axios({\r\n          method: 'POST',\r\n          url: `https://${networkUrl}/v2/${alchemyAPIKey}`,\r\n          data: {\r\n            jsonrpc: '2.0',\r\n            method: 'eth_blockNumber',\r\n            params: [],\r\n            id: 1,\r\n          },\r\n        });\r\n        this.auth = auth.status === 200;\r\n      } catch (e) {\r\n        this.auth = false;\r\n      }\r\n    } else {\r\n      this.auth = false;\r\n    }\r\n  }\r\n\r\n  getRpcUrls() {\r\n    const alchemyAPIKey = this.context.configStore.getLocalConfig().alchemy;\r\n    if (!alchemyAPIKey) return null;\r\n\r\n    return ETH_NETWORKS_IDS.reduce((prevUrls, chainId) => {\r\n      const networkUrl = ALCHEMY_NETWORK_URLS[chainId];\r\n\r\n      let alchemyUrl: string = null;\r\n      if (networkUrl) {\r\n        alchemyUrl = `https://${networkUrl}/v2/${alchemyAPIKey}`;\r\n      } else {\r\n        alchemyUrl = DEFAULT_RPC_URLS[chainId];\r\n      }\r\n\r\n      prevUrls[chainId] = alchemyUrl;\r\n      return prevUrls;\r\n    }, {} as Record<number, string>);\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport axios from 'axios';\r\nimport { ETH_NETWORKS_IDS } from 'provider/connectors';\r\n\r\nexport default class CustomRpcService {\r\n  context: RootContext;\r\n  auth: Boolean = false;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async isAuthenticated() {\r\n    const customRpcUrl = this.context.configStore.getLocalConfig().customRpcUrl;\r\n\r\n    if (customRpcUrl && customRpcUrl.length > 0) {\r\n      try {\r\n        const auth = await axios({\r\n          method: 'POST',\r\n          url: customRpcUrl,\r\n          data: {\r\n            jsonrpc: '2.0',\r\n            method: 'eth_blockNumber',\r\n            params: [],\r\n            id: 1,\r\n          },\r\n        });\r\n        this.auth = auth.status === 200;\r\n      } catch (e) {\r\n        this.auth = false;\r\n      }\r\n    } else {\r\n      this.auth = false;\r\n    }\r\n  }\r\n\r\n  getRpcUrls() {\r\n    const customRpcUrl = this.context.configStore.getLocalConfig().customRpcUrl;\r\n    if (!customRpcUrl) return null;\r\n\r\n    return ETH_NETWORKS_IDS.reduce((prevUrls, chainId) => {\r\n      prevUrls[chainId] = customRpcUrl;\r\n      return prevUrls;\r\n    }, {} as Record<number, string>);\r\n  }\r\n}\r\n","import { ethers, providers } from 'ethers';\r\nimport RootContext from '../contexts';\r\nexport default class ENSService {\r\n  context: RootContext;\r\n  web3Provider: providers.JsonRpcProvider;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n    this.web3Provider = null;\r\n  }\r\n\r\n  getWeb3Provider() {\r\n    return this.web3Provider;\r\n  }\r\n\r\n  setWeb3Provider(web3Provider: providers.JsonRpcProvider) {\r\n    console.debug('[ENSService] Setting Mainnet Web3 provider', web3Provider);\r\n    this.web3Provider = web3Provider;\r\n  }\r\n\r\n  async resolveENSName(address: string) {\r\n    let name = null;\r\n    try {\r\n      const checksumed = ethers.utils.getAddress(address);\r\n      name = await this.web3Provider.lookupAddress(checksumed);\r\n    } catch (e) {\r\n      console.warn(\r\n        '[ENSService] Error while trying to reverse resolve ENS address.'\r\n      );\r\n    }\r\n    return name;\r\n  }\r\n\r\n  async resolveENSAddress(ensName: string) {\r\n    let address = null;\r\n    try {\r\n      address = await this.web3Provider.resolveName(ensName);\r\n    } catch (e) {\r\n      console.warn(\r\n        '[ENSService] Error while trying to reverse resolve ENS address.'\r\n      );\r\n    }\r\n    return address;\r\n  }\r\n\r\n  async resolveContentHash(ensName: string): Promise<string | null> {\r\n    const resolver = await this.web3Provider.getResolver(ensName);\r\n    const contentHash = await resolver.getContentHash();\r\n    return contentHash.replace('ipfs://', '');\r\n  }\r\n}\r\n","import { sleep } from '../utils';\r\nimport RootContext from '../contexts';\r\nimport OrbitDB from 'orbit-db';\r\n\r\nexport default class OrbitDBService {\r\n  private static SLEEP_MS = 1000;\r\n\r\n  context: RootContext;\r\n  starting: Boolean = false;\r\n  private orbitDB: OrbitDB = null;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async getOrbitDB(): Promise<OrbitDB> {\r\n    if (this.starting) {\r\n      console.debug(\r\n        `[OrbitDb] OrbitDb is still starting. Sleeping for ${OrbitDBService.SLEEP_MS}ms.`\r\n      );\r\n      await sleep(OrbitDBService.SLEEP_MS);\r\n      return this.getOrbitDB();\r\n    }\r\n\r\n    if (!this.orbitDB) {\r\n      console.debug('[OrbitDb] Initializing OrbitDb instance...');\r\n      await this.start();\r\n    } else {\r\n      console.debug('[OrbitDb] Reusing existing OrbitDb instance.');\r\n    }\r\n\r\n    return this.orbitDB;\r\n  }\r\n\r\n  async addLog(topic: string, message: string) {\r\n    const orbitDB = await this.getOrbitDB();\r\n    const eventlog = await orbitDB.eventlog(topic, { write: ['*'] });\r\n    eventlog.events.on(\r\n      'load.progress',\r\n      (address, hash, entry, progress, total) => {\r\n        console.log(address, progress);\r\n      }\r\n    );\r\n    eventlog.events.on(\r\n      'replicate.progress',\r\n      (address, hash, entry, progress, have) => {\r\n        console.log('replicate', progress);\r\n      }\r\n    );\r\n    eventlog.events.on('ready', () => console.log('db ready'));\r\n    await eventlog.load();\r\n    const logAdded = await eventlog.add({ message: message });\r\n    console.log(\r\n      `[OrbitDB] Added log event with topic ${topic} and message ${message} on event ${logAdded}`\r\n    );\r\n    return;\r\n  }\r\n\r\n  async getLogs(topic: string) {\r\n    const orbitDB = await this.getOrbitDB();\r\n    const eventlog = await orbitDB.eventlog(topic, { write: ['*'] });\r\n    await eventlog.load();\r\n    const logs = await eventlog.iterator({ limit: -1 }).collect();\r\n    console.debug(`[OrbitDB] Logs fetched with topic ${topic}`, logs);\r\n    return logs.map(log => log.payload.value.message);\r\n  }\r\n\r\n  private async start() {\r\n    if (this.starting) return;\r\n    const ipfs = await this.context.ipfsService.getIpfs();\r\n    this.starting = true;\r\n    try {\r\n      this.orbitDB = await OrbitDB.createInstance(ipfs);\r\n\r\n      console.debug('[OrbitDB] Initialized OrbitDB instance.');\r\n    } catch (e) {\r\n      console.error('[OrbitDB] Error initializing OrbitDB instance.', e);\r\n    } finally {\r\n      this.starting = false;\r\n    }\r\n  }\r\n}\r\n","import { makeObservable, observable, action } from 'mobx';\r\nimport RootContext from '../contexts';\r\nimport { Web3ReactContextInterface } from '@web3-react/core/dist/types';\r\nimport { TransactionReceipt } from 'web3-core';\r\n\r\nexport interface TransactionRecord {\r\n  hash: string;\r\n  blockNumberChecked: number;\r\n  receipt: TransactionReceipt | undefined;\r\n}\r\n\r\nconst ERRORS = {\r\n  unknownTxHash: 'Transaction hash is not stored',\r\n  unknownNetworkId: 'NetworkID specified is not tracked',\r\n  txHashAlreadyExists: 'Transaction hash already exists for network',\r\n  txHasNoHash: 'Attempting to add transaction record without hash',\r\n};\r\n\r\nexport enum FetchCode {\r\n  SUCCESS,\r\n  FAILURE,\r\n  STALE,\r\n}\r\n\r\nexport interface TransactionRecordMap {\r\n  [index: string]: TransactionRecord[];\r\n}\r\n\r\nexport default class TransactionStore {\r\n  txRecords: TransactionRecordMap;\r\n  context: RootContext;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n    this.txRecords = {};\r\n    makeObservable(this, {\r\n      txRecords: observable,\r\n      checkPendingTransactions: action,\r\n      addTransactionRecord: action,\r\n      reset: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.txRecords = {};\r\n  }\r\n\r\n  // @dev Transactions are pending if we haven't seen their receipt yet\r\n  getPendingTransactions(account: string): TransactionRecord[] {\r\n    if (this.txRecords[account]) {\r\n      const records = this.txRecords[account];\r\n      return records.filter(value => {\r\n        return this.isTxPending(value);\r\n      });\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  getConfirmedTransactions(account: string): TransactionRecord[] {\r\n    if (this.txRecords[account]) {\r\n      const records = this.txRecords[account];\r\n      return records.filter(value => {\r\n        return !this.isTxPending(value);\r\n      });\r\n    }\r\n\r\n    return [];\r\n  }\r\n\r\n  async checkPendingTransactions(\r\n    web3React: Web3ReactContextInterface,\r\n    account\r\n  ): Promise<FetchCode> {\r\n    const { providerStore } = this.context;\r\n    const currentBlock = providerStore.getCurrentBlockNumber();\r\n\r\n    const { library } = web3React;\r\n    if (this.txRecords[account]) {\r\n      const records = this.txRecords[account];\r\n      records.forEach(value => {\r\n        if (this.isTxPending(value) && this.isStale(value, currentBlock)) {\r\n          library.eth\r\n            .getTransactionReceipt(value.hash)\r\n            .then(receipt => {\r\n              value.blockNumberChecked = currentBlock;\r\n              if (receipt) {\r\n                value.receipt = receipt;\r\n              }\r\n            })\r\n            .catch(() => {\r\n              value.blockNumberChecked = currentBlock;\r\n            });\r\n        }\r\n      });\r\n    }\r\n\r\n    return FetchCode.SUCCESS;\r\n  }\r\n\r\n  // @dev Add transaction record. It's in a pending state until mined.\r\n  addTransactionRecord(account: string, txHash: string) {\r\n    const record: TransactionRecord = {\r\n      hash: txHash,\r\n      blockNumberChecked: 0,\r\n      receipt: undefined,\r\n    };\r\n\r\n    if (!txHash) {\r\n      throw new Error('Attempting to add transaction record without hash');\r\n    }\r\n\r\n    let records = this.txRecords[account];\r\n\r\n    if (records) {\r\n      const duplicate = records.find(value => value.hash === txHash);\r\n      if (!!duplicate) {\r\n        throw new Error(ERRORS.txHashAlreadyExists);\r\n      }\r\n      this.txRecords[account].push(record);\r\n    } else {\r\n      this.txRecords[account] = [];\r\n      this.txRecords[account].push(record);\r\n    }\r\n  }\r\n\r\n  isTxPending(txRecord: TransactionRecord): boolean {\r\n    return !txRecord.receipt;\r\n  }\r\n\r\n  isStale(txRecord: TransactionRecord, currentBlock: number) {\r\n    return txRecord.blockNumberChecked < currentBlock;\r\n  }\r\n}\r\n","import { makeObservable, observable, action } from 'mobx';\r\nimport RootContext from '../contexts';\r\n\r\nexport default class ModalStore {\r\n  walletModalVisible: boolean;\r\n  networkModalVisible: boolean;\r\n  context: RootContext;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n    this.walletModalVisible = false;\r\n    this.networkModalVisible = false;\r\n    makeObservable(this, {\r\n      walletModalVisible: observable,\r\n      toggleWalletModal: action,\r\n      setWalletModalVisible: action,\r\n      networkModalVisible: observable,\r\n      toggleNetworkModal: action,\r\n      setNetworkModalVisible: action,\r\n      reset: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.walletModalVisible = false;\r\n    this.networkModalVisible = false;\r\n  }\r\n\r\n  @action toggleWalletModal() {\r\n    this.walletModalVisible = !this.walletModalVisible;\r\n  }\r\n\r\n  @action setWalletModalVisible(visible: boolean) {\r\n    this.walletModalVisible = visible;\r\n  }\r\n\r\n  @action toggleNetworkModal() {\r\n    this.networkModalVisible = !this.networkModalVisible;\r\n  }\r\n\r\n  @action setNetworkModalVisible(visible: boolean) {\r\n    this.networkModalVisible = visible;\r\n  }\r\n}\r\n","import { makeObservable, observable, action } from 'mobx';\r\nimport RootContext from '../contexts';\r\n\r\nimport {\r\n  CACHE_METADATA_ENS,\r\n  getNetworkByName,\r\n  NETWORK_ASSET_SYMBOL,\r\n  NETWORK_NAMES,\r\n  NETWORK_DISPLAY_NAMES,\r\n  DEFAULT_CHAIN_ID,\r\n} from '../utils';\r\nimport { ZERO_ADDRESS, ANY_ADDRESS, ANY_FUNC_SIGNATURE } from '../utils';\r\nimport { getDefaultConfigHashes, getAppConfig } from '../utils/cache';\r\n\r\nexport default class ConfigStore {\r\n  darkMode: boolean;\r\n  networkConfigLoaded: boolean;\r\n  context: RootContext;\r\n  networkConfig: NetworkConfig;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n    this.darkMode = false;\r\n    this.networkConfigLoaded = false;\r\n\r\n    makeObservable(this, {\r\n      darkMode: observable,\r\n      loadNetworkConfig: action,\r\n      toggleDarkMode: action,\r\n      reset: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.networkConfig = getAppConfig()[this.getActiveChainName()];\r\n    this.networkConfigLoaded = false;\r\n  }\r\n\r\n  async loadNetworkConfig() {\r\n    const { ensService, ipfsService } = this.context;\r\n\r\n    this.networkConfig = getAppConfig()[this.getActiveChainName()];\r\n    const isTestingEnv = !window?.location?.href?.includes('dxvote.eth');\r\n\r\n    if (this.getActiveChainName() !== 'localhost' && !this.networkConfigLoaded)\r\n      try {\r\n        const metadataHash = await ensService.resolveContentHash(\r\n          CACHE_METADATA_ENS\r\n        );\r\n        if (!metadataHash)\r\n          throw new Error('Cannot resolve content metadata hash.');\r\n\r\n        if (!isTestingEnv)\r\n          console.debug(\r\n            `[ConfigStore] Found metadata content hash from ENS: ${metadataHash}`,\r\n            metadataHash\r\n          );\r\n\r\n        const configRefs = isTestingEnv\r\n          ? getDefaultConfigHashes()\r\n          : await ipfsService.getContentFromIPFS(metadataHash);\r\n\r\n        const configContentHash = configRefs[this.getActiveChainName()];\r\n        if (!configContentHash)\r\n          throw new Error('Cannot resolve config metadata hash.');\r\n\r\n        console.info(`[ConfigStore] IPFS config hash: ${configContentHash}`);\r\n\r\n        const ipfsConfig = await ipfsService.getContentFromIPFS(\r\n          configContentHash\r\n        );\r\n        console.debug('[ConfigStore] IPFS config content:', ipfsConfig);\r\n        console.debug('[ConfigStore] Default config:', this.networkConfig);\r\n\r\n        // Override defaultConfig to ipfsConfig\r\n        if (ipfsConfig?.version >= this.networkConfig.version)\r\n          this.networkConfig = ipfsConfig;\r\n        this.networkConfigLoaded = true;\r\n      } catch (e) {\r\n        console.warn(\r\n          '[ConfigStore] Could not get the config from ENS. Falling back to configs in the build.',\r\n          this.networkConfig,\r\n          e\r\n        );\r\n      }\r\n    return this.networkConfig;\r\n  }\r\n\r\n  getActiveChainName() {\r\n    return NETWORK_NAMES[\r\n      this.context?.providerStore.getActiveWeb3React().chainId ||\r\n        DEFAULT_CHAIN_ID\r\n    ];\r\n  }\r\n\r\n  getActiveChainDisplayName() {\r\n    return NETWORK_DISPLAY_NAMES[\r\n      this.context?.providerStore.getActiveWeb3React().chainId ||\r\n        DEFAULT_CHAIN_ID\r\n    ];\r\n  }\r\n\r\n  getLocalConfig() {\r\n    const defaultAppConfigs = getAppConfig();\r\n    const defaultConfig = {\r\n      etherscan: '',\r\n      pinata: '',\r\n      rpcType: '',\r\n      infura: '',\r\n      alchemy: '',\r\n      pinOnStart: false,\r\n      mainnet_toBlock: defaultAppConfigs.mainnet.cache.toBlock,\r\n      mainnet_rpcURL: getNetworkByName('mainnet').defaultRpc,\r\n      xdai_toBlock: defaultAppConfigs.xdai.cache.toBlock,\r\n      xdai_rpcURL: getNetworkByName('xdai').defaultRpc,\r\n      rinkeby_toBlock: defaultAppConfigs.rinkeby.cache.toBlock,\r\n      rinkeby_rpcURL: getNetworkByName('rinkeby').defaultRpc,\r\n      arbitrum_toBlock: defaultAppConfigs.arbitrum.cache.toBlock,\r\n      arbitrum_rpcURL: getNetworkByName('arbitrum').defaultRpc,\r\n      arbitrumTestnet_toBlock: defaultAppConfigs.arbitrumTestnet.cache.toBlock,\r\n      arbitrumTestnet_rpcURL: getNetworkByName('arbitrumTestnet').defaultRpc,\r\n    };\r\n    const configInLocalStorage = localStorage.getItem('dxvote-config')\r\n      ? JSON.parse(localStorage.getItem('dxvote-config'))\r\n      : {};\r\n    return Object.assign(defaultConfig, configInLocalStorage);\r\n  }\r\n\r\n  setLocalConfig(config) {\r\n    localStorage.setItem('dxvote-config', JSON.stringify(config));\r\n  }\r\n\r\n  resetLocalConfig() {\r\n    const defaultAppConfigs = getAppConfig();\r\n    localStorage.setItem(\r\n      'dxvote-config',\r\n      JSON.stringify({\r\n        etherscan: '',\r\n        pinata: '',\r\n        rpcType: '',\r\n        infura: '',\r\n        alchemy: '',\r\n        pinOnStart: false,\r\n        mainnet_toBlock: defaultAppConfigs.mainnet.cache.toBlock,\r\n        mainnet_rpcURL: getNetworkByName('mainnet').defaultRpc,\r\n        xdai_toBlock: defaultAppConfigs.xdai.cache.toBlock,\r\n        xdai_rpcURL: getNetworkByName('xdai').defaultRpc,\r\n        rinkeby_toBlock: defaultAppConfigs.rinkeby.cache.toBlock,\r\n        rinkeby_rpcURL: getNetworkByName('rinkeby').defaultRpc,\r\n        arbitrum_toBlock: defaultAppConfigs.arbitrum.cache.toBlock,\r\n        arbitrum_rpcURL: getNetworkByName('arbitrum').defaultRpc,\r\n        arbitrumTestnet_toBlock:\r\n          defaultAppConfigs.arbitrumTestnet.cache.toBlock,\r\n        arbitrumTestnet_rpcURL: getNetworkByName('arbitrumTestnet').defaultRpc,\r\n      })\r\n    );\r\n  }\r\n\r\n  toggleDarkMode() {\r\n    this.darkMode = !this.darkMode;\r\n  }\r\n\r\n  @action setDarkMode(visible: boolean) {\r\n    this.darkMode = visible;\r\n  }\r\n\r\n  getTokenData(tokenAddress) {\r\n    return this.networkConfig.tokens.find(\r\n      tokenInFile => tokenInFile.address === tokenAddress\r\n    );\r\n  }\r\n\r\n  getNetworkContracts(): NetworkContracts {\r\n    return this.networkConfig.contracts;\r\n  }\r\n\r\n  getTokensOfNetwork() {\r\n    return this.networkConfig.tokens;\r\n  }\r\n\r\n  getTokensToFetchPrice() {\r\n    return this.networkConfig.tokens.filter(\r\n      tokenInFile => tokenInFile.fetchPrice\r\n    );\r\n  }\r\n\r\n  getProposalTypes() {\r\n    return this.networkConfig.proposalTypes;\r\n  }\r\n\r\n  getContributorLevels() {\r\n    return this.networkConfig.contributionLevels;\r\n  }\r\n\r\n  getRecommendedCalls() {\r\n    const networkName = this.getActiveChainName();\r\n    const networkContracts = this.getNetworkContracts();\r\n    const networkTokens = this.getTokensOfNetwork();\r\n\r\n    let recommendedCalls: {\r\n      asset: string;\r\n      from: string;\r\n      to: string;\r\n      toName: string;\r\n      functionName: string;\r\n      params: {\r\n        type: string;\r\n        name: string;\r\n        defaultValue: string;\r\n        decimals?: number;\r\n        isRep?: boolean;\r\n      }[];\r\n      decodeText: string;\r\n    }[] = [\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'mintReputation(uint256,address,address)',\r\n        params: [\r\n          {\r\n            type: 'uint256',\r\n            name: '_amount',\r\n            defaultValue: '',\r\n            decimals: 18,\r\n            isRep: true,\r\n          },\r\n          { type: 'address', name: '_to', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText: 'Mint of [PARAM_0] to [PARAM_1]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: ANY_ADDRESS,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'mintReputation(uint256,address,address)',\r\n        params: [\r\n          {\r\n            type: 'uint256',\r\n            name: '_amount',\r\n            defaultValue: '',\r\n            decimals: 18,\r\n            isRep: true,\r\n          },\r\n          { type: 'address', name: '_to', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText: 'Mint of [PARAM_0] to [PARAM_1]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: ANY_ADDRESS,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'burnReputation(uint256,address,address)',\r\n        params: [\r\n          {\r\n            type: 'uint256',\r\n            name: '_amount',\r\n            defaultValue: '',\r\n            decimals: 18,\r\n            isRep: true,\r\n          },\r\n          { type: 'address', name: '_from', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText: 'Burn of [PARAM_0] to [PARAM_1]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'registerScheme(address,bytes32,bytes4,address)',\r\n        params: [\r\n          { type: 'address', name: '_scheme', defaultValue: '' },\r\n          { type: 'bytes32', name: '_paramsHash', defaultValue: '' },\r\n          { type: 'bytes4', name: '_permissions', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'Register scheme [PARAM_0] with params hash [PARAM_1] and permissions [PARAM_2]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'unregisterScheme(address,address)',\r\n        params: [\r\n          { type: 'address', name: '_scheme', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText: 'Unregister scheme [PARAM_0]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'genericCall(address,bytes,addres,uint256)',\r\n        params: [\r\n          { type: 'address', name: '_contract', defaultValue: '' },\r\n          { type: 'bytes', name: '_data', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n          { type: 'uint256', name: '_value', defaultValue: '' },\r\n        ],\r\n        decodeText:\r\n          'Generic call to [PARAM_0] with data [PARAM_1] and value [PARAM_2] ' +\r\n          NETWORK_ASSET_SYMBOL[networkName],\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'externalTokenTransfer(address,address,uint256,address)',\r\n        params: [\r\n          { type: 'address', name: '_externalToken', defaultValue: '' },\r\n          { type: 'address', name: '_to', defaultValue: '' },\r\n          { type: 'uint256', name: '_value', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'External token transfer of token [PARAM_0] with value [PARAM_2] to [PARAM_1]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName:\r\n          'externalTokenTransferFrom(address,address,address,uint256,address)',\r\n        params: [\r\n          { type: 'address', name: '_externalToken', defaultValue: '' },\r\n          { type: 'address', name: '_from', defaultValue: '' },\r\n          { type: 'address', name: '_to', defaultValue: '' },\r\n          { type: 'uint256', name: '_value', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'External token transferFrom of token [PARAM_0] with value [PARAM_3] from [PARAM_1] to [PARAM_2]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'externalTokenApproval(address,address,uint256,address)',\r\n        params: [\r\n          { type: 'address', name: '_externalToken', defaultValue: '' },\r\n          { type: 'address', name: '_spender', defaultValue: '' },\r\n          { type: 'uint256', name: '_value', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'External token approval of token [PARAM_0] from [PARAM_1] with value [PARAM_3] to [PARAM_2]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.controller,\r\n        toName: 'DXdao Controller',\r\n        functionName: 'sendEther(uint256,address,address)',\r\n        params: [\r\n          {\r\n            type: 'uint256',\r\n            name: '_amountInWei',\r\n            defaultValue: '',\r\n            decimals: 18,\r\n          },\r\n          { type: 'address', name: '_to', defaultValue: '' },\r\n          {\r\n            type: 'address',\r\n            name: '_avatar',\r\n            defaultValue: networkContracts.avatar,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'Transfer of [PARAM_0] ' +\r\n          NETWORK_ASSET_SYMBOL[networkName] +\r\n          ' to [PARAM_1] ',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.permissionRegistry,\r\n        toName: 'Permission Registry',\r\n        functionName: 'setTimeDelay(uint256)',\r\n        params: [{ type: 'uint256', name: 'newTimeDelay', defaultValue: '' }],\r\n        decodeText: 'Set time delay to [PARAM_0] seconds',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.permissionRegistry,\r\n        toName: 'Permission Registry',\r\n        functionName:\r\n          'setAdminPermission(address,address,address,bytes4,uint256,bool)',\r\n        params: [\r\n          { type: 'address', name: 'asset', defaultValue: ZERO_ADDRESS },\r\n          { type: 'address', name: 'from', defaultValue: '' },\r\n          { type: 'address', name: 'to', defaultValue: '' },\r\n          {\r\n            type: 'bytes4',\r\n            name: 'functionSignature',\r\n            defaultValue: ANY_FUNC_SIGNATURE,\r\n          },\r\n          { type: 'uint256', name: 'valueAllowed', defaultValue: '0' },\r\n          { type: 'bool', name: 'allowed', defaultValue: 'true' },\r\n        ],\r\n        decodeText:\r\n          'Set [PARAM_5] admin permission in asset [PARAM_0] from [PARAM_1] to [PARAM_2] with function signature [PARAM_3] and value [PARAM_4]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: ANY_ADDRESS,\r\n        to: networkContracts.permissionRegistry,\r\n        toName: 'Permission Registry',\r\n        functionName: 'setPermission(address,address,bytes4,uint256,bool)',\r\n        params: [\r\n          { type: 'address', name: 'asset', defaultValue: ZERO_ADDRESS },\r\n          { type: 'address', name: 'to', defaultValue: '' },\r\n          { type: 'bytes4', name: 'functionSignature', defaultValue: '' },\r\n          { type: 'uint256', name: 'valueAllowed', defaultValue: '' },\r\n          { type: 'bool', name: 'allowed', defaultValue: '' },\r\n        ],\r\n        decodeText:\r\n          'Set permission in asset [PARAM_0] for scheme [FROM] to [PARAM_1] with function signature [PARAM_2] and value [PARAM_3]',\r\n      },\r\n      {\r\n        asset: ZERO_ADDRESS,\r\n        from: ANY_ADDRESS,\r\n        to: networkContracts.utils.dxdVestingFactory,\r\n        toName: 'DXD Vesting Factory',\r\n        functionName: 'create(address,uint256,uint256,uint256,uint256)',\r\n        params: [\r\n          { type: 'address', name: 'to', defaultValue: '' },\r\n          { type: 'uint256', name: 'startDate', defaultValue: '' },\r\n          { type: 'uint256', name: 'cliff', defaultValue: '' },\r\n          { type: 'uint256', name: 'duration', defaultValue: '' },\r\n          { type: 'uint256', name: 'amount', defaultValue: '' },\r\n        ],\r\n        decodeText:\r\n          'Create vesting contract of [PARAM_4] DXD for [PARAM_0] starting [PARAM_1] for [PARAM_2] with [PARAM_3] cliff',\r\n      },\r\n    ];\r\n\r\n    if (networkContracts.utils.dxdVestingFactory) {\r\n      recommendedCalls.push({\r\n        asset: networkContracts.utils.dxdVestingFactory,\r\n        from: networkContracts.avatar,\r\n        to: networkContracts.utils.dxdVestingFactory,\r\n        toName: 'DXD Vesting Factory',\r\n        functionName: 'create(address, uint256, uint256, uint256, uint256)',\r\n        params: [\r\n          { type: 'address', name: 'beneficiary', defaultValue: '' },\r\n          { type: 'uint256', name: 'start', defaultValue: '' },\r\n          { type: 'uint256', name: 'cliffDuration', defaultValue: '' },\r\n          { type: 'uint256', name: 'duration', defaultValue: '' },\r\n          { type: 'uint256', name: 'value', defaultValue: '' },\r\n        ],\r\n        decodeText:\r\n          'Create new vesting contract with beneficiary [PARAM_0], start date  of [PARAM_1], cliff duration of [PARAMS_2], duration of [PARAM_3] and value of [PARAM_4]',\r\n      });\r\n      if (networkContracts.utils.dxDaoNFT) {\r\n        recommendedCalls.push({\r\n          asset: ZERO_ADDRESS,\r\n          from: networkContracts.avatar,\r\n          to: networkContracts.utils.dxDaoNFT,\r\n          toName: 'DXdao NFT',\r\n          functionName: 'mint(address, string)',\r\n          params: [\r\n            {\r\n              type: 'address',\r\n              name: 'recipient',\r\n              defaultValue: networkContracts.avatar,\r\n            },\r\n            { type: 'string', name: 'tokenURI', defaultValue: '' },\r\n          ],\r\n          decodeText: 'Mint NFT to address [PARAM_0] with token URI [PARAM_1]',\r\n        });\r\n      }\r\n    }\r\n\r\n    if (\r\n      this.networkConfig.recommendedCalls &&\r\n      this.networkConfig.recommendedCalls.length > 0\r\n    )\r\n      recommendedCalls = recommendedCalls.concat(\r\n        this.networkConfig.recommendedCalls\r\n      );\r\n\r\n    networkTokens.map(networkToken => {\r\n      recommendedCalls.push({\r\n        asset: networkToken.address,\r\n        from: ANY_ADDRESS,\r\n        to: networkToken.address,\r\n        toName: `ERC20 (${networkToken.symbol})`,\r\n        functionName: 'transfer(address,uint256)',\r\n        params: [\r\n          { type: 'address', name: 'to', defaultValue: '' },\r\n          {\r\n            type: 'uint256',\r\n            name: 'value',\r\n            defaultValue: '0',\r\n            decimals: networkToken.decimals,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'Transfer [PARAM_1] ' + networkToken.symbol + ' to [PARAM_0]',\r\n      });\r\n\r\n      recommendedCalls.push({\r\n        asset: networkToken.address,\r\n        from: ANY_ADDRESS,\r\n        to: networkToken.address,\r\n        toName: `ERC20 ${networkToken.symbol}`,\r\n        functionName: 'approve(address,uint256)',\r\n        params: [\r\n          { type: 'address', name: 'to', defaultValue: '' },\r\n          {\r\n            type: 'uint256',\r\n            name: 'value',\r\n            defaultValue: '0',\r\n            decimals: networkToken.decimals,\r\n          },\r\n        ],\r\n        decodeText:\r\n          'Approve [PARAM_1] ' + networkToken.symbol + ' to [PARAM_0]',\r\n      });\r\n    });\r\n\r\n    return recommendedCalls;\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport { action, makeObservable, computed } from 'mobx';\r\nimport _ from 'lodash';\r\nimport {\r\n  BigNumber,\r\n  ZERO_ADDRESS,\r\n  ANY_ADDRESS,\r\n  ANY_FUNC_SIGNATURE,\r\n  MAX_UINT,\r\n  bnum,\r\n  decodeProposalStatus,\r\n  VoteDecision,\r\n  VotingMachineProposalState,\r\n  normalizeBalance,\r\n  formatPercentage,\r\n  hasLostReputation,\r\n  isExpired,\r\n  isNotActive,\r\n  isWinningVote,\r\n  votedBeforeBoosted,\r\n  isVoteYes,\r\n} from '../utils';\r\nimport { TokenVesting } from '../types/types';\r\nimport { ProposalsExtended } from '../types/types';\r\n\r\nconst proposalTitles = require('../configs/proposalTitles.json');\r\n\r\nexport default class DaoStore {\r\n  daoCache: DaoNetworkCache;\r\n  context: RootContext;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n\r\n    makeObservable(this, {\r\n      getAllProposals: computed,\r\n      setCache: action,\r\n      reset: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.daoCache = undefined;\r\n  }\r\n\r\n  // Parse bignnumbers\r\n  parseCache(unparsedCache: DaoNetworkCache): DaoNetworkCache {\r\n    if (unparsedCache.reputation.events)\r\n      unparsedCache.reputation.events.map((repEvent, i) => {\r\n        unparsedCache.reputation.events[i].amount = bnum(repEvent.amount);\r\n      });\r\n\r\n    Object.keys(unparsedCache.callPermissions).map(asset => {\r\n      Object.keys(unparsedCache.callPermissions[asset]).map(from => {\r\n        Object.keys(unparsedCache.callPermissions[asset][from]).map(to => {\r\n          Object.keys(unparsedCache.callPermissions[asset][from][to]).map(\r\n            functionSignature => {\r\n              unparsedCache.callPermissions[asset][from][to][\r\n                functionSignature\r\n              ].value = bnum(\r\n                unparsedCache.callPermissions[asset][from][to][\r\n                  functionSignature\r\n                ].value || 0\r\n              );\r\n            }\r\n          );\r\n        });\r\n      });\r\n    });\r\n    Object.keys(unparsedCache.proposals).map(proposalId => {\r\n      unparsedCache.proposals[proposalId].values = unparsedCache.proposals[\r\n        proposalId\r\n      ].values.map(value => {\r\n        return bnum(value);\r\n      });\r\n      unparsedCache.proposals[proposalId].stateInScheme =\r\n        unparsedCache.proposals[proposalId].stateInScheme;\r\n      unparsedCache.proposals[proposalId].stateInVotingMachine =\r\n        unparsedCache.proposals[proposalId].stateInVotingMachine;\r\n      unparsedCache.proposals[proposalId].currentBoostedVotePeriodLimit = bnum(\r\n        unparsedCache.proposals[proposalId].currentBoostedVotePeriodLimit\r\n      );\r\n      unparsedCache.proposals[proposalId].daoBountyRemain = bnum(\r\n        unparsedCache.proposals[proposalId].daoBountyRemain\r\n      );\r\n      unparsedCache.proposals[proposalId].daoBounty = bnum(\r\n        unparsedCache.proposals[proposalId].daoBounty\r\n      );\r\n      unparsedCache.proposals[proposalId].confidenceThreshold = bnum(\r\n        unparsedCache.proposals[proposalId].confidenceThreshold\r\n      );\r\n      unparsedCache.proposals[proposalId].secondsFromTimeOutTillExecuteBoosted =\r\n        bnum(\r\n          unparsedCache.proposals[proposalId]\r\n            .secondsFromTimeOutTillExecuteBoosted\r\n        );\r\n      unparsedCache.proposals[proposalId].submittedTime = bnum(\r\n        unparsedCache.proposals[proposalId].submittedTime\r\n      );\r\n      unparsedCache.proposals[proposalId].preBoostedPhaseTime = bnum(\r\n        unparsedCache.proposals[proposalId].preBoostedPhaseTime\r\n      );\r\n      unparsedCache.proposals[proposalId].boostedPhaseTime = bnum(\r\n        unparsedCache.proposals[proposalId].boostedPhaseTime\r\n      );\r\n      unparsedCache.proposals[proposalId].positiveVotes = bnum(\r\n        unparsedCache.proposals[proposalId].positiveVotes\r\n      );\r\n      unparsedCache.proposals[proposalId].negativeVotes = bnum(\r\n        unparsedCache.proposals[proposalId].negativeVotes\r\n      );\r\n      unparsedCache.proposals[proposalId].positiveStakes = bnum(\r\n        unparsedCache.proposals[proposalId].positiveStakes\r\n      );\r\n      unparsedCache.proposals[proposalId].negativeStakes = bnum(\r\n        unparsedCache.proposals[proposalId].negativeStakes\r\n      );\r\n\r\n      // Update proposal title from proposalTitles.json file\r\n      if (!unparsedCache.proposals[proposalId].title) {\r\n        unparsedCache.proposals[proposalId].title =\r\n          proposalTitles[proposalId] || '';\r\n      }\r\n    });\r\n\r\n    Object.keys(unparsedCache.votingMachines).map(votingMachineAddress => {\r\n      Object.keys(\r\n        unparsedCache.votingMachines[votingMachineAddress].votingParameters\r\n      ).map(paramsHash => {\r\n        const unparsedParams =\r\n          unparsedCache.votingMachines[votingMachineAddress].votingParameters[\r\n            paramsHash\r\n          ];\r\n        unparsedCache.votingMachines[votingMachineAddress].votingParameters[\r\n          paramsHash\r\n        ] = {\r\n          queuedVoteRequiredPercentage: bnum(\r\n            unparsedParams.queuedVoteRequiredPercentage\r\n          ),\r\n          queuedVotePeriodLimit: bnum(unparsedParams.queuedVotePeriodLimit),\r\n          boostedVotePeriodLimit: bnum(unparsedParams.boostedVotePeriodLimit),\r\n          preBoostedVotePeriodLimit: bnum(\r\n            unparsedParams.preBoostedVotePeriodLimit\r\n          ),\r\n          thresholdConst: bnum(unparsedParams.thresholdConst),\r\n          limitExponentValue: bnum(unparsedParams.limitExponentValue),\r\n          quietEndingPeriod: bnum(unparsedParams.quietEndingPeriod),\r\n          proposingRepReward: bnum(unparsedParams.proposingRepReward),\r\n          votersReputationLossRatio: bnum(\r\n            unparsedParams.votersReputationLossRatio\r\n          ),\r\n          minimumDaoBounty: bnum(unparsedParams.minimumDaoBounty),\r\n          daoBountyConst: bnum(unparsedParams.daoBountyConst),\r\n          activationTime: bnum(unparsedParams.activationTime),\r\n        };\r\n      });\r\n    });\r\n    return unparsedCache;\r\n  }\r\n\r\n  setCache(newNetworkCache: DaoNetworkCache) {\r\n    this.daoCache = this.parseCache(newNetworkCache);\r\n    console.debug('[Cache SET]', this.daoCache);\r\n  }\r\n\r\n  getAmountOfProposalsPreBoostedInScheme(schemeAddress: string): number {\r\n    return this.filterProposals({ scheme: schemeAddress }).filter(proposal => {\r\n      return proposal.stateInVotingMachine === 4;\r\n    }).length;\r\n  }\r\n\r\n  getGovernanceInfo(): any {\r\n    let users = {},\r\n      totalPositiveVotes = 0,\r\n      totalPositiveVotesAmount = bnum(0),\r\n      totalNegativeVotes = 0,\r\n      totalNegativeVotesAmount = bnum(0),\r\n      totalPositiveStakes = 0,\r\n      totalPositiveStakesAmount = bnum(0),\r\n      totalNegativeStakes = 0,\r\n      totalNegativeStakesAmount = bnum(0),\r\n      totalProposalsCreated = 0;\r\n    const cache = this.daoCache;\r\n\r\n    let repUsers = {};\r\n    let repEvents = [];\r\n    let repTotalSupply = bnum(0);\r\n    let blockNumber = 0;\r\n    for (let i = 0; i < cache.reputation.events.length; i++) {\r\n      if (cache.reputation.events[i].event === 'Mint') {\r\n        repTotalSupply = repTotalSupply.plus(\r\n          cache.reputation.events[i].amount.toString()\r\n        );\r\n        if (repUsers[cache.reputation.events[i].account]) {\r\n          repUsers[cache.reputation.events[i].account] = repUsers[\r\n            cache.reputation.events[i].account\r\n          ].plus(cache.reputation.events[i].amount);\r\n        } else {\r\n          repUsers[cache.reputation.events[i].account] =\r\n            cache.reputation.events[i].amount;\r\n        }\r\n      } else if (cache.reputation.events[i].event === 'Burn') {\r\n        repTotalSupply = repTotalSupply.minus(\r\n          cache.reputation.events[i].amount.toString()\r\n        );\r\n        if (repUsers[cache.reputation.events[i].account]) {\r\n          repUsers[cache.reputation.events[i].account] = repUsers[\r\n            cache.reputation.events[i].account\r\n          ].minus(cache.reputation.events[i].amount);\r\n        } else {\r\n          console.error('ERROR on duplicated REP');\r\n        }\r\n      }\r\n\r\n      if (cache.reputation.events[i].blockNumber > blockNumber) {\r\n        blockNumber = cache.reputation.events[i].blockNumber;\r\n        repEvents.push([\r\n          blockNumber,\r\n          bnum(repTotalSupply)\r\n            .div(10 ** 18)\r\n            .toNumber(),\r\n        ]);\r\n      }\r\n    }\r\n    let rep = [];\r\n    for (const userAddress in repUsers) {\r\n      rep.push([\r\n        userAddress,\r\n        repUsers[userAddress].div(bnum(repTotalSupply)).toNumber(),\r\n      ]);\r\n    }\r\n    rep = _.sortBy(rep, [\r\n      function (o) {\r\n        return o[1];\r\n      },\r\n    ]);\r\n    rep.unshift(['User Address', 'REP %']);\r\n    repEvents.unshift(['Block', 'Total Rep']);\r\n\r\n    const totalSupply = this.getRepAt().totalSupply;\r\n\r\n    Object.keys(cache.votingMachines).map(votingMachineAddress => {\r\n      cache.votingMachines[votingMachineAddress].events.votes.map(vote => {\r\n        if (!users[vote.voter])\r\n          users[vote.voter] = {\r\n            correctVotes: 0,\r\n            wrongVotes: 0,\r\n            correctStakes: 0,\r\n            wrongStakes: 0,\r\n            proposals: 0,\r\n            totalVoted: bnum(0),\r\n            totalStaked: bnum(0),\r\n            rep: this.getRepAt(vote.voter)\r\n              .userRep.times(100)\r\n              .div(totalSupply)\r\n              .toFixed(4),\r\n          };\r\n\r\n        if (!cache.proposals[vote.proposalId]) {\r\n          console.debug('MISSING PROPOSAL', vote.proposalId);\r\n        } else {\r\n          if (vote.vote.toString() === '1') {\r\n            totalPositiveVotes++;\r\n            totalPositiveVotesAmount = totalPositiveVotesAmount.plus(\r\n              bnum(vote.amount)\r\n            );\r\n          } else {\r\n            totalNegativeVotes++;\r\n            totalNegativeVotesAmount = totalNegativeVotesAmount.plus(\r\n              bnum(vote.amount)\r\n            );\r\n          }\r\n          if (cache.proposals[vote.proposalId].winningVote === vote.vote) {\r\n            users[vote.voter].correctVotes++;\r\n            users[vote.voter].totalVoted = users[vote.voter].totalVoted.plus(\r\n              bnum(vote.amount)\r\n            );\r\n          } else {\r\n            users[vote.voter].wrongVotes++;\r\n            users[vote.voter].totalVoted = users[vote.voter].totalVoted.plus(\r\n              bnum(vote.amount)\r\n            );\r\n          }\r\n        }\r\n      });\r\n      cache.votingMachines[votingMachineAddress].events.stakes.map(stake => {\r\n        if (!users[stake.staker])\r\n          users[stake.staker] = {\r\n            correctVotes: 0,\r\n            wrongVotes: 0,\r\n            correctStakes: 0,\r\n            wrongStakes: 0,\r\n            proposals: 0,\r\n            totalVoted: bnum(0),\r\n            totalStaked: bnum(0),\r\n            rep: this.getRepAt(stake.staker)\r\n              .userRep.times(100)\r\n              .div(totalSupply)\r\n              .toFixed(4),\r\n          };\r\n\r\n        if (!cache.proposals[stake.proposalId]) {\r\n          console.debug('MISSING PROPOSAL', stake.proposalId);\r\n        } else {\r\n          if (stake.vote === 1) {\r\n            totalPositiveStakes++;\r\n            totalPositiveStakesAmount = totalPositiveStakesAmount.plus(\r\n              bnum(stake.amount)\r\n            );\r\n          } else {\r\n            totalNegativeStakes++;\r\n            totalNegativeStakesAmount = totalNegativeStakesAmount.plus(\r\n              bnum(stake.amount)\r\n            );\r\n          }\r\n\r\n          if (cache.proposals[stake.proposalId].winningVote === stake.vote) {\r\n            users[stake.staker].correctStakes++;\r\n            users[stake.staker].totalStaked = users[\r\n              stake.staker\r\n            ].totalStaked.plus(bnum(stake.amount));\r\n          } else {\r\n            users[stake.staker].wrongStakes++;\r\n            users[stake.staker].totalStaked = users[\r\n              stake.staker\r\n            ].totalStaked.plus(bnum(stake.amount));\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    Object.keys(cache.proposals).map(proposalId => {\r\n      const proposalCreator = cache.proposals[proposalId].proposer;\r\n\r\n      if (proposalCreator !== '0x0000000000000000000000000000000000000000') {\r\n        if (!users[proposalCreator])\r\n          users[proposalCreator] = {\r\n            correctVotes: 0,\r\n            wrongVotes: 0,\r\n            correctStakes: 0,\r\n            wrongStakes: 0,\r\n            proposals: 0,\r\n            totalVoted: bnum(0),\r\n            totalStaked: bnum(0),\r\n            rep: this.getRepAt(proposalCreator)\r\n              .userRep.times(100)\r\n              .div(totalSupply)\r\n              .toFixed(4),\r\n          };\r\n\r\n        users[proposalCreator].proposals++;\r\n      } else {\r\n        console.debug(\r\n          'Couldnt get proposer for proposal',\r\n          proposalId,\r\n          'in scheme',\r\n          cache.schemes[cache.proposals[proposalId].scheme].name,\r\n          'in transaction',\r\n          cache.proposals[proposalId].creationEvent.tx\r\n        );\r\n      }\r\n      totalProposalsCreated++;\r\n    });\r\n\r\n    return {\r\n      totalPositiveVotes,\r\n      totalPositiveVotesAmount,\r\n      totalNegativeVotes,\r\n      totalNegativeVotesAmount,\r\n      totalPositiveStakes,\r\n      totalPositiveStakesAmount,\r\n      totalNegativeStakes,\r\n      totalNegativeStakesAmount,\r\n      totalProposalsCreated,\r\n      repUsers,\r\n      repTotalSupply,\r\n      repEvents,\r\n      rep,\r\n      ranking: _.orderBy(\r\n        Object.keys(users).map(key =>\r\n          Object.assign({ address: key }, users[key])\r\n        ),\r\n        ['rep'],\r\n        ['desc']\r\n      ),\r\n    };\r\n  }\r\n\r\n  get getAllProposals(): ProposalsExtended[] {\r\n    return this.filterProposals();\r\n  }\r\n\r\n  filterProposals(filter: any = {}): ProposalsExtended[] {\r\n    const allProposals = Object.keys(this.daoCache.proposals).map(\r\n      proposalId => {\r\n        return this.daoCache.proposals[proposalId];\r\n      }\r\n    );\r\n    const proposals = _.orderBy(\r\n      allProposals,\r\n      [\r\n        'creationEvent.blockNumber',\r\n        'creationEvent.transactionIndex',\r\n        'creationEvent.logIndex',\r\n      ],\r\n      ['asc', 'asc', 'asc', 'asc']\r\n    ).map(cacheProposal => {\r\n      return Object.assign(\r\n        cacheProposal,\r\n        this.getProposalStatus(cacheProposal.id)\r\n      );\r\n    });\r\n    return _.filter(proposals, filter);\r\n  }\r\n\r\n  getSchemes(): Scheme[] {\r\n    return this.filterSchemes();\r\n  }\r\n\r\n  filterSchemes(filter: any = {}): Scheme[] {\r\n    return _.flatMap(_.filter(this.daoCache.schemes, filter));\r\n  }\r\n\r\n  getProposal(proposalId: string): Proposal {\r\n    return this.daoCache.proposals[proposalId];\r\n  }\r\n\r\n  getScheme(schemeAddress: string): Scheme {\r\n    return this.daoCache.schemes[schemeAddress];\r\n  }\r\n\r\n  getSchemeOfProposal(proposalId: string): Scheme {\r\n    return this.daoCache.schemes[this.daoCache.proposals[proposalId].scheme];\r\n  }\r\n\r\n  getVotingMachineOfScheme(schemeAddress: string): {\r\n    address: string;\r\n    paramsHash: string;\r\n    params: VotingMachineParameters;\r\n  } {\r\n    const votingMachineAddress =\r\n      this.daoCache.schemes[schemeAddress].votingMachine;\r\n    return {\r\n      address: votingMachineAddress,\r\n      paramsHash: this.daoCache.schemes[schemeAddress].paramsHash,\r\n      params:\r\n        this.daoCache.votingMachines[votingMachineAddress].votingParameters[\r\n          this.daoCache.schemes[schemeAddress].paramsHash\r\n        ],\r\n    };\r\n  }\r\n\r\n  getVotingMachineOfProposal(proposalId: string): {\r\n    address: string;\r\n    paramsHash: string;\r\n    params: VotingMachineParameters;\r\n  } {\r\n    const votingMachineAddress =\r\n      this.daoCache.schemes[this.daoCache.proposals[proposalId].scheme]\r\n        .votingMachine;\r\n\r\n    const paramsHash =\r\n      this.daoCache.proposals[proposalId].paramsHash ===\r\n      '0x0000000000000000000000000000000000000000000000000000000000000000'\r\n        ? this.daoCache.schemes[this.daoCache.proposals[proposalId].scheme]\r\n            .paramsHash\r\n        : this.daoCache.proposals[proposalId].paramsHash;\r\n\r\n    return {\r\n      address: votingMachineAddress,\r\n      paramsHash,\r\n      params:\r\n        this.daoCache.votingMachines[votingMachineAddress].votingParameters[\r\n          paramsHash\r\n        ],\r\n    };\r\n  }\r\n\r\n  getProposalEvents(proposalId): {\r\n    votes: Vote[];\r\n    stakes: Stake[];\r\n    redeems: Redeem[];\r\n    redeemsRep: RedeemRep[];\r\n    redeemsDaoBounty: RedeemDaoBounty[];\r\n    stateChanges: ProposalStateChange[];\r\n    history: {\r\n      text: string[];\r\n      textParams: string[];\r\n      event: any;\r\n    }[];\r\n  } {\r\n    const proposalEvents = {\r\n      votes: this.getVotesOfProposal(proposalId),\r\n      stakes: this.getStakesOfProposal(proposalId),\r\n      redeems: this.getRedeemsOfProposal(proposalId),\r\n      redeemsRep: this.getRedeemsRepOfProposal(proposalId),\r\n      redeemsDaoBounty: this.getRedeemsDaoBountyOfProposal(proposalId),\r\n      stateChanges: this.getProposalStateChanges(proposalId),\r\n    };\r\n\r\n    const proposal = this.getProposal(proposalId);\r\n\r\n    let history = proposalEvents.votes\r\n      .map(event => {\r\n        const { totalSupply } = this.getRepAt(null, event.blockNumber);\r\n        return {\r\n          text: [\r\n            `Vote from `,\r\n            `of ${bnum(event.amount)\r\n              .times('100')\r\n              .div(totalSupply)\r\n              .toFixed(4)} % REP on decision ${VoteDecision[event.vote]}`,\r\n          ],\r\n          textParams: [event.voter],\r\n          event: {\r\n            proposalId: event.proposalId,\r\n            tx: event.tx,\r\n            block: event.blockNumber,\r\n            transactionIndex: event.transactionIndex,\r\n            logIndex: event.logIndex,\r\n            timestamp: event.timestamp,\r\n          },\r\n        };\r\n      })\r\n      .concat(\r\n        proposalEvents.stakes.map(event => {\r\n          return {\r\n            text: [\r\n              `Stake from `,\r\n              `of ${normalizeBalance(\r\n                event.amount\r\n              ).toString()} staking token on decision ${\r\n                VoteDecision[event.vote]\r\n              }`,\r\n            ],\r\n            textParams: [event.staker],\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeems.map(event => {\r\n          return {\r\n            text: [`Staking token redeem from `, ` of ${event.amount}`],\r\n            textParams: [event.beneficiary],\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeemsRep.map(event => {\r\n          return {\r\n            text: [`REP Redeem from `, ` of ${event.amount}`],\r\n            textParams: [event.beneficiary],\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeemsDaoBounty.map(event => {\r\n          return {\r\n            text: [\r\n              `Staking token bounty redeemed from `,\r\n              ` of ${event.amount}`,\r\n            ],\r\n            textParams: [event.beneficiary],\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.stateChanges.map(event => {\r\n          return {\r\n            text: [\r\n              `Proposal change to state ${\r\n                VotingMachineProposalState[event.state]\r\n              }`,\r\n            ],\r\n            textParams: [],\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      );\r\n    history.push({\r\n      text: [`Proposal created by`],\r\n      textParams: [proposal.proposer],\r\n      event: {\r\n        proposalId: proposal.id,\r\n        tx: proposal.creationEvent.tx,\r\n        block: proposal.creationEvent.blockNumber,\r\n        transactionIndex: proposal.creationEvent.transactionIndex,\r\n        logIndex: proposal.creationEvent.logIndex,\r\n        timestamp: proposal.creationEvent.timestamp,\r\n      },\r\n    });\r\n\r\n    history = _.orderBy(\r\n      history,\r\n      ['event.timestamp', 'event.logIndex'],\r\n      ['asc', 'asc']\r\n    );\r\n\r\n    return {\r\n      votes: proposalEvents.votes,\r\n      stakes: proposalEvents.stakes,\r\n      redeems: proposalEvents.redeems,\r\n      redeemsRep: proposalEvents.redeemsRep,\r\n      redeemsDaoBounty: proposalEvents.redeemsDaoBounty,\r\n      stateChanges: proposalEvents.stateChanges,\r\n      history: history,\r\n    };\r\n  }\r\n\r\n  getUser(userAddress): {\r\n    repBalance: BigNumber;\r\n    repPercentage: string;\r\n  } {\r\n    const { providerStore } = this.context;\r\n    const { userRep, totalSupply } = this.getRepAt(\r\n      userAddress,\r\n      providerStore.getCurrentBlockNumber()\r\n    );\r\n    return {\r\n      repBalance: userRep,\r\n      repPercentage: userRep\r\n        ? formatPercentage(userRep.div(totalSupply), 2, false)\r\n        : '0',\r\n    };\r\n  }\r\n\r\n  getUserEvents(userAddress): {\r\n    votes: Vote[];\r\n    stakes: Stake[];\r\n    redeems: Redeem[];\r\n    redeemsRep: RedeemRep[];\r\n    redeemsDaoBounty: RedeemDaoBounty[];\r\n    newProposal: ProposalEvent[];\r\n    history: {\r\n      text: string;\r\n      event: any;\r\n    }[];\r\n  } {\r\n    let history: {\r\n      text: string;\r\n      event: any;\r\n    }[] = [];\r\n\r\n    const cache = this.daoCache;\r\n\r\n    let proposalEvents = {\r\n      votes: [],\r\n      stakes: [],\r\n      redeems: [],\r\n      redeemsRep: [],\r\n      redeemsDaoBounty: [],\r\n    };\r\n\r\n    Object.keys(cache.votingMachines).map(votingMachine => {\r\n      proposalEvents.votes = proposalEvents.votes.concat(\r\n        cache.votingMachines[votingMachine].events.votes.filter(vote => {\r\n          return userAddress === vote.voter;\r\n        })\r\n      );\r\n      proposalEvents.stakes = proposalEvents.stakes.concat(\r\n        cache.votingMachines[votingMachine].events.stakes.filter(stake => {\r\n          return userAddress === stake.staker;\r\n        })\r\n      );\r\n      proposalEvents.redeems = proposalEvents.redeems.concat(\r\n        cache.votingMachines[votingMachine].events.redeems.filter(redeem => {\r\n          return userAddress === redeem.beneficiary;\r\n        })\r\n      );\r\n      proposalEvents.redeemsRep = proposalEvents.redeemsRep.concat(\r\n        cache.votingMachines[votingMachine].events.redeemsRep.filter(\r\n          redeemRep => {\r\n            return userAddress === redeemRep.beneficiary;\r\n          }\r\n        )\r\n      );\r\n      proposalEvents.redeemsDaoBounty = proposalEvents.redeemsDaoBounty.concat(\r\n        cache.votingMachines[votingMachine].events.redeemsDaoBounty.filter(\r\n          redeemDaoBounty => {\r\n            return userAddress === redeemDaoBounty.beneficiary;\r\n          }\r\n        )\r\n      );\r\n    });\r\n\r\n    const newProposalEvents: ProposalEvent[] = Object.keys(\r\n      _.pickBy(cache.proposals, proposal => proposal.proposer === userAddress)\r\n    ).map(proposalId => {\r\n      history.push({\r\n        text: `Proposal ${proposalId} created`,\r\n        event: {\r\n          proposalId: proposalId,\r\n          tx: cache.proposals[proposalId].creationEvent.tx,\r\n          block: cache.proposals[proposalId].creationEvent.blockNumber,\r\n          transactionIndex:\r\n            cache.proposals[proposalId].creationEvent.transactionIndex,\r\n          logIndex: cache.proposals[proposalId].creationEvent.logIndex,\r\n          timestamp: cache.proposals[proposalId].creationEvent.timestamp,\r\n        },\r\n      });\r\n      return Object.assign(\r\n        { proposalId: proposalId },\r\n        cache.proposals[proposalId].creationEvent\r\n      );\r\n    });\r\n\r\n    history = history\r\n      .concat(\r\n        proposalEvents.votes.map(event => {\r\n          const { totalSupply } = this.getRepAt(null, event.blockNumber);\r\n\r\n          return {\r\n            text: `Voted with ${bnum(event.amount)\r\n              .times('100')\r\n              .div(totalSupply)\r\n              .toFixed(4)} % REP for decision ${\r\n              VoteDecision[event.vote]\r\n            } on proposal ${event.proposalId}`,\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.stakes.map(event => {\r\n          return {\r\n            text: `Staked ${event.amount} staking token for decision ${\r\n              VoteDecision[event.vote]\r\n            } on proposal ${event.proposalId}`,\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeems.map(event => {\r\n          return {\r\n            text: `Staking token amount of ${event.amount} redeemed from proposal ${event.proposalId} `,\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeemsRep.map(event => {\r\n          return {\r\n            text: `REP amount of ${event.amount} redeemed from proposal ${event.proposalId} `,\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      )\r\n      .concat(\r\n        proposalEvents.redeemsDaoBounty.map(event => {\r\n          this.getVotingMachineOfProposal(event.proposalId);\r\n          return {\r\n            text: `Staking token bounty of ${event.amount} redeemed from proposal ${event.proposalId} `,\r\n            event: {\r\n              proposalId: event.proposalId,\r\n              tx: event.tx,\r\n              block: event.blockNumber,\r\n              transactionIndex: event.transactionIndex,\r\n              logIndex: event.logIndex,\r\n              timestamp: event.timestamp,\r\n            },\r\n          };\r\n        })\r\n      );\r\n    history = _.orderBy(\r\n      history,\r\n      ['event.timestamp', 'event.logIndex'],\r\n      ['desc', 'asc']\r\n    );\r\n\r\n    return {\r\n      newProposal: newProposalEvents,\r\n      votes: proposalEvents.votes,\r\n      stakes: proposalEvents.stakes,\r\n      redeems: proposalEvents.redeems,\r\n      redeemsRep: proposalEvents.redeemsRep,\r\n      redeemsDaoBounty: proposalEvents.redeemsDaoBounty,\r\n      history,\r\n    };\r\n  }\r\n\r\n  getUserRedeemsLeft(userAddress: string): {\r\n    rep: string[];\r\n    stake: string[];\r\n    bounty: { [proposalId: string]: BigNumber };\r\n  } {\r\n    const userEvents = this.getUserEvents(userAddress);\r\n\r\n    let redeemsLeft = {\r\n      rep: [],\r\n      stake: [],\r\n      bounty: {},\r\n    };\r\n\r\n    // Adds user created proposals that have ended\r\n    userEvents.newProposal.map(newProposal => {\r\n      const proposal = this.getProposal(newProposal.proposalId);\r\n      const votingParameters = this.getVotingMachineOfProposal(\r\n        newProposal.proposalId\r\n      ).params;\r\n\r\n      if (\r\n        votingParameters.proposingRepReward.toNumber() > 0 &&\r\n        isNotActive(proposal) &&\r\n        isVoteYes(proposal.winningVote)\r\n      ) {\r\n        redeemsLeft.rep.push(newProposal.proposalId);\r\n      }\r\n    });\r\n\r\n    // Add possible redeems\r\n    userEvents.votes.map(vote => {\r\n      const proposal = this.getProposal(vote.proposalId);\r\n      const voteParameters = this.getVotingMachineOfProposal(\r\n        vote.proposalId\r\n      ).params;\r\n      if (\r\n        (isExpired(proposal) && votedBeforeBoosted(proposal, vote)) ||\r\n        (hasLostReputation(voteParameters) &&\r\n          votedBeforeBoosted(proposal, vote) &&\r\n          isWinningVote(proposal, vote) &&\r\n          isNotActive(proposal) &&\r\n          redeemsLeft.rep.indexOf(vote.proposalId) < 0)\r\n      ) {\r\n        redeemsLeft.rep.push(vote.proposalId);\r\n      }\r\n    });\r\n    userEvents.stakes.map(stake => {\r\n      const proposal = this.getProposal(stake.proposalId);\r\n      if (\r\n        proposal.stateInVotingMachine ===\r\n          VotingMachineProposalState.ExpiredInQueue ||\r\n        (isNotActive(proposal) && isWinningVote(proposal, stake))\r\n      ) {\r\n        // Add proposal redeem if it was not added yet\r\n        if (redeemsLeft.stake.indexOf(stake.proposalId) < 0)\r\n          redeemsLeft.stake.push(stake.proposalId);\r\n\r\n        // If proposal executed and stake was for YES, then add the bounty\r\n        if (\r\n          proposal.stateInVotingMachine ===\r\n            VotingMachineProposalState.Executed &&\r\n          isVoteYes(stake.vote)\r\n        ) {\r\n          const proposalDaoBounty = this.getProposal(\r\n            stake.proposalId\r\n          ).daoBounty;\r\n          const proposalWinningStakes = this.getProposal(\r\n            stake.proposalId\r\n          ).positiveStakes;\r\n          const bountyToRedeem = bnum(stake.amount)\r\n            .times(proposalDaoBounty)\r\n            .div(proposalWinningStakes)\r\n            .integerValue();\r\n\r\n          redeemsLeft.bounty[stake.proposalId] = redeemsLeft.bounty[\r\n            stake.proposalId\r\n          ]\r\n            ? bnum(redeemsLeft.bounty[stake.proposalId]).plus(bountyToRedeem)\r\n            : bountyToRedeem;\r\n        }\r\n      }\r\n    });\r\n    // Remove already redeemed\r\n    userEvents.redeemsRep.map(redeemRep => {\r\n      if (redeemsLeft.rep.indexOf(redeemRep.proposalId) > -1)\r\n        redeemsLeft.rep.splice(\r\n          redeemsLeft.rep.indexOf(redeemRep.proposalId),\r\n          1\r\n        );\r\n    });\r\n    userEvents.redeems.map(redeem => {\r\n      if (redeemsLeft.stake.indexOf(redeem.proposalId) > -1)\r\n        redeemsLeft.stake.splice(\r\n          redeemsLeft.stake.indexOf(redeem.proposalId),\r\n          1\r\n        );\r\n    });\r\n    userEvents.redeemsDaoBounty.map(redeemDaoBounty => {\r\n      redeemsLeft.bounty[redeemDaoBounty.proposalId] = bnum(\r\n        redeemsLeft.bounty[redeemDaoBounty.proposalId]\r\n      )\r\n        .minus(bnum(redeemDaoBounty.amount))\r\n        .integerValue();\r\n\r\n      if (redeemsLeft.bounty[redeemDaoBounty.proposalId].lte(0))\r\n        delete redeemsLeft.bounty[redeemDaoBounty.proposalId];\r\n    });\r\n\r\n    return redeemsLeft;\r\n  }\r\n\r\n  getProposalStatus(proposalId: string): any {\r\n    const proposal = this.daoCache.proposals[proposalId];\r\n    const proposalStateChangeEvents = this.getProposalStateChanges(proposalId);\r\n    const scheme = this.daoCache.schemes[proposal.scheme];\r\n    const votingMachineOfProposal = this.getVotingMachineOfProposal(proposalId);\r\n    const networkContracts = this.context.configStore.getNetworkContracts();\r\n    const autoBoost =\r\n      networkContracts.votingMachines[votingMachineOfProposal.address].type ===\r\n      'DXDVotingMachine';\r\n    return decodeProposalStatus(\r\n      proposal,\r\n      proposalStateChangeEvents,\r\n      votingMachineOfProposal.params,\r\n      scheme.maxSecondsForExecution,\r\n      autoBoost,\r\n      scheme.type\r\n    );\r\n  }\r\n\r\n  getVotesOfProposal(proposalId: string): Vote[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.votes.filter(vote => {\r\n      return proposalId === vote.proposalId;\r\n    });\r\n  }\r\n\r\n  getStakesOfProposal(proposalId: string): Stake[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.stakes.filter(stake => {\r\n      return proposalId === stake.proposalId;\r\n    });\r\n  }\r\n\r\n  getRedeemsOfProposal(proposalId: string): Redeem[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.redeems.filter(redeem => {\r\n      return proposalId === redeem.proposalId;\r\n    });\r\n  }\r\n\r\n  getRedeemsRepOfProposal(proposalId: string): RedeemRep[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.redeemsRep.filter(redeemRep => {\r\n      return proposalId === redeemRep.proposalId;\r\n    });\r\n  }\r\n\r\n  getRedeemsDaoBountyOfProposal(proposalId: string): RedeemDaoBounty[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.redeemsDaoBounty.filter(redeemDaoBounty => {\r\n      return proposalId === redeemDaoBounty.proposalId;\r\n    });\r\n  }\r\n\r\n  getProposalStateChanges(proposalId: string): ProposalStateChange[] {\r\n    return this.daoCache.votingMachines[\r\n      this.getVotingMachineOfProposal(proposalId).address\r\n    ].events.proposalStateChanges.filter(proposalStateChange => {\r\n      return proposalId === proposalStateChange.proposalId;\r\n    });\r\n  }\r\n\r\n  getSchemeRecommendedCalls(schemeAddress): any {\r\n    const networkContracts = this.context.configStore.getNetworkContracts();\r\n    const { library } = this.context.providerStore.getActiveWeb3React();\r\n    const scheme = this.getScheme(schemeAddress);\r\n    const callPermissions = this.daoCache.callPermissions;\r\n    console.debug('Call Permissions', callPermissions);\r\n    let assetLimits = {};\r\n    const from =\r\n      scheme.controllerAddress === networkContracts.controller\r\n        ? networkContracts.avatar\r\n        : schemeAddress;\r\n    let recommendedCalls = this.context.configStore.getRecommendedCalls();\r\n\r\n    Object.keys(callPermissions).map(assetAddress => {\r\n      const callAllowance = this.getCallAllowance(\r\n        assetAddress,\r\n        from,\r\n        schemeAddress,\r\n        ANY_FUNC_SIGNATURE\r\n      );\r\n      if (callAllowance.fromTime > 0 && callAllowance.value.lt(MAX_UINT))\r\n        assetLimits[assetAddress] = callAllowance.value;\r\n    });\r\n\r\n    for (let i = 0; i < recommendedCalls.length; i++) {\r\n      const callAllowance = this.getCallAllowance(\r\n        recommendedCalls[i].asset,\r\n        from,\r\n        recommendedCalls[i].to,\r\n        library.eth.abi.encodeFunctionSignature(\r\n          recommendedCalls[i].functionName\r\n        )\r\n      );\r\n      recommendedCalls[i]['functionSignature'] =\r\n        library.eth.abi.encodeFunctionSignature(\r\n          recommendedCalls[i].functionName\r\n        );\r\n      recommendedCalls[i]['value'] = callAllowance.value;\r\n      recommendedCalls[i]['fromTime'] = callAllowance.fromTime;\r\n\r\n      if (\r\n        recommendedCalls[i].to == networkContracts.permissionRegistry &&\r\n        recommendedCalls[i].functionName ==\r\n          'setPermission(address,address,bytes4,uint256,bool)'\r\n      )\r\n        recommendedCalls[i]['fromTime'] = 1;\r\n    }\r\n\r\n    return { assetLimits, recommendedCalls };\r\n  }\r\n\r\n  getCallAllowance(asset, from, to, functionSignature): any {\r\n    const networkContracts = this.context.configStore.getNetworkContracts();\r\n    const callPermissions = this.daoCache.callPermissions;\r\n\r\n    if (\r\n      to === networkContracts.controller &&\r\n      from !== networkContracts.avatar\r\n    ) {\r\n      return {\r\n        value: bnum(0),\r\n        fromTime: 0,\r\n      };\r\n    } else if (\r\n      asset === ZERO_ADDRESS &&\r\n      to === networkContracts.permissionRegistry &&\r\n      from === networkContracts.avatar\r\n    ) {\r\n      return {\r\n        value: bnum(0),\r\n        fromTime: 1,\r\n      };\r\n    } else if (!callPermissions[asset] || !callPermissions[asset][from]) {\r\n      return {\r\n        value: bnum(0),\r\n        fromTime: 0,\r\n      };\r\n    } else if (\r\n      callPermissions[asset][from][to] &&\r\n      callPermissions[asset][from][to][functionSignature]\r\n    ) {\r\n      return {\r\n        value: callPermissions[asset][from][to][functionSignature].value,\r\n        fromTime: callPermissions[asset][from][to][functionSignature].fromTime,\r\n      };\r\n    } else if (\r\n      callPermissions[asset][from][to] &&\r\n      callPermissions[asset][from][to][ANY_FUNC_SIGNATURE]\r\n    ) {\r\n      return {\r\n        value: callPermissions[asset][from][to][ANY_FUNC_SIGNATURE].value,\r\n        fromTime: callPermissions[asset][from][to][ANY_FUNC_SIGNATURE].fromTime,\r\n      };\r\n    } else if (\r\n      callPermissions[asset][from][ANY_ADDRESS] &&\r\n      callPermissions[asset][from][ANY_ADDRESS][functionSignature]\r\n    ) {\r\n      return {\r\n        value:\r\n          callPermissions[asset][from][ANY_ADDRESS][functionSignature].value,\r\n        fromTime:\r\n          callPermissions[asset][from][ANY_ADDRESS][functionSignature].fromTime,\r\n      };\r\n    } else if (\r\n      callPermissions[asset][from][ANY_ADDRESS] &&\r\n      callPermissions[asset][from][ANY_ADDRESS][ANY_FUNC_SIGNATURE]\r\n    ) {\r\n      return {\r\n        value:\r\n          callPermissions[asset][from][ANY_ADDRESS][ANY_FUNC_SIGNATURE].value,\r\n        fromTime:\r\n          callPermissions[asset][from][ANY_ADDRESS][ANY_FUNC_SIGNATURE]\r\n            .fromTime,\r\n      };\r\n    } else {\r\n      return {\r\n        value: bnum(0),\r\n        fromTime: 0,\r\n      };\r\n    }\r\n  }\r\n\r\n  getRepAt(\r\n    userAddress: string = ZERO_ADDRESS,\r\n    atBlock: number = 0,\r\n    atTime: number = 0\r\n  ): {\r\n    userRep: BigNumber;\r\n    totalSupply: BigNumber;\r\n  } {\r\n    const { daoStore, providerStore } = this.context;\r\n    const repEvents = daoStore.daoCache.reputation.events;\r\n    let userRep = bnum(0),\r\n      totalSupply = bnum(0);\r\n    if (atBlock === 0) atBlock = providerStore.getCurrentBlockNumber();\r\n\r\n    for (let i = 0; i < repEvents.length; i++) {\r\n      if (\r\n        atTime > 0\r\n          ? repEvents[i].timestamp < atTime\r\n          : repEvents[i].blockNumber < atBlock\r\n      ) {\r\n        if (repEvents[i].event === 'Mint') {\r\n          totalSupply = totalSupply.plus(repEvents[i].amount);\r\n          if (repEvents[i].account === userAddress)\r\n            userRep = userRep.plus(repEvents[i].amount);\r\n        } else if (repEvents[i].event === 'Burn') {\r\n          totalSupply = totalSupply.minus(repEvents[i].amount);\r\n          if (repEvents[i].account === userAddress)\r\n            userRep = userRep.minus(repEvents[i].amount);\r\n        }\r\n      }\r\n    }\r\n    return { userRep, totalSupply };\r\n  }\r\n\r\n  // total supply calculation broken\r\n  getRepEventsOfUser(\r\n    userAddress: string = ZERO_ADDRESS,\r\n    atBlock: number = 0\r\n  ): {\r\n    userRep: RepEvent[];\r\n  } {\r\n    const { daoStore, providerStore } = this.context;\r\n    const repEvents = daoStore.daoCache.reputation.events;\r\n    let userRep = [],\r\n      totalSupply = bnum(0);\r\n    if (atBlock === 0) atBlock = providerStore.getCurrentBlockNumber();\r\n\r\n    for (let i = 0; i < repEvents.length; i++) {\r\n      if (repEvents[i].blockNumber <= atBlock) {\r\n        if (repEvents[i].event === 'Mint') {\r\n          totalSupply = totalSupply.plus(repEvents[i].amount);\r\n          if (repEvents[i].account === userAddress) userRep.push(repEvents[i]);\r\n        }\r\n      }\r\n    }\r\n    return { userRep };\r\n  }\r\n\r\n  getUsersRep(): {\r\n    [userAddress: string]: BigNumber;\r\n  } {\r\n    const { daoStore, providerStore } = this.context;\r\n    const repEvents = daoStore.daoCache.reputation.events;\r\n    let users = {};\r\n    const atBlock = providerStore.getCurrentBlockNumber();\r\n\r\n    for (let i = 0; i < repEvents.length; i++) {\r\n      if (repEvents[i].blockNumber <= atBlock) {\r\n        if (repEvents[i].event === 'Mint') {\r\n          if (!users[repEvents[i].account])\r\n            users[repEvents[i].account] = repEvents[i].amount;\r\n          else\r\n            users[repEvents[i].account] = users[repEvents[i].account].plus(\r\n              repEvents[i].amount\r\n            );\r\n        } else if (repEvents[i].event === 'Burn') {\r\n          if (users[repEvents[i].account])\r\n            users[repEvents[i].account] = users[repEvents[i].account].minus(\r\n              repEvents[i].amount\r\n            );\r\n        }\r\n      }\r\n    }\r\n    return users;\r\n  }\r\n\r\n  getAllVestingContracts(): TokenVesting[] {\r\n    return this.daoCache.vestingContracts ?? [];\r\n  }\r\n\r\n  getUserVestingContracts(beneficiaryAddress: string): TokenVesting[] {\r\n    return (\r\n      this.daoCache.vestingContracts?.filter(\r\n        contract => contract.beneficiary === beneficiaryAddress\r\n      ) ?? []\r\n    );\r\n  }\r\n}\r\n","export class CacheLoadError extends Error {\r\n  constructor(message?: string) {\r\n    super(message);\r\n    this.name = 'CacheLoadError';\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport { makeObservable, observable, action } from 'mobx';\r\nimport { Web3ReactContextInterface } from '@web3-react/core/dist/types';\r\nimport { isChainIdSupported } from '../provider/connectors';\r\nimport { CacheLoadError } from '../utils/errors';\r\nimport { bnum } from 'utils';\r\nimport { getProposalTitles } from '../utils/cache';\r\n\r\nconst targetCacheVersion = 1;\r\n\r\nexport default class BlockchainStore {\r\n  activeFetchLoop: boolean = false;\r\n  initialLoadComplete: boolean;\r\n  context: RootContext;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n    makeObservable(this, {\r\n      activeFetchLoop: observable,\r\n      initialLoadComplete: observable,\r\n      fetchData: action,\r\n      reset: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.activeFetchLoop = false;\r\n    this.initialLoadComplete = false;\r\n  }\r\n\r\n  async fetchData(web3React: Web3ReactContextInterface, reset: boolean) {\r\n    if (\r\n      (!this.activeFetchLoop || reset) &&\r\n      web3React &&\r\n      web3React.active &&\r\n      isChainIdSupported(web3React.chainId)\r\n    ) {\r\n      const {\r\n        providerStore,\r\n        configStore,\r\n        daoStore,\r\n        notificationStore,\r\n        cacheService,\r\n      } = this.context;\r\n\r\n      this.initialLoadComplete = reset ? false : this.initialLoadComplete;\r\n      this.activeFetchLoop = true;\r\n      if (reset) notificationStore.reset();\r\n\r\n      try {\r\n        const { library, chainId } = web3React;\r\n\r\n        const networkName = configStore.getActiveChainName();\r\n\r\n        notificationStore.setGlobalLoading(\r\n          true,\r\n          'Looking for latest chain configurations'\r\n        );\r\n        const networkConfig = await configStore.loadNetworkConfig();\r\n\r\n        notificationStore.setGlobalLoading(\r\n          true,\r\n          'Looking for existing cache data'\r\n        );\r\n        const cache = await caches.open(`dxvote-cache`);\r\n        let match = await cache.match(networkName);\r\n        let networkCache: DaoNetworkCache & { baseCacheIpfsHash?: string } =\r\n          null;\r\n        if (match) {\r\n          networkCache = JSON.parse(await match.text());\r\n        }\r\n\r\n        if (networkName === 'localhost') {\r\n          networkCache = {\r\n            networkId: 1337,\r\n            version: 1,\r\n            blockNumber: 1,\r\n            address: '0xf89f66329e7298246de22D210Ac246DCddff4621',\r\n            reputation: {\r\n              events: [],\r\n              total: bnum(0),\r\n            },\r\n            schemes: {},\r\n            proposals: {},\r\n            callPermissions: {},\r\n            votingMachines: {},\r\n            ipfsHashes: [],\r\n            vestingContracts: [],\r\n          };\r\n        }\r\n\r\n        if (\r\n          networkCache &&\r\n          (!networkCache?.version ||\r\n            networkCache?.version !== targetCacheVersion)\r\n        ) {\r\n          console.log('[Upgrade Cache]');\r\n          networkCache = null;\r\n        }\r\n\r\n        const blockNumber = (await library.eth.getBlockNumber()) - 5;\r\n\r\n        const newestCacheIpfsHash = networkConfig.cache.ipfsHash;\r\n\r\n        if (\r\n          networkName !== 'localhost' &&\r\n          (!networkCache ||\r\n            !(newestCacheIpfsHash === networkCache.baseCacheIpfsHash))\r\n        ) {\r\n          console.debug('[IPFS Cache Fetch]', networkName, newestCacheIpfsHash);\r\n          notificationStore.setGlobalLoading(\r\n            true,\r\n            'Fetching cached data from IPFS'\r\n          );\r\n          const ipfsCache = await cacheService.getCacheFromIPFS(\r\n            newestCacheIpfsHash\r\n          );\r\n          networkCache = daoStore.parseCache(ipfsCache);\r\n          networkCache.baseCacheIpfsHash = newestCacheIpfsHash;\r\n        }\r\n\r\n        const lastCheckedBlockNumber = networkCache.blockNumber;\r\n\r\n        if (blockNumber > lastCheckedBlockNumber + 1) {\r\n          console.debug(\r\n            '[Fetch Loop] Fetch Blockchain Data',\r\n            blockNumber,\r\n            chainId\r\n          );\r\n\r\n          const toBlock = blockNumber;\r\n          const networkContracts = configStore.getNetworkContracts();\r\n\r\n          networkCache = await cacheService.getUpdatedCache(\r\n            networkCache,\r\n            networkContracts,\r\n            toBlock,\r\n            library\r\n          );\r\n\r\n          notificationStore.setGlobalLoading(\r\n            true,\r\n            `Getting proposal titles form ipfs`\r\n          );\r\n          const proposalTitles = await cacheService.updateProposalTitles(\r\n            networkCache,\r\n            getProposalTitles()\r\n          );\r\n\r\n          Object.keys(networkCache.proposals).map(proposalId => {\r\n            networkCache.proposals[proposalId].title =\r\n              networkCache.proposals[proposalId].title ||\r\n              proposalTitles[proposalId] ||\r\n              '';\r\n          });\r\n\r\n          networkCache.blockNumber = toBlock;\r\n          providerStore.setCurrentBlockNumber(toBlock);\r\n\r\n          notificationStore.setGlobalLoading(true, 'Saving updated cache');\r\n          await cache.put(\r\n            networkName,\r\n            new Response(JSON.stringify(networkCache))\r\n          );\r\n        }\r\n        daoStore.setCache(networkCache);\r\n        this.initialLoadComplete = true;\r\n        notificationStore.setFirstLoadComplete();\r\n        this.activeFetchLoop = false;\r\n      } catch (error) {\r\n        console.error(error);\r\n        if (!this.initialLoadComplete) {\r\n          notificationStore.setGlobalError(true, (error as Error).message);\r\n        } else {\r\n          throw new CacheLoadError(error.message);\r\n        }\r\n        this.activeFetchLoop = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import RootContext from '../contexts';\r\nimport { action, makeObservable, observable } from 'mobx';\r\n\r\nexport enum GlobalLoadingState {\r\n  HIDDEN,\r\n  LOADING,\r\n  ERROR,\r\n}\r\n\r\nexport default class NotificationStore {\r\n  firstLoadComplete: boolean;\r\n  globalLoadingState: GlobalLoadingState = GlobalLoadingState.HIDDEN;\r\n  globalMessage: string;\r\n\r\n  context: RootContext;\r\n\r\n  constructor(context) {\r\n    this.context = context;\r\n    makeObservable(this, {\r\n      firstLoadComplete: observable,\r\n      globalLoadingState: observable,\r\n      globalMessage: observable,\r\n      reset: action,\r\n      setGlobalError: action,\r\n      setGlobalLoading: action,\r\n      setFirstLoadComplete: action,\r\n    });\r\n  }\r\n\r\n  reset() {\r\n    this.firstLoadComplete = false;\r\n    this.globalLoadingState = GlobalLoadingState.LOADING;\r\n    this.globalMessage = null;\r\n  }\r\n\r\n  setGlobalLoading(visible: boolean, message?: string) {\r\n    this.globalLoadingState = visible\r\n      ? GlobalLoadingState.LOADING\r\n      : GlobalLoadingState.HIDDEN;\r\n    this.globalMessage = message;\r\n  }\r\n\r\n  setGlobalError(visible: boolean, message?: string) {\r\n    this.globalLoadingState = visible\r\n      ? GlobalLoadingState.ERROR\r\n      : GlobalLoadingState.HIDDEN;\r\n    this.globalMessage = message;\r\n  }\r\n\r\n  setFirstLoadComplete() {\r\n    this.setGlobalLoading(false);\r\n    this.firstLoadComplete = true;\r\n  }\r\n}\r\n","const PermissionRegistry = require('./PermissionRegistry');\r\nconst DxController = require('./DxController');\r\nconst DxAvatar = require('./DxAvatar');\r\nconst DxReputation = require('./DxReputation');\r\nconst DXDVotingMachine = require('./DXDVotingMachine');\r\nconst GenesisProtocol = require('./GenesisProtocol');\r\nconst ERC20 = require('./ERC20');\r\nconst Multicall = require('./Multicall');\r\nconst VestingFactory = require('./DXDVestingFactory');\r\n\r\nexport const getContracts = async function (\r\n  networkConfig: NetworkContracts,\r\n  web3: any\r\n) {\r\n  const avatar = await new web3.eth.Contract(\r\n    DxAvatar.abi,\r\n    networkConfig.avatar\r\n  );\r\n  const controller = await new web3.eth.Contract(\r\n    DxController.abi,\r\n    networkConfig.controller\r\n  );\r\n  const reputation = await new web3.eth.Contract(\r\n    DxReputation.abi,\r\n    networkConfig.reputation\r\n  );\r\n  const permissionRegistry = await new web3.eth.Contract(\r\n    PermissionRegistry.abi,\r\n    networkConfig.permissionRegistry\r\n  );\r\n  const multicall = await new web3.eth.Contract(\r\n    Multicall.abi,\r\n    networkConfig.utils.multicall\r\n  );\r\n  const vestingFactory =\r\n    networkConfig.utils.dxdVestingFactory &&\r\n    (await new web3.eth.Contract(\r\n      VestingFactory.abi,\r\n      networkConfig.utils.dxdVestingFactory\r\n    ));\r\n\r\n  let votingMachines = {};\r\n\r\n  for (const votingMachineAddress in networkConfig.votingMachines) {\r\n    if (\r\n      networkConfig.votingMachines[votingMachineAddress].type ==\r\n      'GenesisProtocol'\r\n    )\r\n      votingMachines[votingMachineAddress] = {\r\n        name: 'GenesisProtocol',\r\n        contract: await new web3.eth.Contract(\r\n          GenesisProtocol.abi,\r\n          votingMachineAddress\r\n        ),\r\n        token: await new web3.eth.Contract(\r\n          ERC20.abi,\r\n          networkConfig.votingMachines[votingMachineAddress].token\r\n        ),\r\n      };\r\n    else if (\r\n      networkConfig.votingMachines[votingMachineAddress].type ==\r\n      'DXDVotingMachine'\r\n    )\r\n      votingMachines[votingMachineAddress] = {\r\n        name: 'DXDVotingMachine',\r\n        contract: await new web3.eth.Contract(\r\n          DXDVotingMachine.abi,\r\n          votingMachineAddress\r\n        ),\r\n        token: await new web3.eth.Contract(\r\n          ERC20.abi,\r\n          networkConfig.votingMachines[votingMachineAddress].token\r\n        ),\r\n      };\r\n  }\r\n\r\n  return {\r\n    votingMachines,\r\n    avatar,\r\n    controller,\r\n    reputation,\r\n    permissionRegistry,\r\n    multicall,\r\n    vestingFactory,\r\n  };\r\n};\r\n","import RootContext from '../contexts';\r\nimport {\r\n  batchPromisesOntarget,\r\n  getAppConfig,\r\n  getDefaultConfigHashes,\r\n  getIPFSFile,\r\n  getProposalTitles,\r\n  NETWORK_NAMES,\r\n  retryPromise,\r\n} from '../utils';\r\nimport Web3 from 'web3';\r\nimport _ from 'lodash';\r\nimport {\r\n  bnum,\r\n  ZERO_HASH,\r\n  ZERO_ADDRESS,\r\n  sleep,\r\n  decodePermission,\r\n  WalletSchemeProposalState,\r\n  VotingMachineProposalState,\r\n  isWalletScheme,\r\n  getEvents,\r\n  getRawEvents,\r\n  executeMulticall,\r\n  sortNetworkCache,\r\n  descriptionHashToIPFSHash,\r\n  ipfsHashToDescriptionHash,\r\n  getSchemeConfig,\r\n} from '../utils';\r\n\r\nimport { getContracts } from '../contracts';\r\nimport { Contract } from 'ethers';\r\n\r\nconst Hash = require('ipfs-only-hash');\r\nconst jsonSort = require('json-keys-sort');\r\n\r\nexport default class UtilsService {\r\n  context: RootContext;\r\n\r\n  constructor(context: RootContext) {\r\n    this.context = context;\r\n  }\r\n\r\n  async getCacheFromIPFS(ipfsHash: string): Promise<DaoNetworkCache> {\r\n    let jsonCache = await this.context.ipfsService.getContentFromIPFS(ipfsHash);\r\n\r\n    while (typeof jsonCache === 'string') {\r\n      console.log('Trying to get cache from ipfs again');\r\n      await sleep(100);\r\n      jsonCache = await this.context.ipfsService.getContentFromIPFS(ipfsHash);\r\n    }\r\n\r\n    return jsonCache;\r\n  }\r\n\r\n  async getUpdatedCacheConfig(\r\n    networksConfig: {\r\n      [netwokId: number]: {\r\n        toBlock: number;\r\n        rpcUrl: string;\r\n        reset: boolean;\r\n      };\r\n    },\r\n    updateProposalTitles: boolean\r\n  ): Promise<{\r\n    proposalTitles: {\r\n      [proposalId: string]: string;\r\n    };\r\n    configHashes: {\r\n      [networkName: string]: string;\r\n    };\r\n    configs: {\r\n      [networkName: string]: NetworkConfig;\r\n    };\r\n    caches: {\r\n      [networkName: string]: DaoNetworkCache;\r\n    };\r\n  }> {\r\n    const updatedCacheConfig = {\r\n      proposalTitles: getProposalTitles(),\r\n      configHashes: {},\r\n      configs: {},\r\n      caches: {},\r\n    };\r\n\r\n    // Update the cache and config for each network\r\n    for (let i = 0; i < Object.keys(networksConfig).length; i++) {\r\n      const networkId = Number(Object.keys(networksConfig)[i]);\r\n      const networkName = NETWORK_NAMES[networkId];\r\n\r\n      const cacheForNetwork = await this.buildCacheForNetwork(\r\n        new Web3(networksConfig[networkId].rpcUrl),\r\n        networkId,\r\n        networksConfig[networkId].toBlock,\r\n        networksConfig[networkId].reset\r\n      );\r\n\r\n      // Update the appConfig file that stores the hashes of the dapp config and network caches\r\n      updatedCacheConfig.configHashes[networkName] = cacheForNetwork.configHash;\r\n      updatedCacheConfig.configs[networkName] = cacheForNetwork.config;\r\n      updatedCacheConfig.caches[networkName] = cacheForNetwork.cache;\r\n\r\n      // Get proposal titles\r\n      if (updateProposalTitles) {\r\n        this.context.notificationStore.setGlobalLoading(\r\n          true,\r\n          `Getting proposal titles form ipfs`\r\n        );\r\n        updatedCacheConfig.proposalTitles = Object.assign(\r\n          updatedCacheConfig.proposalTitles,\r\n          await this.updateProposalTitles(\r\n            cacheForNetwork.cache,\r\n            getProposalTitles()\r\n          )\r\n        );\r\n      }\r\n    }\r\n\r\n    return updatedCacheConfig;\r\n  }\r\n\r\n  async buildCacheForNetwork(\r\n    web3: Web3,\r\n    chainId: number,\r\n    toBlock: number,\r\n    resetCache: boolean = false\r\n  ): Promise<{\r\n    configHash: string;\r\n    config: NetworkConfig;\r\n    cache: DaoNetworkCache;\r\n  }> {\r\n    const networkName = NETWORK_NAMES[chainId];\r\n\r\n    // Get the network configuration\r\n    let networkConfig = getAppConfig()[networkName];\r\n    let networkCache: DaoNetworkCache;\r\n\r\n    const emptyCache: DaoNetworkCache = {\r\n      networkId: chainId,\r\n      version: 1,\r\n      blockNumber: 1,\r\n      address: networkConfig.contracts.avatar,\r\n      reputation: {\r\n        events: [],\r\n        total: bnum(0),\r\n      },\r\n      schemes: {},\r\n      proposals: {},\r\n      callPermissions: {},\r\n      votingMachines: {},\r\n      ipfsHashes: [],\r\n      vestingContracts: [],\r\n    };\r\n\r\n    // Set network cache and config objects\r\n\r\n    // If network is localhost we use an empty cache to force the complete cache generation in each load\r\n    if (networkName === 'localhost') {\r\n      networkCache = emptyCache;\r\n    } else {\r\n      // If the cache is not reset, we load the cache from the local storage\r\n      if (resetCache) {\r\n        networkConfig.cache.toBlock = networkConfig.cache.fromBlock;\r\n        networkConfig.cache.ipfsHash = '';\r\n        networkConfig.version = 1;\r\n        emptyCache.blockNumber = networkConfig.cache.fromBlock;\r\n        networkCache = emptyCache;\r\n      } else {\r\n        this.context.notificationStore.setGlobalLoading(\r\n          true,\r\n          `Getting configuration file from IPFS`\r\n        );\r\n        console.log(\r\n          `Getting config file from https://ipfs.io/ipfs/${\r\n            getDefaultConfigHashes()[networkName]\r\n          }`\r\n        );\r\n        const networkConfigFileFetch = await getIPFSFile(\r\n          getDefaultConfigHashes()[networkName],\r\n          5000\r\n        );\r\n        this.context.notificationStore.setGlobalLoading(\r\n          true,\r\n          `Getting cache file from IPFS`\r\n        );\r\n        console.log(\r\n          `Getting cache file from https://ipfs.io/ipfs/${networkConfigFileFetch.data.cache.ipfsHash}`\r\n        );\r\n        const networkCacheFetch = await retryPromise(\r\n          getIPFSFile(networkConfigFileFetch.data.cache.ipfsHash, 60000)\r\n        );\r\n        networkCache = networkCacheFetch.data;\r\n      }\r\n    }\r\n\r\n    // Update the cache only if the toBlock is higher than the current networkCache block\r\n    if (Number(networkCache.blockNumber) + 1 < toBlock) {\r\n      // The cache file is updated with the data that had before plus new data in the network cache file\r\n      console.debug(\r\n        'Running cache script from block',\r\n        networkCache.blockNumber + 1,\r\n        'to block',\r\n        toBlock,\r\n        'in network',\r\n        networkName\r\n      );\r\n      networkCache = await this.getUpdatedCache(\r\n        networkCache,\r\n        networkConfig.contracts,\r\n        toBlock,\r\n        web3\r\n      );\r\n    }\r\n\r\n    // Sort json obj and parse it to string\r\n    networkCache = await jsonSort.sortAsync(networkCache, true);\r\n    const networkCacheString = JSON.stringify(networkCache, null, 2);\r\n\r\n    // Update appConfig obj with the latest network config and networkCache hash\r\n    networkConfig.cache.toBlock = toBlock;\r\n    networkConfig.cache.ipfsHash = await Hash.of(networkCacheString);\r\n\r\n    // Sort config obj and parse it to string\r\n    networkConfig = await jsonSort.sortAsync(networkConfig, true);\r\n\r\n    return {\r\n      configHash: await Hash.of(JSON.stringify(networkConfig, null, 2)),\r\n      config: networkConfig,\r\n      cache: networkCache,\r\n    };\r\n  }\r\n\r\n  async getUpdatedCache(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n\r\n    console.debug(`[CACHE UPDATE] from ${fromBlock} to ${toBlock}`);\r\n\r\n    this.context.notificationStore.setGlobalLoading(\r\n      true,\r\n      `Collecting reputation and governance events in blocks ${fromBlock} - ${toBlock}`\r\n    );\r\n\r\n    // The first promise round:\r\n    // - Reputation Events\r\n    // - Permission Registry\r\n    // - Vesting Contracts\r\n\r\n    networkCache = await batchPromisesOntarget(\r\n      [\r\n        this.updateReputationEvents(\r\n          networkCache,\r\n          networkWeb3Contracts.reputation,\r\n          toBlock,\r\n          web3\r\n        ),\r\n        this.updatePermissionRegistry(\r\n          networkCache,\r\n          networkContracts,\r\n          toBlock,\r\n          web3\r\n        ),\r\n        this.updateVestingContracts(\r\n          networkCache,\r\n          networkContracts,\r\n          toBlock,\r\n          web3\r\n        ),\r\n      ],\r\n      networkCache\r\n    );\r\n\r\n    // The second promise round:\r\n    // - Voting Machine Events\r\n    // - Update schemes\r\n    networkCache = await batchPromisesOntarget(\r\n      [\r\n        this.updateVotingMachineEvents(\r\n          networkCache,\r\n          networkContracts,\r\n          toBlock,\r\n          web3\r\n        ),\r\n        this.updateSchemes(networkCache, networkContracts, toBlock, web3),\r\n      ],\r\n      networkCache,\r\n      0,\r\n      1000\r\n    );\r\n\r\n    this.context.notificationStore.setGlobalLoading(\r\n      true,\r\n      `Collecting proposals in blocks ${fromBlock} - ${toBlock}`\r\n    );\r\n\r\n    // The third promise round is just to update the proposals that needs the schemes udpated.\r\n    networkCache = await batchPromisesOntarget(\r\n      [this.updateProposals(networkCache, networkContracts, toBlock, web3)],\r\n      networkCache,\r\n      0,\r\n      1000,\r\n      500\r\n    );\r\n\r\n    networkCache.blockNumber = Number(toBlock);\r\n\r\n    console.log('Total Proposals', Object.keys(networkCache.proposals).length);\r\n\r\n    return sortNetworkCache(networkCache);\r\n  }\r\n\r\n  // Get all Mint and Burn reputation events\r\n  async updateReputationEvents(\r\n    networkCache: DaoNetworkCache,\r\n    reputation: Contract,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    if (!networkCache.reputation.events) networkCache.reputation.events = [];\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    let reputationEvents = await getEvents(\r\n      web3,\r\n      reputation,\r\n      fromBlock,\r\n      toBlock,\r\n      'allEvents'\r\n    );\r\n\r\n    reputationEvents.forEach(reputationEvent => {\r\n      switch (reputationEvent.event) {\r\n        case 'Mint':\r\n          networkCache.reputation.events.push({\r\n            event: reputationEvent.event,\r\n            signature: reputationEvent.signature,\r\n            address: reputationEvent.address,\r\n            account: reputationEvent.returnValues._to,\r\n            amount: bnum(reputationEvent.returnValues._amount),\r\n            tx: reputationEvent.transactionHash,\r\n            blockNumber: reputationEvent.blockNumber,\r\n            timestamp: reputationEvent.timestamp,\r\n            transactionIndex: reputationEvent.transactionIndex,\r\n            logIndex: reputationEvent.logIndex,\r\n          });\r\n          break;\r\n        case 'Burn':\r\n          networkCache.reputation.events.push({\r\n            event: reputationEvent.event,\r\n            signature: reputationEvent.signature,\r\n            address: reputationEvent.address,\r\n            account: reputationEvent.returnValues._from,\r\n            amount: bnum(reputationEvent.returnValues._amount),\r\n            tx: reputationEvent.transactionHash,\r\n            blockNumber: reputationEvent.blockNumber,\r\n            timestamp: reputationEvent.timestamp,\r\n            transactionIndex: reputationEvent.transactionIndex,\r\n            logIndex: reputationEvent.logIndex,\r\n          });\r\n          break;\r\n      }\r\n    });\r\n\r\n    networkCache.reputation.events = _.uniq(networkCache.reputation.events);\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Update all voting machines\r\n  async updateVotingMachineEvents(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n\r\n    await Promise.all(\r\n      Object.keys(networkWeb3Contracts.votingMachines).map(\r\n        async votingMachineAddress => {\r\n          const votingMachine =\r\n            networkWeb3Contracts.votingMachines[votingMachineAddress].contract;\r\n          if (!networkCache.votingMachines[votingMachine._address])\r\n            networkCache.votingMachines[votingMachine._address] = {\r\n              name: networkWeb3Contracts.votingMachines[votingMachineAddress]\r\n                .name,\r\n              events: {\r\n                votes: [],\r\n                stakes: [],\r\n                redeems: [],\r\n                redeemsRep: [],\r\n                redeemsDaoBounty: [],\r\n                proposalStateChanges: [],\r\n                newProposal: [],\r\n              },\r\n              token:\r\n                networkWeb3Contracts.votingMachines[votingMachine._address]\r\n                  .token._address,\r\n              votingParameters: {},\r\n            };\r\n\r\n          networkCache = await this.updateVotingMachine(\r\n            networkCache,\r\n            networkContracts,\r\n            votingMachine,\r\n            toBlock,\r\n            web3\r\n          );\r\n        }\r\n      )\r\n    );\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Update a voting machine information, events, token and voting parameters used.\r\n  async updateVotingMachine(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    votingMachine: Contract,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    let newVotingMachineEvents = await getEvents(\r\n      web3,\r\n      votingMachine,\r\n      fromBlock,\r\n      toBlock,\r\n      'allEvents'\r\n    );\r\n    const avatarAddress = web3.utils.toChecksumAddress(networkContracts.avatar);\r\n    const votingMachineEventsInCache =\r\n      networkCache.votingMachines[votingMachine._address].events;\r\n    newVotingMachineEvents.forEach(votingMachineEvent => {\r\n      const proposalCreated =\r\n        votingMachineEventsInCache.newProposal.findIndex(\r\n          newProposalEvent =>\r\n            votingMachineEvent.returnValues._proposalId ===\r\n            newProposalEvent.proposalId\r\n        ) > -1;\r\n\r\n      let existEvent;\r\n\r\n      if (\r\n        votingMachineEvent.returnValues._organization === avatarAddress ||\r\n        (votingMachineEvent.event === 'StateChange' && proposalCreated)\r\n      )\r\n        switch (votingMachineEvent.event) {\r\n          case 'NewProposal':\r\n            votingMachineEventsInCache.newProposal.push({\r\n              event: votingMachineEvent.event,\r\n              signature: votingMachineEvent.signature,\r\n              address: votingMachineEvent.address,\r\n              proposer: votingMachineEvent.returnValues._proposer,\r\n              paramHash: votingMachineEvent.returnValues._paramsHash,\r\n              proposalId: votingMachineEvent.returnValues._proposalId,\r\n              tx: votingMachineEvent.transactionHash,\r\n              blockNumber: votingMachineEvent.blockNumber,\r\n              timestamp: votingMachineEvent.timestamp,\r\n              transactionIndex: votingMachineEvent.transactionIndex,\r\n              logIndex: votingMachineEvent.logIndex,\r\n            });\r\n            break;\r\n          case 'StateChange':\r\n            votingMachineEventsInCache.proposalStateChanges.push({\r\n              event: votingMachineEvent.event,\r\n              signature: votingMachineEvent.signature,\r\n              address: votingMachineEvent.address,\r\n              state: votingMachineEvent.returnValues._proposalState,\r\n              proposalId: votingMachineEvent.returnValues._proposalId,\r\n              tx: votingMachineEvent.transactionHash,\r\n              blockNumber: votingMachineEvent.blockNumber,\r\n              timestamp: votingMachineEvent.timestamp,\r\n              transactionIndex: votingMachineEvent.transactionIndex,\r\n              logIndex: votingMachineEvent.logIndex,\r\n            });\r\n            break;\r\n          case 'VoteProposal':\r\n            const preBoosted =\r\n              votingMachineEventsInCache.proposalStateChanges.findIndex(\r\n                i => i.state === '5'\r\n              ) >= 0;\r\n\r\n            existEvent = votingMachineEventsInCache.votes.find(\r\n              event =>\r\n                event.tx === votingMachineEvent.transactionHas &&\r\n                event.transactionIndex ===\r\n                  votingMachineEvent.transactionIndex &&\r\n                event.logIndex === votingMachineEvent.logIndex\r\n            );\r\n            if (existEvent)\r\n              console.debug(\r\n                'Duplicated Vote in votingMachineEvent',\r\n                votingMachineEvent\r\n              );\r\n\r\n            !existEvent &&\r\n              votingMachineEventsInCache.votes.push({\r\n                event: votingMachineEvent.event,\r\n                signature: votingMachineEvent.signature,\r\n                address: votingMachineEvent.address,\r\n                voter: votingMachineEvent.returnValues._voter,\r\n                vote: votingMachineEvent.returnValues._vote,\r\n                amount: votingMachineEvent.returnValues._reputation,\r\n                preBoosted: preBoosted,\r\n                proposalId: votingMachineEvent.returnValues._proposalId,\r\n                tx: votingMachineEvent.transactionHash,\r\n                blockNumber: votingMachineEvent.blockNumber,\r\n                timestamp: votingMachineEvent.timestamp,\r\n                transactionIndex: votingMachineEvent.transactionIndex,\r\n                logIndex: votingMachineEvent.logIndex,\r\n              });\r\n            break;\r\n          case 'Stake':\r\n            existEvent = votingMachineEventsInCache.stakes.find(\r\n              event =>\r\n                event.tx === votingMachineEvent.transactionHas &&\r\n                event.transactionIndex ===\r\n                  votingMachineEvent.transactionIndex &&\r\n                event.logIndex === votingMachineEvent.logIndex\r\n            );\r\n            if (existEvent)\r\n              console.debug(\r\n                'Duplicated Stake in votingMachineEvent',\r\n                votingMachineEvent\r\n              );\r\n            !existEvent &&\r\n              votingMachineEventsInCache.stakes.push({\r\n                event: votingMachineEvent.event,\r\n                signature: votingMachineEvent.signature,\r\n                address: votingMachineEvent.address,\r\n                staker: votingMachineEvent.returnValues._staker,\r\n                vote: votingMachineEvent.returnValues._vote,\r\n                amount: votingMachineEvent.returnValues._amount,\r\n                amount4Bounty: bnum('0'),\r\n                proposalId: votingMachineEvent.returnValues._proposalId,\r\n                tx: votingMachineEvent.transactionHash,\r\n                blockNumber: votingMachineEvent.blockNumber,\r\n                timestamp: votingMachineEvent.timestamp,\r\n                transactionIndex: votingMachineEvent.transactionIndex,\r\n                logIndex: votingMachineEvent.logIndex,\r\n              });\r\n            break;\r\n          case 'Redeem':\r\n            existEvent = votingMachineEventsInCache.stakes.find(\r\n              event =>\r\n                event.tx === votingMachineEvent.transactionHas &&\r\n                event.transactionIndex ===\r\n                  votingMachineEvent.transactionIndex &&\r\n                event.logIndex === votingMachineEvent.logIndex\r\n            );\r\n            if (existEvent)\r\n              console.debug(\r\n                'Duplicated Redeem in votingMachineEvent',\r\n                votingMachineEvent\r\n              );\r\n            !existEvent &&\r\n              votingMachineEventsInCache.redeems.push({\r\n                event: votingMachineEvent.event,\r\n                signature: votingMachineEvent.signature,\r\n                address: votingMachineEvent.address,\r\n                beneficiary: votingMachineEvent.returnValues._beneficiary,\r\n                amount: votingMachineEvent.returnValues._amount,\r\n                proposalId: votingMachineEvent.returnValues._proposalId,\r\n                tx: votingMachineEvent.transactionHash,\r\n                blockNumber: votingMachineEvent.blockNumber,\r\n                timestamp: votingMachineEvent.timestamp,\r\n                transactionIndex: votingMachineEvent.transactionIndex,\r\n                logIndex: votingMachineEvent.logIndex,\r\n              });\r\n            break;\r\n          case 'RedeemReputation':\r\n            votingMachineEventsInCache.redeemsRep.push({\r\n              event: votingMachineEvent.event,\r\n              signature: votingMachineEvent.signature,\r\n              address: votingMachineEvent.address,\r\n              beneficiary: votingMachineEvent.returnValues._beneficiary,\r\n              amount: votingMachineEvent.returnValues._amount,\r\n              proposalId: votingMachineEvent.returnValues._proposalId,\r\n              tx: votingMachineEvent.transactionHash,\r\n              blockNumber: votingMachineEvent.blockNumber,\r\n              timestamp: votingMachineEvent.timestamp,\r\n              transactionIndex: votingMachineEvent.transactionIndex,\r\n              logIndex: votingMachineEvent.logIndex,\r\n            });\r\n            break;\r\n          case 'RedeemDaoBounty':\r\n            votingMachineEventsInCache.redeemsDaoBounty.push({\r\n              event: votingMachineEvent.event,\r\n              signature: votingMachineEvent.signature,\r\n              address: votingMachineEvent.address,\r\n              beneficiary: votingMachineEvent.returnValues._beneficiary,\r\n              amount: votingMachineEvent.returnValues._amount,\r\n              proposalId: votingMachineEvent.returnValues._proposalId,\r\n              tx: votingMachineEvent.transactionHash,\r\n              blockNumber: votingMachineEvent.blockNumber,\r\n              timestamp: votingMachineEvent.timestamp,\r\n              transactionIndex: votingMachineEvent.transactionIndex,\r\n              logIndex: votingMachineEvent.logIndex,\r\n            });\r\n            break;\r\n        }\r\n    });\r\n    networkCache.votingMachines[votingMachine._address].events =\r\n      votingMachineEventsInCache;\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Gets all the events form the permission registry and stores the permissions set.\r\n  async updatePermissionRegistry(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    if (networkWeb3Contracts.permissionRegistry._address !== ZERO_ADDRESS) {\r\n      let permissionRegistryEvents = await getEvents(\r\n        web3,\r\n        networkWeb3Contracts.permissionRegistry,\r\n        fromBlock,\r\n        toBlock,\r\n        'allEvents'\r\n      );\r\n\r\n      permissionRegistryEvents.forEach(permissionRegistryEvent => {\r\n        const eventValues = permissionRegistryEvent.returnValues;\r\n\r\n        if (!networkCache.callPermissions[eventValues.asset])\r\n          networkCache.callPermissions[eventValues.asset] = {};\r\n\r\n        if (!networkCache.callPermissions[eventValues.asset][eventValues.from])\r\n          networkCache.callPermissions[eventValues.asset][eventValues.from] =\r\n            {};\r\n\r\n        if (\r\n          !networkCache.callPermissions[eventValues.asset][eventValues.from][\r\n            eventValues.to\r\n          ]\r\n        )\r\n          networkCache.callPermissions[eventValues.asset][eventValues.from][\r\n            eventValues.to\r\n          ] = {};\r\n\r\n        networkCache.callPermissions[eventValues.asset][eventValues.from][\r\n          eventValues.to\r\n        ][eventValues.functionSignature] = {\r\n          value: eventValues.value,\r\n          fromTime: eventValues.fromTime,\r\n        };\r\n      });\r\n    }\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  /**\r\n   * @function updateVestingContracts\r\n   * @description Get all \"VestingCreated\" events from VestingFactory contract and store created TokenVesting contract info into cache.\r\n   */\r\n\r\n  async updateVestingContracts(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    if (networkWeb3Contracts.vestingFactory) {\r\n      try {\r\n        const vestingFactoryEvents = await getEvents(\r\n          web3,\r\n          networkWeb3Contracts.vestingFactory,\r\n          fromBlock,\r\n          toBlock,\r\n          'allEvents'\r\n        );\r\n\r\n        console.debug(\r\n          'Total VestingFactory \"VestingCreated\" Events: ',\r\n          vestingFactoryEvents.length\r\n        );\r\n\r\n        for (let event of vestingFactoryEvents) {\r\n          const callsToExecute = [\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'beneficiary()',\r\n              [],\r\n              ['address'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'cliff()',\r\n              [],\r\n              ['uint256'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'duration()',\r\n              [],\r\n              ['uint256'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'owner()',\r\n              [],\r\n              ['address'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'start()',\r\n              [],\r\n              ['uint256'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'isOwner()',\r\n              [],\r\n              ['bool'],\r\n            ],\r\n            [\r\n              event.returnValues.vestingContractAddress,\r\n              'revocable()',\r\n              [],\r\n              ['bool'],\r\n            ],\r\n          ];\r\n\r\n          const callsResponse = await executeMulticall(\r\n            networkWeb3Contracts.multicall,\r\n            callsToExecute\r\n          );\r\n\r\n          const tokenContractInfo = {\r\n            address: event.returnValues.vestingContractAddress,\r\n            beneficiary: callsResponse.decodedReturnData[0][0],\r\n            cliff: callsResponse.decodedReturnData[1][0],\r\n            duration: callsResponse.decodedReturnData[2][0],\r\n            owner: callsResponse.decodedReturnData[3][0],\r\n            start: callsResponse.decodedReturnData[4][0],\r\n            isOwner: callsResponse.decodedReturnData[5][0],\r\n            revocable: callsResponse.decodedReturnData[6][0],\r\n          };\r\n\r\n          networkCache.vestingContracts = [\r\n            ...(networkCache.vestingContracts ?? []),\r\n            tokenContractInfo,\r\n          ];\r\n        }\r\n      } catch (error) {\r\n        console.error('Error in updateVestingContracts', error);\r\n      }\r\n    }\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Update all the schemes information\r\n  async updateSchemes(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    // Get all the events from the Controller\r\n    let controllerEvents = await getEvents(\r\n      web3,\r\n      networkWeb3Contracts.controller,\r\n      fromBlock,\r\n      toBlock,\r\n      'allEvents'\r\n    );\r\n\r\n    // Process all the schemes that changed their registered state based on the events\r\n    await batchPromisesOntarget(\r\n      controllerEvents\r\n        .filter(controllerEvent => {\r\n          return (\r\n            (controllerEvent.event === 'UnregisterScheme' ||\r\n              controllerEvent.event === 'RegisterScheme') &&\r\n            controllerEvent.returnValues._sender !==\r\n              controllerEvent.returnValues._scheme\r\n          );\r\n        })\r\n        .map(controllerEvent => {\r\n          return this.processScheme(\r\n            controllerEvent.returnValues._scheme,\r\n            networkCache,\r\n            networkContracts,\r\n            web3,\r\n            toBlock\r\n          );\r\n        }),\r\n      networkCache,\r\n      5\r\n    );\r\n\r\n    // Process all the registered schemes\r\n    await batchPromisesOntarget(\r\n      Object.keys(networkCache.schemes)\r\n        .filter(schemeAddress => {\r\n          return networkCache.schemes[schemeAddress].registered;\r\n        })\r\n        .map(schemeAddress => {\r\n          return this.processScheme(\r\n            schemeAddress,\r\n            networkCache,\r\n            networkContracts,\r\n            web3,\r\n            toBlock\r\n          );\r\n        }),\r\n      networkCache,\r\n      5\r\n    );\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Update the proposals information\r\n  async updateProposals(\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    toBlock: number,\r\n    web3: Web3\r\n  ): Promise<DaoNetworkCache> {\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    // Update existent active proposals\r\n    await batchPromisesOntarget(\r\n      Object.keys(networkCache.proposals)\r\n        .filter(proposalId => {\r\n          const proposal = networkCache.proposals[proposalId];\r\n          const scheme = networkCache.schemes[proposal.scheme];\r\n          return (\r\n            // Only update proposals for registered schemes\r\n            scheme.registered &&\r\n            // This condition check that the proposal already existed in the current block range.\r\n            // If not, it means that the proposal was created in the current block range when processing the scheme,\r\n            // So there is no need to process it again.\r\n            proposal.creationEvent.blockNumber < fromBlock &&\r\n            // This condition check that the proposal is active\r\n            (proposal.stateInVotingMachine >\r\n              VotingMachineProposalState.Executed ||\r\n              proposal.stateInScheme === WalletSchemeProposalState.Submitted)\r\n          );\r\n        })\r\n        .map(proposalId => {\r\n          return this.processProposal(\r\n            proposalId,\r\n            networkCache,\r\n            networkContracts,\r\n            web3,\r\n            fromBlock,\r\n            toBlock\r\n          );\r\n        }),\r\n      networkCache,\r\n      5,\r\n      1000,\r\n      500\r\n    );\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  async updateProposalTitles(\r\n    networkCache: DaoNetworkCache,\r\n    proposalTitles: Record<string, string>\r\n  ) {\r\n    let retryIntent = 0;\r\n    // Update proposals title\r\n    for (\r\n      let proposalIndex = 0;\r\n      proposalIndex < Object.keys(networkCache.proposals).length;\r\n      proposalIndex++\r\n    ) {\r\n      const proposal =\r\n        networkCache.proposals[\r\n          Object.keys(networkCache.proposals)[proposalIndex]\r\n        ];\r\n      const ipfsHash = descriptionHashToIPFSHash(proposal.descriptionHash);\r\n\r\n      // TODO: Move this somewhere else later.\r\n      const invalidTitleProposals = [\r\n        '0xbd5a578170b28eedb9ed05adcd7a904180a18178a7fee5627640bce217601f60',\r\n        '0x216c41327eb0d8e6b64018626193d132d379b43b9b031720ee6a11494ad400a7',\r\n        '0xfb15b6f9e3bf61099d20bb3b39375d4e2a6f7ac3c72179537ce147ed991d61b4',\r\n        '0x1e6c8f56755897b1aea4f47b009095e9bee23714a87094b48dbb78c8744fd5b2',\r\n        '0x4cbdd4c473e3c2dc6090cd2842b6884770406a43dd96d1abe36167b7437d9bec',\r\n        '0x5016d176a2004ff7dfd1a3bf358f2d73c57d9e4b2e64053888f77a2e3555f101',\r\n\r\n        // TODO: Fix this xdai proposal IPFS content\r\n        '0xfb15b6f9e3bf61099d20bb3b39375d4e2a6f7ac3c72179537ce147ed991d61b4',\r\n      ];\r\n\r\n      // If the script is running on the client side and it already tried once, or has the title, continue.\r\n      if (\r\n        invalidTitleProposals.indexOf(proposal.id) > -1 ||\r\n        retryIntent > 3 ||\r\n        proposal.title\r\n      ) {\r\n        retryIntent = 0;\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        !proposalTitles[proposal.id] &&\r\n        !isWalletScheme(networkCache.schemes[proposal.scheme]) &&\r\n        proposal.descriptionHash &&\r\n        proposal.descriptionHash.length > 0 &&\r\n        // Try to get title if cache is running in node script or if proposal was submitted in last 100000 blocks\r\n        proposal.title?.length === 0\r\n      )\r\n        try {\r\n          console.debug(\r\n            `Getting title from proposal ${proposal.id} with ipfsHash ${ipfsHash}`\r\n          );\r\n          const response = await getIPFSFile(ipfsHash);\r\n          if (response && response.data && response.data.title) {\r\n            proposalTitles[proposal.id] = response.data.title;\r\n          } else {\r\n            console.warn(\r\n              `Couldnt not get title from proposal ${proposal.id} with ipfsHash ${ipfsHash}`\r\n            );\r\n          }\r\n        } catch (error) {\r\n          if (\r\n            (error as Error).message === 'Request failed with status code 429'\r\n          ) {\r\n            console.error(\r\n              `Request failed with status code 429 waiting 10 second and trying again..`\r\n            );\r\n            await sleep(10000);\r\n          } else {\r\n            console.error(\r\n              `Error getting title from proposal ${proposal.id} with hash ${ipfsHash} waiting 1 second and trying again..`\r\n            );\r\n            await sleep(1000);\r\n          }\r\n          proposalIndex--;\r\n          retryIntent++;\r\n        }\r\n    }\r\n\r\n    return proposalTitles;\r\n  }\r\n\r\n  // Process a scheme in the networkCache\r\n  // If the scheme does not exist in the cache it gets the immutable + mutable data\r\n  // The scheme already exists it gets the mutable data only\r\n  // At the end it process all the new proposals added in the scheme to the toBlock\r\n  async processScheme(\r\n    schemeAddress: string,\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    web3: Web3,\r\n    toBlock: number\r\n  ): Promise<DaoNetworkCache> {\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n    const isNewScheme = !networkCache.schemes[schemeAddress];\r\n    const schemeTypeData = getSchemeConfig(networkContracts, schemeAddress);\r\n    console.debug('Processing Scheme', schemeAddress, schemeTypeData);\r\n\r\n    let controllerAddress = networkWeb3Contracts.controller._address;\r\n    let schemeName = schemeTypeData.name;\r\n    let maxSecondsForExecution = 0;\r\n    let maxRepPercentageChange = 0;\r\n    let schemeType = schemeTypeData.type;\r\n    const isWalletScheme = schemeType === 'WalletScheme';\r\n\r\n    let callsToExecute = [\r\n      [\r\n        controllerAddress,\r\n        'getSchemePermissions(address,address)',\r\n        [schemeAddress, networkWeb3Contracts.avatar._address],\r\n        ['bytes4'],\r\n      ],\r\n      [\r\n        controllerAddress,\r\n        'getSchemeParameters(address,address)',\r\n        [schemeAddress, networkWeb3Contracts.avatar._address],\r\n        ['bytes32'],\r\n      ],\r\n      [\r\n        controllerAddress,\r\n        'isSchemeRegistered(address,address)',\r\n        [schemeAddress, networkWeb3Contracts.avatar._address],\r\n        ['bool'],\r\n      ],\r\n    ];\r\n\r\n    if (isWalletScheme) {\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'maxSecondsForExecution()',\r\n        [],\r\n        ['uint256'],\r\n      ]);\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'maxRepPercentageChange()',\r\n        [],\r\n        ['uint256'],\r\n      ]);\r\n\r\n      if (isNewScheme) {\r\n        schemeType = (\r\n          await executeMulticall(networkWeb3Contracts.multicall, [\r\n            [schemeAddress, 'SCHEME_TYPE()', [], ['string']],\r\n          ])\r\n        ).decodedReturnData[0][0];\r\n        if (schemeType === 'Wallet Scheme v1')\r\n          schemeType = 'Wallet Scheme v1.0';\r\n\r\n        callsToExecute.push([\r\n          schemeAddress,\r\n          'votingMachine()',\r\n          [],\r\n          ['address'],\r\n        ]);\r\n        callsToExecute.push([schemeAddress, 'schemeName()', [], ['string']]);\r\n\r\n        switch (schemeType) {\r\n          case 'Wallet Scheme v1.0':\r\n            callsToExecute.push([\r\n              schemeAddress,\r\n              'controllerAddress()',\r\n              [],\r\n              ['address'],\r\n            ]);\r\n            break;\r\n          default:\r\n            callsToExecute.push([\r\n              schemeAddress,\r\n              'doAvatarGenericCalls()',\r\n              [],\r\n              ['bool'],\r\n            ]);\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    const callsResponse1 = await executeMulticall(\r\n      networkWeb3Contracts.multicall,\r\n      callsToExecute\r\n    );\r\n\r\n    const registered = callsResponse1.decodedReturnData[2][0];\r\n    const permissions = decodePermission(\r\n      callsResponse1.decodedReturnData[0][0]\r\n    );\r\n    const paramsHash =\r\n      schemeTypeData.voteParams || callsResponse1.decodedReturnData[1][0];\r\n\r\n    const votingMachineAddress = !isNewScheme\r\n      ? networkCache.schemes[schemeAddress].votingMachine\r\n      : isWalletScheme\r\n      ? callsResponse1.decodedReturnData[5][0]\r\n      : schemeTypeData.votingMachine;\r\n\r\n    if (isWalletScheme) {\r\n      maxSecondsForExecution = callsResponse1.decodedReturnData[3] || 0;\r\n      maxRepPercentageChange = callsResponse1.decodedReturnData[4][0];\r\n\r\n      if (isNewScheme) {\r\n        schemeName = callsResponse1.decodedReturnData[6][0];\r\n\r\n        switch (schemeType) {\r\n          case 'Wallet Scheme v1.0':\r\n            controllerAddress = callsResponse1.decodedReturnData[7][0];\r\n            break;\r\n          default:\r\n            controllerAddress = callsResponse1.decodedReturnData[7][0]\r\n              ? networkWeb3Contracts.controller._address\r\n              : ZERO_ADDRESS;\r\n            break;\r\n        }\r\n      }\r\n    }\r\n\r\n    callsToExecute = [\r\n      [\r\n        votingMachineAddress,\r\n        'orgBoostedProposalsCnt(bytes32)',\r\n        [\r\n          web3.utils.soliditySha3(\r\n            schemeAddress,\r\n            networkWeb3Contracts.avatar._address\r\n          ),\r\n        ],\r\n        ['uint256'],\r\n      ],\r\n    ];\r\n\r\n    // Register the new voting parameters in the voting machine params\r\n    if (\r\n      !networkCache.votingMachines[votingMachineAddress].votingParameters[\r\n        paramsHash\r\n      ]\r\n    ) {\r\n      callsToExecute.push([\r\n        votingMachineAddress,\r\n        'parameters(bytes32)',\r\n        [paramsHash],\r\n        [\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'uint256',\r\n          'address',\r\n        ],\r\n      ]);\r\n    }\r\n\r\n    if (isWalletScheme) {\r\n      callsToExecute.push([\r\n        votingMachineAddress,\r\n        'boostedVoteRequiredPercentage(bytes32,bytes32)',\r\n        [\r\n          web3.utils.soliditySha3(\r\n            schemeAddress,\r\n            networkWeb3Contracts.avatar._address\r\n          ),\r\n          paramsHash,\r\n        ],\r\n        ['uint256'],\r\n      ]);\r\n    }\r\n\r\n    const callsResponse2 = await executeMulticall(\r\n      networkWeb3Contracts.multicall,\r\n      callsToExecute\r\n    );\r\n\r\n    const boostedProposals = callsResponse2.decodedReturnData[0][0];\r\n\r\n    if (\r\n      !networkCache.votingMachines[votingMachineAddress].votingParameters[\r\n        paramsHash\r\n      ]\r\n    ) {\r\n      networkCache.votingMachines[votingMachineAddress].votingParameters[\r\n        paramsHash\r\n      ] = {\r\n        queuedVoteRequiredPercentage: callsResponse2.decodedReturnData[1][0],\r\n        queuedVotePeriodLimit: callsResponse2.decodedReturnData[1][1],\r\n        boostedVotePeriodLimit: callsResponse2.decodedReturnData[1][2],\r\n        preBoostedVotePeriodLimit: callsResponse2.decodedReturnData[1][3],\r\n        thresholdConst: callsResponse2.decodedReturnData[1][4],\r\n        limitExponentValue: callsResponse2.decodedReturnData[1][5],\r\n        quietEndingPeriod: callsResponse2.decodedReturnData[1][6],\r\n        proposingRepReward: callsResponse2.decodedReturnData[1][7],\r\n        votersReputationLossRatio: callsResponse2.decodedReturnData[1][8],\r\n        minimumDaoBounty: callsResponse2.decodedReturnData[1][9],\r\n        daoBountyConst: callsResponse2.decodedReturnData[1][10],\r\n        activationTime: callsResponse2.decodedReturnData[1][11],\r\n      };\r\n    }\r\n\r\n    const boostedVoteRequiredPercentage = isWalletScheme\r\n      ? callsResponse2.decodedReturnData[callsToExecute.length - 1][0]\r\n      : 0;\r\n\r\n    if (isNewScheme) {\r\n      networkCache.schemes[schemeAddress] = {\r\n        address: schemeAddress,\r\n        registered: registered,\r\n        controllerAddress,\r\n        name: schemeName,\r\n        type: schemeType,\r\n        votingMachine: votingMachineAddress,\r\n        paramsHash: paramsHash,\r\n        permissions,\r\n        boostedVoteRequiredPercentage,\r\n        proposalIds: [],\r\n        boostedProposals: boostedProposals,\r\n        maxSecondsForExecution,\r\n        maxRepPercentageChange,\r\n        newProposalEvents: [],\r\n      };\r\n    } else {\r\n      networkCache.schemes[schemeAddress].boostedProposals = boostedProposals;\r\n      networkCache.schemes[schemeAddress].maxSecondsForExecution =\r\n        maxSecondsForExecution;\r\n      networkCache.schemes[schemeAddress].maxRepPercentageChange =\r\n        maxRepPercentageChange;\r\n      networkCache.schemes[schemeAddress].boostedVoteRequiredPercentage =\r\n        boostedVoteRequiredPercentage;\r\n      networkCache.schemes[schemeAddress].paramsHash = paramsHash;\r\n      networkCache.schemes[schemeAddress].permissions = permissions;\r\n      networkCache.schemes[schemeAddress].registered = registered;\r\n    }\r\n\r\n    // Get the new proposals submitted in the scheme and process it\r\n    const avatarAddressEncoded = web3.eth.abi.encodeParameter(\r\n      'address',\r\n      networkCache.address\r\n    );\r\n    const fromBlock = networkCache.blockNumber + 1;\r\n\r\n    let schemeEvents = [];\r\n    for (let i = 0; i < schemeTypeData.newProposalTopics.length; i++) {\r\n      schemeEvents = schemeEvents.concat(\r\n        await getRawEvents(\r\n          web3,\r\n          schemeAddress,\r\n          fromBlock,\r\n          toBlock,\r\n          schemeTypeData.newProposalTopics[i]\r\n        )\r\n      );\r\n    }\r\n\r\n    await batchPromisesOntarget(\r\n      schemeEvents.map(schemeEvent => {\r\n        const proposalId: string =\r\n          schemeEvent.topics[1] === avatarAddressEncoded\r\n            ? schemeEvent.topics[2]\r\n            : schemeEvent.topics[1];\r\n\r\n        schemeEvent.tx = schemeEvent.transactionHash;\r\n\r\n        return this.processProposal(\r\n          proposalId,\r\n          networkCache,\r\n          networkContracts,\r\n          web3,\r\n          fromBlock,\r\n          toBlock,\r\n          schemeEvent\r\n        );\r\n      }),\r\n      networkCache,\r\n      50\r\n    );\r\n\r\n    return networkCache;\r\n  }\r\n\r\n  // Process a proposal in the networkCache\r\n  // If the proposal does not exist in the cache it gets the immutable + mutable data\r\n  // The proposal already exists it gets the mutable data only\r\n  async processProposal(\r\n    proposalId: string,\r\n    networkCache: DaoNetworkCache,\r\n    networkContracts: NetworkContracts,\r\n    web3: Web3,\r\n    fromBlock: number,\r\n    toBlock: number,\r\n    creationEvent?: BlockchainEvent\r\n  ): Promise<DaoNetworkCache> {\r\n    const newProposal = !networkCache.proposals[proposalId];\r\n    const schemeAddress = newProposal\r\n      ? creationEvent.address\r\n      : networkCache.proposals[proposalId].scheme;\r\n    const schemeOfProposal = networkCache.schemes[schemeAddress];\r\n    const avatarAddress = networkCache.address;\r\n    const schemeTypeData = getSchemeConfig(networkContracts, schemeAddress);\r\n    const networkWeb3Contracts = await getContracts(networkContracts, web3);\r\n    const avatarAddressEncoded = web3.eth.abi.encodeParameter(\r\n      'address',\r\n      avatarAddress\r\n    );\r\n\r\n    // These first calls target mainly the voting machine where most of the proposal information is mutable\r\n    let callsToExecute = [\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'proposals(bytes32)',\r\n        [proposalId],\r\n        [\r\n          { type: 'bytes32', name: 'organizationId' },\r\n          { type: 'address', name: 'callbacks' },\r\n          { type: 'uint256', name: 'state' },\r\n          { type: 'uint256', name: 'winningVote' },\r\n          { type: 'address', name: 'proposer' },\r\n          {\r\n            type: 'uint256',\r\n            name: 'currentBoostedVotePeriodLimit',\r\n          },\r\n          { type: 'bytes32', name: 'paramsHash' },\r\n          { type: 'uint256', name: 'daoBountyRemain' },\r\n          { type: 'uint256', name: 'daoBounty' },\r\n          { type: 'uint256', name: 'totalStakes' },\r\n          { type: 'uint256', name: 'confidenceThreshold' },\r\n          {\r\n            type: 'uint256',\r\n            name: 'secondsFromTimeOutTillExecuteBoosted',\r\n          },\r\n        ],\r\n      ],\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'voteStatus(bytes32,uint256)',\r\n        [proposalId, 1],\r\n        ['uint256'],\r\n      ],\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'voteStatus(bytes32,uint256)',\r\n        [proposalId, 2],\r\n        ['uint256'],\r\n      ],\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'proposalStatus(bytes32)',\r\n        [proposalId],\r\n        ['uint256', 'uint256', 'uint256', 'uint256'],\r\n      ],\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'getProposalTimes(bytes32)',\r\n        [proposalId],\r\n        ['uint256', 'uint256', 'uint256'],\r\n      ],\r\n      [\r\n        networkCache.schemes[schemeAddress].votingMachine,\r\n        'shouldBoost(bytes32)',\r\n        [proposalId],\r\n        ['bool'],\r\n      ],\r\n    ];\r\n\r\n    // The next calls added target ContributionReward and WalletScheme  to get immutable and mutable data\r\n    if (schemeTypeData.type === 'ContributionReward') {\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'getRedeemedPeriods(bytes32,address,uint256)',\r\n        [proposalId, schemeAddress, 0],\r\n        ['uint256'],\r\n      ]);\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'getRedeemedPeriods(bytes32,address,uint256)',\r\n        [proposalId, avatarAddress, 1],\r\n        ['uint256'],\r\n      ]);\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'getRedeemedPeriods(bytes32,address,uint256)',\r\n        [proposalId, avatarAddress, 2],\r\n        ['uint256'],\r\n      ]);\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'getRedeemedPeriods(bytes32,address,uint256)',\r\n        [proposalId, avatarAddress, 3],\r\n        ['uint256'],\r\n      ]);\r\n    } else if (isWalletScheme(schemeOfProposal)) {\r\n      callsToExecute.push([\r\n        schemeAddress,\r\n        'getOrganizationProposal(bytes32)',\r\n        [proposalId],\r\n        [\r\n          { type: 'address[]', name: 'to' },\r\n          { type: 'bytes[]', name: 'callData' },\r\n          { type: 'uint256[]', name: 'value' },\r\n          { type: 'uint256', name: 'state' },\r\n          { type: 'string', name: 'title' },\r\n          { type: 'string', name: 'descriptionHash' },\r\n          { type: 'uint256', name: 'submittedTime' },\r\n        ],\r\n      ]);\r\n    }\r\n\r\n    const callsResponse = await executeMulticall(\r\n      networkWeb3Contracts.multicall,\r\n      callsToExecute\r\n    );\r\n\r\n    const proposalTimes = callsResponse.decodedReturnData[4];\r\n\r\n    let schemeProposalInfo = {\r\n      to: [],\r\n      callData: [],\r\n      value: [],\r\n      state: WalletSchemeProposalState.Submitted,\r\n      title: '',\r\n      descriptionHash: '',\r\n      submittedTime: 0,\r\n    };\r\n    let decodedProposer;\r\n    let creationLogDecoded;\r\n\r\n    if (isWalletScheme(schemeOfProposal)) {\r\n      schemeProposalInfo.state = callsResponse.decodedReturnData[6].state;\r\n\r\n      if (newProposal) {\r\n        schemeProposalInfo.to = callsResponse.decodedReturnData[6].to;\r\n        schemeProposalInfo.callData =\r\n          callsResponse.decodedReturnData[6].callData;\r\n        schemeProposalInfo.value = callsResponse.decodedReturnData[6].value;\r\n        schemeProposalInfo.title = callsResponse.decodedReturnData[6].title;\r\n        schemeProposalInfo.descriptionHash =\r\n          callsResponse.decodedReturnData[6].descriptionHash;\r\n        schemeProposalInfo.submittedTime =\r\n          callsResponse.decodedReturnData[6].submittedTime;\r\n      }\r\n    } else {\r\n      // Here we get the events triggered in the GenericMulticall to get their final state\r\n      // When the proposal is executed by the voting machine we get if the proposal was rejected\r\n      // If the proposal was executed by teh voting machine and not rejected we get the ProposalEnded\r\n      // to know if it was executed by the WalletScheme\r\n      if (schemeOfProposal.type === 'GenericMulticall') {\r\n        // event ProposalExecutedByVotingMachine(address indexed _avatar,bytes32 indexed _proposalId,int256 _param)\r\n        const votingMachineExecutionEvent =\r\n          schemeProposalInfo.state === WalletSchemeProposalState.Submitted\r\n            ? await getRawEvents(\r\n                web3,\r\n                schemeAddress,\r\n                fromBlock,\r\n                toBlock,\r\n                [\r\n                  '0x25d4c89430c1f10c60c292556941e3e624ec1ec04972a5da46cee1b352429cbe',\r\n                  avatarAddressEncoded,\r\n                  proposalId,\r\n                ],\r\n                10000000\r\n              )\r\n            : [];\r\n        if (\r\n          votingMachineExecutionEvent.length > 0 &&\r\n          votingMachineExecutionEvent[0].data !==\r\n            '0x0000000000000000000000000000000000000000000000000000000000000001'\r\n        )\r\n          schemeProposalInfo.state = WalletSchemeProposalState.Rejected;\r\n\r\n        if (\r\n          callsResponse.decodedReturnData[0].state ===\r\n            VotingMachineProposalState.Executed &&\r\n          schemeProposalInfo.state === WalletSchemeProposalState.Submitted\r\n        ) {\r\n          // event ProposalDeleted(address indexed _avatar, bytes32 indexed _proposalId)\r\n          const executionEvent = await getRawEvents(\r\n            web3,\r\n            schemeAddress,\r\n            fromBlock,\r\n            toBlock,\r\n            [\r\n              '0x253ad9614c337848bbe7dc3b18b439d139ef5787282b5a517ba7296513d1f533',\r\n              avatarAddressEncoded,\r\n              proposalId,\r\n            ],\r\n            10000000\r\n          );\r\n          if (executionEvent.length > 0) {\r\n            schemeProposalInfo.state =\r\n              WalletSchemeProposalState.ExecutionSucceded;\r\n          }\r\n        }\r\n\r\n        // If any of the values of the redeemPeriods of the contribution reward is higher than zero it means that it executed the reward\r\n      } else if (schemeOfProposal.type === 'ContributionReward') {\r\n        if (\r\n          callsResponse.decodedReturnData[0].winningVote === '2' &&\r\n          callsResponse.decodedReturnData[0].state === '2'\r\n        ) {\r\n          schemeProposalInfo.state = WalletSchemeProposalState.Rejected;\r\n        } else if (\r\n          callsResponse.decodedReturnData[6][0] > 0 ||\r\n          callsResponse.decodedReturnData[7][0] > 0 ||\r\n          callsResponse.decodedReturnData[8][0] > 0 ||\r\n          callsResponse.decodedReturnData[9][0] > 0\r\n        ) {\r\n          schemeProposalInfo.state =\r\n            WalletSchemeProposalState.ExecutionSucceded;\r\n        } else {\r\n          schemeProposalInfo.state = WalletSchemeProposalState.Submitted;\r\n        }\r\n      }\r\n    }\r\n\r\n    // If the proposal is processed with a creation event it means that it has to be added to the cache\r\n    // We will get the immutable data stored on the contracts by decoding the creation event logs\r\n    if (newProposal) {\r\n      if (creationEvent && !isWalletScheme(schemeOfProposal)) {\r\n        const transactionReceipt = await web3.eth.getTransactionReceipt(\r\n          creationEvent.tx\r\n        );\r\n        try {\r\n          // Decode the creation event data to get the num of choices, paramsHash and proposer\r\n          schemeTypeData.newProposalTopics.forEach((newProposalTopic, i) => {\r\n            transactionReceipt.logs.forEach(log => {\r\n              if (\r\n                log.topics[0] ===\r\n                '0x75b4ff136cc5de5957574c797de3334eb1c141271922b825eb071e0487ba2c5c'\r\n              ) {\r\n                decodedProposer = web3.eth.abi.decodeParameters(\r\n                  [\r\n                    { type: 'uint256', name: '_numOfChoices' },\r\n                    { type: 'address', name: '_proposer' },\r\n                    { type: 'bytes32', name: '_paramsHash' },\r\n                  ],\r\n                  log.data\r\n                )._proposer;\r\n              }\r\n              if (\r\n                !creationLogDecoded &&\r\n                log.topics[0] === newProposalTopic[0]\r\n              ) {\r\n                creationLogDecoded = web3.eth.abi.decodeParameters(\r\n                  schemeTypeData.creationLogEncoding[i],\r\n                  log.data\r\n                );\r\n                if (\r\n                  creationLogDecoded._descriptionHash.length > 0 &&\r\n                  creationLogDecoded._descriptionHash !== ZERO_HASH\r\n                ) {\r\n                  schemeProposalInfo.descriptionHash =\r\n                    ipfsHashToDescriptionHash(\r\n                      creationLogDecoded._descriptionHash\r\n                    );\r\n                }\r\n              }\r\n            });\r\n          });\r\n        } catch (error) {\r\n          console.error(\r\n            'Error in getting proposal data from creation event',\r\n            error\r\n          );\r\n        }\r\n      }\r\n\r\n      // Try to decode as much as we can from the creation event, decoding creation logs.\r\n      // Depending the type of the scheme we have to decode different data and parse it to decoded calls\r\n      if (schemeTypeData.type === 'SchemeRegistrar') {\r\n        schemeProposalInfo.to = [schemeTypeData.contractToCall];\r\n        schemeProposalInfo.value = [0];\r\n\r\n        if (creationLogDecoded._parametersHash) {\r\n          schemeProposalInfo.callData = [\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'registerScheme',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'address', name: '_scheme' },\r\n                  { type: 'bytes32', name: '_paramsHash' },\r\n                  { type: 'bytes4', name: '_permissions' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded['_scheme '],\r\n                creationLogDecoded._parametersHash,\r\n                creationLogDecoded._permissions,\r\n                avatarAddress,\r\n              ]\r\n            ),\r\n          ];\r\n        } else {\r\n          schemeProposalInfo.callData = [\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'unregisterScheme',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'address', name: '_scheme' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [creationLogDecoded['_scheme '], avatarAddress]\r\n            ),\r\n          ];\r\n        }\r\n      } else if (schemeTypeData.type === 'ContributionReward') {\r\n        if (creationLogDecoded._reputationChange > 0) {\r\n          schemeProposalInfo.to.push(schemeTypeData.contractToCall);\r\n          schemeProposalInfo.value.push(0);\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'mintReputation',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'uint256', name: '_amount' },\r\n                  { type: 'address', name: '_to' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._reputationChange,\r\n                creationLogDecoded._beneficiary,\r\n                avatarAddress,\r\n              ]\r\n            )\r\n          );\r\n        } else if (creationLogDecoded._reputationChange < 0) {\r\n          schemeProposalInfo.to.push(schemeTypeData.contractToCall);\r\n          schemeProposalInfo.value.push(0);\r\n\r\n          // Remove the negative sign in the number\r\n          if (creationLogDecoded._reputationChange[0] === '-')\r\n            creationLogDecoded._reputationChange =\r\n              creationLogDecoded._reputationChange.substring(1);\r\n\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'burnReputation',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'uint256', name: '_amount' },\r\n                  { type: 'address', name: '_from' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._reputationChange,\r\n                creationLogDecoded._beneficiary,\r\n                avatarAddress,\r\n              ]\r\n            )\r\n          );\r\n        }\r\n\r\n        if (creationLogDecoded._rewards[0] > 0) {\r\n          schemeProposalInfo.to.push(schemeTypeData.contractToCall);\r\n          schemeProposalInfo.value.push(0);\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'mintTokens',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'uint256', name: '_amount' },\r\n                  { type: 'address', name: '_beneficiary' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._rewards[0],\r\n                creationLogDecoded._beneficiary,\r\n                avatarAddress,\r\n              ]\r\n            )\r\n          );\r\n        }\r\n\r\n        if (creationLogDecoded._rewards[1] > 0) {\r\n          schemeProposalInfo.to.push(schemeTypeData.contractToCall);\r\n          schemeProposalInfo.value.push(0);\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'sendEther',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'uint256', name: '_amountInWei' },\r\n                  { type: 'address', name: '_to' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._rewards[1],\r\n                creationLogDecoded._beneficiary,\r\n                avatarAddress,\r\n              ]\r\n            )\r\n          );\r\n        }\r\n\r\n        if (creationLogDecoded._rewards[2] > 0) {\r\n          schemeProposalInfo.to.push(schemeTypeData.contractToCall);\r\n          schemeProposalInfo.value.push(0);\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'externalTokenTransfer',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'address', name: '_externalToken' },\r\n                  { type: 'address', name: '_to' },\r\n                  { type: 'uint256', name: '_value' },\r\n                  { type: 'address', name: '_avatar' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._externalToken,\r\n                creationLogDecoded._beneficiary,\r\n                creationLogDecoded._rewards[2],\r\n                avatarAddress,\r\n              ]\r\n            )\r\n          );\r\n        }\r\n      } else if (schemeTypeData.type === 'GenericScheme') {\r\n        schemeProposalInfo.to = [networkWeb3Contracts.controller._address];\r\n        schemeProposalInfo.value = [0];\r\n        schemeProposalInfo.callData = [\r\n          web3.eth.abi.encodeFunctionCall(\r\n            {\r\n              name: 'genericCall',\r\n              type: 'function',\r\n              inputs: [\r\n                { type: 'address', name: '_contract' },\r\n                { type: 'bytes', name: '_data' },\r\n                { type: 'address', name: '_avatar' },\r\n                { type: 'uint256', name: '_value' },\r\n              ],\r\n            },\r\n            [\r\n              schemeTypeData.contractToCall,\r\n              creationLogDecoded._data,\r\n              avatarAddress,\r\n              creationLogDecoded._value,\r\n            ]\r\n          ),\r\n        ];\r\n      } else if (schemeTypeData.type === 'GenericMulticall') {\r\n        for (\r\n          let callIndex = 0;\r\n          callIndex < creationLogDecoded._contractsToCall.length;\r\n          callIndex++\r\n        ) {\r\n          schemeProposalInfo.to.push(networkWeb3Contracts.controller._address);\r\n          schemeProposalInfo.value.push(0);\r\n          schemeProposalInfo.callData.push(\r\n            web3.eth.abi.encodeFunctionCall(\r\n              {\r\n                name: 'genericCall',\r\n                type: 'function',\r\n                inputs: [\r\n                  { type: 'address', name: '_contract' },\r\n                  { type: 'bytes', name: '_data' },\r\n                  { type: 'address', name: '_avatar' },\r\n                  { type: 'uint256', name: '_value' },\r\n                ],\r\n              },\r\n              [\r\n                creationLogDecoded._contractsToCall[callIndex],\r\n                creationLogDecoded._callsData[callIndex],\r\n                avatarAddress,\r\n                creationLogDecoded._values[callIndex],\r\n              ]\r\n            )\r\n          );\r\n        }\r\n      }\r\n\r\n      // Register the new voting parameters in the voting machine params if they dont exist in the cache\r\n      if (\r\n        !networkCache.votingMachines[\r\n          networkCache.schemes[schemeAddress].votingMachine\r\n        ].votingParameters[callsResponse.decodedReturnData[0].paramsHash]\r\n      ) {\r\n        const votingParameters = (\r\n          await executeMulticall(networkWeb3Contracts.multicall, [\r\n            [\r\n              networkCache.schemes[schemeAddress].votingMachine,\r\n              'parameters(bytes32)',\r\n              [callsResponse.decodedReturnData[0].paramsHash],\r\n              [\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'uint256',\r\n                'address',\r\n              ],\r\n            ],\r\n          ])\r\n        ).decodedReturnData[0];\r\n        networkCache.votingMachines[\r\n          networkCache.schemes[schemeAddress].votingMachine\r\n        ].votingParameters[callsResponse.decodedReturnData[0].paramsHash] = {\r\n          queuedVoteRequiredPercentage: votingParameters[0],\r\n          queuedVotePeriodLimit: votingParameters[1],\r\n          boostedVotePeriodLimit: votingParameters[2],\r\n          preBoostedVotePeriodLimit: votingParameters[3],\r\n          thresholdConst: votingParameters[4],\r\n          limitExponentValue: votingParameters[5],\r\n          quietEndingPeriod: votingParameters[6],\r\n          proposingRepReward: votingParameters[7],\r\n          votersReputationLossRatio: votingParameters[8],\r\n          minimumDaoBounty: votingParameters[9],\r\n          daoBountyConst: votingParameters[10],\r\n          activationTime: votingParameters[11],\r\n        };\r\n      }\r\n\r\n      networkCache.proposals[proposalId] = {\r\n        id: proposalId,\r\n        scheme: schemeAddress,\r\n        to: schemeProposalInfo.to,\r\n        title: schemeProposalInfo.title || '',\r\n        callData: schemeProposalInfo.callData,\r\n        values: schemeProposalInfo.value.map(value => bnum(value)),\r\n        stateInScheme: Number(schemeProposalInfo.state),\r\n        stateInVotingMachine: Number(callsResponse.decodedReturnData[0].state),\r\n        descriptionHash: schemeProposalInfo.descriptionHash,\r\n        creationEvent: {\r\n          event: creationEvent.event,\r\n          signature: creationEvent.signature,\r\n          address: creationEvent.address,\r\n          tx: creationEvent.tx,\r\n          blockNumber: creationEvent.blockNumber,\r\n          timestamp: creationEvent.timestamp,\r\n          transactionIndex: creationEvent.transactionIndex,\r\n          logIndex: creationEvent.logIndex,\r\n        },\r\n        winningVote: callsResponse.decodedReturnData[0].winningVote,\r\n        proposer: decodedProposer\r\n          ? decodedProposer\r\n          : callsResponse.decodedReturnData[0].proposer,\r\n        currentBoostedVotePeriodLimit:\r\n          callsResponse.decodedReturnData[0].currentBoostedVotePeriodLimit,\r\n        paramsHash: callsResponse.decodedReturnData[0].paramsHash,\r\n        daoBountyRemain: bnum(\r\n          callsResponse.decodedReturnData[0].daoBountyRemain\r\n        ),\r\n        daoBounty: bnum(callsResponse.decodedReturnData[0].daoBounty),\r\n        confidenceThreshold:\r\n          callsResponse.decodedReturnData[0].confidenceThreshold,\r\n        secondsFromTimeOutTillExecuteBoosted:\r\n          callsResponse.decodedReturnData[0]\r\n            .secondsFromTimeOutTillExecuteBoosted,\r\n        submittedTime: bnum(proposalTimes[0]),\r\n        boostedPhaseTime: bnum(proposalTimes[1]),\r\n        preBoostedPhaseTime: bnum(proposalTimes[2]),\r\n        daoRedeemItsWinnings:\r\n          callsResponse.decodedReturnData[0].daoRedeemItsWinnings,\r\n        shouldBoost: callsResponse.decodedReturnData[5][0],\r\n        positiveVotes: bnum(callsResponse.decodedReturnData[1][0]),\r\n        negativeVotes: bnum(callsResponse.decodedReturnData[2][0]),\r\n        positiveStakes: bnum(callsResponse.decodedReturnData[3][2]),\r\n        negativeStakes: bnum(callsResponse.decodedReturnData[3][3]),\r\n      };\r\n\r\n      networkCache.schemes[schemeAddress].proposalIds.push(proposalId);\r\n      networkCache.schemes[schemeAddress].newProposalEvents.push({\r\n        proposalId: proposalId,\r\n        event: creationEvent.event,\r\n        signature: creationEvent.signature,\r\n        address: creationEvent.address,\r\n        tx: creationEvent.tx,\r\n        blockNumber: creationEvent.blockNumber,\r\n        timestamp: creationEvent.timestamp,\r\n        transactionIndex: creationEvent.transactionIndex,\r\n        logIndex: creationEvent.logIndex,\r\n      });\r\n\r\n      if (schemeProposalInfo.descriptionHash.length > 1) {\r\n        networkCache.ipfsHashes.push({\r\n          hash: descriptionHashToIPFSHash(schemeProposalInfo.descriptionHash),\r\n          type: 'proposal',\r\n          name: proposalId,\r\n        });\r\n      }\r\n\r\n      // Is the proposal is not new we only assign the values that are mutable\r\n    } else {\r\n      networkCache.proposals[proposalId].stateInScheme = Number(\r\n        schemeProposalInfo.state\r\n      );\r\n      networkCache.proposals[proposalId].stateInVotingMachine = Number(\r\n        callsResponse.decodedReturnData[0].state\r\n      );\r\n      networkCache.proposals[proposalId].winningVote =\r\n        callsResponse.decodedReturnData[0].winningVote;\r\n      networkCache.proposals[proposalId].currentBoostedVotePeriodLimit =\r\n        callsResponse.decodedReturnData[0].currentBoostedVotePeriodLimit;\r\n      networkCache.proposals[proposalId].daoBountyRemain = bnum(\r\n        callsResponse.decodedReturnData[0].daoBountyRemain\r\n      );\r\n      networkCache.proposals[proposalId].daoBounty = bnum(\r\n        callsResponse.decodedReturnData[0].daoBounty\r\n      );\r\n      networkCache.proposals[proposalId].confidenceThreshold =\r\n        callsResponse.decodedReturnData[0].confidenceThreshold;\r\n      networkCache.proposals[proposalId].secondsFromTimeOutTillExecuteBoosted =\r\n        callsResponse.decodedReturnData[0].secondsFromTimeOutTillExecuteBoosted;\r\n      networkCache.proposals[proposalId].boostedPhaseTime = bnum(\r\n        proposalTimes[1]\r\n      );\r\n      networkCache.proposals[proposalId].preBoostedPhaseTime = bnum(\r\n        proposalTimes[2]\r\n      );\r\n      networkCache.proposals[proposalId].daoRedeemItsWinnings =\r\n        callsResponse.decodedReturnData[0].daoRedeemItsWinnings;\r\n      networkCache.proposals[proposalId].shouldBoost =\r\n        callsResponse.decodedReturnData[5][0];\r\n      networkCache.proposals[proposalId].positiveVotes = bnum(\r\n        callsResponse.decodedReturnData[1][0]\r\n      );\r\n      networkCache.proposals[proposalId].negativeVotes = bnum(\r\n        callsResponse.decodedReturnData[2][0]\r\n      );\r\n      networkCache.proposals[proposalId].positiveStakes = bnum(\r\n        callsResponse.decodedReturnData[3][2]\r\n      );\r\n      networkCache.proposals[proposalId].negativeStakes = bnum(\r\n        callsResponse.decodedReturnData[3][3]\r\n      );\r\n    }\r\n\r\n    return networkCache;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport ABIService from '../services/ABIService';\r\nimport DaoService from '../services/DaoService';\r\nimport EventsService from '../services/EventsService';\r\nimport IPFSService from '../services/IPFSService';\r\nimport PinataService from '../services/PinataService';\r\nimport EtherscanService from '../services/EtherscanService';\r\nimport CoingeckoService from '../services/CoingeckoService';\r\nimport InfuraService from '../services/InfuraService';\r\nimport PoktService from '../services/PoktService';\r\nimport AlchemyService from '../services/AlchemyService';\r\nimport CustomRpcService from '../services/CustomRpcService';\r\nimport ENSService from '../services/ENSService';\r\nimport OrbitDBService from '../services/OrbitDBService';\r\n\r\nimport ProviderStore from '../stores/Provider';\r\nimport TransactionStore from '../stores/Transaction';\r\nimport ModalStore from '../stores/Modal';\r\nimport ConfigStore from '../stores/ConfigStore';\r\nimport DaoStore from '../stores/DaoStore';\r\nimport BlockchainStore from '../stores/BlockchainStore';\r\nimport NotificationStore from '../stores/NotificationStore';\r\nimport CacheService from 'services/CacheService';\r\n\r\n/*\r\nhttps://reactjs.org/docs/context.html#reactcreatecontext\r\n\r\nContext provides a way to pass data through the component tree without having to pass props down manually at every level.\r\n\r\nIn a typical React application, data is passed top-down (parent to child) via props, but such usage can be cumbersome for certain types of props (e.g. locale preference, UI theme) that are required by many components within an application. Context provides a way to share values like these between components without having to explicitly pass a prop through every level of the tree.\r\n\r\nA root single context calss is exported with the services and stores of the dapp.\r\n\r\nServices: Contexts that are not use to store data, only to process information in the dapp and fecth information from external protocols and APIs.\r\nStores: Context that are used to store data and expose them all around the dapp.\r\n*/\r\n\r\nexport default class RootContext {\r\n  providerStore: ProviderStore;\r\n  transactionStore: TransactionStore;\r\n  modalStore: ModalStore;\r\n  configStore: ConfigStore;\r\n  daoStore: DaoStore;\r\n  notificationStore: NotificationStore;\r\n  blockchainStore: BlockchainStore;\r\n\r\n  abiService: ABIService;\r\n  daoService: DaoService;\r\n  eventsService: EventsService;\r\n  ipfsService: IPFSService;\r\n  pinataService: PinataService;\r\n  etherscanService: EtherscanService;\r\n  coingeckoService: CoingeckoService;\r\n  infuraService: InfuraService;\r\n  poktService: PoktService;\r\n  alchemyService: AlchemyService;\r\n  customRpcService: CustomRpcService;\r\n  ensService: ENSService;\r\n  orbitDBService: OrbitDBService;\r\n  cacheService: CacheService;\r\n\r\n  constructor() {\r\n    this.providerStore = new ProviderStore(this);\r\n    this.transactionStore = new TransactionStore(this);\r\n    this.modalStore = new ModalStore(this);\r\n    this.configStore = new ConfigStore(this);\r\n    this.daoStore = new DaoStore(this);\r\n    this.notificationStore = new NotificationStore(this);\r\n    this.blockchainStore = new BlockchainStore(this);\r\n\r\n    this.abiService = new ABIService(this);\r\n    this.eventsService = new EventsService(this);\r\n    this.daoService = new DaoService(this);\r\n    this.ipfsService = new IPFSService(this);\r\n    this.pinataService = new PinataService(this);\r\n    this.etherscanService = new EtherscanService(this);\r\n    this.coingeckoService = new CoingeckoService(this);\r\n    this.infuraService = new InfuraService(this);\r\n    this.poktService = new PoktService(this);\r\n    this.alchemyService = new AlchemyService(this);\r\n    this.customRpcService = new CustomRpcService(this);\r\n    this.ensService = new ENSService(this);\r\n    this.orbitDBService = new OrbitDBService(this);\r\n    this.cacheService = new CacheService(this);\r\n  }\r\n\r\n  reset() {\r\n    this.configStore.reset();\r\n    this.notificationStore.reset();\r\n    this.transactionStore.reset();\r\n    this.modalStore.reset();\r\n    this.blockchainStore.reset();\r\n    this.daoStore.reset();\r\n  }\r\n}\r\n\r\nexport const rootContext = React.createContext({\r\n  context: new RootContext(),\r\n});\r\n\r\nexport const useContext = () => React.useContext(rootContext);\r\n","import { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { getChains, injected } from '../provider/connectors';\r\nimport { useContext } from '../contexts';\r\nimport { DEFAULT_RPC_URLS } from '../utils';\r\n\r\n/*  Attempt to connect to & activate injected connector\r\n    If we're on mobile and have an injected connector, attempt even if not authorized (legacy support)\r\n    If we tried to connect, or it's active, return true;\r\n */\r\nexport function useEagerConnect() {\r\n  const { activate, active, chainId } = useWeb3React();\r\n  const [tried, setTried] = useState(false);\r\n  const location = useLocation();\r\n\r\n  const tryConnecting = async () => {\r\n    const chains = getChains();\r\n    const urlNetworkName = location.pathname.split('/')[1];\r\n    const urlChainId = chains.find(chain => chain.name == urlNetworkName)?.id;\r\n    const urlChainIdHex = urlChainId ? `0x${urlChainId.toString(16)}` : null;\r\n\r\n    const isAuthorized = await injected.isAuthorized();\r\n    console.debug('[EagerConnect] Activate injected if authorized', {\r\n      injected,\r\n      isAuthorized,\r\n    });\r\n\r\n    try {\r\n      const injectedChainId = await injected.getChainId();\r\n      if (injectedChainId != urlChainIdHex) {\r\n        setTried(true);\r\n        return;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      setTried(true);\r\n    }\r\n\r\n    if (isAuthorized || (isMobile && window.ethereum)) {\r\n      activate(injected, undefined, true).catch(() => {\r\n        setTried(true);\r\n      });\r\n    } else {\r\n      setTried(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    tryConnecting().catch(() => {\r\n      setTried(true);\r\n    });\r\n  }, [activate, chainId]); // intentionally only running on mount (make sure it's only mounted once :))\r\n\r\n  // if the connection worked, wait until we get confirmation of that to flip the flag\r\n  useEffect(() => {\r\n    if (active) {\r\n      setTried(true);\r\n    }\r\n  }, [active]);\r\n\r\n  return { triedEager: tried, tryConnecting };\r\n}\r\n\r\nexport function useRpcUrls() {\r\n  const {\r\n    context: {\r\n      infuraService,\r\n      poktService,\r\n      alchemyService,\r\n      customRpcService,\r\n      configStore,\r\n    },\r\n  } = useContext();\r\n  const preferredRpc = configStore.getLocalConfig().rpcType;\r\n  const [rpcUrls, setRpcUrls] = useState<Record<number, string>>(null);\r\n\r\n  useEffect(() => {\r\n    getRpcUrls().then(urls => setRpcUrls(urls));\r\n  }, [preferredRpc]);\r\n\r\n  async function getRpcUrls() {\r\n    await alchemyService.isAuthenticated();\r\n    await infuraService.isAuthenticated();\r\n    await customRpcService.isAuthenticated();\r\n\r\n    if (preferredRpc === 'infura' && infuraService.auth) {\r\n      return infuraService.getRpcUrls();\r\n    } else if (preferredRpc === 'alchemy' && alchemyService.auth) {\r\n      return alchemyService.getRpcUrls();\r\n    } else if (preferredRpc === 'pokt' && poktService.auth) {\r\n      return poktService.getRpcUrls();\r\n    } else if (preferredRpc === 'custom' && customRpcService.auth) {\r\n      return customRpcService.getRpcUrls();\r\n    } else {\r\n      return DEFAULT_RPC_URLS;\r\n    }\r\n  }\r\n\r\n  return rpcUrls;\r\n}\r\n","import { useEffect } from 'react';\r\nimport {\r\n  createGlobalStyle,\r\n  css,\r\n  ThemeProvider as StyledComponentsThemeProvider,\r\n} from 'styled-components';\r\nimport { useContext } from '../contexts';\r\n\r\nexport const SUPPORTED_THEMES = {\r\n  DARK: 'DARK',\r\n  LIGHT: 'LIGHT',\r\n};\r\n\r\nconst MEDIA_WIDTHS = {\r\n  upToSmall: 600,\r\n  upToMedium: 960,\r\n  upToLarge: 1280,\r\n};\r\n\r\nconst mediaWidthTemplates = Object.keys(MEDIA_WIDTHS).reduce(\r\n  (accumulator, size) => {\r\n    accumulator[size] = (...args) => css`\r\n      @media (max-width: ${MEDIA_WIDTHS[size]}px) {\r\n        ${css(...args)}\r\n      }\r\n    `;\r\n    return accumulator;\r\n  },\r\n  {}\r\n);\r\n\r\nconst white = '#FFFFFF';\r\nconst black = '#000000';\r\n\r\nexport default function ThemeProvider({ children }) {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n\r\n  const darkMode = configStore.darkMode;\r\n\r\n  useEffect(() => {\r\n    configStore.setDarkMode(darkMode);\r\n  }, [configStore, darkMode]);\r\n  return (\r\n    <StyledComponentsThemeProvider theme={theme(darkMode)}>\r\n      {children}\r\n    </StyledComponentsThemeProvider>\r\n  );\r\n}\r\n\r\nconst theme = darkMode => ({\r\n  votes: {\r\n    // fonts\r\n    fontSize: '13px',\r\n    horizontalSeparatorBorder: darkMode\r\n      ? '1px solid lightgrey;'\r\n      : '1px solid #ccc',\r\n    negative: {\r\n      color: darkMode ? 'lightred' : 'red',\r\n      // badges\r\n      foregroundColor: darkMode ? 'lightred' : 'red',\r\n      backgroundColor: darkMode ? '#333639' : 'white',\r\n    },\r\n    positive: {\r\n      color: darkMode ? 'lightgreen' : 'green',\r\n      // badges\r\n      foregroundColor: darkMode ? 'lightgreen' : 'green',\r\n      backgroundColor: darkMode ? '#333639' : 'white',\r\n    },\r\n    //\r\n  },\r\n  //colors\r\n  white,\r\n  black,\r\n  textColor: darkMode ? white : '#010101',\r\n  greyText: darkMode ? white : '#6C7284',\r\n\r\n  // for setting css on <html>\r\n  backgroundColor: darkMode ? '#333639' : white,\r\n\r\n  activeButtonBackground: '#536DFE',\r\n\r\n  modalBackground: darkMode ? 'rgba(0,0,0,0.6)' : 'rgba(0,0,0,0.5)',\r\n  inputBackground: darkMode ? '#202124' : white,\r\n  placeholderGray: darkMode ? '#5F5F5F' : '#E1E1E1',\r\n  shadowColor: darkMode ? '#000' : '#2F80ED',\r\n\r\n  borderStyle:\r\n    'rgba(14, 0, 135, 0.1) 0px 2px 10px, rgba(14, 0, 135, 0.05) 0px 2px 15px',\r\n\r\n  // grays\r\n  concreteGray: darkMode ? '#292C2F' : '#FAFAFA',\r\n  mercuryGray: darkMode ? '#333333' : '#E1E1E1',\r\n  silverGray: darkMode ? '#737373' : '#C4C4C4',\r\n  chaliceGray: darkMode ? '#7B7B7B' : '#AEAEAE',\r\n  doveGray: darkMode ? '#C4C4C4' : '#737373',\r\n  mineshaftGray: darkMode ? '#E1E1E1' : '#2B2B2B',\r\n  activeGray: darkMode ? '#292C2F' : '#F7F8FA',\r\n  buttonOutlineGrey: darkMode ? '#FAFAFA' : '#F2F2F2',\r\n  tokenRowHover: darkMode ? '#404040' : '#F2F2F2',\r\n\r\n  //blacks\r\n  charcoalBlack: darkMode ? '#F2F2F2' : '#404040',\r\n  // blues\r\n  zumthorBlue: darkMode ? '#212529' : '#EBF4FF',\r\n  // TODO refactor; malibuBlue changed as quick hack to a different color JK 013120\r\n  malibuBlue: darkMode ? '#E67AEF' : '#4C5480',\r\n  // TODO refactor; royalBlue changed as quick hack to a different color JK 013120\r\n  royalBlue: darkMode ? '#DC6BE5' : '#fafafa',\r\n  loadingBlue: darkMode ? '#e4f0ff' : '#e4f0ff',\r\n\r\n  // purples\r\n  wisteriaPurple: '#DC6BE5',\r\n  // reds\r\n  salmonRed: '#FF6871',\r\n  // orange\r\n  pizazzOrange: '#FF8F05',\r\n  // yellows\r\n  warningYellow: '#FFE270',\r\n  // body text color\r\n  bodyText: '#90a4ae',\r\n  //green\r\n  connectedGreen: '#27AE60',\r\n  red: '#e75c5c',\r\n  blue: '#295ff4',\r\n  gray: '#a1a6b0',\r\n  //branded\r\n  metaMaskOrange: '#E8831D',\r\n\r\n  //specific\r\n  textHover: darkMode ? '#90a4ae' : '#C4C4C4',\r\n\r\n  // connect button when loggedout\r\n  buttonFaded: darkMode ? '#DC6BE5' : '#737373',\r\n\r\n  // media queries\r\n  mediaWidth: mediaWidthTemplates,\r\n  // css snippets\r\n  flexColumnNoWrap: css`\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n  `,\r\n  flexRowNoWrap: css`\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n  `,\r\n  flexRowWrap: css`\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n  `,\r\n});\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\n  html {\r\n    font-size: 16px;\r\n    font-variant: none;\r\n    color: ${({ theme }) => theme.textColor};\r\n    background-color: ${({ theme }) => theme.backgroundColor};\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n  }\r\n\r\n  body {\r\n    height: 100%;\r\n    width: 100%;\r\n    margin: 0;\r\n    font-family: var(--roboto);\r\n    background-color: var(--background-color);\r\n  }\r\n\r\n  :root {\r\n    --active-button-border: #304ffe;\r\n    --orange: #f9aa33;\r\n    --blue-text: #536DFE;\r\n    --red-text: #FF4081;\r\n    --blue-onHover: #4864FE;\r\n    --blue-onHover-border: #2545FE;\r\n    --dangerous-alert: #D32F2F;\r\n    --wrong-network-border: #D81B60;\r\n    --wrong-network-border-hover: #C2185B;\r\n    --wrong-network-hover: #E91E63;\r\n    --wrong-network: #EC407A;\r\n    --light-text-gray: #bdbdbd;\r\n    --text-gray-onHover: #727D82;\r\n    --dark-text-gray: #616161;\r\n    --nav-text-light: rgba(55, 71, 79, 0.4);\r\n    --nav-text-dark: rgba(55, 71, 79, 1);\r\n    --panel-text: rgba(83, 109, 254, 0.8);\r\n    --pending-panel-text: rgba(83, 109, 254, 0.6);\r\n    --panel-icon: rgba(83, 109, 254, 0.2);\r\n    --panel-icon-2: #758afe;\r\n    --panel-pending: #98a7fe;\r\n    --footer-text-gray: #c2c2c2;\r\n    --pending-text-gray: #d4dcdf;\r\n    --pending-ellipses-purple: #dde2ff;\r\n    --medium-gray: rgba(207, 216, 220, 0.9); /*For border*/\r\n    --light-gray: #FAFAFA; /*Site background*/\r\n    --line-gray: rgba(225, 227, 231, 0.4);\r\n    --turquois-text: #2d9cdb;\r\n    --turquois-text-onHover: #226C96;\r\n    --white: #ffffff;\r\n    --gridLine: rgba(232, 234, 246, 0.5);\r\n\r\n    --roboto: 'Roboto', sans-serif;\r\n\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n\r\n  #root {\r\n    margin: auto;\r\n    height: 100%;\r\n  }\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/DXdao.22782c18.svg\";","import { observer } from 'mobx-react';\r\nimport styled from 'styled-components';\r\nimport dxdaoIcon from 'assets/images/DXdao.svg';\r\n\r\nconst NavWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  padding: 20px 0px 0px 0px;\r\n`;\r\n\r\nconst NavSection = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst MenuItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  color: var(--nav-text-light);\r\n  font-size: 16px;\r\n  line-height: 19px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst WarningDev = styled.div`\r\n  margin-left: 5px;\r\n  padding-top: 3px;\r\n  color: red;\r\n`;\r\n\r\nconst LoadingNetworkHeader = observer(() => {\r\n  const isTestingEnv = !window?.location?.href?.includes('dxvote.eth');\r\n\r\n  return (\r\n    <NavWrapper>\r\n      <NavSection>\r\n        <>\r\n          <MenuItem>\r\n            <img alt=\"dxdao\" src={dxdaoIcon} />\r\n            {isTestingEnv && <WarningDev>Testing Environment</WarningDev>}\r\n          </MenuItem>\r\n        </>\r\n      </NavSection>\r\n    </NavWrapper>\r\n  );\r\n});\r\n\r\nexport default LoadingNetworkHeader;\r\n","import styled from 'styled-components';\r\n\r\nexport const Row = styled.div`\r\n  flex-direction: row;\r\n  display: flex;\r\n  padding-top: 15px;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Box = styled.div`\r\n  border: 1px solid #e1e3e7;\r\n  padding: ${({ noPadding }) => (noPadding ? '0px' : '10px 20px')};\r\n  background: white;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  box-shadow: ${({ theme }) => theme.borderStyle};\r\n  ${({ centered }) => centered && `align-items: center;`}\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Title = styled.h1`\r\n  ${({ centered }) => centered && `text-align: center;`}\r\n  ${({ noMargin }) => noMargin && `margin: 0px;`}\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Subtitle = styled.h2`\r\n  ${({ centered }) => centered && `justify-content: center;`}\r\n  display: flex;\r\n  align-items: baseline;\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const InfoBox = styled.div`\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 2px 5px;\r\n  margin: 10px 5px;\r\n  font-size: 25px;\r\n  font-weight: 300;\r\n  border-radius: 3px;\r\n  color: var(--activeButtonBackground);\r\n`;\r\n","import styled from 'styled-components';\r\nimport { FaQuestionCircle } from 'react-icons/fa';\r\n\r\nconst QuestionLink = styled.a`\r\n  color: var(--dark-text-gray);\r\n\r\n  svg {\r\n    height: 15px;\r\n  }\r\n  svg:hover {\r\n    color: var(--text-gray-onHover);\r\n  }\r\n`;\r\n\r\nexport const Question = ({ question }) => {\r\n  return (\r\n    <QuestionLink href={'/#/faq?question=' + question} target=\"_self\">\r\n      <FaQuestionCircle> </FaQuestionCircle>\r\n    </QuestionLink>\r\n  );\r\n};\r\n","import styled from 'styled-components';\r\n\r\nexport const Link = styled.a.attrs({\r\n  target: '_blank',\r\n  rel: 'noopener noreferrer',\r\n})`\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  color: var(--turquois-text);\r\n\r\n  :focus {\r\n    outline: none;\r\n    text-decoration: underline;\r\n  }\r\n\r\n  :active {\r\n    text-decoration: none;\r\n  }\r\n`;\r\n\r\nexport default Link;\r\n","import styled from 'styled-components';\r\nimport { useCopyClipboard } from '../../utils';\r\n\r\nimport Link from '../../components/common/Link';\r\nimport { FiCopy, FiCheckCircle } from 'react-icons/fi';\r\n\r\nconst CopyIcon = styled(Link)`\r\n  color: ${({ theme }) => theme.silverGray};\r\n  flex-shrink: 0;\r\n  margin-right: 1rem;\r\n  margin-left: 0rem;\r\n  text-decoration: none;\r\n  :hover,\r\n  :active,\r\n  :focus {\r\n    text-decoration: none;\r\n    color: ${({ theme }) => theme.doveGray};\r\n  }\r\n`;\r\nconst TransactionStatusText = styled.span`\r\n  margin-left: 0.25rem;\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  align-items: center;\r\n`;\r\n\r\nexport default function CopyHelper({ toCopy, children = null }) {\r\n  const [isCopied, setCopied] = useCopyClipboard();\r\n\r\n  return (\r\n    <CopyIcon onClick={() => setCopied(toCopy)}>\r\n      <TransactionStatusText>\r\n        {children} {isCopied ? <FiCheckCircle /> : <FiCopy />}\r\n      </TransactionStatusText>\r\n    </CopyIcon>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport Copy from './Copy';\r\nimport {\r\n  getBlockchainLink,\r\n  getERC20Token,\r\n  getDxVoteContract,\r\n  toAddressStub,\r\n  isAddress,\r\n} from 'utils';\r\nimport { useContext } from '../../contexts';\r\nimport { FiExternalLink } from 'react-icons/fi';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRpcUrls } from 'provider/providerHooks';\r\n\r\nconst AddressLink = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  a {\r\n    color: inherit;\r\n    text-decoration: none;\r\n\r\n    &:hover {\r\n      opacity: 0.7;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Icon = styled.img`\r\n  width: 15px;\r\n  height: 15px;\r\n`;\r\n\r\nexport const BlockchainLink = ({\r\n  text,\r\n  size = 'default',\r\n  type = 'default',\r\n  toCopy = false,\r\n  onlyIcon = false,\r\n  onlyText = false,\r\n}) => {\r\n  const {\r\n    context: { configStore, ensService },\r\n  } = useContext();\r\n\r\n  const rpcUrls = useRpcUrls();\r\n\r\n  const networkName = configStore.getActiveChainName();\r\n  const [ensName, setENSName] = useState('');\r\n  const erc20Token = getERC20Token(text);\r\n  const dxVoteContract = getDxVoteContract(text);\r\n\r\n  useEffect(() => {\r\n    async function getENS() {\r\n      const response = await ensService.resolveENSName(text);\r\n      setENSName(response);\r\n    }\r\n    getENS();\r\n  }, [text, rpcUrls]);\r\n\r\n  let formatedAddress;\r\n  if (!ensName && !dxVoteContract && !erc20Token) {\r\n    if (onlyIcon) formatedAddress = <FiExternalLink />;\r\n    else formatedAddress = toAddressStub(text, size);\r\n  }\r\n\r\n  /*\r\n  If the address is an ens domain show the ens domain name with a link to the blockchain explorer address and option to copy the address.\r\n  If the address is an ERC20 token registered in the config show the token symbol instead with links to the token explorer, and the option to copy the token address.\r\n  If the address is an known dxvote contract (avatar,controller, etc) domain show the contract name with a link to the blockchain explorer address and option to copy the address.\r\n  else show formatted address\r\n  */\r\n  const Address = () => (\r\n    <>\r\n      {ensName}\r\n      {!ensName && erc20Token && <Icon src={erc20Token.logoURI} />}\r\n      {!ensName && dxVoteContract && dxVoteContract?.contract}\r\n      {formatedAddress}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <AddressLink>\r\n      {!onlyText ? (\r\n        <a\r\n          href={getBlockchainLink(\r\n            text,\r\n            networkName,\r\n            isAddress(text) ? 'address' : type\r\n          )}\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n        >\r\n          <Address />\r\n        </a>\r\n      ) : (\r\n        <div>\r\n          <Address />\r\n        </div>\r\n      )}\r\n      {toCopy ? <Copy toCopy={text} /> : null}\r\n    </AddressLink>\r\n  );\r\n};\r\n\r\nexport default BlockchainLink;\r\n","import styled from 'styled-components';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { RouteComponentProps } from 'react-router';\r\n\r\nexport const Button = styled.button`\r\n  background-color: ${({ theme }) => theme.activeButtonBackground};\r\n  border-radius: 4px;\r\n  color: white;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  width: ${props => (props.width ? props.width : 'max-content')};\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n  border: 0px;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.1em;\r\n  :disabled {\r\n    opacity: 0.4;\r\n    cursor: auto;\r\n  }\r\n`;\r\n\r\ninterface LinkButtonProps {\r\n  route: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\n// Using `any` type as workaround to https://github.com/microsoft/TypeScript/issues/42873\r\nexport const LinkButton: any = withRouter(\r\n  ({\r\n    route,\r\n    history,\r\n    children,\r\n    ...rest\r\n  }: LinkButtonProps & RouteComponentProps) => {\r\n    return (\r\n      <Button\r\n        onClick={() => {\r\n          history.push(route);\r\n        }}\r\n        {...rest}\r\n      >\r\n        {children}\r\n      </Button>\r\n    );\r\n  }\r\n);\r\n","import styled from 'styled-components';\r\n\r\nexport const Table = styled.table`\r\n  display: grid;\r\n  border-collapse: collapse;\r\n`;\r\n\r\nexport const TableHeader = styled.tr`\r\n  display: contents;\r\n  color: var(--light-text-gray);\r\n  font-size: 14px;\r\n`;\r\n\r\ninterface HeaderCellProps {\r\n  align?: string;\r\n}\r\n\r\nexport const HeaderCell = styled.th<HeaderCellProps>`\r\n  text-align: ${props => props.align};\r\n  padding: 10px 4px;\r\n`;\r\n\r\nexport const TableRow = styled.tr`\r\n  font-size: 16px;\r\n  line-height: 18px;\r\n  color: var(--dark-text-gray);\r\n  text-align: center;\r\n  cursor: pointer;\r\n  display: contents;\r\n`;\r\n\r\nexport const TableBody = styled.tbody`\r\n  display: contents;\r\n`;\r\n\r\ninterface DataCellProps {\r\n  color?: string;\r\n  align?: string;\r\n  weight?: string;\r\n  wrapText?: boolean;\r\n}\r\nexport const DataCell = styled.td<DataCellProps>`\r\n  color: ${props => props.color};\r\n  text-align: ${props => props.align};\r\n  font-weight: ${props => props.weight};\r\n  white-space: ${props => (props.wrapText ? 'nowrap' : 'inherit')};\r\n  overflow: ${props => (props.wrapText ? 'hidden' : 'inherit')};\r\n  text-overflow: ellipsis;\r\n  border-bottom: 1px solid var(--line-gray);\r\n  padding: 14px;\r\n\r\n  a {\r\n    text-decoration: none;\r\n    width: 100%;\r\n\r\n    &:hover {\r\n      color: var(--turquois-text-onHover);\r\n    }\r\n  }\r\n`;\r\n","import styled from 'styled-components';\r\n\r\nexport const Positive = styled.span`\r\n  color: ${({ theme }) => theme.votes.positive.color};\r\n`;\r\n\r\nexport const Negative = styled.span`\r\n  color: ${({ theme }) => theme.votes.negative.color};\r\n`;\r\n\r\nexport const Separator = styled.span`\r\n  margin-left: 2px;\r\n  margin-right: 2px;\r\n`;\r\n\r\nexport const AmountBadge = styled.span`\r\n  background-color: ${props => props.color || 'inherit'};\r\n  border-radius: 50%;\r\n  color: white;\r\n  padding: 2px 6px;\r\n  text-align: center;\r\n  margin: 5px;\r\n`;\r\n\r\nexport const HorizontalSeparator = styled.div`\r\n  margin: 5px;\r\n  border-bottom: ${({ theme }) => theme.votes.horizontalSeparatorBorder};\r\n`;\r\n","import Datetime from 'react-datetime';\r\nimport styled from 'styled-components';\r\nimport 'react-datetime/css/react-datetime.css';\r\nimport { Moment } from 'moment';\r\n\r\n// This is an example of usage of a component\r\n// In the form we can use <Datetime value{controledValue} />\r\n// and contorledValue.unix() to get the timestamp.\r\n// https://www.npmjs.com/package/react-datetime API here\r\n// for example: onChange, onClose, onNavigate, etc.\r\n\r\nconst Label = styled.div`\r\n  text-align: left;\r\n  font-size: smaller;\r\n  width: ${props => `${props.width}px`};\r\n  margin: auto;\r\n`;\r\nconst Date = styled(Datetime)`\r\n  input {\r\n    background-color: white;\r\n    border-radius: 6px;\r\n    border-color: #526dfe;\r\n    border-style: solid;\r\n    padding: 2% 0;\r\n    text-align: center;\r\n    font-size: x-large;\r\n    width: ${props => `${props.width}px`};\r\n  }\r\n  .rdtPicker {\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n  }\r\n`;\r\n\r\nexport const InputDate = ({\r\n  onChange,\r\n  value,\r\n  text = null,\r\n  width = 200,\r\n  isValidDate = (date: Moment) => true,\r\n}) => (\r\n  <div>\r\n    <Label width={width}>{text}</Label>\r\n    <Date\r\n      value={value}\r\n      onChange={onChange}\r\n      dateFormat=\"DD/MM/YYYY\"\r\n      timeFormat={false}\r\n      width={width}\r\n      isValidDate={isValidDate}\r\n    />\r\n  </div>\r\n);\r\n","import styled from 'styled-components';\r\nimport {\r\n  Table,\r\n  TableHeader,\r\n  HeaderCell,\r\n  TableRow,\r\n  DataCell,\r\n} from '../../components/common';\r\n\r\nexport const LoadingBox = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n\r\n  .loader {\r\n    text-align: center;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    color: var(--dark-text-gray);\r\n    padding: 25px 0px;\r\n\r\n    svg {\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ProposalsWrapper = styled.div`\r\n  padding: 10px 0px;\r\n  background: white;\r\n  border-radius: 4px;\r\n  display: grid;\r\n  grid-template-columns: 20% 80%;\r\n  grid-gap: 10px;\r\n`;\r\n\r\nexport const NewProposalButton = styled.div`\r\n  align-self: center;\r\n  margin-bottom: 100px;\r\n`;\r\n\r\nexport const SidebarWrapper = styled.div`\r\n  padding: 0px 10px 10px 10px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  height: calc(90vh - 20px);\r\n  align-self: flex-start;\r\n  position: sticky;\r\n  top: 10%;\r\n`;\r\n\r\nexport const ProposalTableHeaderActions = styled.div`\r\n  padding: 20px 10px 20px 10px;\r\n  color: var(--dark-text-gray);\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  letter-spacing: 1px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n\r\n  span {\r\n    font-size: 20px;\r\n    padding: 10px 5px 5px 5px;\r\n  }\r\n`;\r\n\r\nexport const StyledTableRow = styled(TableRow)`\r\n  font-size: smaller;\r\n  padding: 16px 24px;\r\n  color: var(--dark-text-gray);\r\n  text-align: center;\r\n  cursor: pointer;\r\n  &:hover {\r\n    ${DataCell} {\r\n      background-color: #80808012;\r\n    }\r\n  }\r\n\r\n  ${DataCell} {\r\n    border-bottom: 1px solid var(--line-gray);\r\n    padding: 20px 5px;\r\n    &:nth-child(1) {\r\n      text-align: left;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const FooterWrap = styled.div`\r\n  align-self: flex-end;\r\n`;\r\n\r\nexport const TableProposal = styled(Table)`\r\n  grid-template-columns: 33% 20% 15% 20% 12%;\r\n  margin-bottom: auto;\r\n  overflow-y: scroll;\r\n  max-height: calc(90vh - 20px);\r\n  ${TableHeader} {\r\n    ${HeaderCell} {\r\n      background: white;\r\n      position: sticky;\r\n      top: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const UnstyledAnchor = styled.a`\r\n  color: inherit;\r\n  text-decoration: inherit;\r\n`;\r\n","export default __webpack_public_path__ + \"static/media/dxdao-icon.fbfb7ea9.svg\";","import styled, { keyframes } from 'styled-components';\r\nimport DXdaoIcon from '../../assets/images/dxdao-icon.svg';\r\n\r\nconst pulseKeyframes = keyframes`\r\n  from {\r\n    stroke-width: 3px;\r\n    stroke-opacity: 1;\r\n    transform: scale(0.8);\r\n  }\r\n  to {\r\n    stroke-width: 0;\r\n    stroke-opacity: 0;\r\n    transform: scale(2);\r\n  }\r\n`;\r\n\r\nconst RotatingImage = styled.image`\r\n  filter: ${props => (props.inactive ? 'grayscale(100%)' : 'none')};\r\n`;\r\n\r\nconst PulseCircle = styled.circle`\r\n  stroke: #4f6afe;\r\n  stroke-width: 2px;\r\n  stroke-opacity: 1;\r\n\r\n  fill: white;\r\n  fill-opacity: 0;\r\n  transform-origin: 50% 50%;\r\n  animation-duration: 1.5s;\r\n  animation-name: ${pulseKeyframes};\r\n  animation-iteration-count: infinite;\r\n`;\r\n\r\nconst PulsingIcon: React.FC<{ size: number; inactive: boolean }> = ({\r\n  size,\r\n  inactive,\r\n}) => (\r\n  <svg className=\"button\" aria-expanded height={size} width={size}>\r\n    <RotatingImage\r\n      inactive={inactive}\r\n      x=\"50%\"\r\n      y=\"50%\"\r\n      width={size / 2}\r\n      height={size / 2}\r\n      transform={`translate(-${size / 4}, -${size / 4})`}\r\n      href={DXdaoIcon}\r\n    />\r\n    {!inactive && <PulseCircle cx=\"50%\" cy=\"50%\" r={size / 4} />}\r\n\r\n    {!inactive && (\r\n      <animateTransform\r\n        attributeName=\"transform\"\r\n        attributeType=\"xml\"\r\n        type=\"rotate\"\r\n        from=\"360\"\r\n        to=\"0\"\r\n        dur=\"1.5s\"\r\n        additive=\"sum\"\r\n        repeatCount=\"indefinite\"\r\n      />\r\n    )}\r\n  </svg>\r\n);\r\n\r\nexport default PulsingIcon;\r\n","import { useEffect, useMemo } from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { getChains, getNetworkConnector } from 'provider/connectors';\r\nimport { useEagerConnect, useRpcUrls } from 'provider/providerHooks';\r\nimport { useContext } from 'contexts';\r\nimport { DEFAULT_CHAIN_ID, useInterval, usePrevious } from 'utils';\r\nimport { InjectedConnector } from '@web3-react/injected-connector';\r\nimport { NetworkConnector } from '@web3-react/network-connector';\r\nimport ThemeProvider, { GlobalStyle } from 'theme';\r\nimport styled from 'styled-components';\r\nimport LoadingNetworkHeader from '../Header/loadingNetwork';\r\nimport { LoadingBox } from '../../pages/proposals/styles';\r\nimport PulsingIcon from 'components/common/LoadingIcon';\r\n\r\nconst BLOKCHAIN_FETCH_INTERVAL = 10000;\r\n\r\nconst Web3ReactManager = ({ children }) => {\r\n  const { context } = useContext();\r\n  const { providerStore, blockchainStore } = context;\r\n\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const rpcUrls = useRpcUrls();\r\n\r\n  // Overriding default fetch to check for RPC url and setting correct headers if matched\r\n  const originalFetch = window.fetch;\r\n  window.fetch = (url, opts): Promise<Response> => {\r\n    if (rpcUrls && Object.values(rpcUrls).includes(url.toString()) && opts) {\r\n      opts.headers = opts.headers || {\r\n        'Content-Type': 'application/json',\r\n      };\r\n    }\r\n    return originalFetch(url, opts);\r\n  };\r\n\r\n  const web3Context = useWeb3React();\r\n  const {\r\n    active: networkActive,\r\n    error: networkError,\r\n    chainId,\r\n    account,\r\n    connector,\r\n    activate,\r\n  } = web3Context;\r\n\r\n  console.debug('[Web3ReactManager] Start of render', {\r\n    web3Context,\r\n  });\r\n\r\n  // Make sure providerStore is synchronized with web3-react\r\n  useEffect(() => {\r\n    providerStore.setWeb3Context(web3Context);\r\n  }, [web3Context]);\r\n\r\n  // try to eagerly connect to a provider if possible\r\n  const { triedEager, tryConnecting } = useEagerConnect();\r\n\r\n  // If eager-connect failed, try to connect to network in the URL\r\n  // If no chain in the URL, fallback to default chain\r\n  useEffect(() => {\r\n    if (triedEager && !networkActive && rpcUrls) {\r\n      const chains = getChains(rpcUrls);\r\n      const urlNetworkName = location.pathname.split('/')[1];\r\n      const chainId =\r\n        chains.find(chain => chain.name == urlNetworkName)?.id ||\r\n        DEFAULT_CHAIN_ID;\r\n      const networkConnector = getNetworkConnector(rpcUrls, chainId);\r\n\r\n      activate(networkConnector, undefined, true).catch(e => {\r\n        console.error(\r\n          '[Web3ReactManager] Unable to activate network connector.',\r\n          e\r\n        );\r\n      });\r\n    }\r\n  }, [triedEager, networkActive, activate, rpcUrls, location]);\r\n\r\n  const prevChainId = usePrevious(chainId);\r\n  const prevAccount = usePrevious(account);\r\n  useEffect(() => {\r\n    // Listen to chain / account changes and reset the app\r\n    if (prevChainId !== chainId || prevAccount !== account) {\r\n      try {\r\n        providerStore.setWeb3Context(web3Context);\r\n        context.reset();\r\n        if (location.pathname !== '/cache') {\r\n          blockchainStore.fetchData(web3Context, true);\r\n        }\r\n      } catch (e) {\r\n        // Fallback if something goes wrong\r\n        window.location.reload();\r\n      }\r\n    }\r\n  }, [chainId, prevChainId, account, prevAccount]);\r\n\r\n  // Setup listener to handle injected wallet events\r\n  useEffect(() => {\r\n    if (!window.ethereum) return () => {};\r\n\r\n    const handleChainChange = (chainId: string) => {\r\n      const chains = getChains();\r\n      const chain = chains.find(\r\n        chain => `0x${chain.id.toString(16)}` == chainId\r\n      );\r\n\r\n      // If currently connected to an injected wallet, keep synced with it\r\n      if (connector instanceof InjectedConnector) {\r\n        history.push(`/${chain.name}/proposals`);\r\n      } else if (connector instanceof NetworkConnector) {\r\n        const urlNetworkName = location.pathname.split('/')[1];\r\n        if (urlNetworkName == chain.name) {\r\n          tryConnecting();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.ethereum.on('chainChanged', handleChainChange);\r\n\r\n    return () => {\r\n      window.ethereum?.removeListener('accountsChanged', handleChainChange);\r\n    };\r\n  }, [location, connector]);\r\n\r\n  const urlNetworkName = useMemo(\r\n    () => location.pathname.split('/')[1],\r\n    [location]\r\n  );\r\n  const prevUrlNetworkName = usePrevious(urlNetworkName);\r\n  if (\r\n    urlNetworkName &&\r\n    prevUrlNetworkName &&\r\n    urlNetworkName !== prevUrlNetworkName\r\n  ) {\r\n    tryConnecting();\r\n  }\r\n\r\n  // Fetch user blockchain data on an interval using current params\r\n  useInterval(\r\n    async () => {\r\n      if (networkActive) {\r\n        if (location.pathname !== '/cache') {\r\n          blockchainStore.fetchData(providerStore.getActiveWeb3React(), false);\r\n        }\r\n      }\r\n    },\r\n    networkActive ? BLOKCHAIN_FETCH_INTERVAL : 10\r\n  );\r\n\r\n  const Content = styled.div`\r\n    margin: auto;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    width: 85%;\r\n  `;\r\n\r\n  // on page load, do nothing until we've tried to connect to the injected connector\r\n  if (!triedEager) {\r\n    console.debug('[Web3ReactManager] Render: Eager load not tried');\r\n    return (\r\n      <ThemeProvider>\r\n        <GlobalStyle />\r\n        <Content>\r\n          <LoadingNetworkHeader />\r\n          <LoadingBox>\r\n            <div className=\"loader\">\r\n              <PulsingIcon size={80} inactive={false} />\r\n            </div>\r\n          </LoadingBox>\r\n        </Content>\r\n      </ThemeProvider>\r\n    );\r\n  } else if (networkError) {\r\n    console.debug(\r\n      '[Web3ReactManager] Render: Network error, showing modal error.'\r\n    );\r\n    return null;\r\n  } else {\r\n    console.debug('[Web3ReactManager] Render: Render children', {\r\n      networkActive,\r\n    });\r\n    return children;\r\n  }\r\n};\r\n\r\nexport default Web3ReactManager;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.debug(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker === null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType !== null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","var _line, _line2;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgX(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 20,\n    height: 20,\n    viewBox: \"0 0 20 20\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-x\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 18,\n    y1: 6,\n    x2: 6,\n    y2: 18\n  })), _line2 || (_line2 = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 6,\n    y1: 6,\n    x2: 18,\n    y2: 18\n  })));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgX);\nexport default __webpack_public_path__ + \"static/media/x.33076876.svg\";\nexport { ForwardRef as ReactComponent };","import styled from 'styled-components';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Button } from '../common';\r\n\r\nimport { ReactComponent as Close } from '../../assets/images/x.svg';\r\n\r\nexport const Wrapper = styled.div`\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 700;\r\n  width: auto;\r\n  max-width: ${({ maxWidth }) => maxWidth}px;\r\n  min-width: 400px;\r\n  outline: 0;\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    max-width: 300px;\r\n    min-width: 300px;\r\n    width: 300px;\r\n  }\r\n`;\r\n\r\nexport const Backdrop = styled.div`\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  background: rgba(0, 6, 41, 0.5);\r\n  z-index: 500;\r\n`;\r\nexport const StyledModal = styled.div`\r\n  z-index: 100;\r\n  background: white;\r\n  position: relative;\r\n  margin: auto;\r\n  border-radius: 10px;\r\n`;\r\nexport const Header = styled.div`\r\n  display: flex;\r\n  padding: 24px;\r\n`;\r\nexport const HeaderText = styled.div`\r\n  color: #000629;\r\n  flex: 1;\r\n  font-size: 1.1rem;\r\n`;\r\n\r\nconst CloseIcon = styled.div`\r\n  position: absolute;\r\n  color: var(--header-text);\r\n  right: 1rem;\r\n  top: 14px;\r\n  &:hover {\r\n    cursor: pointer;\r\n    opacity: 0.6;\r\n  }\r\n`;\r\n\r\nconst CloseColor = styled(Close)`\r\n  path {\r\n    stroke: ${({ theme }) => theme.chaliceGray};\r\n  }\r\n`;\r\n\r\nexport const Content = styled.div`\r\n  color: #7b7f93;\r\n  max-height: 30rem;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n`;\r\n\r\nexport const Footer = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 0 16px 16px 16px;\r\n`;\r\n\r\nexport interface ModalProps {\r\n  isOpen: boolean;\r\n  onDismiss: () => void;\r\n  header: JSX.Element;\r\n  hideHeader?: boolean;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  onConfirm?: (any?: any) => void;\r\n  onCancel?: () => void;\r\n  children: JSX.Element;\r\n  maxWidth?: number;\r\n}\r\n\r\nexport const ModalButton = styled(Button)`\r\n  margin: 8px;\r\n  flex: 1;\r\n`;\r\n\r\nexport const Modal: React.FC<ModalProps> = ({\r\n  isOpen,\r\n  onDismiss,\r\n  header,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  onConfirm,\r\n  onCancel,\r\n  hideHeader,\r\n  children,\r\n  maxWidth,\r\n}) => {\r\n  const modal = (\r\n    <div>\r\n      <Backdrop onClick={onDismiss} />\r\n      <Wrapper maxWidth={maxWidth}>\r\n        <StyledModal>\r\n          {!hideHeader && (\r\n            <Header>\r\n              <HeaderText>{header}</HeaderText>\r\n              <CloseIcon onClick={onDismiss}>\r\n                <CloseColor />\r\n              </CloseIcon>\r\n            </Header>\r\n          )}\r\n          <Content>{children}</Content>\r\n          <Footer>\r\n            {onCancel && (\r\n              <ModalButton\r\n                variant=\"secondary\"\r\n                onClick={() => {\r\n                  onCancel();\r\n                  onDismiss();\r\n                }}\r\n              >\r\n                {cancelText}\r\n              </ModalButton>\r\n            )}\r\n            {onConfirm && (\r\n              <ModalButton onClick={onConfirm}>{confirmText}</ModalButton>\r\n            )}\r\n          </Footer>\r\n        </StyledModal>\r\n      </Wrapper>\r\n    </div>\r\n  );\r\n\r\n  return isOpen ? ReactDOM.createPortal(modal, document.body) : null;\r\n};\r\n","import styled from 'styled-components';\r\nimport Copy from '../common/Copy';\r\nimport { injected } from 'provider/connectors';\r\nimport { getBlockchainLink } from '../../utils';\r\n\r\nimport Link from '../../components/common/Link';\r\nimport { useContext } from '../../contexts';\r\n\r\nconst OptionButton = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 4px;\r\n  border: 1px solid var(--active-button-border);\r\n  background-color: var(--blue-text);\r\n  color: #ffffff;\r\n  padding: 8px 24px;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n    border: 1px solid var(--blue-onHover-border);\r\n    background-color: var(--blue-onHover);\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n      font-size: 12px;\r\n    `};\r\n`;\r\n\r\nconst UpperSection = styled.div`\r\n  position: relative;\r\n  background-color: var(--panel-background);\r\n\r\n  h5 {\r\n    margin: 0;\r\n    margin-bottom: 0.5rem;\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n  }\r\n\r\n  h5:last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  h4 {\r\n    margin-top: 0;\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nconst InfoCard = styled.div`\r\n  padding: 1rem;\r\n  border: 1px solid ${({ theme }) => theme.placeholderGray};\r\n  border-radius: 20px;\r\n`;\r\n\r\nconst AccountGroupingRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  font-weight: 500;\r\n  color: ${({ theme }) => theme.textColor};\r\n`;\r\n\r\nconst AccountSection = styled.div`\r\n  background-color: var(--panel-background);\r\n  padding: 0rem 1.5rem;\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 0rem 1rem 1rem 1rem;`};\r\n`;\r\n\r\nconst YourAccount = styled.div`\r\n  h5 {\r\n    margin: 0 0 1rem 0;\r\n    font-weight: 400;\r\n  }\r\n\r\n  h4 {\r\n    margin: 0;\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nconst GreenCircle = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:first-child {\r\n    height: 8px;\r\n    width: 8px;\r\n    margin-left: 12px;\r\n    margin-right: 2px;\r\n    background-color: ${({ theme }) => theme.connectedGreen};\r\n    border-radius: 50%;\r\n  }\r\n`;\r\n\r\nconst CircleWrapper = styled.div`\r\n  color: ${({ theme }) => theme.connectedGreen};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst AccountControl = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  align-items: center;\r\n  min-width: 0;\r\n\r\n  font-weight: 500;\r\n  font-size: 1rem;\r\n\r\n  a:hover {\r\n    text-decoration: underline;\r\n  }\r\n\r\n  a {\r\n    min-width: 0;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n`;\r\n\r\nconst ConnectButtonRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin: 30px;\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n  color: var(--turquois-text);\r\n`;\r\n\r\nconst WalletAction = styled.div`\r\n  color: ${({ theme }) => theme.chaliceGray};\r\n  margin-left: 16px;\r\n  font-weight: 400;\r\n  :hover {\r\n    cursor: pointer;\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\ninterface Props {\r\n  openOptions: any;\r\n}\r\n\r\nexport default function AccountDetails(props: Props) {\r\n  const { openOptions } = props;\r\n  const {\r\n    context: { providerStore, configStore },\r\n  } = useContext();\r\n  const { account, connector, deactivate } = providerStore.getActiveWeb3React();\r\n\r\n  const networkName = configStore.getActiveChainName();\r\n\r\n  return (\r\n    <UpperSection>\r\n      <AccountSection>\r\n        <YourAccount>\r\n          <InfoCard>\r\n            <AccountGroupingRow>\r\n              {connector !== injected && (\r\n                <WalletAction\r\n                  onClick={() => {\r\n                    //@ts-ignore\r\n                    connector.close();\r\n                    deactivate();\r\n                  }}\r\n                >\r\n                  Disconnect\r\n                </WalletAction>\r\n              )}\r\n              <CircleWrapper>\r\n                {' '}\r\n                <GreenCircle />{' '}\r\n              </CircleWrapper>\r\n              <AccountControl>\r\n                <StyledLink\r\n                  href={getBlockchainLink(account, networkName, 'address')}\r\n                >\r\n                  {account} \r\n                </StyledLink>\r\n                <Copy toCopy={account} />\r\n              </AccountControl>\r\n            </AccountGroupingRow>\r\n          </InfoCard>\r\n        </YourAccount>\r\n\r\n        <ConnectButtonRow>\r\n          <OptionButton\r\n            onClick={() => {\r\n              openOptions();\r\n            }}\r\n          >\r\n            Connect to a different wallet\r\n          </OptionButton>\r\n        </ConnectButtonRow>\r\n      </AccountSection>\r\n    </UpperSection>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { transparentize } from 'polished';\r\nimport Link from '../../components/common/Link';\r\n\r\nconst InfoCard = styled.button`\r\n  background-color: ${({ theme, active }) =>\r\n    active ? theme.activeGray : theme.backgroundColor};\r\n  padding: 1rem;\r\n  outline: none;\r\n  border: 1px solid;\r\n  border-radius: 12px;\r\n  width: 100% !important;\r\n  : 0 4px 8px 0 ${({ theme, clickable }) =>\r\n    clickable ? transparentize(0.95, theme.shadowColor) : 'none'};\r\n  &:focus {\r\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.royalBlue};\r\n  }\r\n  border-color: ${({ theme, active }) =>\r\n    active ? 'transparent' : theme.placeholderGray};\r\n`;\r\n\r\nconst OptionCard = styled(InfoCard)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 2rem;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst OptionCardLeft = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap};\r\n  justify-content: center;\r\n  height: 100%;\r\n`;\r\n\r\nconst OptionCardClickable = styled(OptionCard)`\r\n  margin-top: 0;\r\n  &:hover {\r\n    cursor: ${({ clickable }) => (clickable ? 'pointer' : '')};\r\n    border: ${({ clickable, theme }) =>\r\n      clickable ? `1px solid ${theme.malibuBlue}` : ``};\r\n  }\r\n  opacity: ${({ disabled }) => (disabled ? '0.5' : '1')};\r\n`;\r\n\r\nconst GreenCircle = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:first-child {\r\n    height: 8px;\r\n    width: 8px;\r\n    margin-right: 8px;\r\n    background-color: ${({ theme }) => theme.connectedGreen};\r\n    border-radius: 50%;\r\n  }\r\n`;\r\n\r\nconst CircleWrapper = styled.div`\r\n  color: ${({ theme }) => theme.connectedGreen};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst HeaderText = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  color: ${props =>\r\n    props.color === 'blue'\r\n      ? ({ theme }) => theme.royalBlue\r\n      : ({ theme }) => theme.textColor};\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst SubHeader = styled.div`\r\n  color: ${({ theme }) => theme.textColor};\r\n  margin-top: 10px;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst IconWrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap};\r\n  align-items: center;\r\n  justify-content: center;\r\n  & > img,\r\n  span {\r\n    height: ${({ size }) => (size ? size + 'px' : '24px')};\r\n    width: ${({ size }) => (size ? size + 'px' : '24px')};\r\n  }\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    align-items: flex-end;\r\n  `};\r\n`;\r\n\r\nexport default function Option({\r\n  link = null,\r\n  clickable = true,\r\n  size = null,\r\n  onClick = null,\r\n  color,\r\n  icon,\r\n  header,\r\n  subheader = null,\r\n  active = false,\r\n}) {\r\n  const content = (\r\n    <OptionCardClickable\r\n      onClick={onClick}\r\n      clickable={clickable && !active}\r\n      active={active}\r\n    >\r\n      <OptionCardLeft>\r\n        <HeaderText color={color}>\r\n          {' '}\r\n          {active ? (\r\n            <CircleWrapper>\r\n              <GreenCircle>\r\n                <div />\r\n              </GreenCircle>\r\n            </CircleWrapper>\r\n          ) : (\r\n            ''\r\n          )}\r\n          {header}\r\n        </HeaderText>\r\n        {subheader && <SubHeader>{subheader}</SubHeader>}\r\n      </OptionCardLeft>\r\n      <IconWrapper size={size} active={active}>\r\n        {icon && <img src={icon} alt={'Icon'} />}\r\n      </IconWrapper>\r\n    </OptionCardClickable>\r\n  );\r\n  if (link) {\r\n    return <Link href={link}>{content}</Link>;\r\n  }\r\n\r\n  return content;\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport { Modal } from '../Modal';\r\nimport AccountDetails from '../AccountDetails';\r\nimport Option from './Option';\r\nimport { usePrevious } from 'utils';\r\nimport Link from '../../components/common/Link';\r\nimport { injected, getWallets } from 'provider/connectors';\r\nimport { useContext } from '../../contexts';\r\nimport { isChainIdSupported } from '../../provider/connectors';\r\nimport { useRpcUrls } from 'provider/providerHooks';\r\nimport { useWeb3React } from '@web3-react/core';\r\n\r\nconst Wrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.backgroundColor};\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst HeaderRow = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  padding: 1.5rem 1.5rem;\r\n  font-weight: 500;\r\n  color: var(--header-text);\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    padding: 1rem;\r\n  `};\r\n`;\r\n\r\nconst ContentWrapper = styled.div`\r\n  background-color: var(--panel-background);\r\n  color: var(--body-text);\r\n  padding: 2rem;\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 1rem`};\r\n`;\r\n\r\nconst UpperSection = styled.div`\r\n  position: relative;\r\n  background-color: var(--panel-background);\r\n\r\n  h5 {\r\n    margin: 0;\r\n    margin-bottom: 0.5rem;\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n  }\r\n\r\n  h5:last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  h4 {\r\n    margin-top: 0;\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nconst Blurb = styled.div`\r\n  ${({ theme }) => theme.flexRowWrap}\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 2rem;\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    margin: 1rem;\r\n    font-size: 12px;\r\n  `};\r\n`;\r\n\r\nconst OptionGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  grid-gap: 10px;\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    grid-template-columns: 1fr;\r\n    grid-gap: 10px;\r\n  `};\r\n`;\r\n\r\nconst HoverText = styled.div`\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst WALLET_VIEWS = {\r\n  OPTIONS: 'options',\r\n  OPTIONS_SECONDARY: 'options_secondary',\r\n  ACCOUNT: 'account',\r\n  PENDING: 'pending',\r\n};\r\n\r\nconst WalletModal = observer(() => {\r\n  const {\r\n    context: { modalStore },\r\n  } = useContext();\r\n  const { active, connector, error, activate, account, chainId } =\r\n    useWeb3React();\r\n  const rpcUrls = useRpcUrls();\r\n  const [walletView, setWalletView] = useState(WALLET_VIEWS.ACCOUNT);\r\n  const [connectionErrorMessage, setConnectionErrorMessage] = useState(false);\r\n\r\n  const walletModalOpen = modalStore.walletModalVisible;\r\n\r\n  const toggleWalletModal = () => {\r\n    modalStore.toggleWalletModal();\r\n  };\r\n\r\n  // always reset to account view\r\n  useEffect(() => {\r\n    if (walletModalOpen) {\r\n      setConnectionErrorMessage(false);\r\n      setWalletView(WALLET_VIEWS.ACCOUNT);\r\n    }\r\n  }, [walletModalOpen]);\r\n\r\n  // close modal when a connection is successful\r\n  const activePrevious = usePrevious(active);\r\n  const connectorPrevious = usePrevious(connector);\r\n  useEffect(() => {\r\n    if (\r\n      walletModalOpen &&\r\n      ((active && !activePrevious) ||\r\n        (connector && connector !== connectorPrevious && !error))\r\n    ) {\r\n      setWalletView(WALLET_VIEWS.ACCOUNT);\r\n    }\r\n  }, [\r\n    setWalletView,\r\n    active,\r\n    error,\r\n    connector,\r\n    walletModalOpen,\r\n    activePrevious,\r\n    connectorPrevious,\r\n  ]);\r\n\r\n  const tryActivation = async connector => {\r\n    setWalletView(WALLET_VIEWS.PENDING);\r\n    activate(connector, undefined, true).catch(e => {\r\n      setConnectionErrorMessage(e);\r\n      console.debug('[Activation Error]', e);\r\n    });\r\n  };\r\n\r\n  // get wallets user can switch too, depending on device/browser\r\n  function getOptions() {\r\n    if (!rpcUrls) return [];\r\n\r\n    const isMetamask = window.ethereum && window.ethereum.isMetaMask;\r\n    const wallets = getWallets(rpcUrls);\r\n    return Object.keys(wallets).map(key => {\r\n      const option = wallets[key];\r\n      // check for mobile options\r\n      if (isMobile) {\r\n        if (!window.ethereum && option.mobile) {\r\n          return (\r\n            <Option\r\n              onClick={() => {\r\n                option.connector !== connector &&\r\n                  !option.href &&\r\n                  tryActivation(option.connector);\r\n              }}\r\n              key={key}\r\n              icon={option.icon}\r\n              active={option.connector && option.connector === connector}\r\n              color={option.color}\r\n              link={option.href}\r\n              header={option.name}\r\n              subheader={null}\r\n            />\r\n          );\r\n        }\r\n        return null;\r\n      }\r\n\r\n      // overwrite injected when needed\r\n      if (option.connector === injected) {\r\n        // don't show injected if there's no injected provider\r\n        if (!window.ethereum) {\r\n          if (option.name === 'MetaMask') {\r\n            return (\r\n              <Option\r\n                key={key}\r\n                color={'#E8831D'}\r\n                icon={option.icon}\r\n                header={'Install Metamask'}\r\n                subheader={null}\r\n                link={'https://metamask.io/'}\r\n              />\r\n            );\r\n          } else {\r\n            return null; //dont want to return install twice\r\n          }\r\n        }\r\n        // don't return metamask if injected provider isn't metamask\r\n        else if (option.name === 'MetaMask' && !isMetamask) {\r\n          return null;\r\n        }\r\n        // likewise for generic\r\n        else if (option.name === 'Injected' && isMetamask) {\r\n          return null;\r\n        }\r\n      }\r\n\r\n      // return rest of options\r\n      return (\r\n        !isMobile &&\r\n        !option.mobileOnly && (\r\n          <Option\r\n            onClick={() => {\r\n              option.connector === connector\r\n                ? setWalletView(WALLET_VIEWS.ACCOUNT)\r\n                : !option.href && tryActivation(option.connector);\r\n            }}\r\n            key={key}\r\n            active={option.connector === connector}\r\n            color={option.color}\r\n            icon={option.icon}\r\n            link={option.href}\r\n            header={option.name}\r\n            subheader={null} //use option.descriptio to bring back multi-line\r\n          />\r\n        )\r\n      );\r\n    });\r\n  }\r\n\r\n  function getModalContent() {\r\n    if (connectionErrorMessage) {\r\n      return (\r\n        <UpperSection>\r\n          <HeaderRow>\r\n            {connectionErrorMessage\r\n              .toString()\r\n              .indexOf('UnsupportedChainIdError') >= 0\r\n              ? 'Wrong Network'\r\n              : 'Error connecting'}\r\n          </HeaderRow>\r\n          <ContentWrapper>\r\n            {connectionErrorMessage\r\n              .toString()\r\n              .indexOf('UnsupportedChainIdError') >= 0 ? (\r\n              <h5> Please connect to a valid ethereum network. </h5>\r\n            ) : (\r\n              'Error connecting. Try refreshing the page.'\r\n            )}\r\n          </ContentWrapper>\r\n        </UpperSection>\r\n      );\r\n    }\r\n    if (\r\n      account &&\r\n      !isChainIdSupported(chainId) &&\r\n      walletView === WALLET_VIEWS.ACCOUNT\r\n    ) {\r\n      return (\r\n        <UpperSection>\r\n          <HeaderRow>{'Wrong Network'}</HeaderRow>\r\n          <ContentWrapper>\r\n            <h5>Please connect to a valid ethereum network.</h5>\r\n          </ContentWrapper>\r\n        </UpperSection>\r\n      );\r\n    }\r\n    if (account && walletView === WALLET_VIEWS.ACCOUNT) {\r\n      return (\r\n        <AccountDetails\r\n          openOptions={() => setWalletView(WALLET_VIEWS.OPTIONS)}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <UpperSection>\r\n        <ContentWrapper>\r\n          <OptionGrid>{getOptions()}</OptionGrid>\r\n          {walletView !== WALLET_VIEWS.PENDING && (\r\n            <Blurb>\r\n              <span style={{ color: '#90a4ae' }}>New to Ethereum? &nbsp;</span>{' '}\r\n              <Link href=\"https://ethereum.org/use/#3-what-is-a-wallet-and-which-one-should-i-use\">\r\n                Learn more about wallets\r\n              </Link>\r\n            </Blurb>\r\n          )}\r\n        </ContentWrapper>\r\n      </UpperSection>\r\n    );\r\n  }\r\n\r\n  const Header = (\r\n    <div>\r\n      {walletView !== WALLET_VIEWS.ACCOUNT ? (\r\n        <HoverText\r\n          onClick={() => {\r\n            setWalletView(WALLET_VIEWS.ACCOUNT);\r\n          }}\r\n        >\r\n          Back\r\n        </HoverText>\r\n      ) : walletView === WALLET_VIEWS.ACCOUNT ? (\r\n        'Account'\r\n      ) : (\r\n        'Connect to a wallet'\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      header={Header}\r\n      isOpen={walletModalOpen}\r\n      onDismiss={toggleWalletModal}\r\n    >\r\n      <Wrapper>{getModalContent()}</Wrapper>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nexport default WalletModal;\r\n","import styled from 'styled-components';\r\nimport { transparentize } from 'polished';\r\nimport Link from '../common/Link';\r\n\r\nconst InfoCard = styled.button`\r\n  background-color: ${({ theme, active }) =>\r\n    active ? theme.activeGray : theme.backgroundColor};\r\n  padding: 1rem;\r\n  outline: none;\r\n  border: 1px solid;\r\n  border-radius: 12px;\r\n  width: 100% !important;\r\n  : 0 4px 8px 0 ${({ theme, clickable }) =>\r\n    clickable ? transparentize(0.95, theme.shadowColor) : 'none'};\r\n  &:focus {\r\n    box-shadow: 0 0 0 1px ${({ theme }) => theme.royalBlue};\r\n  }\r\n  border-color: ${({ theme, active }) =>\r\n    active ? 'transparent' : theme.placeholderGray};\r\n`;\r\n\r\nconst OptionCard = styled(InfoCard)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 2rem;\r\n  padding: 1rem;\r\n`;\r\n\r\nconst OptionCardLeft = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap};\r\n  justify-content: center;\r\n  height: 100%;\r\n`;\r\n\r\nconst OptionCardClickable = styled(OptionCard)`\r\n  margin-top: 0;\r\n  margin-bottom: 0.75rem;\r\n  &:hover {\r\n    cursor: ${({ clickable }) => (clickable ? 'pointer' : '')};\r\n    border: ${({ clickable, theme }) =>\r\n      clickable ? `1px solid ${theme.malibuBlue}` : ``};\r\n  }\r\n  opacity: ${({ disabled }) => (disabled ? '0.5' : '1')};\r\n`;\r\n\r\nconst GreenCircle = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap}\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  &:first-child {\r\n    height: 8px;\r\n    width: 8px;\r\n    margin-right: 8px;\r\n    background-color: ${({ theme }) => theme.connectedGreen};\r\n    border-radius: 50%;\r\n  }\r\n`;\r\n\r\nconst CircleWrapper = styled.div`\r\n  color: ${({ theme }) => theme.connectedGreen};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst HeaderText = styled.div`\r\n  ${({ theme }) => theme.flexRowNoWrap};\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst SubHeader = styled.div`\r\n  color: ${({ theme }) => theme.textColor};\r\n  margin-top: 10px;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst IconWrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap};\r\n  align-items: center;\r\n  justify-content: center;\r\n  & > img,\r\n  span {\r\n    height: ${({ size }) => (size ? size + 'px' : '24px')};\r\n    width: ${({ size }) => (size ? size + 'px' : '24px')};\r\n  }\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`\r\n    align-items: flex-end;\r\n  `};\r\n`;\r\n\r\nexport default function Option({\r\n  link = null,\r\n  clickable = true,\r\n  size = null,\r\n  onClick = null,\r\n  icon,\r\n  header,\r\n  subheader = null,\r\n  active = false,\r\n}) {\r\n  const content = (\r\n    <OptionCardClickable\r\n      onClick={onClick}\r\n      clickable={clickable && !active}\r\n      active={active}\r\n    >\r\n      <OptionCardLeft>\r\n        <HeaderText>\r\n          {' '}\r\n          {active ? (\r\n            <CircleWrapper>\r\n              <GreenCircle>\r\n                <div />\r\n              </GreenCircle>\r\n            </CircleWrapper>\r\n          ) : (\r\n            ''\r\n          )}\r\n          {header}\r\n        </HeaderText>\r\n        {subheader && <SubHeader>{subheader}</SubHeader>}\r\n      </OptionCardLeft>\r\n      <IconWrapper size={size} active={active}>\r\n        {icon && <img src={icon} alt={'Icon'} />}\r\n      </IconWrapper>\r\n    </OptionCardClickable>\r\n  );\r\n  if (link) {\r\n    return <Link href={link}>{content}</Link>;\r\n  }\r\n\r\n  return content;\r\n}\r\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/ethereum.c729bd46.svg\";","import { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { InjectedConnector } from '@web3-react/injected-connector';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Modal } from '../Modal';\r\nimport Option from './Option';\r\nimport { useContext } from 'contexts';\r\nimport { useRpcUrls } from 'provider/providerHooks';\r\nimport { getChains } from 'provider/connectors';\r\n\r\nimport arbitrumIcon from '../../assets/images/arbitrum.png';\r\nimport ethereumIcon from '../../assets/images/ethereum.svg';\r\nimport gnosisIcon from '../../assets/images/gnosis-icon-green.svg';\r\n\r\nconst iconsByChain = {\r\n  1: ethereumIcon,\r\n  4: ethereumIcon,\r\n  100: gnosisIcon,\r\n  42161: arbitrumIcon,\r\n  421611: arbitrumIcon,\r\n  1337: ethereumIcon,\r\n};\r\nconst Wrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnNoWrap}\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.backgroundColor};\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst ContentWrapper = styled.div`\r\n  background-color: var(--panel-background);\r\n  color: var(--body-text);\r\n  padding: 2rem;\r\n  ${({ theme }) => theme.mediaWidth.upToMedium`padding: 1rem`};\r\n`;\r\n\r\nconst UpperSection = styled.div`\r\n  position: relative;\r\n  background-color: var(--panel-background);\r\n\r\n  h5 {\r\n    margin: 0;\r\n    margin-bottom: 0.5rem;\r\n    font-size: 1rem;\r\n    font-weight: 400;\r\n  }\r\n\r\n  h5:last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  h4 {\r\n    margin-top: 0;\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nconst OptionGrid = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst NetworkModal = observer(() => {\r\n  const {\r\n    context: { modalStore, providerStore },\r\n  } = useContext();\r\n  const { chainId, connector, deactivate } = providerStore.getActiveWeb3React();\r\n  const rpcUrls = useRpcUrls();\r\n  const history = useHistory();\r\n  const [networkErrorMessage, setNetworkErrorMessage] = useState(false);\r\n\r\n  const networkModalOpen = modalStore.networkModalVisible;\r\n\r\n  const toggleNetworkModal = () => {\r\n    modalStore.toggleNetworkModal();\r\n  };\r\n\r\n  // always reset to options view\r\n  useEffect(() => {\r\n    if (networkModalOpen) {\r\n      setNetworkErrorMessage(false);\r\n    }\r\n  }, [networkModalOpen]);\r\n\r\n  const trySwitching = async chain => {\r\n    if (connector instanceof InjectedConnector) {\r\n      const chainIdHex = `0x${chain.id.toString(16)}`;\r\n      try {\r\n        await window.ethereum?.send('wallet_switchEthereumChain', [\r\n          { chainId: chainIdHex },\r\n        ]);\r\n      } catch (e: any) {\r\n        if (e?.code == 4902) {\r\n          window.ethereum?.send('wallet_addEthereumChain', [\r\n            {\r\n              chainId: chainIdHex,\r\n              chainName: chain.displayName,\r\n              nativeCurrency: chain.nativeAsset,\r\n              rpcUrls: [chain.rpcUrl, chain.defaultRpc],\r\n              blockExplorerUrls: [chain.blockExplorer],\r\n            },\r\n          ]);\r\n        }\r\n      }\r\n    } else {\r\n      deactivate();\r\n    }\r\n\r\n    history.push(`/${chain.name}/proposals`);\r\n  };\r\n\r\n  // get networks user can switch to\r\n  function getOptions() {\r\n    if (!rpcUrls) return [];\r\n\r\n    const chains = getChains(rpcUrls);\r\n    return chains.map(chain => {\r\n      return (\r\n        <Option\r\n          onClick={() => trySwitching(chain)}\r\n          key={chain.name}\r\n          icon={iconsByChain[chain.id] || null}\r\n          active={chain.id === chainId}\r\n          header={chain.displayName}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  function getModalContent() {\r\n    return (\r\n      <UpperSection>\r\n        <ContentWrapper>\r\n          <OptionGrid>{getOptions()}</OptionGrid>\r\n        </ContentWrapper>\r\n      </UpperSection>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      header={<div>Switch network</div>}\r\n      isOpen={networkModalOpen}\r\n      onDismiss={toggleNetworkModal}\r\n    >\r\n      <>\r\n        <Wrapper>{getModalContent()}</Wrapper>\r\n        <div>{networkErrorMessage}</div>\r\n      </>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nexport default NetworkModal;\r\n","export default __webpack_public_path__ + \"static/media/gnosis-icon-green.90512ab9.svg\";","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { toCamelCaseString } from '../../utils';\r\nimport WalletModal from 'components/WalletModal';\r\nimport { getChains, injected, isChainIdSupported } from 'provider/connectors';\r\nimport { useContext } from '../../contexts';\r\nimport { Box } from '../../components/common';\r\nimport NetworkModal from 'components/NetworkModal';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRpcUrls } from 'provider/providerHooks';\r\nimport BlockchainLink from '../common/BlockchainLink';\r\n\r\nconst WrongNetworkButton = styled(Box)`\r\n  color: var(--dark-text-gray);\r\n  padding: 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  height: 28px;\r\n  border-radius: 6px;\r\n  background: var(--wrong-network);\r\n  color: var(--white);\r\n  cursor: pointer;\r\n`;\r\n\r\nconst AccountButton = styled(Box)`\r\n  color: var(--dark-text-gray);\r\n  padding: 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  margin-right: 10px;\r\n  height: 28px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ConnectButton = styled(Box)`\r\n  color: var(--dark-text-gray);\r\n  padding: 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  height: 28px;\r\n  border-radius: 6px;\r\n  background: var(--blue-text);\r\n  color: var(--white);\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ChainButton = styled(AccountButton)`\r\n  font-size: 14px;\r\n`;\r\n\r\nconst Web3ConnectStatus = observer(props => {\r\n  const {\r\n    context: { modalStore, providerStore, configStore },\r\n  } = useContext();\r\n  const [injectedWalletAuthorized, setInjectedWalletAuthorized] =\r\n    useState(false);\r\n  const rpcUrls = useRpcUrls();\r\n\r\n  useEffect(() => {\r\n    injected.isAuthorized().then(isAuthorized => {\r\n      setInjectedWalletAuthorized(isAuthorized);\r\n    });\r\n  }, [injected]);\r\n\r\n  const { chainId, account, error } = providerStore.getActiveWeb3React();\r\n\r\n  const toggleWalletModal = () => {\r\n    modalStore.toggleWalletModal();\r\n  };\r\n\r\n  const toggleNetworkModal = () => {\r\n    modalStore.toggleNetworkModal();\r\n  };\r\n\r\n  const switchNetwork = async chain => {\r\n    const chainIdHex = `0x${chain.id.toString(16)}`;\r\n    try {\r\n      await window.ethereum?.send('wallet_switchEthereumChain', [\r\n        { chainId: chainIdHex },\r\n      ]);\r\n    } catch (e: any) {\r\n      if (e?.code == 4902) {\r\n        window.ethereum?.send('wallet_addEthereumChain', [\r\n          {\r\n            chainId: chainIdHex,\r\n            chainName: chain.displayName,\r\n            nativeCurrency: chain.nativeAsset,\r\n            rpcUrls: [chain.rpcUrl, chain.defaultRpc],\r\n            blockExplorerUrls: [chain.blockExplorer],\r\n          },\r\n        ]);\r\n      }\r\n    }\r\n  };\r\n\r\n  function getWalletStatus() {\r\n    if (injectedWalletAuthorized && !account) {\r\n      const chains = getChains(rpcUrls);\r\n      const activeChain =\r\n        chains.find(chain => chain.id == chainId) || chains[0];\r\n      const isMetamask = window.ethereum && window.ethereum.isMetaMask;\r\n      return (\r\n        <ConnectButton onClick={() => switchNetwork(activeChain)} active={true}>\r\n          Switch {isMetamask ? 'MetaMask' : 'Wallet'} to{' '}\r\n          {activeChain.displayName}\r\n        </ConnectButton>\r\n      );\r\n    } else if (account) {\r\n      return (\r\n        <AccountButton onClick={toggleWalletModal}>\r\n          <BlockchainLink text={account} onlyText />\r\n        </AccountButton>\r\n      );\r\n    } else {\r\n      return (\r\n        <ConnectButton onClick={toggleWalletModal} active={true}>\r\n          {props.text}\r\n        </ConnectButton>\r\n      );\r\n    }\r\n  }\r\n\r\n  function getNetworkStatus() {\r\n    // Wrong network\r\n    if ((chainId && !isChainIdSupported(chainId)) || error) {\r\n      return (\r\n        <WrongNetworkButton onClick={toggleNetworkModal}>\r\n          Wrong Network\r\n        </WrongNetworkButton>\r\n      );\r\n    } else if (chainId) {\r\n      return (\r\n        <div style={{ display: 'flex' }}>\r\n          <ChainButton onClick={toggleNetworkModal}>\r\n            {toCamelCaseString(configStore.getActiveChainDisplayName())}\r\n          </ChainButton>\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <ConnectButton onClick={toggleNetworkModal} active={true}>\r\n          Not Connected\r\n        </ConnectButton>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {getNetworkStatus()}\r\n      {getWalletStatus()}\r\n      <WalletModal />\r\n      <NetworkModal />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Web3ConnectStatus;\r\n","import { RouteComponentProps, withRouter } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport styled from 'styled-components';\r\nimport Web3ConnectStatus from '../Web3ConnectStatus';\r\nimport { useContext } from '../../contexts';\r\nimport { FiSettings, FiUser, FiBarChart2 } from 'react-icons/fi';\r\nimport dxdaoIcon from 'assets/images/DXdao.svg';\r\nimport { bnum } from '../../utils';\r\nimport { Box } from '../../components/common';\r\nimport _ from 'lodash';\r\n\r\nconst NavWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  padding: 20px 0px 0px 0px;\r\n`;\r\n\r\nconst NavSection = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n`;\r\n\r\nconst MenuItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  color: var(--nav-text-light);\r\n  font-size: 16px;\r\n  line-height: 19px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ItemBox = styled(Box)`\r\n  color: var(--dark-text-gray);\r\n  padding: 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  margin-right: 10px;\r\n  height: 28px;\r\n  border-radius: 6px;\r\n`;\r\n\r\nconst WarningDev = styled.div`\r\n  margin-left: 5px;\r\n  padding-top: 3px;\r\n  color: red;\r\n`;\r\n\r\ninterface NavItemProps {\r\n  route: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nconst Header = observer(() => {\r\n  const NavItem = withRouter(\r\n    ({ route, history, children }: NavItemProps & RouteComponentProps) => {\r\n      return (\r\n        <div\r\n          style={{ cursor: 'pointer' }}\r\n          onClick={() => {\r\n            history.push(route);\r\n          }}\r\n        >\r\n          {' '}\r\n          {children}{' '}\r\n        </div>\r\n      );\r\n    }\r\n  );\r\n\r\n  const {\r\n    context: { providerStore, blockchainStore, configStore, daoStore },\r\n  } = useContext();\r\n\r\n  const { active, account } = providerStore.getActiveWeb3React();\r\n\r\n  const isTestingEnv = !window?.location?.href?.includes('dxvote.eth');\r\n\r\n  const networkName = configStore.getActiveChainName();\r\n\r\n  const { userRep, totalSupply } =\r\n    active && blockchainStore.initialLoadComplete\r\n      ? daoStore.getRepAt(account, providerStore.getCurrentBlockNumber())\r\n      : { userRep: bnum(0), totalSupply: bnum(0) };\r\n  const repPercentage = active\r\n    ? userRep.times(100).div(totalSupply).toFixed(4)\r\n    : bnum(0);\r\n\r\n  // const votingMachines = configStore.getNetworkContracts().votingMachines;\r\n  // const votingMachineTokens = _.uniq(\r\n  //   Object.keys(votingMachines).map((votingMachineAddress, i) =>\r\n  //     configStore\r\n  //       .getTokensOfNetwork()\r\n  //       .find(\r\n  //         token => token.address === votingMachines[votingMachineAddress].token\r\n  //       )\r\n  //   )\r\n  // );\r\n\r\n  return (\r\n    <NavWrapper>\r\n      <NavSection>\r\n        <NavItem route={`/${networkName}/proposals`}>\r\n          <MenuItem>\r\n            <img alt=\"dxdao\" src={dxdaoIcon} />\r\n            {isTestingEnv && <WarningDev>Testing Environment</WarningDev>}\r\n          </MenuItem>\r\n        </NavItem>\r\n      </NavSection>\r\n      {!active ? (\r\n        <NavSection>\r\n          <Web3ConnectStatus text=\"Connect Wallet\" />\r\n          <NavItem route={`/config`}>\r\n            <a>\r\n              <FiSettings style={{ margin: '0px 10px', color: '#616161' }} />\r\n            </a>\r\n          </NavItem>\r\n        </NavSection>\r\n      ) : blockchainStore.initialLoadComplete ? (\r\n        <NavSection>\r\n          {account && active && (\r\n            <>\r\n              {/* {useBalances(\r\n                account\r\n                  ? votingMachineTokens.map(votingMachineToken => ({\r\n                      assetAddress: votingMachineToken.address,\r\n                      fromAddress: account,\r\n                    }))\r\n                  : []\r\n              ).map((votingMachineTokenBalance, i) => {\r\n                return (\r\n                  <ItemBox key={i}>\r\n                    {formatCurrency(\r\n                      normalizeBalance(votingMachineTokenBalance)\r\n                    )}{' '}\r\n                    {votingMachineTokens[i].symbol}{' '}\r\n                  </ItemBox>\r\n                );\r\n              })} */}\r\n              {repPercentage.toString() !== 'NaN' && (\r\n                <ItemBox> {repPercentage.toString()} % REP </ItemBox>\r\n              )}\r\n            </>\r\n          )}\r\n          <Web3ConnectStatus text=\"Connect Wallet\" />\r\n          <NavItem route={`/${networkName}/info`}>\r\n            <a>\r\n              <FiBarChart2 style={{ margin: '0px 10px', color: '#616161' }} />\r\n            </a>\r\n          </NavItem>\r\n          <NavItem route={`/config`}>\r\n            <a>\r\n              <FiSettings style={{ margin: '0px 10px', color: '#616161' }} />\r\n            </a>\r\n          </NavItem>\r\n          {account && (\r\n            <NavItem route={`/${networkName}/user/${account}`}>\r\n              <a>\r\n                <FiUser style={{ margin: '0px 10px', color: '#616161' }} />\r\n              </a>\r\n            </NavItem>\r\n          )}\r\n        </NavSection>\r\n      ) : (\r\n        <NavSection>\r\n          <Web3ConnectStatus text=\"Connect Wallet\" />\r\n          <NavItem route={`/config`}>\r\n            <a>\r\n              <FiSettings style={{ margin: '0px 10px', color: '#616161' }} />\r\n            </a>\r\n          </NavItem>\r\n        </NavSection>\r\n      )}\r\n    </NavWrapper>\r\n  );\r\n});\r\n\r\nexport default Header;\r\n","import styled from 'styled-components';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst FooterWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  padding: 24px 0px 32px;\r\n  color: var(--footer-text-gray);\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst LeftFooter = styled.div`\r\n  margin-top: auto;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  a {\r\n    text-decoration: none;\r\n    color: var(--footer-text-gray);\r\n    cursor: pointer;\r\n  }\r\n  a:hover {\r\n    color: var(--text-gray-onHover);\r\n  }a\r\n\r\n`;\r\n\r\nconst FooterDivider = styled.div`\r\n  background: var(--footer-text-gray);\r\n  width: 4px;\r\n  height: 4px;\r\n  border-radius: 2px;\r\n  line-height: 24px;\r\n  margin: auto 7px;\r\n`;\r\n\r\nconst Footer = () => {\r\n  let history = useHistory();\r\n\r\n  return (\r\n    <FooterWrapper>\r\n      <LeftFooter>\r\n        <FooterItem>\r\n          <a href=\"https://dxdao.eth.link/#/\" target=\"_blank\" rel=\"noreferrer\">\r\n            {' '}\r\n            Website{' '}\r\n          </a>\r\n        </FooterItem>\r\n        <FooterDivider></FooterDivider>\r\n        <FooterItem>\r\n          <a\r\n            onClick={() => {\r\n              history.push('/forum');\r\n            }}\r\n            target=\"_self\"\r\n          >\r\n            {' '}\r\n            Forum{' '}\r\n          </a>\r\n        </FooterItem>\r\n        <FooterDivider></FooterDivider>\r\n        <FooterItem>\r\n          <a\r\n            href=\"https://github.com/DXgovernance/dxvote\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            {' '}\r\n            Source Code{' '}\r\n          </a>\r\n        </FooterItem>\r\n        <FooterDivider></FooterDivider>\r\n        <FooterItem>\r\n          <a\r\n            onClick={() => {\r\n              history.push('/faq');\r\n            }}\r\n          >\r\n            {' '}\r\n            FAQ{' '}\r\n          </a>\r\n        </FooterItem>\r\n        <FooterDivider></FooterDivider>\r\n        <FooterItem>\r\n          <a\r\n            href=\"https://github.com/DXgovernance/dxvote/issues/new/choose\"\r\n            target=\"_blank\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            {' '}\r\n            Submit Issue{' '}\r\n          </a>\r\n        </FooterItem>\r\n        <FooterDivider></FooterDivider>\r\n        <FooterItem>\r\n          v\r\n          {`${process.env.REACT_APP_VERSION}${\r\n            process.env.NODE_ENV !== 'production'\r\n              ? `-${process.env.NODE_ENV}`\r\n              : ''\r\n          }`}\r\n        </FooterItem>\r\n      </LeftFooter>\r\n    </FooterWrapper>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nexport const GlobalNotificationWrapper = styled.div`\r\n  width: 100%;\r\n  background-color: ${({ type }) => (type === 'ERROR' ? '#f44336' : '#4caf50')};\r\n  padding: 1rem;\r\n  text-align: center;\r\n  color: #fff;\r\n  font-weight: 500;\r\n`;\r\n\r\ninterface GlobalNotificationProps {\r\n  visible: boolean;\r\n  message: string;\r\n  type: 'INFO' | 'ERROR';\r\n}\r\n\r\nconst GlobalNotification: React.FC<GlobalNotificationProps> = ({\r\n  visible,\r\n  message,\r\n  type,\r\n}) => {\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <GlobalNotificationWrapper type={type}>{message}</GlobalNotificationWrapper>\r\n  );\r\n};\r\n\r\nexport default GlobalNotification;\r\n","import React from 'react';\r\nimport GlobalNotification from '../GlobalNotification';\r\n\r\nconst handledErrorTypes = {\r\n  CacheLoadError:\r\n    'We ran into an error while trying to update the cache. Data shown below might be incorrect or outdated. Please reload the page and try again.',\r\n};\r\n\r\nclass GlobalErrorBoundary extends React.Component<\r\n  {},\r\n  { hasError: boolean; errorMessage: string }\r\n> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, errorMessage: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    const errorMessage = this ? this.getErrorMessage(error.name) : false;\r\n    return {\r\n      hasError: !!errorMessage,\r\n      errorMessage,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('unhandledrejection', this.promiseRejectionHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\r\n      'unhandledrejection',\r\n      this.promiseRejectionHandler\r\n    );\r\n  }\r\n\r\n  private promiseRejectionHandler = (event: PromiseRejectionEvent) => {\r\n    const errorMessage = GlobalErrorBoundary.getErrorMessage(\r\n      event?.reason?.name\r\n    );\r\n    if (errorMessage) {\r\n      this.setState({\r\n        hasError: true,\r\n        errorMessage: errorMessage,\r\n      });\r\n    }\r\n  };\r\n\r\n  private static getErrorMessage(errorName) {\r\n    if (Object.keys(handledErrorTypes).includes(errorName)) {\r\n      return handledErrorTypes[errorName];\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <GlobalNotification\r\n          visible={this.state.hasError}\r\n          type=\"ERROR\"\r\n          message={this.state.errorMessage}\r\n        />\r\n        {this.props.children}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GlobalErrorBoundary;\r\n","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\nimport { useContext } from './contexts';\r\nimport PulsingIcon from './components/common/LoadingIcon';\r\nimport { GlobalLoadingState } from './stores/NotificationStore';\r\nimport { useWeb3React } from '@web3-react/core';\r\nimport { useEffect } from 'react';\r\n\r\nconst PageRouterWrapper = styled.div`\r\n  margin-top: 20px;\r\n  flex: 1;\r\n`;\r\n\r\nconst LoadingBox = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n\r\n  .loader {\r\n    text-align: center;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    color: var(--dark-text-gray);\r\n    padding: 25px 0px;\r\n\r\n    svg {\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst LoadingProgressText = styled.div`\r\n  font-size: 14px;\r\n  margin-top: 8px;\r\n`;\r\n\r\nconst PageRouter = observer(({ children }) => {\r\n  const {\r\n    context: {\r\n      notificationStore,\r\n      configStore,\r\n      etherscanService,\r\n      pinataService,\r\n      coingeckoService,\r\n    },\r\n  } = useContext();\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const noLoading = ['/faq', '/config', '/forum', '/cache'];\r\n  const networkName = configStore.getActiveChainName();\r\n  const { active: providerActive } = useWeb3React();\r\n\r\n  useEffect(() => {\r\n    if (location.pathname == '/' && networkName) {\r\n      history.push(`/${networkName}/proposals`);\r\n    }\r\n  }, [networkName]);\r\n\r\n  // Start or auth services\r\n  pinataService.isAuthenticated();\r\n  etherscanService.isAuthenticated(networkName);\r\n\r\n  if (noLoading.indexOf(location.pathname) > -1) {\r\n    return <PageRouterWrapper>{children}</PageRouterWrapper>;\r\n  } else if (!providerActive) {\r\n    return (\r\n      <PageRouterWrapper>\r\n        <LoadingBox>\r\n          <div className=\"loader\">\r\n            <PulsingIcon size={80} inactive={true} />\r\n            <div>Connect to a network to continue.</div>\r\n          </div>\r\n        </LoadingBox>\r\n      </PageRouterWrapper>\r\n    );\r\n  } else {\r\n    if (\r\n      !notificationStore.firstLoadComplete ||\r\n      notificationStore.globalLoadingState == GlobalLoadingState.ERROR\r\n    ) {\r\n      const hasError =\r\n        notificationStore.globalLoadingState == GlobalLoadingState.ERROR;\r\n      return (\r\n        <PageRouterWrapper>\r\n          <LoadingBox>\r\n            <div className=\"loader\">\r\n              {' '}\r\n              <PulsingIcon size={80} inactive={hasError} />\r\n              <div>{hasError ? 'Oops! Something broke.' : 'Loading'}</div>\r\n              <LoadingProgressText>\r\n                {notificationStore.globalMessage}\r\n              </LoadingProgressText>\r\n            </div>\r\n          </LoadingBox>\r\n        </PageRouterWrapper>\r\n      );\r\n    } else {\r\n      coingeckoService.loadPrices();\r\n      if (configStore.getLocalConfig().pinOnStart)\r\n        pinataService.updatePinList();\r\n      return <PageRouterWrapper> {children} </PageRouterWrapper>;\r\n    }\r\n  }\r\n});\r\n\r\nexport default PageRouter;\r\n","import styled from 'styled-components';\r\n\r\nexport const ProposalsFilter = styled.select`\r\n  background-color: ${props => props.color || '#536DFE'};\r\n  border-radius: 4px;\r\n  color: white;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 34px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  width: 200px;\r\n  padding: 0px 10px;\r\n  margin: 10px 0px;\r\n  font-family: var(--roboto);\r\n  border: 0px;\r\n  align-self: center;\r\n`;\r\n","import { useContext } from 'contexts';\r\nimport { ProposalsFilter } from './style';\r\n\r\nconst SchemeSearch = ({ value, onFilter }) => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n  const schemes = daoStore.getSchemes();\r\n\r\n  return (\r\n    <ProposalsFilter\r\n      name=\"schemeFilter\"\r\n      id=\"schemeSelector\"\r\n      value={value}\r\n      onChange={e => onFilter(e.target.value)}\r\n    >\r\n      <option value=\"All Schemes\">All Schemes</option>\r\n      {schemes.map(scheme => {\r\n        return (\r\n          <option key={scheme.address} value={scheme.address}>\r\n            {scheme.name}\r\n          </option>\r\n        );\r\n      })}\r\n    </ProposalsFilter>\r\n  );\r\n};\r\n\r\nexport default SchemeSearch;\r\n","import { enumKeys, VotingMachineProposalState } from 'utils';\r\nimport { ProposalsFilter } from './style';\r\n\r\nconst StatusSearch = ({ value, onFilter }) => {\r\n  return (\r\n    <ProposalsFilter\r\n      name=\"stateFilter\"\r\n      id=\"stateSelector\"\r\n      value={value}\r\n      onChange={e => onFilter(e.target.value)}\r\n    >\r\n      <option value=\"Any Status\">Any Status</option>\r\n      {enumKeys(VotingMachineProposalState).map(\r\n        i =>\r\n          i !== 'None' && (\r\n            <option key={i} value={VotingMachineProposalState[i]}>\r\n              {i}\r\n            </option>\r\n          )\r\n      )}\r\n    </ProposalsFilter>\r\n  );\r\n};\r\n\r\nexport default StatusSearch;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst ProposalsNameFilter = styled.input`\r\n  background-color: white;\r\n  border: 1px solid #536dfe;\r\n  border-radius: 4px;\r\n  color: #536dfe;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 32px;\r\n  text-align: left;\r\n  cursor: initial;\r\n  width: 180px;\r\n  padding: 0px 10px;\r\n  margin: 5px 0px;\r\n  font-family: var(--roboto);\r\n  align-self: center;\r\n`;\r\n\r\ninterface TitleSearchProps {\r\n  value: string;\r\n  onFilter: (value: string) => void;\r\n}\r\n\r\nconst TitleSearch: React.FC<TitleSearchProps> = ({ value, onFilter }) => {\r\n  return (\r\n    <ProposalsNameFilter\r\n      type=\"text\"\r\n      placeholder=\"Search by proposal title\"\r\n      name=\"titleFilter\"\r\n      id=\"titleFilter\"\r\n      value={value}\r\n      onChange={e => onFilter(e.target.value)}\r\n    ></ProposalsNameFilter>\r\n  );\r\n};\r\n\r\nexport default TitleSearch;\r\n","import { useContext } from 'contexts';\r\nimport { useState, useEffect } from 'react';\r\nimport { bnum } from 'utils';\r\nimport { BigNumber } from 'utils/bignumber';\r\nimport { ZERO_ADDRESS } from 'utils/constants';\r\n\r\ninterface UseRepReturns {\r\n  getRep(atBlock: number): { totalSupply: BigNumber; userRep: BigNumber };\r\n}\r\n\r\ninterface MemoInteface {\r\n  [index: number]: {\r\n    totalSupply: BigNumber;\r\n    userRep: BigNumber;\r\n  };\r\n}\r\n\r\nexport const useRep = (userAddress: string = ZERO_ADDRESS): UseRepReturns => {\r\n  const {\r\n    context: { daoStore, providerStore },\r\n  } = useContext();\r\n  const [memo, setMemo] = useState<MemoInteface | undefined>(undefined);\r\n  const cache: MemoInteface = {};\r\n  const repEvents = daoStore.daoCache.reputation.events;\r\n\r\n  let totalSupply: BigNumber = bnum(0);\r\n  let userRep: BigNumber = bnum(0);\r\n\r\n  for (let i = 0; i < repEvents.length; i++) {\r\n    if (repEvents[i].event === 'Mint') {\r\n      totalSupply = totalSupply.plus(repEvents[i].amount);\r\n      cache[repEvents[i].blockNumber] = {\r\n        totalSupply: totalSupply,\r\n        userRep: bnum(0),\r\n      };\r\n      if (repEvents[i].account === userAddress)\r\n        userRep = userRep.plus(repEvents[i].amount);\r\n      cache[repEvents[i].blockNumber] = {\r\n        totalSupply: totalSupply,\r\n        userRep: userRep,\r\n      };\r\n      cache[repEvents[i].blockNumber]['userRep'] = userRep;\r\n    } else if (repEvents[i].event === 'Burn') {\r\n      totalSupply = totalSupply.minus(repEvents[i].amount);\r\n      cache[repEvents[i].blockNumber] = {\r\n        totalSupply: totalSupply,\r\n        userRep: bnum(0),\r\n      };\r\n      if (repEvents[i].account === userAddress)\r\n        userRep = userRep.minus(repEvents[i].amount);\r\n      cache[repEvents[i].blockNumber] = {\r\n        totalSupply: totalSupply,\r\n        userRep: userRep,\r\n      };\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setMemo(cache);\r\n  }, [repEvents]);\r\n\r\n  const getRep = (atBlock: number = 0) => {\r\n    const values = memo || cache;\r\n    if (atBlock === 0) atBlock = providerStore.getCurrentBlockNumber();\r\n    const closest = Object.keys(values).reduce((a, b) =>\r\n      parseInt(b) > atBlock ? a : b\r\n    );\r\n    const totalSupply = values[closest]['totalSupply'];\r\n    const userRep = values[closest]['userRep'];\r\n\r\n    return { totalSupply, userRep };\r\n  };\r\n  return {\r\n    getRep,\r\n  };\r\n};\r\n","import { useContext } from 'contexts';\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n  bnum,\r\n  QUEUED_PRIORITY_THRESHOLD,\r\n  VotingMachineProposalState,\r\n  ZERO_ADDRESS,\r\n} from 'utils';\r\nimport { useRep } from './useRep';\r\nimport { ProposalsExtended } from '../types/types';\r\nimport moment from 'moment';\r\n\r\ninterface useFilterCriteriaReturns {\r\n  proposals: ProposalsExtended[];\r\n  loading: boolean;\r\n}\r\n\r\nexport const orderByNewestTimeToFinish = (\r\n  a: ProposalsExtended,\r\n  b: ProposalsExtended\r\n) => a.finishTime - b.finishTime;\r\n\r\nexport const orderByOldestTimeToFinish = (\r\n  a: ProposalsExtended,\r\n  b: ProposalsExtended\r\n) => b.finishTime - a.finishTime;\r\n\r\nexport const useFilterCriteria = (): useFilterCriteriaReturns => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n\r\n  const { getRep } = useRep(ZERO_ADDRESS);\r\n\r\n  const [filteredProposals, setFilteredProposals] = useState<\r\n    ProposalsExtended[]\r\n  >([]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const timeNow = bnum(moment().unix());\r\n\r\n  useEffect(() => {\r\n    const allProposals = daoStore.getAllProposals;\r\n\r\n    // Queded && positiveVotes >= 10% (Ordered from time to finish, from lower to higher)\r\n    const stateEarliestAbove10 = allProposals\r\n      .filter(proposal => {\r\n        const queuedVotePeriodLimit = daoStore.getVotingMachineOfProposal(\r\n          proposal.id\r\n        ).params.queuedVotePeriodLimit;\r\n\r\n        const repAtCreation = getRep(\r\n          proposal.creationEvent.blockNumber\r\n        ).totalSupply;\r\n\r\n        return (\r\n          proposal.stateInVotingMachine === VotingMachineProposalState.Queued &&\r\n          timeNow.lt(proposal.submittedTime.plus(queuedVotePeriodLimit)) &&\r\n          proposal.positiveVotes\r\n            .div(repAtCreation)\r\n            .times(100)\r\n            .decimalPlaces(2)\r\n            .gte(QUEUED_PRIORITY_THRESHOLD)\r\n        );\r\n      })\r\n      .sort(orderByNewestTimeToFinish);\r\n\r\n    // Proposals Boosted. (Ordered from time to finish, from lower to higher)\r\n    const stateBoosted = allProposals\r\n      .filter(\r\n        (proposal): Boolean =>\r\n          proposal.stateInVotingMachine === VotingMachineProposalState.Boosted\r\n      )\r\n      .sort(orderByNewestTimeToFinish);\r\n\r\n    const stateQuiteEndingProposals = allProposals\r\n      .filter(proposal => {\r\n        return (\r\n          proposal.stateInVotingMachine ===\r\n          VotingMachineProposalState.QuietEndingPeriod\r\n        );\r\n      })\r\n      .sort(orderByNewestTimeToFinish);\r\n\r\n    const statePreBoosted = allProposals\r\n      .filter(\r\n        (proposal): Boolean =>\r\n          proposal.stateInVotingMachine ===\r\n          VotingMachineProposalState.PreBoosted\r\n      )\r\n      .sort(orderByNewestTimeToFinish);\r\n\r\n    // Queded && positiveVotes < 10% (Ordered from time to finish, from lower to higher)\r\n    const stateEarliestUnder10 = allProposals\r\n      .filter((proposal): Boolean => {\r\n        const queuedVotePeriodLimit = daoStore.getVotingMachineOfProposal(\r\n          proposal.id\r\n        ).params.queuedVotePeriodLimit;\r\n\r\n        const repAtCreation = getRep(\r\n          proposal.creationEvent.blockNumber\r\n        ).totalSupply;\r\n\r\n        return (\r\n          proposal.stateInVotingMachine === VotingMachineProposalState.Queued &&\r\n          timeNow.lt(proposal.submittedTime.plus(queuedVotePeriodLimit)) &&\r\n          proposal.positiveVotes\r\n            .div(repAtCreation)\r\n            .times(100)\r\n            .decimalPlaces(2)\r\n            .lt(QUEUED_PRIORITY_THRESHOLD)\r\n        );\r\n      })\r\n      .sort(orderByNewestTimeToFinish);\r\n\r\n    //Proposals in Executed status. (Ordered in time passed since finish, from higher to lower)\r\n    const stateExecuted = allProposals\r\n      .filter(\r\n        (proposal): Boolean =>\r\n          proposal.stateInVotingMachine === VotingMachineProposalState.Executed\r\n      )\r\n      .sort(orderByOldestTimeToFinish);\r\n\r\n    //Proposals finished status. (Expired in queue, rejected or passed)\r\n    const stateFinished = allProposals\r\n      .filter((proposal): Boolean => {\r\n        const queuedVotePeriodLimit = daoStore.getVotingMachineOfProposal(\r\n          proposal.id\r\n        ).params.queuedVotePeriodLimit;\r\n        return (\r\n          (proposal.stateInVotingMachine ===\r\n            VotingMachineProposalState.Queued &&\r\n            timeNow.gt(proposal.submittedTime.plus(queuedVotePeriodLimit))) ||\r\n          proposal.stateInVotingMachine ===\r\n            VotingMachineProposalState.ExpiredInQueue ||\r\n          proposal.stateInVotingMachine ===\r\n            VotingMachineProposalState.Rejected ||\r\n          proposal.stateInVotingMachine === VotingMachineProposalState.Passed\r\n        );\r\n      })\r\n      .sort(orderByOldestTimeToFinish);\r\n\r\n    setFilteredProposals([\r\n      ...stateBoosted,\r\n      ...statePreBoosted,\r\n      ...stateQuiteEndingProposals,\r\n      ...stateEarliestAbove10,\r\n      ...stateEarliestUnder10,\r\n      ...stateExecuted,\r\n      ...stateFinished,\r\n    ]);\r\n\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  return {\r\n    proposals: filteredProposals,\r\n    loading,\r\n  };\r\n};\r\n","import { useMemo } from 'react';\r\nimport { useLocation, useHistory } from 'react-router-dom';\r\n\r\nfunction useQuery() {\r\n  const { search } = useLocation();\r\n  const history = useHistory();\r\n\r\n  const query = useMemo(() => new URLSearchParams(search), [search]);\r\n\r\n  const setQueryParam = (key: string, value: string) => {\r\n    const query = new URLSearchParams(window.location.search);\r\n    query.delete(key);\r\n    query.append(key, value);\r\n    history.replace({ search: query.toString() });\r\n  };\r\n\r\n  return { query, setQueryParam };\r\n}\r\n\r\nexport default useQuery;\r\n","import { useState, useCallback } from 'react';\r\nimport { useDebounceFn } from './useDebounceFn';\r\nimport useQuery from './useQuery';\r\n\r\nfunction useQueryStringValue(\r\n  key: string,\r\n  initialValue: string\r\n): [string, (value: string) => void] {\r\n  const { query, setQueryParam } = useQuery();\r\n  const [value, setValue] = useState<string>(query.get(key) || initialValue);\r\n  const setQueryParamDebounced = useDebounceFn(setQueryParam, 500);\r\n\r\n  const onSetValue = useCallback(\r\n    (newValue: string) => {\r\n      setValue(newValue);\r\n      setQueryParamDebounced(key, newValue);\r\n    },\r\n    [key]\r\n  );\r\n\r\n  return [value, onSetValue];\r\n}\r\n\r\nexport default useQueryStringValue;\r\n","// https://stackoverflow.com/questions/56283920/how-to-debounce-a-callback-in-functional-component-using-hooks\r\n\r\nimport { useEffect, useRef } from 'react';\r\n\r\nexport function useDebounceFn<A extends any[]>(\r\n  callback: (...args: A) => void,\r\n  wait: number\r\n) {\r\n  // track args & timeout handle between calls\r\n  const argsRef = useRef<A>();\r\n  const timeout = useRef<ReturnType<typeof setTimeout>>();\r\n\r\n  function cleanup() {\r\n    if (timeout.current) {\r\n      clearTimeout(timeout.current);\r\n    }\r\n  }\r\n\r\n  // make sure our timeout gets cleared if\r\n  // our consuming component gets unmounted\r\n  useEffect(() => cleanup, []);\r\n\r\n  return function debouncedCallback(...args: A) {\r\n    // capture latest args\r\n    argsRef.current = args;\r\n\r\n    // clear debounce timer\r\n    cleanup();\r\n\r\n    // start waiting again\r\n    timeout.current = setTimeout(() => {\r\n      if (argsRef.current) {\r\n        callback(...argsRef.current);\r\n      }\r\n    }, wait);\r\n  };\r\n}\r\n","import { useEffect, useMemo, useState } from 'react';\r\nimport { VotingMachineProposalState, WalletSchemeProposalState } from 'utils';\r\nimport { useFilterCriteria } from './useFilterCriteria';\r\nimport useMiniSearch from './useMiniSearch';\r\nimport useQueryStringValue from './useQueryStringValue';\r\nimport { useContext } from 'contexts';\r\n\r\nimport { ProposalsExtended } from '../types/types';\r\nconst matchStatus = (proposal: ProposalsExtended, status: string) => {\r\n  if (status === 'Any Status' || !status) {\r\n    return proposal;\r\n  }\r\n  // status is rejected\r\n  if (status === '7') {\r\n    return proposal.stateInScheme === WalletSchemeProposalState.Rejected;\r\n  }\r\n  // status is passed\r\n  if (status === '8') {\r\n    return (\r\n      proposal.stateInScheme === WalletSchemeProposalState.Submitted &&\r\n      proposal.stateInVotingMachine === VotingMachineProposalState.Executed\r\n    );\r\n  }\r\n  return proposal.stateInVotingMachine === parseInt(status);\r\n};\r\n\r\nconst matchScheme = (proposal: ProposalsExtended, scheme: string) => {\r\n  if (scheme === 'All Schemes' || !scheme) {\r\n    return proposal;\r\n  }\r\n  return proposal.scheme === scheme;\r\n};\r\n\r\nexport const useFilteredProposals = () => {\r\n  const {\r\n    context: { ensService },\r\n  } = useContext();\r\n\r\n  const { proposals, loading } = useFilterCriteria();\r\n\r\n  const minisearch = useMiniSearch<ProposalsExtended>({\r\n    fields: ['title', 'proposer'],\r\n    storeFields: ['id'],\r\n    searchOptions: {\r\n      fuzzy: 0.3,\r\n      prefix: true,\r\n      combineWith: 'AND',\r\n    },\r\n  });\r\n\r\n  // Filtering criteria\r\n  const [titleFilter, setTitleFilter] = useQueryStringValue('title', '');\r\n  const [stateFilter, setStateFilter] = useQueryStringValue(\r\n    'status',\r\n    'Any Status'\r\n  );\r\n  const [schemesFilter, setSchemesFilter] = useQueryStringValue(\r\n    'scheme',\r\n    'All Schemes'\r\n  );\r\n\r\n  const [ensAddress, setEnsAddress] = useState<string>(null);\r\n  const [isEnsResolving, setIsEnsResolving] = useState<boolean>(false);\r\n  useEffect(() => {\r\n    if (titleFilter?.endsWith('.eth')) {\r\n      setIsEnsResolving(true);\r\n      ensService\r\n        .resolveENSAddress(titleFilter)\r\n        .then(setEnsAddress)\r\n        .finally(() => setIsEnsResolving(false));\r\n    } else {\r\n      setEnsAddress(null);\r\n      setIsEnsResolving(false);\r\n    }\r\n  }, [titleFilter, ensService]);\r\n\r\n  // Rebuild search index when proposals list changes\r\n  useEffect(() => {\r\n    minisearch.buildIndex(proposals);\r\n  }, [minisearch, proposals]);\r\n\r\n  // Compute search results when search criteria changes\r\n  const searchResults = useMemo(() => {\r\n    if (!proposals) return [];\r\n\r\n    let filteredProposals = proposals;\r\n    if (titleFilter) {\r\n      const searchTerms = [titleFilter];\r\n      if (ensAddress) searchTerms.push(ensAddress);\r\n      filteredProposals = minisearch.query({ queries: searchTerms });\r\n    }\r\n\r\n    return filteredProposals.filter(\r\n      proposal =>\r\n        matchStatus(proposal, stateFilter) &&\r\n        matchScheme(proposal, schemesFilter)\r\n    );\r\n  }, [\r\n    minisearch,\r\n    proposals,\r\n    titleFilter,\r\n    stateFilter,\r\n    schemesFilter,\r\n    ensAddress,\r\n  ]);\r\n\r\n  return {\r\n    proposals: searchResults,\r\n    loading: loading || isEnsResolving,\r\n    titleFilter,\r\n    setTitleFilter,\r\n    stateFilter,\r\n    setStateFilter,\r\n    schemesFilter,\r\n    setSchemesFilter,\r\n  };\r\n};\r\n","import MiniSearch, { Options, Query, SearchOptions } from 'minisearch';\r\nimport { useRef, useState } from 'react';\r\n\r\ninterface SearchItem {\r\n  id: string;\r\n}\r\n\r\nexport default function useMiniSearch<T extends SearchItem>(config: Options) {\r\n  const [searchItems, setSearchItems] = useState<T[]>([]);\r\n  const miniSearchRef = useRef<MiniSearch<T>>(new MiniSearch<T>(config));\r\n\r\n  const buildIndex = (documents: T[]) => {\r\n    setSearchItems(documents);\r\n    miniSearchRef.current.removeAll();\r\n    miniSearchRef.current.addAll(documents);\r\n  };\r\n\r\n  const query = (query: Query, searchOptions?: SearchOptions) => {\r\n    const hits = miniSearchRef.current.search(query, searchOptions);\r\n    return hits.map(hit => searchItems.find(item => item.id == hit.id));\r\n  };\r\n\r\n  return {\r\n    instance: miniSearchRef.current,\r\n    buildIndex,\r\n    query,\r\n  };\r\n}\r\n","import jsonexport, { UserOptions } from 'jsonexport';\r\n\r\nexport default function useExporters<T>() {\r\n  const exportToCSV = async (rows: T[], config?: UserOptions) => {\r\n    return jsonexport(rows, config);\r\n  };\r\n\r\n  const triggerDownload = (\r\n    content: string,\r\n    fileName: string,\r\n    mimeType: string\r\n  ) => {\r\n    const blob = new Blob([content], { type: mimeType });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.setAttribute('hidden', '');\r\n    a.setAttribute('href', url);\r\n    a.setAttribute('download', fileName);\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n  };\r\n\r\n  return {\r\n    exportToCSV,\r\n    triggerDownload,\r\n  };\r\n}\r\n","import styled from 'styled-components';\r\nimport Switch from 'react-switch';\r\n\r\nconst Wrap = styled.section`\r\n  z-index: 99;\r\n  margin: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst Icon = styled.section`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  font-size: 0.6rem;\r\n  color: white;\r\n  padding-right: 2;\r\n`;\r\n\r\nexport default function Toggle({\r\n  onToggle,\r\n  state,\r\n  optionOne,\r\n  optionTwo,\r\n  width = 120,\r\n  height = 50,\r\n}) {\r\n  return (\r\n    <Wrap>\r\n      <Switch\r\n        checked={state}\r\n        onChange={onToggle}\r\n        height={height}\r\n        width={width}\r\n        offColor=\"#536DFE\"\r\n        onColor=\"#536DFE\"\r\n        uncheckedIcon={<Icon>{optionOne}</Icon>}\r\n        checkedIcon={<Icon>{optionTwo}</Icon>}\r\n      />\r\n    </Wrap>\r\n  );\r\n}\r\n","import moment, { Moment } from 'moment';\r\nimport { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { useContext } from '../../contexts';\r\nimport useExporters from '../../hooks/useExporters';\r\nimport { getChains } from '../../provider/connectors';\r\nimport {\r\n  VotingMachineProposalState,\r\n  WalletSchemeProposalState,\r\n} from '../../utils';\r\nimport { Button, InputDate } from '../common';\r\nimport { Modal } from '../Modal';\r\nimport Toggle from '../Toggle';\r\n\r\nconst Wrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnWrap}\r\n  padding: 0 24px;\r\n  background-color: ${({ theme }) => theme.backgroundColor};\r\n  text-align: center;\r\n  min-height: 450px;\r\n`;\r\n\r\nconst WrapperRow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ExportButtonsRow = styled(WrapperRow)`\r\n  margin-top: 50px;\r\n`;\r\n\r\ninterface ProposalExportRow {\r\n  id: string;\r\n  title: string;\r\n  proposer: string;\r\n  status: string;\r\n  schemeName: string;\r\n  schemeAddress: string;\r\n  submittedAt: string;\r\n  boostedAt: string;\r\n  finishedAt: string;\r\n  stateInVotingMachine: string;\r\n  stateInScheme: string;\r\n}\r\n\r\nconst ProposalsExporter = () => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n  const location = useLocation();\r\n  const { exportToCSV, triggerDownload } = useExporters<ProposalExportRow>();\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n  const [isDateRange, setIsDateRange] = useState<boolean>(false);\r\n  const [startDate, setStartDate] = useState<Moment>(\r\n    moment().subtract(1, 'week')\r\n  );\r\n  const [endDate, setEndDate] = useState<Moment>(moment());\r\n\r\n  const getExportFileName = () => {\r\n    if (isDateRange) {\r\n      return `proposals_${startDate.format('YYYY-MM-DD')}-to-${endDate.format(\r\n        'YYYY-MM-DD'\r\n      )}`;\r\n    } else {\r\n      return `proposals_all-${moment().format('YYYY-MM-DD')}`;\r\n    }\r\n  };\r\n\r\n  const getFilteredProposalsList = async () => {\r\n    let filteredProposals = daoStore.getAllProposals;\r\n    if (isDateRange) {\r\n      filteredProposals = filteredProposals.filter(\r\n        proposal =>\r\n          moment\r\n            .unix(proposal.creationEvent.timestamp)\r\n            .isSameOrAfter(startDate) &&\r\n          moment.unix(proposal.creationEvent.timestamp).isSameOrBefore(endDate)\r\n      );\r\n    }\r\n\r\n    return filteredProposals;\r\n  };\r\n\r\n  const triggerCSVExport = async () => {\r\n    let exportName = getExportFileName();\r\n    let filteredProposals = await getFilteredProposalsList();\r\n\r\n    const extractedData: ProposalExportRow[] = filteredProposals.map(\r\n      proposal => {\r\n        const scheme = daoStore.getScheme(proposal.scheme);\r\n\r\n        return {\r\n          id: proposal.id,\r\n          title: proposal.title,\r\n          proposer: proposal.proposer,\r\n          status: proposal.status,\r\n          schemeName: scheme.name,\r\n          schemeAddress: scheme.address,\r\n          submittedAt: moment.unix(proposal.submittedTime.toNumber()).format(),\r\n          boostedAt: moment.unix(proposal.boostTime.toNumber()).format(),\r\n          finishedAt: moment.unix(proposal.finishTime.toNumber()).format(),\r\n          submittedAtTs: proposal.submittedTime.toNumber(),\r\n          boostedAtTs: proposal.boostTime.toNumber(),\r\n          finishedAtTs: proposal.finishTime.toNumber(),\r\n          stateInVotingMachine:\r\n            VotingMachineProposalState[proposal.stateInVotingMachine],\r\n          stateInScheme: WalletSchemeProposalState[proposal.stateInScheme],\r\n        };\r\n      }\r\n    );\r\n\r\n    const csvString = await exportToCSV(extractedData);\r\n\r\n    triggerDownload(csvString, `${exportName}.csv`, 'text/csv');\r\n  };\r\n\r\n  const copyAsMarkdown = async () => {\r\n    let filteredProposals = await getFilteredProposalsList();\r\n    const urlNetworkName = location.pathname.split('/')[1];\r\n\r\n    const chainName =\r\n      getChains().find(chain => chain.name == urlNetworkName)?.name || null;\r\n\r\n    let markdown = `**${chainName}**\\n\\n`;\r\n    filteredProposals.map(proposal => {\r\n      markdown += `- [${proposal.title}](${window.location.origin}/#/${urlNetworkName}/proposal/${proposal.id})\\n`;\r\n    });\r\n\r\n    await navigator.clipboard.writeText(markdown);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={() => setIsOpen(true)}>Export...</Button>\r\n      <Modal\r\n        header={<div>Export proposals</div>}\r\n        isOpen={isOpen}\r\n        onDismiss={() => setIsOpen(false)}\r\n      >\r\n        <Wrapper>\r\n          <div>I want to export</div>\r\n          <Toggle\r\n            onToggle={() => setIsDateRange(!isDateRange)}\r\n            state={isDateRange}\r\n            optionTwo={'Date Range'}\r\n            optionOne={'Everything'}\r\n          />\r\n\r\n          {isDateRange && (\r\n            <WrapperRow>\r\n              <InputDate\r\n                value={startDate}\r\n                onChange={(date: Moment) => {\r\n                  setStartDate(date.startOf('day'));\r\n                }}\r\n                text={'Start Date'}\r\n                width={150}\r\n                isValidDate={(date: Moment) =>\r\n                  date.isBefore(endDate) && date.isBefore(moment())\r\n                }\r\n              />\r\n              <InputDate\r\n                value={endDate}\r\n                onChange={(date: Moment) => {\r\n                  setEndDate(date.endOf('day'));\r\n                }}\r\n                text={'End Date'}\r\n                width={150}\r\n                isValidDate={(date: Moment) =>\r\n                  date.isAfter(startDate) && date.isBefore(moment())\r\n                }\r\n              />\r\n            </WrapperRow>\r\n          )}\r\n\r\n          <ExportButtonsRow>\r\n            <Button onClick={triggerCSVExport}>Export to CSV</Button>\r\n            <Button onClick={copyAsMarkdown}>Copy Titles as Markdown</Button>\r\n          </ExportButtonsRow>\r\n        </Wrapper>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProposalsExporter;\r\n","import { useHistory, Link } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../../contexts';\r\nimport {\r\n  LinkButton,\r\n  Positive,\r\n  Negative,\r\n  Separator,\r\n  TableHeader,\r\n  HeaderCell,\r\n  TableBody,\r\n  DataCell,\r\n} from '../../components/common';\r\nimport PulsingIcon from '../../components/common/LoadingIcon';\r\nimport Footer from '../../components/Footer';\r\nimport {\r\n  formatPercentage,\r\n  normalizeBalance,\r\n  timeToTimestamp,\r\n  formatNumberValue,\r\n  PendingAction,\r\n  isVoteNo,\r\n  VotingMachineProposalState,\r\n} from '../../utils';\r\nimport {\r\n  FiFeather,\r\n  FiCheckCircle,\r\n  FiCheckSquare,\r\n  FiAlertTriangle,\r\n} from 'react-icons/fi';\r\nimport {\r\n  StatusSearch,\r\n  SchemeSearch,\r\n  TitleSearch,\r\n} from '../../components/Proposals/Search';\r\nimport {\r\n  ProposalsWrapper,\r\n  SidebarWrapper,\r\n  ProposalTableHeaderActions,\r\n  NewProposalButton,\r\n  LoadingBox,\r\n  FooterWrap,\r\n  TableProposal,\r\n  UnstyledAnchor,\r\n  StyledTableRow,\r\n} from './styles';\r\nimport { useFilteredProposals } from '../../hooks/useFilteredProposals';\r\nimport ProposalsExporter from '../../components/Proposals/ProposalsExporter';\r\nimport { useRep } from 'hooks/useRep';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst ProposalsPage = observer(() => {\r\n  const {\r\n    context: { daoStore, configStore, providerStore },\r\n  } = useContext();\r\n\r\n  const { getRep } = useRep();\r\n\r\n  const votingMachines = configStore.getNetworkContracts().votingMachines;\r\n  const networkName = configStore.getActiveChainName();\r\n  const { account } = providerStore.getActiveWeb3React();\r\n  const userEvents = daoStore.getUserEvents(account);\r\n  const [allProposals, setAllProposals] = useState(daoStore.getAllProposals);\r\n  console.log('All proposals length', allProposals.length);\r\n  useEffect(() => {\r\n    setAllProposals(daoStore.getAllProposals);\r\n  }, [daoStore.getAllProposals]);\r\n\r\n  const {\r\n    proposals,\r\n    loading,\r\n    titleFilter,\r\n    setTitleFilter,\r\n    stateFilter,\r\n    setStateFilter,\r\n    schemesFilter,\r\n    setSchemesFilter,\r\n  } = useFilteredProposals();\r\n\r\n  const activeProposalsCount = allProposals.filter(\r\n    proposal =>\r\n      proposal.stateInVotingMachine > VotingMachineProposalState.Executed\r\n  ).length;\r\n\r\n  const history = useHistory();\r\n  return (\r\n    <ProposalsWrapper>\r\n      <SidebarWrapper>\r\n        <ProposalTableHeaderActions>\r\n          <NewProposalButton>\r\n            <LinkButton route={`/${networkName}/create/type`} width=\"200px\">\r\n              + New Proposal\r\n            </LinkButton>\r\n          </NewProposalButton>\r\n          <TitleSearch value={titleFilter} onFilter={setTitleFilter} />\r\n          <StatusSearch value={stateFilter} onFilter={setStateFilter} />\r\n          <SchemeSearch value={schemesFilter} onFilter={setSchemesFilter} />\r\n          <strong style={{ alignSelf: 'center' }}>\r\n            {allProposals.length} Total Proposals\r\n          </strong>\r\n          <strong style={{ alignSelf: 'center' }}>\r\n            {activeProposalsCount} Active Proposals\r\n          </strong>\r\n        </ProposalTableHeaderActions>\r\n        <FooterWrap>\r\n          <ProposalsExporter />\r\n          <Footer />\r\n        </FooterWrap>\r\n      </SidebarWrapper>\r\n      {loading && (\r\n        <LoadingBox>\r\n          <div className=\"loader\">\r\n            <PulsingIcon size={80} inactive={false} />\r\n          </div>\r\n        </LoadingBox>\r\n      )}\r\n      {!loading && (\r\n        <TableProposal>\r\n          <TableBody>\r\n            <TableHeader>\r\n              <HeaderCell>Title</HeaderCell>\r\n              <HeaderCell>Scheme</HeaderCell>\r\n              <HeaderCell>Status</HeaderCell>\r\n              <HeaderCell>Stakes</HeaderCell>\r\n              <HeaderCell>Votes</HeaderCell>\r\n            </TableHeader>\r\n            {proposals.map((proposal, i) => {\r\n              const positiveStake = formatNumberValue(\r\n                normalizeBalance(proposal.positiveStakes, 18),\r\n                1\r\n              );\r\n              const negativeStake = formatNumberValue(\r\n                normalizeBalance(proposal.negativeStakes, 18),\r\n                1\r\n              );\r\n\r\n              const repAtCreation = getRep(\r\n                proposal.creationEvent.blockNumber\r\n              ).totalSupply;\r\n\r\n              const positiveVotesPercentage = formatPercentage(\r\n                proposal.positiveVotes.div(repAtCreation),\r\n                2\r\n              );\r\n              const negativeVotesPercentage = formatPercentage(\r\n                proposal.negativeVotes.div(repAtCreation),\r\n                2\r\n              );\r\n              const timeToBoost = timeToTimestamp(proposal.boostTime);\r\n              const timeToFinish = timeToTimestamp(proposal.finishTime);\r\n\r\n              const votingMachineTokenName =\r\n                votingMachines[\r\n                  daoStore.getVotingMachineOfProposal(proposal.id).address\r\n                ].type == 'DXDVotingMachine'\r\n                  ? 'DXD'\r\n                  : 'GEN';\r\n\r\n              const voted =\r\n                userEvents.votes.findIndex(\r\n                  event => event.proposalId === proposal.id\r\n                ) > -1;\r\n              const staked =\r\n                userEvents.stakes.findIndex(\r\n                  event => event.proposalId === proposal.id\r\n                ) > -1;\r\n              const created =\r\n                userEvents.newProposal.findIndex(\r\n                  event => event.proposalId === proposal.id\r\n                ) > -1;\r\n\r\n              const proposerVotedDown =\r\n                daoStore\r\n                  .getVotesOfProposal(proposal.id)\r\n                  .findIndex(\r\n                    vote =>\r\n                      vote.voter === proposal.proposer && isVoteNo(vote.vote)\r\n                  ) > -1;\r\n\r\n              return (\r\n                <StyledTableRow\r\n                  onClick={() =>\r\n                    history.push(`/${networkName}/proposal/${proposal.id}`)\r\n                  }\r\n                  key={`row-${i}`}\r\n                >\r\n                  <DataCell\r\n                    weight=\"800\"\r\n                    wrapText=\"true\"\r\n                    fontSize=\"inherit\"\r\n                    align=\"left\"\r\n                  >\r\n                    <Link\r\n                      to={`/${networkName}/proposal/${proposal.id}`}\r\n                      component={UnstyledAnchor}\r\n                    >\r\n                      {created && (\r\n                        <FiFeather\r\n                          style={{ minWidth: '15px', margin: '0px 2px' }}\r\n                          title=\"You created\"\r\n                        />\r\n                      )}\r\n                      {voted && (\r\n                        <FiCheckCircle\r\n                          style={{ minWidth: '15px', margin: '0px 2px' }}\r\n                          title=\"You voted\"\r\n                        />\r\n                      )}\r\n                      {staked && (\r\n                        <FiCheckSquare\r\n                          style={{ minWidth: '15px', margin: '0px 2px' }}\r\n                          title=\"You staked\"\r\n                        />\r\n                      )}\r\n\r\n                      {proposerVotedDown && (\r\n                        <FiAlertTriangle\r\n                          style={{ minWidth: '15px', margin: '0px 2px' }}\r\n                          title=\"The proposer downvoted this proposal. It may be incorrect.\"\r\n                        />\r\n                      )}\r\n\r\n                      {proposal.title.length > 0 ? proposal.title : proposal.id}\r\n                    </Link>\r\n                  </DataCell>\r\n                  <DataCell>\r\n                    {daoStore.daoCache.schemes[proposal.scheme].name}\r\n                  </DataCell>\r\n                  <DataCell>\r\n                    <span>\r\n                      {proposal.status} <br />\r\n                      {timeToBoost !== '' ? (\r\n                        <small>\r\n                          Boost {timeToBoost} <br />\r\n                        </small>\r\n                      ) : (\r\n                        <span></span>\r\n                      )}\r\n                      {timeToFinish !== '' ? (\r\n                        <small>Finish {timeToFinish} </small>\r\n                      ) : (\r\n                        <span></span>\r\n                      )}\r\n                      {proposal.pendingAction === PendingAction.Execute ||\r\n                      proposal.pendingAction === PendingAction.Finish ? (\r\n                        <small> Pending Finish Execution </small>\r\n                      ) : (\r\n                        <span></span>\r\n                      )}\r\n                    </span>\r\n                  </DataCell>\r\n                  <DataCell>\r\n                    <Positive>\r\n                      {positiveStake.toString()} {votingMachineTokenName}{' '}\r\n                    </Positive>\r\n                    <Separator>|</Separator>\r\n                    <Negative>\r\n                      {negativeStake.toString()} {votingMachineTokenName}\r\n                    </Negative>\r\n                  </DataCell>\r\n                  <DataCell>\r\n                    <Positive>{positiveVotesPercentage} </Positive>\r\n                    <Separator>|</Separator>\r\n                    <Negative>{negativeVotesPercentage}</Negative>\r\n                  </DataCell>\r\n                </StyledTableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </TableProposal>\r\n      )}\r\n    </ProposalsWrapper>\r\n  );\r\n});\r\n\r\nexport default ProposalsPage;\r\n","import styled from 'styled-components';\r\ninterface PendingCircleType {\r\n  height: string;\r\n  width: string;\r\n  color?: string;\r\n}\r\nconst SpinningCircle = styled.div`\r\n  height: ${props => props.height || '16px'};\r\n  width: ${props => props.width || '16px'};\r\n  color: white;\r\n  top: 50%;\r\n  left: 50%;\r\n  margin: -(9px) 0 0 - (9px);\r\n  -webkit-animation: rotation 1s infinite linear;\r\n  -moz-animation: rotation 1s infinite linear;\r\n  -o-animation: rotation 1s infinite linear;\r\n  animation: rotation 1s infinite linear;\r\n  border: 2px solid rgba(83, 109, 254, 0);\r\n  border-radius: 100%;\r\n\r\n  :before {\r\n    content: '';\r\n    display: block;\r\n    position: absolute;\r\n    left: -2px;\r\n    top: -2px;\r\n    height: 100%;\r\n    width: 100%;\r\n    border-top: 2px solid #feffff94;\r\n    border-left: 2px solid #feffff94;\r\n    border-bottom: 2px solid #feffff94;\r\n    border-right: 2px solid ${props => props.color || 'transparent'};\r\n    border-radius: 100%;\r\n  }\r\n\r\n  @-webkit-keyframes rotation {\r\n    from {\r\n      -webkit-transform: rotate(0deg);\r\n    }\r\n    to {\r\n      -webkit-transform: rotate(359deg);\r\n    }\r\n  }\r\n  @-moz-keyframes rotation {\r\n    from {\r\n      -moz-transform: rotate(0deg);\r\n    }\r\n    to {\r\n      -moz-transform: rotate(359deg);\r\n    }\r\n  }\r\n  @-o-keyframes rotation {\r\n    from {\r\n      -o-transform: rotate(0deg);\r\n    }\r\n    to {\r\n      -o-transform: rotate(359deg);\r\n    }\r\n  }\r\n  @keyframes rotation {\r\n    from {\r\n      transform: rotate(0deg);\r\n    }\r\n    to {\r\n      transform: rotate(359deg);\r\n    }\r\n  }\r\n`;\r\n\r\nconst PendingCircle = ({ height, width, color }: PendingCircleType) => {\r\n  return <SpinningCircle height={height} width={width} color={color} />;\r\n};\r\n\r\nexport default PendingCircle;\r\n","// Externals\r\nimport React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\n\r\n// Components\r\nimport { Button } from 'components/common/Button';\r\nimport PendingCircle from 'components/common/PendingCircle';\r\n\r\nexport const ColumnWrapper = styled.div`\r\n  z-index: 100;\r\n  width: 60%;\r\n  outline: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 16px;\r\n  align-self: center;\r\n`;\r\n\r\nexport const Wrapper = styled.div`\r\n  width: ${props => `${props.size + 4}%`};\r\n  outline: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ProgressLineWrapper = styled.div`\r\n  width: ${props => `${props.size + 4}%`};\r\n  outline: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 10px auto;\r\n`;\r\n\r\nexport const Dot = styled.div`\r\n  min-width: 20px;\r\n  min-height: 20px;\r\n  border-radius: 50%;\r\n  background: ${props => (props.active ? '#4B9E98' : `#DDDDE3`)};\r\n  color: white;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  line-height: 8px;\r\n  font-size: 12px;\r\n`;\r\n\r\nexport const Line = styled.div`\r\n  width: 100%;\r\n  background: ${props =>\r\n    props.active\r\n      ? 'linear-gradient(90deg, #4b9e98 60%, #dddde3 100%);'\r\n      : props.complete\r\n      ? '#4b9e98'\r\n      : `#DDDDE3`};\r\n  height: 2px;\r\n`;\r\n\r\nexport const StyledButton = styled(Button)`\r\n  width: ${props => props.buttonSize};\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n  height: 40px;\r\n`;\r\n\r\ninterface ButtonObject {\r\n  title: string;\r\n  id: string | number;\r\n  loadingId?: string | number;\r\n  onClick: () => void;\r\n  typeSubmit?: boolean;\r\n}\r\n\r\ninterface LinkedButtonsProps {\r\n  buttons: ButtonObject[];\r\n  active: string | number;\r\n}\r\n\r\nexport const LinkedButtons: React.FC<LinkedButtonsProps> = ({\r\n  buttons,\r\n  active,\r\n}) => {\r\n  const [arrayOfButtons, setArrayOfButtons] = useState<Array<React.ReactNode>>(\r\n    []\r\n  );\r\n  const [progressLineArray, setProgressLineArray] = useState<\r\n    Array<React.ReactNode>\r\n  >([]);\r\n  const numberOfButtons = buttons.length;\r\n  const buttonSize = (100 - numberOfButtons * 2) / numberOfButtons;\r\n\r\n  const createButtons = () => {\r\n    const tempButtons: Array<React.ReactNode> = [];\r\n    const tempProgressBar: Array<React.ReactNode> = [];\r\n    let beforeActive = true;\r\n\r\n    buttons.forEach((button, index) => {\r\n      if (button.id === active) {\r\n        beforeActive = false;\r\n      }\r\n      tempButtons.push(\r\n        <StyledButton\r\n          buttonSize={`${buttonSize}%`}\r\n          onClick={button.onClick}\r\n          disabled={!(button.id === active)}\r\n          type={button.typeSubmit ? 'submit' : 'button'}\r\n        >\r\n          {button.title}\r\n          {button.loadingId === active && (\r\n            <PendingCircle height=\"10px\" width=\"10px\" />\r\n          )}\r\n        </StyledButton>\r\n      );\r\n      if (numberOfButtons - 1 > index) {\r\n        tempProgressBar.push(\r\n          <Dot\r\n            active={\r\n              button.id === active ||\r\n              button.loadingId === active ||\r\n              beforeActive\r\n            }\r\n          >\r\n            {index + 1}\r\n          </Dot>\r\n        );\r\n        tempProgressBar.push(\r\n          <Line\r\n            active={button.id === active || button.loadingId === active}\r\n            complete={beforeActive}\r\n          />\r\n        );\r\n      } else {\r\n        tempProgressBar.push(\r\n          <Dot active={button.id === active || button.loadingId === active}>\r\n            {numberOfButtons}\r\n          </Dot>\r\n        );\r\n      }\r\n    });\r\n\r\n    setArrayOfButtons(tempButtons);\r\n    setProgressLineArray(tempProgressBar);\r\n  };\r\n\r\n  useEffect(() => {\r\n    createButtons();\r\n  }, [buttons, active]);\r\n\r\n  return (\r\n    <ColumnWrapper>\r\n      <Wrapper>{arrayOfButtons}</Wrapper>\r\n      <ProgressLineWrapper size={100 - buttonSize}>\r\n        {progressLineArray}\r\n      </ProgressLineWrapper>\r\n    </ColumnWrapper>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { DISCOURSE_URL_ROOT } from '../../utils';\r\nimport { Button } from '../common';\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst LinkLabel = styled.label`\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst InputRow = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst LinkInput = styled.input`\r\n  margin-top: 5px;\r\n  width: 100%;\r\n  height: 32px;\r\n  margin-top: 5px;\r\n  border-radius: 3px;\r\n  border: 1px solid ${props => (props.invalid ? 'red' : 'gray')};\r\n  padding: 0px 5px;\r\n`;\r\n\r\nconst ErrorMessage = styled.span`\r\n  font-size: 0.8rem;\r\n  color: red;\r\n`;\r\ninterface DiscourseImporterProps {\r\n  onImport: (importedMarkdown: string) => void;\r\n}\r\n\r\nconst DiscourseImporter: React.FC<DiscourseImporterProps> = ({ onImport }) => {\r\n  const [discourseLink, setDiscourseLink] = useState('');\r\n  const [isImporting, setIsImporting] = useState(false);\r\n  const [isInvalid, setIsInvalid] = useState<boolean>(false);\r\n  const [errorMessage, setErrorMessage] = useState<string>(null);\r\n\r\n  const parseDiscourseUrlTopicId = (urlString: string): number | null => {\r\n    if (urlString.startsWith(DISCOURSE_URL_ROOT)) {\r\n      // Try to parse the string as a URL\r\n      try {\r\n        const url = new URL(urlString);\r\n        const path = url.pathname;\r\n\r\n        // Extract topicId from a topic URL\r\n        if (path.startsWith('/t')) {\r\n          const topicId = Number.parseInt(path.split('/')[3]);\r\n          console.info('[DiscourseImporter] Found topic ID', topicId);\r\n          return topicId;\r\n        }\r\n      } catch (e) {\r\n        console.error(\r\n          '[DiscourseImporter] Error while extracting topicId from URL.',\r\n          e\r\n        );\r\n      }\r\n    }\r\n\r\n    console.warn('[DiscourseImporter] Incorrect URL entered.');\r\n    return null;\r\n  };\r\n\r\n  const getTopic = async (topicId: number) => {\r\n    const response = await fetch(`${DISCOURSE_URL_ROOT}/t/${topicId}.json`, {\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    if (response.ok) {\r\n      const result = await response.json();\r\n      return result;\r\n    } else {\r\n      console.error('[DiscourseImporter] Error while obtaining topic.');\r\n      throw new Error('Unable to get topic.');\r\n    }\r\n  };\r\n\r\n  const getPost = async (postId: number) => {\r\n    const response = await fetch(`${DISCOURSE_URL_ROOT}/posts/${postId}.json`, {\r\n      headers: { 'content-type': 'application/json' },\r\n    });\r\n    if (response.ok) {\r\n      const result = await response.json();\r\n      return result;\r\n    } else {\r\n      console.error('[DiscourseImporter] Error while obtaining post content.');\r\n      throw new Error('Unable to get post content.');\r\n    }\r\n  };\r\n\r\n  const processImport = async () => {\r\n    setIsImporting(true);\r\n    const topicId = parseDiscourseUrlTopicId(discourseLink);\r\n    if (!topicId) {\r\n      setIsInvalid(true);\r\n      setErrorMessage('Incorrect URL. Please recheck.');\r\n      setIsImporting(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const topic = await getTopic(topicId);\r\n      const post = await getPost(topic.post_stream.stream[0]);\r\n      onImport(post.raw);\r\n      setIsInvalid(false);\r\n      setErrorMessage(null);\r\n    } catch (e) {\r\n      setIsInvalid(true);\r\n      setErrorMessage(e?.message);\r\n    } finally {\r\n      setIsImporting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <LinkLabel htmlFor=\"link-input\">Enter DAOtalk forum post URL</LinkLabel>\r\n      <InputRow>\r\n        <LinkInput\r\n          name=\"link-input\"\r\n          value={discourseLink}\r\n          onChange={e => {\r\n            setIsInvalid(false);\r\n            setErrorMessage(null);\r\n            setDiscourseLink(e.target.value);\r\n          }}\r\n          invalid={isInvalid}\r\n        />\r\n        <Button onClick={processImport} disabled={isImporting}>\r\n          {isImporting ? 'Importing...' : 'Import'}\r\n        </Button>\r\n      </InputRow>\r\n      <ErrorMessage>{errorMessage}</ErrorMessage>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default DiscourseImporter;\r\n","import { useContext } from 'contexts';\r\nimport { NETWORK_ASSET_SYMBOL } from 'utils';\r\nimport styled from 'styled-components';\r\n\r\nconst CallRow = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: left;\r\n  flex-direction: row;\r\n  margin-bottom: 10px;\r\n\r\n  span {\r\n    text-align: center;\r\n    font-family: Roboto;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    padding: 10px 10px;\r\n  }\r\n`;\r\n\r\nconst TextInput = styled.input`\r\n  width: ${props => props.width || '25%'};\r\n  height: 34px;\r\n  border-radius: 3px;\r\n  border: 1px solid gray;\r\n  margin-right: 5px;\r\n`;\r\n\r\nexport const ContributionRewardCall = ({\r\n  onContributionRewardValueChange,\r\n  contributionRewardCalls,\r\n}) => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n  let networkAssetSymbol =\r\n    NETWORK_ASSET_SYMBOL[configStore.getActiveChainName()];\r\n\r\n  return (\r\n    <div>\r\n      <CallRow>\r\n        <span style={{ width: '20%', fontSize: '13px' }}>\r\n          Beneficiary Account\r\n        </span>\r\n        <span style={{ width: '20%', fontSize: '13px' }}>REP Change</span>\r\n        <span style={{ width: '20%', fontSize: '13px' }}>\r\n          {networkAssetSymbol} Value\r\n        </span>\r\n        <span style={{ width: '20%', fontSize: '13px' }}>Address of Token</span>\r\n        <span style={{ width: '20%', fontSize: '13px' }}>\r\n          Token Amount (in WEI)\r\n        </span>\r\n      </CallRow>\r\n      <CallRow>\r\n        <TextInput\r\n          type=\"text\"\r\n          onChange={event =>\r\n            onContributionRewardValueChange('beneficiary', event.target.value)\r\n          }\r\n          value={contributionRewardCalls.beneficiary}\r\n          width=\"50%\"\r\n        />\r\n        <TextInput\r\n          type=\"text\"\r\n          onChange={event =>\r\n            onContributionRewardValueChange('repChange', event.target.value)\r\n          }\r\n          value={contributionRewardCalls.repChange}\r\n          width=\"50%\"\r\n        />\r\n        <TextInput\r\n          type=\"text\"\r\n          onChange={event =>\r\n            onContributionRewardValueChange('ethValue', event.target.value)\r\n          }\r\n          value={contributionRewardCalls.ethValue}\r\n          width=\"50%\"\r\n        />\r\n        <TextInput\r\n          type=\"text\"\r\n          onChange={event =>\r\n            onContributionRewardValueChange('externalToken', event.target.value)\r\n          }\r\n          value={contributionRewardCalls.externalToken}\r\n          width=\"50%\"\r\n        />\r\n        <TextInput\r\n          type=\"text\"\r\n          onChange={event =>\r\n            onContributionRewardValueChange('tokenValue', event.target.value)\r\n          }\r\n          value={contributionRewardCalls.tokenValue}\r\n          width=\"50%\"\r\n        />\r\n      </CallRow>\r\n    </div>\r\n  );\r\n};\r\n","import styled from 'styled-components';\r\n\r\nconst CallRow = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: left;\r\n  flex-direction: row;\r\n  margin-bottom: 10px;\r\n\r\n  span {\r\n    text-align: center;\r\n    font-family: Roboto;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    padding: 10px 10px;\r\n  }\r\n`;\r\nconst TextInput = styled.input`\r\n  width: ${props => props.width || '25%'};\r\n  height: 34px;\r\n  border-radius: 3px;\r\n  border: 1px solid gray;\r\n  margin-right: 5px;\r\n`;\r\nexport const SchemeRegistrarCall = ({\r\n  schemeRegistrarProposalValues,\r\n  onSchemeRegistrarValueChange,\r\n}) => (\r\n  <div>\r\n    <CallRow>\r\n      <span style={{ width: '20%', fontSize: '13px' }}>Rergister Scheme</span>\r\n      <span style={{ width: '20%', fontSize: '13px' }}>Scheme Address</span>\r\n      <span style={{ width: '40%', fontSize: '13px' }}> Parameters Hash </span>\r\n      <span style={{ width: '20%', fontSize: '13px' }}>Permissions</span>\r\n    </CallRow>\r\n    <CallRow>\r\n      <TextInput\r\n        type=\"checkbox\"\r\n        onChange={event =>\r\n          onSchemeRegistrarValueChange('register', event.target.checked)\r\n        }\r\n        checked={schemeRegistrarProposalValues.register}\r\n        width=\"50%\"\r\n      />\r\n      <TextInput\r\n        type=\"text\"\r\n        onChange={event =>\r\n          onSchemeRegistrarValueChange('schemeAddress', event.target.value)\r\n        }\r\n        value={schemeRegistrarProposalValues.schemeAddress}\r\n        width=\"50%\"\r\n      />\r\n      <TextInput\r\n        type=\"text\"\r\n        onChange={event =>\r\n          onSchemeRegistrarValueChange('parametersHash', event.target.value)\r\n        }\r\n        value={schemeRegistrarProposalValues.parametersHash}\r\n        width=\"50%\"\r\n      />\r\n      <TextInput\r\n        type=\"text\"\r\n        onChange={event =>\r\n          onSchemeRegistrarValueChange('permissions', event.target.value)\r\n        }\r\n        value={schemeRegistrarProposalValues.permissions}\r\n        width=\"50%\"\r\n      />\r\n    </CallRow>\r\n  </div>\r\n);\r\n","import { ContributionRewardCall } from './ContributionRewardCall';\r\nimport { SchemeRegistrarCall } from './SchemeRegistarCall';\r\nimport styled from 'styled-components';\r\nimport { Button } from 'components/common';\r\nimport Toggle from 'components/Toggle';\r\nimport { isWalletScheme } from 'utils';\r\n\r\nconst CallRow = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: left;\r\n  flex-direction: row;\r\n  margin-bottom: 10px;\r\n\r\n  span {\r\n    text-align: center;\r\n    font-family: Roboto;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    padding: 10px 10px;\r\n  }\r\n`;\r\n\r\nconst RemoveButton = styled.div`\r\n  background-color: grey;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  color: white;\r\n  height: 25px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 25px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  width: max-content;\r\n  padding: 0px 5px;\r\n  margin: 5px;\r\n`;\r\n\r\nconst TextInput = styled.input`\r\n  width: ${props => props.width || '25%'};\r\n  height: 34px;\r\n  border-radius: 3px;\r\n  border: 1px solid gray;\r\n  margin-right: 5px;\r\n`;\r\n\r\nconst SelectInput = styled.select`\r\n  width: ${props => props.width || '25%'};\r\n  height: 38px;\r\n  border-radius: 3px;\r\n  border: 1px solid gray;\r\n  margin-right: 5px;\r\n  background-color: #fff;\r\n`;\r\nexport const Calls = ({\r\n  schemeToUse,\r\n  onContributionRewardValueChange,\r\n  contributionRewardCalls,\r\n  onSchemeRegistrarValueChange,\r\n  schemeRegistrarProposalValues,\r\n  calls,\r\n  onToSelectChange,\r\n  allowedToCall,\r\n  onFunctionSelectChange,\r\n  onFunctionParamsChange,\r\n  addCall,\r\n  onValueChange,\r\n  networkAssetSymbol,\r\n  removeCall,\r\n  changeCallType,\r\n}) => {\r\n  return (\r\n    <>\r\n      {schemeToUse.type === 'ContributionReward' ? (\r\n        // If scheme to use is Contribution Reward display a different form with less fields\r\n        <ContributionRewardCall\r\n          onContributionRewardValueChange={onContributionRewardValueChange}\r\n          contributionRewardCalls={contributionRewardCalls}\r\n        />\r\n      ) : schemeToUse.type === 'SchemeRegistrar' ? (\r\n        // If scheme to use is SchemeRegistrar display a different form with less fields\r\n        <SchemeRegistrarCall\r\n          onSchemeRegistrarValueChange={onSchemeRegistrarValueChange}\r\n          schemeRegistrarProposalValues={schemeRegistrarProposalValues}\r\n        />\r\n      ) : (\r\n        // If the scheme is GenericMulticall allow only advanced encoded calls\r\n        // At last if the scheme used is a Wallet Scheme type allow a complete edition of the calls :)\r\n        <div>\r\n          {calls.map((call, i) => (\r\n            <CallRow key={'call' + i}>\r\n              <span>#{i}</span>\r\n\r\n              {isWalletScheme(schemeToUse) && call.callType === 'simple' ? (\r\n                <SelectInput\r\n                  value={calls[i].to}\r\n                  onChange={e => {\r\n                    onToSelectChange(i, e.target.value);\r\n                  }}\r\n                  onClick={e => {\r\n                    onToSelectChange(i, e.target.value);\r\n                  }}\r\n                  width={'20%'}\r\n                >\r\n                  {allowedToCall.map((allowedCall, allowedCallIndex) => {\r\n                    return (\r\n                      <option\r\n                        key={'toCall' + allowedCallIndex}\r\n                        value={allowedCall.value || ''}\r\n                      >\r\n                        {allowedCall.name}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </SelectInput>\r\n              ) : (\r\n                schemeToUse.type !== 'ContributionReward' && (\r\n                  <TextInput\r\n                    onChange={e => {\r\n                      onToSelectChange(i, e.target.value);\r\n                    }}\r\n                    onClick={e => {\r\n                      onToSelectChange(i, e.target.value);\r\n                    }}\r\n                    width={'20%'}\r\n                  />\r\n                )\r\n              )}\r\n\r\n              {call.callType === 'simple' ? (\r\n                <div\r\n                  style={{\r\n                    display: 'flex',\r\n                    width: call.callType === 'simple' ? '60%' : '50%',\r\n                  }}\r\n                >\r\n                  <SelectInput\r\n                    value={calls[i].functionName || ''}\r\n                    onChange={event => {\r\n                      const selectedFunction = calls[i].allowedFunctions.find(\r\n                        allowedFunction => {\r\n                          return (\r\n                            allowedFunction.functionName === event.target.value\r\n                          );\r\n                        }\r\n                      );\r\n                      onFunctionSelectChange(\r\n                        i,\r\n                        event.target.value,\r\n                        selectedFunction ? selectedFunction.params : ''\r\n                      );\r\n                    }}\r\n                    onClick={event => {\r\n                      const selectedFunction = calls[i].allowedFunctions.find(\r\n                        allowedFunction => {\r\n                          return (\r\n                            allowedFunction.functionName === event.target.value\r\n                          );\r\n                        }\r\n                      );\r\n                      onFunctionSelectChange(\r\n                        i,\r\n                        event.target.value,\r\n                        selectedFunction ? selectedFunction.params : ''\r\n                      );\r\n                    }}\r\n                    width=\"40%\"\r\n                  >\r\n                    {calls[i].allowedFunctions.map(\r\n                      (allowedFunc, allowedFuncIndex) => {\r\n                        return (\r\n                          <option\r\n                            key={'functionToCall' + allowedFuncIndex}\r\n                            value={allowedFunc.functionName || ''}\r\n                          >\r\n                            {allowedFunc.functionName}\r\n                          </option>\r\n                        );\r\n                      }\r\n                    )}\r\n                  </SelectInput>\r\n\r\n                  <div\r\n                    style={{\r\n                      display: 'flex',\r\n                      width: '100%',\r\n                      flexDirection: 'column',\r\n                      paddingRight: '10px',\r\n                    }}\r\n                  >\r\n                    {calls[i].functionParams.length === 0 ? (\r\n                      <TextInput\r\n                        key={'functionParam00'}\r\n                        disabled\r\n                        type=\"text\"\r\n                        placeholder=\"Select address to call and function\"\r\n                        width=\"100%\"\r\n                        style={{ marginTop: '0px' }}\r\n                      />\r\n                    ) : (\r\n                      calls[i].functionParams.map(\r\n                        (funcParam, funcParamIndex) => {\r\n                          return (\r\n                            <TextInput\r\n                              key={'functionParam' + funcParamIndex}\r\n                              type=\"text\"\r\n                              onChange={value =>\r\n                                onFunctionParamsChange(i, value, funcParamIndex)\r\n                              }\r\n                              onClick={value =>\r\n                                onFunctionParamsChange(i, value, funcParamIndex)\r\n                              }\r\n                              value={calls[i].dataValues[funcParamIndex] || ''}\r\n                              placeholder={funcParam.name}\r\n                              width=\"100%\"\r\n                              style={{\r\n                                marginTop: funcParamIndex > 0 ? '5px' : '0px',\r\n                              }}\r\n                            />\r\n                          );\r\n                        }\r\n                      )\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <TextInput\r\n                  type=\"text\"\r\n                  onChange={value => onFunctionParamsChange(i, value, 0)}\r\n                  onClick={value => onFunctionParamsChange(i, value, 0)}\r\n                  value={calls[i].dataValues[0] || ''}\r\n                  placeholder=\"0x...\"\r\n                  width=\"100%\"\r\n                />\r\n              )}\r\n\r\n              <TextInput\r\n                type=\"text\"\r\n                onChange={value => onValueChange(i, value)}\r\n                onClick={value => onValueChange(i, value)}\r\n                value={calls[i].value || ''}\r\n                width=\"10%\"\r\n                placeholder={\r\n                  calls[i].callType === 'advanced'\r\n                    ? 'WEI'\r\n                    : { networkAssetSymbol }\r\n                }\r\n              />\r\n\r\n              <RemoveButton\r\n                onClick={() => {\r\n                  removeCall(i);\r\n                }}\r\n              >\r\n                X\r\n              </RemoveButton>\r\n              {isWalletScheme(schemeToUse) ? (\r\n                <div\r\n                  style={{\r\n                    padding: '0px 5px 0px 10px',\r\n                    marginTop: '-10px',\r\n                  }}\r\n                >\r\n                  <Toggle\r\n                    onToggle={() => {\r\n                      changeCallType(i);\r\n                    }}\r\n                    width={80}\r\n                    height={35}\r\n                    state={calls[i].callType === 'advanced'}\r\n                    optionOne={'Simple'}\r\n                    optionTwo={'Advanced'}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </CallRow>\r\n          ))}\r\n\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <Button onClick={addCall}>Add Call</Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { normalizeBalance } from 'utils';\r\nimport MDEditor from '@uiw/react-md-editor';\r\nimport { Question } from '../common';\r\nimport { useContext } from '../../contexts';\r\nimport { ZERO_ADDRESS, NETWORK_ASSET_SYMBOL, isWalletScheme } from 'utils';\r\n\r\nexport const Preview = ({ descriptionText, schemeToUse }) => {\r\n  const {\r\n    context: { daoStore, configStore },\r\n  } = useContext();\r\n  const networkTokens = configStore.getTokensOfNetwork();\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const { assetLimits: transferLimits } = daoStore.getSchemeRecommendedCalls(\r\n    schemeToUse.address\r\n  );\r\n  const networkAssetSymbol =\r\n    NETWORK_ASSET_SYMBOL[configStore.getActiveChainName()];\r\n  return (\r\n    <>\r\n      <MDEditor.Markdown\r\n        source={descriptionText}\r\n        style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '5px',\r\n          border: '1px solid gray',\r\n          padding: '20px 10px',\r\n        }}\r\n        linkTarget=\"_blank\"\r\n        skipHtml\r\n        escapeHtml\r\n      />\r\n      {schemeToUse.type === 'ContributionReward' ||\r\n      schemeToUse.type === 'GenericMulticall' ||\r\n      schemeToUse.type === 'SchemeRegistrar' ||\r\n      (isWalletScheme(schemeToUse) &&\r\n        schemeToUse.controllerAddress === networkContracts.controller) ? (\r\n        <h2>\r\n          Calls executed from the avatar <Question question=\"9\" />\r\n        </h2>\r\n      ) : (\r\n        <h2>\r\n          Calls executed from the scheme <Question question=\"9\" />\r\n        </h2>\r\n      )}\r\n      {Object.keys(transferLimits).map(assetAddress => {\r\n        if (assetAddress === ZERO_ADDRESS)\r\n          return (\r\n            <h3>\r\n              Transfer limit of{' '}\r\n              {normalizeBalance(transferLimits[assetAddress]).toString()}{' '}\r\n              {networkAssetSymbol}\r\n            </h3>\r\n          );\r\n        else {\r\n          const token = networkTokens.find(\r\n            networkToken => networkToken.address === assetAddress\r\n          );\r\n          if (token)\r\n            return (\r\n              <h3>\r\n                Transfer limit of{' '}\r\n                {normalizeBalance(\r\n                  transferLimits[assetAddress],\r\n                  token.decimals\r\n                ).toString()}{' '}\r\n                {token.symbol}\r\n              </h3>\r\n            );\r\n          else\r\n            return (\r\n              <h3>\r\n                Transfer limit {transferLimits[assetAddress].toString()} of\r\n                asset {assetAddress}\r\n              </h3>\r\n            );\r\n        }\r\n      })}\r\n    </>\r\n  );\r\n};\r\n","import { useReducer, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../../contexts';\r\nimport { Box, Question, LinkButton } from '../../components/common';\r\nimport MDEditor, { commands } from '@uiw/react-md-editor';\r\nimport contentHash from 'content-hash';\r\n\r\nimport {\r\n  NETWORK_ASSET_SYMBOL,\r\n  ZERO_ADDRESS,\r\n  ANY_ADDRESS,\r\n  ZERO_HASH,\r\n  bnum,\r\n  denormalizeBalance,\r\n  encodePermission,\r\n  TXEvents,\r\n  isWalletScheme,\r\n} from '../../utils';\r\nimport { LinkedButtons } from 'components/LinkedButtons';\r\nimport DiscourseImporter from '../../components/DiscourseImporter';\r\nimport { Calls } from 'components/ProposalSubmission/Calls';\r\nimport { Preview } from '../../components/ProposalSubmission/Preview';\r\nconst NewProposalFormWrapper = styled(Box)`\r\n  width: cacl(100% -40px);\r\n  display: flex;\r\n  padding: 10px 10px;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst PlaceHolders = styled.div`\r\n  width: calc(100% - 1px);\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 20px;\r\n  padding-bottom: 0px;\r\n`;\r\n\r\nconst TitleInput = styled.div`\r\n  width: calc(100% - 1px);\r\n  display: flex;\r\n  justify-content: left;\r\n  flex-direction: row;\r\n  margin-bottom: 10px;\r\n\r\n  input {\r\n    margin-top: 5px;\r\n    width: 100%;\r\n    height: 32px;\r\n    margin-top: 5px;\r\n    border-radius: 3px;\r\n    border: 1px solid gray;\r\n    padding: 0px 5px;\r\n  }\r\n\r\n  select {\r\n    margin-left: 5px;\r\n    background-color: white;\r\n    min-width: 150px;\r\n    height: 34px;\r\n    margin-top: 5px;\r\n    border-radius: 3px;\r\n    border: 1px solid gray;\r\n  }\r\n`;\r\n\r\nconst TextActions = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: left;\r\n  flex-direction: column;\r\n  margin: 10px 0px;\r\n  line-height: 30px;\r\n`;\r\n\r\nconst NewProposalPage = observer(() => {\r\n  const {\r\n    context: {\r\n      providerStore,\r\n      daoStore,\r\n      configStore,\r\n      daoService,\r\n      ipfsService,\r\n      pinataService,\r\n    },\r\n  } = useContext();\r\n\r\n  const networkName = configStore.getActiveChainName();\r\n  const schemes = daoStore.filterSchemes({ registered: true });\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const schemeInLocalStorage = localStorage.getItem(\r\n    'dxvote-newProposal-scheme'\r\n  );\r\n  const networkAssetSymbol =\r\n    NETWORK_ASSET_SYMBOL[configStore.getActiveChainName()];\r\n\r\n  const defaultSchemeToUse = schemeInLocalStorage\r\n    ? schemes.findIndex(scheme => scheme.address === schemeInLocalStorage)\r\n    : schemes.findIndex(scheme => scheme.name === 'MasterWalletScheme');\r\n\r\n  const [schemeToUse, setSchemeToUse] = useState(\r\n    defaultSchemeToUse > -1 ? schemes[defaultSchemeToUse] : schemes[0]\r\n  );\r\n  const [titleText, setTitleText] = useState(\r\n    localStorage.getItem('dxvote-newProposal-title') || ''\r\n  );\r\n  const [ipfsHash, setIpfsHash] = useState('');\r\n  const [descriptionText, setDescriptionText] = useState(\r\n    localStorage.getItem('dxvote-newProposal-description') || ''\r\n  );\r\n\r\n  let callsInStorage = [];\r\n  try {\r\n    if (localStorage.getItem('dxvote-newProposal-calls')) {\r\n      callsInStorage = JSON.parse(\r\n        localStorage.getItem('dxvote-newProposal-calls')\r\n      );\r\n      if (callsInStorage.length > 0 && !callsInStorage[0].dataValues)\r\n        callsInStorage = callsInStorage.map(callInStorage =>\r\n          Object.assign(callInStorage, {\r\n            dataValues: new Array(callInStorage.functionParams.length),\r\n          })\r\n        );\r\n    }\r\n  } catch (error) {\r\n    callsInStorage = [];\r\n  }\r\n  const [calls, setCalls] = useState(callsInStorage);\r\n\r\n  const [contributionRewardCalls, setContributionRewardCalls] = useState({\r\n    beneficiary: 'ZERO_ADDRESS',\r\n    repChange: '0',\r\n    ethValue: '0',\r\n    externalToken: ZERO_ADDRESS,\r\n    tokenValue: '0',\r\n  });\r\n\r\n  const [schemeRegistrarProposalValues, setSchemeRegistrarProposalValues] =\r\n    useState({\r\n      register: true,\r\n      schemeAddress: ZERO_ADDRESS,\r\n      parametersHash: ZERO_HASH,\r\n      permissions: encodePermission({\r\n        canGenericCall: false,\r\n        canUpgrade: false,\r\n        canChangeConstraints: false,\r\n        canRegisterSchemes: false,\r\n      }),\r\n    });\r\n\r\n  const [, forceUpdate] = useReducer(x => x + 1, 0);\r\n\r\n  const [submitionState, setSubmissionState] = useState(0);\r\n  // 0 = Proposal Description not uploaded\r\n  // 1 = Uploading proposal description\r\n  // 2 = Proposal description uploaded\r\n  // 3 = Submiting new proposal tx\r\n  // 4 = Proposal creation tx submited\r\n  // 5 = Proposal creation tx receipt received\r\n\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const { assetLimits: transferLimits, recommendedCalls } =\r\n    daoStore.getSchemeRecommendedCalls(schemeToUse.address);\r\n\r\n  let allowedToCall = [];\r\n\r\n  recommendedCalls.map(recommendedCall => {\r\n    if (\r\n      recommendedCall.fromTime > 0 &&\r\n      allowedToCall.findIndex(\r\n        allowedPermission => allowedPermission.value === recommendedCall.to\r\n      ) < 0\r\n    ) {\r\n      allowedToCall.push({\r\n        value: recommendedCall.to,\r\n        name: recommendedCall.toName,\r\n      });\r\n    }\r\n  });\r\n\r\n  const callPermissions = daoStore.daoCache.callPermissions;\r\n  if (\r\n    isWalletScheme(schemeToUse) &&\r\n    callPermissions[ZERO_ADDRESS] &&\r\n    callPermissions[ZERO_ADDRESS][\r\n      schemeToUse.controllerAddress === networkContracts.controller\r\n        ? networkContracts.avatar\r\n        : schemeToUse.address\r\n    ] &&\r\n    callPermissions[ZERO_ADDRESS][\r\n      schemeToUse.controllerAddress === networkContracts.controller\r\n        ? networkContracts.avatar\r\n        : schemeToUse.address\r\n    ][ANY_ADDRESS]\r\n  )\r\n    allowedToCall.push({ value: ANY_ADDRESS, name: 'Custom' });\r\n\r\n  console.debug(\r\n    '[PERMISSIONS]',\r\n    schemeToUse,\r\n    transferLimits,\r\n    recommendedCalls,\r\n    allowedToCall\r\n  );\r\n\r\n  const uploadToIPFS = async function () {\r\n    if (titleText.length < 10) {\r\n      setErrorMessage('Title has to be at mimimum 10 characters length');\r\n    } else if (descriptionText.length === 0) {\r\n      setErrorMessage('Description has to be at mimimum 100 characters length');\r\n    } else {\r\n      setSubmissionState(1);\r\n      setErrorMessage('');\r\n\r\n      setIpfsHash(\r\n        await ipfsService.uploadProposalMetadata(\r\n          titleText,\r\n          descriptionText,\r\n          ['dxvote'],\r\n          pinataService\r\n        )\r\n      );\r\n\r\n      setSubmissionState(2);\r\n    }\r\n  };\r\n\r\n  const createProposal = async function () {\r\n    console.debug('[RAW PROPOSAL]', titleText, ipfsHash, calls);\r\n    setSubmissionState(3);\r\n\r\n    const { library } = providerStore.getActiveWeb3React();\r\n\r\n    let to = [],\r\n      data = [],\r\n      value = [];\r\n    try {\r\n      if (schemeToUse.type !== 'ContributionReward') {\r\n        const callToController =\r\n          schemeToUse.controllerAddress === networkContracts.controller;\r\n\r\n        to = calls.map(call => {\r\n          return isWalletScheme(schemeToUse) && callToController\r\n            ? networkContracts.controller\r\n            : call.to;\r\n        });\r\n\r\n        data = calls.map(call => {\r\n          if (call.to === '') return '';\r\n\r\n          let callData;\r\n\r\n          if (call.callType === 'simple') {\r\n            let callDataFunctionSignature = '0x0';\r\n            let callDataFunctionParamsEncoded = '';\r\n\r\n            if (call.functionName.length === 0) {\r\n              callDataFunctionSignature = '0x0';\r\n            } else {\r\n              callDataFunctionSignature =\r\n                library.eth.abi.encodeFunctionSignature(call.functionName);\r\n            }\r\n\r\n            if (call.dataValues.length > 0) {\r\n              call.functionParams.map((functionParam, i) => {\r\n                if (functionParam.type.indexOf('[]') > 0) {\r\n                  call.dataValues[i] = call.dataValues[i]\r\n                    .slice(1, -1)\r\n                    .split(',');\r\n                }\r\n                if (functionParam.type === 'bool') {\r\n                  call.dataValues[i] = call.dataValues[i] === 'true';\r\n                }\r\n              });\r\n              callDataFunctionParamsEncoded =\r\n                call.functionParams.length > 0\r\n                  ? library.eth.abi\r\n                      .encodeParameters(\r\n                        call.functionParams.map(\r\n                          functionParam => functionParam.type\r\n                        ),\r\n                        call.dataValues\r\n                      )\r\n                      .substring(2)\r\n                  : '';\r\n            }\r\n            callData =\r\n              callDataFunctionSignature + callDataFunctionParamsEncoded;\r\n          } else {\r\n            callData = call.dataValues[0];\r\n          }\r\n          if (\r\n            isWalletScheme(schemeToUse) &&\r\n            callToController &&\r\n            call.to !== networkContracts.controller\r\n          ) {\r\n            return daoService.encodeControllerGenericCall(\r\n              call.to,\r\n              callData,\r\n              call.callType === 'simple'\r\n                ? library.utils.toWei(call.value).toString()\r\n                : call.value\r\n            );\r\n          } else {\r\n            return callData;\r\n          }\r\n        });\r\n\r\n        value = calls.map(call => {\r\n          return callToController\r\n            ? '0'\r\n            : call.callType === 'simple'\r\n            ? library.utils.toWei(call.value).toString()\r\n            : call.value;\r\n        });\r\n      }\r\n\r\n      const proposalData =\r\n        schemeToUse.type === 'ContributionReward'\r\n          ? {\r\n              beneficiary: contributionRewardCalls.beneficiary,\r\n              reputationChange: denormalizeBalance(\r\n                bnum(contributionRewardCalls.repChange)\r\n              ).toString(),\r\n              ethValue: denormalizeBalance(\r\n                bnum(contributionRewardCalls.ethValue)\r\n              ).toString(),\r\n              externalToken: contributionRewardCalls.externalToken,\r\n              tokenValue: contributionRewardCalls.tokenValue,\r\n              descriptionHash: contentHash.fromIpfs(ipfsHash),\r\n            }\r\n          : schemeToUse.type === 'SchemeRegistrar'\r\n          ? {\r\n              register: schemeRegistrarProposalValues.register,\r\n              schemeAddress: schemeRegistrarProposalValues.schemeAddress,\r\n              parametersHash: schemeRegistrarProposalValues.parametersHash,\r\n              permissions: schemeRegistrarProposalValues.permissions,\r\n              descriptionHash: contentHash.fromIpfs(ipfsHash),\r\n            }\r\n          : {\r\n              to,\r\n              data,\r\n              value,\r\n              titleText,\r\n              descriptionHash: contentHash.fromIpfs(ipfsHash),\r\n            };\r\n\r\n      console.debug('[PROPOSAL]', schemeToUse.address, proposalData);\r\n\r\n      daoService\r\n        .createProposal(schemeToUse.address, schemeToUse.type, proposalData)\r\n        .on(TXEvents.TX_HASH, hash => {\r\n          console.debug('[TX_SUBMITTED]', hash);\r\n          setSubmissionState(4);\r\n          setErrorMessage('');\r\n        })\r\n        .on(TXEvents.RECEIPT, hash => {\r\n          console.debug('[TX_RECEIPT]', hash);\r\n          setSubmissionState(5);\r\n        })\r\n        .on(TXEvents.TX_ERROR, txerror => {\r\n          console.error('[TX_ERROR]', txerror);\r\n          setSubmissionState(2);\r\n          setErrorMessage((txerror as Error).message);\r\n        })\r\n        .on(TXEvents.INVARIANT, error => {\r\n          console.error('[ERROR]', error);\r\n          setSubmissionState(2);\r\n          setErrorMessage((error as Error).message);\r\n        })\r\n        .catch(error => {\r\n          console.error('[ERROR]', error);\r\n          setSubmissionState(2);\r\n          setErrorMessage((error as Error).message);\r\n        });\r\n    } catch (error) {\r\n      console.error('[PROPOSAL_ERROR]', error);\r\n      setSubmissionState(2);\r\n      setErrorMessage((error as Error).message);\r\n    }\r\n  };\r\n\r\n  function onDescriptionChange(newValue) {\r\n    if (submitionState < 1) {\r\n      setDescriptionText(newValue);\r\n      localStorage.setItem('dxvote-newProposal-description', newValue);\r\n    }\r\n  }\r\n\r\n  function onTitleChange(newValue) {\r\n    if (submitionState < 1) {\r\n      setTitleText(newValue.target.value);\r\n      localStorage.setItem('dxvote-newProposal-title', newValue.target.value);\r\n    }\r\n  }\r\n\r\n  function setCallsInState(calls) {\r\n    localStorage.setItem('dxvote-newProposal-calls', JSON.stringify(calls));\r\n    setCalls(calls);\r\n    forceUpdate();\r\n  }\r\n\r\n  function setContributionRewardCallsInState(contributionRewardCalls) {\r\n    setContributionRewardCalls(contributionRewardCalls);\r\n    forceUpdate();\r\n  }\r\n\r\n  function setSchemeRegistrarValueInState(_schemeRegistrarProposalValues) {\r\n    setSchemeRegistrarProposalValues(_schemeRegistrarProposalValues);\r\n    forceUpdate();\r\n  }\r\n\r\n  function addCall() {\r\n    calls.push({\r\n      callType: isWalletScheme(schemeToUse) ? 'simple' : 'advanced',\r\n      allowedFunctions: [],\r\n      to: '',\r\n      data: '',\r\n      functionName: '',\r\n      functionParams: [],\r\n      dataValues: [],\r\n      value: '',\r\n    });\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function removeCall(proposalIndex) {\r\n    calls.splice(proposalIndex, 1);\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function changeCallType(callIndex) {\r\n    calls[callIndex] = {\r\n      callType: calls[callIndex].callType === 'simple' ? 'advanced' : 'simple',\r\n      allowedFunctions: [],\r\n      to: '',\r\n      data: '',\r\n      functionName: '',\r\n      functionParams: [],\r\n      dataValues: [],\r\n      value: '',\r\n    };\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function onToSelectChange(callIndex, toAddress) {\r\n    if (toAddress === ANY_ADDRESS) {\r\n      changeCallType(callIndex);\r\n    } else {\r\n      calls[callIndex].to = toAddress;\r\n      calls[callIndex].allowedFunctions = [];\r\n      calls[callIndex].functionName = '';\r\n      calls[callIndex].functionParams = [];\r\n      calls[callIndex].dataValues = [];\r\n      calls[callIndex].value = '0';\r\n      recommendedCalls.map(recommendedCall => {\r\n        if (recommendedCall.to === toAddress && recommendedCall.fromTime > 0) {\r\n          calls[callIndex].allowedFunctions.push(recommendedCall);\r\n        }\r\n      });\r\n      if (calls[callIndex].allowedFunctions.length > 0) {\r\n        calls[callIndex].functionName =\r\n          calls[callIndex].allowedFunctions[0].functionName;\r\n        calls[callIndex].functionParams =\r\n          calls[callIndex].allowedFunctions[0].params;\r\n        calls[callIndex].dataValues = new Array(\r\n          calls[callIndex].allowedFunctions[0].params.length\r\n        );\r\n      }\r\n      onFunctionSelectChange(\r\n        callIndex,\r\n        calls[callIndex].functionName,\r\n        calls[callIndex].functionParams\r\n      );\r\n    }\r\n  }\r\n\r\n  function onFunctionSelectChange(callIndex, functionName, params) {\r\n    calls[callIndex].functionName = functionName;\r\n\r\n    if (calls[callIndex].callType === 'simple') {\r\n      calls[callIndex].functionParams = params;\r\n      calls[callIndex].dataValues = [];\r\n      calls[callIndex].dataValues = params.map(() => {\r\n        return '';\r\n      });\r\n      calls[callIndex].value = '0';\r\n    } else {\r\n      calls[callIndex].functionParams = [];\r\n      calls[callIndex].dataValues = [''];\r\n      calls[callIndex].value = '0';\r\n    }\r\n\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function onFunctionParamsChange(callIndex, event, paramIndex) {\r\n    calls[callIndex].dataValues[paramIndex] = event.target.value;\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function onValueChange(callIndex, event) {\r\n    calls[callIndex].value = event.target.value;\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  function onContributionRewardValueChange(key, value) {\r\n    contributionRewardCalls[key] = value;\r\n    setContributionRewardCallsInState(contributionRewardCalls);\r\n  }\r\n\r\n  function onSchemeRegistrarValueChange(key, value) {\r\n    schemeRegistrarProposalValues[key] = value;\r\n    setSchemeRegistrarValueInState(schemeRegistrarProposalValues);\r\n  }\r\n\r\n  function onSchemeChange(event) {\r\n    setSchemeToUse(schemes[event.target.value]);\r\n    localStorage.setItem(\r\n      'dxvote-newProposal-scheme',\r\n      schemes[event.target.value].address\r\n    );\r\n    calls.splice(0, calls.length);\r\n    setContributionRewardCalls({\r\n      beneficiary: '',\r\n      repChange: '0',\r\n      ethValue: '0',\r\n      externalToken: ZERO_ADDRESS,\r\n      tokenValue: '0',\r\n    });\r\n    setCallsInState(calls);\r\n  }\r\n\r\n  return (\r\n    <NewProposalFormWrapper>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-between',\r\n        }}\r\n      >\r\n        <PlaceHolders>\r\n          <span style={{ width: '100%' }}>Title</span>\r\n          <span style={{ minWidth: '150px' }}>\r\n            Scheme <Question question=\"2\" />\r\n          </span>\r\n          <span style={{ minWidth: '150px' }}>Template</span>\r\n        </PlaceHolders>\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'row',\r\n          justifyContent: 'space-between',\r\n        }}\r\n      >\r\n        <TitleInput>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Proposal Title\"\r\n            onChange={onTitleChange}\r\n            value={titleText}\r\n          />\r\n          <select\r\n            name=\"scheme\"\r\n            id=\"schemeSelector\"\r\n            onChange={onSchemeChange}\r\n            defaultValue={defaultSchemeToUse}\r\n          >\r\n            {schemes.map((scheme, i) => {\r\n              if (\r\n                isWalletScheme(scheme) ||\r\n                scheme.type === 'ContributionReward' ||\r\n                scheme.type === 'GenericMulticall' ||\r\n                scheme.type === 'SchemeRegistrar'\r\n              )\r\n                return (\r\n                  <option key={scheme.address} value={i}>\r\n                    {scheme.name} ({scheme.address.substring(0, 6)})\r\n                  </option>\r\n                );\r\n              else return null;\r\n            })}\r\n          </select>\r\n        </TitleInput>\r\n      </div>\r\n\r\n      <DiscourseImporter onImport={onDescriptionChange} />\r\n\r\n      {submitionState < 1 ? (\r\n        <MDEditor\r\n          value={descriptionText}\r\n          onChange={onDescriptionChange}\r\n          preview=\"edit\"\r\n          height=\"300\"\r\n          minHeight={300}\r\n          maxHeight={1000}\r\n          commands={[\r\n            commands.bold,\r\n            commands.italic,\r\n            commands.strikethrough,\r\n            commands.hr,\r\n            commands.title,\r\n            commands.divider,\r\n            commands.link,\r\n            commands.quote,\r\n            commands.code,\r\n            commands.image,\r\n            commands.unorderedListCommand,\r\n            commands.orderedListCommand,\r\n            commands.checkedListCommand,\r\n          ]}\r\n          previewOptions={{\r\n            skipHtml: true,\r\n            escapeHtml: true,\r\n          }}\r\n        />\r\n      ) : (\r\n        <div />\r\n      )}\r\n      <h2>Description Preview</h2>\r\n      <Preview descriptionText={descriptionText} schemeToUse={schemeToUse} />\r\n\r\n      <Calls\r\n        schemeToUse={schemeToUse}\r\n        onContributionRewardValueChange={onContributionRewardValueChange}\r\n        contributionRewardCalls={contributionRewardCalls}\r\n        onSchemeRegistrarValueChange={onSchemeRegistrarValueChange}\r\n        schemeRegistrarProposalValues={schemeRegistrarProposalValues}\r\n        calls={calls}\r\n        onToSelectChange={onToSelectChange}\r\n        allowedToCall={allowedToCall}\r\n        onFunctionSelectChange={onFunctionSelectChange}\r\n        onFunctionParamsChange={onFunctionParamsChange}\r\n        addCall={addCall}\r\n        onValueChange={onValueChange}\r\n        networkAssetSymbol={networkAssetSymbol}\r\n        removeCall={removeCall}\r\n        changeCallType={changeCallType}\r\n      />\r\n\r\n      {errorMessage.length > 0 ? (\r\n        <TextActions>\r\n          <span>{errorMessage}</span>\r\n        </TextActions>\r\n      ) : (\r\n        <div />\r\n      )}\r\n\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          width: '100%',\r\n          margin: '40px 10px',\r\n        }}\r\n      >\r\n        {!(submitionState === 5) ? (\r\n          <LinkedButtons\r\n            buttons={[\r\n              {\r\n                title: `Upload to IPFS`,\r\n                id: 0,\r\n                loadingId: 1,\r\n                onClick: uploadToIPFS,\r\n              },\r\n              {\r\n                title: `Submit Proposal`,\r\n                id: 2,\r\n                loadingId: 3,\r\n                typeSubmit: true,\r\n                onClick: createProposal,\r\n              },\r\n            ]}\r\n            active={submitionState}\r\n          />\r\n        ) : (\r\n          <LinkButton route={`/${networkName}/proposals`}>\r\n            Back to Proposals\r\n          </LinkButton>\r\n        )}\r\n        {submitionState > 1 ? (\r\n          <TextActions>\r\n            <span>\r\n              Uploaded to IPFS:\r\n              <a\r\n                href={`https://ipfs.io/ipfs/${ipfsHash}`}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                https://ipfs.io/ipfs/{ipfsHash}\r\n              </a>\r\n              <br />\r\n              Check before submitting proposal\r\n            </span>\r\n          </TextActions>\r\n        ) : (\r\n          <div />\r\n        )}\r\n      </div>\r\n    </NewProposalFormWrapper>\r\n  );\r\n});\r\n\r\nexport default NewProposalPage;\r\n","// Externals\r\nimport { observer } from 'mobx-react';\r\nimport { Switch, Route, useRouteMatch } from 'react-router-dom';\r\n\r\nimport NewProposalPage from './ProposalSubmission/Custom';\r\n\r\nexport const SubmitProposalPage = observer(() => {\r\n  let match = useRouteMatch();\r\n\r\n  return (\r\n    <Switch>\r\n      <Route path={`${match.path}/custom`}>\r\n        <NewProposalPage />{' '}\r\n      </Route>\r\n    </Switch>\r\n  );\r\n});\r\n","// Externals\r\nimport { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { useContext } from '../contexts';\r\nimport { Box } from '../components/common';\r\n\r\nconst VerticalLayout = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100vh;\r\n  flex-direction: column;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst NavigationBar = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 10vh;\r\n`;\r\n\r\nconst BackToProposals = styled.div`\r\n  flex: 1;\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  text-align: center;\r\n  font-weight: 200;\r\n`;\r\n\r\nconst Spacer = styled.div`\r\n  flex: 1;\r\n  text-align: center;\r\n  font-weight: 200;\r\n`;\r\n\r\nconst OptionsWrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n`;\r\n\r\nconst ProposalType = styled(Box)`\r\n  width: 10%;\r\n  min-width: 120px;\r\n  height: 100px;\r\n  margin: 5%;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  color: var(--dark-text-gray);\r\n  padding: 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 24px;\r\n  transition-duration: 0.5s;\r\n  :hover {\r\n    box-shadow: 0px 0px 15px 10px rgba(14, 0, 135, 0.1);\r\n    transform: scale(1.05);\r\n  }\r\n`;\r\n\r\nexport const NewProposalTypePage = observer(() => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n  const history = useHistory();\r\n  const [proposalTypes, setProposalTypes] = useState([]);\r\n\r\n  const options = [];\r\n\r\n  useEffect(() => {\r\n    setProposalTypes(configStore.getProposalTypes());\r\n  }, []);\r\n\r\n  proposalTypes.forEach(type => {\r\n    const path =\r\n      type.id === 'custom' ? `submit/${type.id}` : `metadata/${type.id}`;\r\n    options.push(\r\n      <ProposalType onClick={() => history.push(path)}>\r\n        {type.title}\r\n      </ProposalType>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <VerticalLayout>\r\n      <NavigationBar>\r\n        <BackToProposals onClick={() => history.push('../proposals')}>\r\n          {`< Back `}\r\n        </BackToProposals>\r\n        <Title>Choose Proposal Type</Title>\r\n        <Spacer />\r\n      </NavigationBar>\r\n      <OptionsWrapper>{options}</OptionsWrapper>\r\n    </VerticalLayout>\r\n  );\r\n});\r\n","import styled from 'styled-components';\r\n\r\nexport const TitleRow = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const ListRow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 6px 0px;\r\n  border-bottom: ${({ borderBottom }) => (borderBottom ? '1px solid' : '')};\r\n  cursor: ${({ clickable }) => (clickable ? 'pointer' : 'default')};\r\n  &:hover {\r\n    opacity: ${({ clickable }) => (clickable ? '0.5' : '1')};\r\n  }\r\n`;\r\n","import { observer } from 'mobx-react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useLocation } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport {\r\n  BlockchainLink,\r\n  Row,\r\n  Box,\r\n  InfoBox,\r\n  Subtitle,\r\n  Button,\r\n} from '../components/common';\r\nimport { formatBalance } from '../utils';\r\nimport { useContext } from '../contexts';\r\nimport useExporters from '../hooks/useExporters';\r\nimport { TitleRow, ListRow } from 'components/UserPage';\r\n\r\nconst UserPage = observer(() => {\r\n  let history = useHistory();\r\n\r\n  const {\r\n    context: { daoStore, configStore },\r\n  } = useContext();\r\n  const userAddress = useLocation().pathname.split('/')[3];\r\n  const { exportToCSV, triggerDownload } = useExporters();\r\n  const userEvents = daoStore.getUserEvents(userAddress);\r\n  const userInfo = daoStore.getUser(userAddress);\r\n  const networkName = configStore.getActiveChainName();\r\n  const redeemsLeft = daoStore.getUserRedeemsLeft(userAddress);\r\n\r\n  const getExportFileName = () => {\r\n    return `history_${userAddress}-${moment().format('YYYY-MM-DD')}`;\r\n  };\r\n\r\n  const exportCSV = async () => {\r\n    const historyItems = userEvents.history.map(historyEvent => ({\r\n      tx: historyEvent.event.tx,\r\n      eventTime: moment.unix(historyEvent.event.timestamp).format(),\r\n      eventTimeTs: historyEvent.event.timestamp,\r\n      blockNumber: historyEvent.event.block,\r\n      action: historyEvent.text,\r\n    }));\r\n    const csvString = await exportToCSV(historyItems);\r\n    triggerDownload(csvString, `${getExportFileName()}.csv`, 'text/csv');\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Subtitle>\r\n        User: <BlockchainLink size=\"long\" text={userAddress} toCopy />\r\n      </Subtitle>\r\n      <Row>\r\n        <InfoBox>\r\n          {formatBalance(userInfo.repBalance, 18, 0)} REP (\r\n          {userInfo.repPercentage})\r\n        </InfoBox>\r\n        <InfoBox>\r\n          {userEvents.votes.filter(vote => vote.vote === 1).length} Positive\r\n          Votes\r\n        </InfoBox>\r\n        <InfoBox>\r\n          {userEvents.votes.filter(vote => vote.vote === 2).length} Negative\r\n          Votes\r\n        </InfoBox>\r\n        <InfoBox>{userEvents.newProposal.length} Proposals</InfoBox>\r\n      </Row>\r\n\r\n      <h2> Redeems Left </h2>\r\n      {redeemsLeft.rep.map((proposalId, i) => {\r\n        return (\r\n          <span\r\n            key={'proposalLink' + i}\r\n            onClick={() => {\r\n              history.push(`/${networkName}/proposal/${proposalId}`);\r\n            }}\r\n            style={{\r\n              padding: '6px 0px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            REP redeem in Proposal {proposalId}\r\n          </span>\r\n        );\r\n      })}\r\n      {redeemsLeft.stake.map((proposalId, i) => {\r\n        return (\r\n          <span\r\n            key={'proposalLink' + i}\r\n            onClick={() => {\r\n              history.push(`/${networkName}/proposal/${proposalId}`);\r\n            }}\r\n            style={{\r\n              padding: '6px 0px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            Staking token redeem in Proposal {proposalId}\r\n          </span>\r\n        );\r\n      })}\r\n      {Object.keys(redeemsLeft.bounty).map((proposalId, i) => {\r\n        return (\r\n          <span\r\n            key={'proposalLink' + i}\r\n            onClick={() => {\r\n              history.push(`/${networkName}/proposal/${proposalId}`);\r\n            }}\r\n            style={{\r\n              padding: '6px 0px',\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            Staking token bounty redeem of{' '}\r\n            {redeemsLeft.bounty[proposalId].toString()} in Proposal {proposalId}\r\n          </span>\r\n        );\r\n      })}\r\n\r\n      <TitleRow>\r\n        <h2>History</h2>\r\n        <Button onClick={exportCSV}>Export to CSV</Button>\r\n      </TitleRow>\r\n\r\n      {userEvents.history.map((historyEvent, i) => {\r\n        return (\r\n          <ListRow\r\n            key={'userHistoryEvent' + i}\r\n            borderBottom={i < userEvents.history.length - 1}\r\n          >\r\n            <span> {historyEvent.text} </span>\r\n            <BlockchainLink\r\n              type=\"transaction\"\r\n              size=\"short\"\r\n              text={historyEvent.event.tx}\r\n              onlyIcon\r\n            />\r\n          </ListRow>\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default UserPage;\r\n","import styled from 'styled-components';\r\nimport { Title, BlockchainLink, Box } from '../../common';\r\n\r\nconst ProposalHistoryEvent = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 4px 0px;\r\n  border-bottom: 1px var(--medium-gray);\r\n  &:last-of-type {\r\n    border-bottom: none;\r\n  }\r\n`;\r\n\r\nconst HistoryEventText = styled.span`\r\n  display: flex;\r\n  margin-right: 5px;\r\n  > * {\r\n    margin-right: 5px;\r\n  }\r\n`;\r\n\r\nconst ProposalInfoBox = styled(Box)`\r\n  max-width: 900px;\r\n  overflow-wrap: anywhere;\r\n  padding: 20px 15px 10px 15px;\r\n  justify-content: flex-start;\r\n  overflow: auto;\r\n`;\r\n\r\nconst renderEvents = ({ text, textParams }) => {\r\n  let componentsList = [];\r\n  if (text.length === 1 && textParams.length === 0)\r\n    componentsList.push(<span key=\"event-0\">{text[0]}</span>);\r\n  else {\r\n    componentsList = text.map((phrase, key) => {\r\n      let components = [];\r\n      components.push(<span key={'event-0-' + key}>{phrase}</span>);\r\n      if (textParams[key])\r\n        components.push(\r\n          <BlockchainLink\r\n            key={'event-1-' + key}\r\n            text={textParams[0]}\r\n            toCopy={false}\r\n            size=\"short\"\r\n          />\r\n        );\r\n      return components;\r\n    });\r\n  }\r\n  return componentsList;\r\n};\r\n\r\nconst History = ({ proposalEvents }) => (\r\n  <ProposalInfoBox style={{ marginTop: '15px' }}>\r\n    <Title noMargins> History </Title>\r\n    {proposalEvents.history.map((historyEvent, i) => (\r\n      <ProposalHistoryEvent key={'historyEvent' + i}>\r\n        <HistoryEventText>{renderEvents(historyEvent)}</HistoryEventText>\r\n        <BlockchainLink\r\n          type=\"transaction\"\r\n          size=\"short\"\r\n          text={historyEvent.event.tx}\r\n          onlyIcon\r\n        />\r\n        {i < proposalEvents.history.length - 1 && <hr />}\r\n      </ProposalHistoryEvent>\r\n    ))}\r\n  </ProposalInfoBox>\r\n);\r\n\r\nexport default History;\r\n","import { useState } from 'react';\r\nimport { ContractType } from 'stores/Provider';\r\nimport { ProposalCalls } from '../types/types';\r\nimport {\r\n  ANY_ADDRESS,\r\n  bnum,\r\n  ERC20_APPROVE_SIGNATURE,\r\n  ERC20_TRANSFER_SIGNATURE,\r\n  ZERO_ADDRESS,\r\n  BigNumber,\r\n} from 'utils';\r\nimport { useContext } from '../contexts';\r\n\r\ninterface DecodedABI {\r\n  function: any;\r\n  args: any;\r\n}\r\ninterface DecodeABI {\r\n  data: string;\r\n  contractType?: ContractType;\r\n  contractABI?: string;\r\n}\r\ninterface UseABIServiceReturns {\r\n  ABI: DecodedABI | undefined;\r\n  decodedCallData: (\r\n    from: string,\r\n    to: string,\r\n    data: string,\r\n    value: BigNumber,\r\n    ABI: string\r\n  ) => ProposalCalls;\r\n}\r\n/**\r\n * parse's ABI and returns a react component detailing the to, from, and functions calls\r\n */\r\nexport const useABIService = (): UseABIServiceReturns => {\r\n  const [ABI, setABI] = useState<DecodedABI>();\r\n  const {\r\n    context: { abiService, providerStore, configStore },\r\n  } = useContext();\r\n\r\n  const decodeABI = (params: DecodeABI) => {\r\n    let contract: ContractType | undefined;\r\n    const { data, contractType, contractABI } = params;\r\n    if (contractType) {\r\n      contract = contractType;\r\n    }\r\n    try {\r\n      const abi = abiService.decodeCall(data, contract, contractABI);\r\n      setABI(abi);\r\n      return abi;\r\n    } catch (error) {\r\n      console.error(error);\r\n      return {};\r\n    }\r\n  };\r\n\r\n  const decodedCallData = (\r\n    from: string,\r\n    to: string,\r\n    data: string,\r\n    value: BigNumber,\r\n    contractABI: string\r\n  ) => {\r\n    const { library } = providerStore.getActiveWeb3React();\r\n    const recommendedCalls = configStore.getRecommendedCalls();\r\n    let functionSignature = data.substring(0, 10);\r\n\r\n    const controllerCallDecoded = abiService.decodeCall(\r\n      data,\r\n      ContractType.Controller\r\n    );\r\n    const decodedAbi = decodeABI({ data, contractABI });\r\n\r\n    if (\r\n      controllerCallDecoded &&\r\n      controllerCallDecoded.function.name === 'genericCall'\r\n    ) {\r\n      to = controllerCallDecoded.args[0];\r\n      data = '0x' + controllerCallDecoded.args[1].substring(10);\r\n      value = bnum(controllerCallDecoded.args[3]);\r\n      functionSignature = controllerCallDecoded.args[1].substring(0, 10);\r\n    } else {\r\n      data = '0x' + data.substring(10);\r\n    }\r\n\r\n    let asset = ZERO_ADDRESS;\r\n    if (\r\n      functionSignature === ERC20_TRANSFER_SIGNATURE ||\r\n      functionSignature === ERC20_APPROVE_SIGNATURE\r\n    ) {\r\n      asset = to;\r\n    }\r\n    const recommendedCallUsed = recommendedCalls.find(recommendedCall => {\r\n      return (\r\n        asset === recommendedCall.asset &&\r\n        (ANY_ADDRESS === recommendedCall.from ||\r\n          from === recommendedCall.from) &&\r\n        to === recommendedCall.to &&\r\n        functionSignature ===\r\n          library.eth.abi.encodeFunctionSignature(recommendedCall.functionName)\r\n      );\r\n    });\r\n\r\n    if (recommendedCallUsed) {\r\n      const callParameters = library.eth.abi.decodeParameters(\r\n        recommendedCallUsed.params.map(param => param.type),\r\n        data\r\n      );\r\n\r\n      if (callParameters.__length__) delete callParameters.__length__;\r\n\r\n      let encodeFunctionName = library.eth.abi.encodeFunctionSignature(\r\n        recommendedCallUsed.functionName\r\n      );\r\n\r\n      return {\r\n        from: from,\r\n        to: to,\r\n        recommendedCallUsed: recommendedCallUsed,\r\n        encodedFunctionName: encodeFunctionName,\r\n        callParameters: callParameters,\r\n        data: data,\r\n        value: value,\r\n        contractABI: decodedAbi,\r\n      };\r\n    }\r\n\r\n    return {\r\n      from: from,\r\n      to: to,\r\n      data: data,\r\n      value: value,\r\n      functionSignature: functionSignature,\r\n      contractABI: decodedAbi,\r\n    };\r\n  };\r\n\r\n  return {\r\n    ABI,\r\n    decodedCallData,\r\n  };\r\n};\r\n","import { AxiosResponse } from 'axios';\r\nimport { useState } from 'react';\r\nimport { useContext } from '../contexts';\r\n\r\ninterface UseEtherscanServiceReturns {\r\n  getContractABI: (address: string) => Promise<string>;\r\n  getContractSource: (address: string) => Promise<string>;\r\n  error: Error | null;\r\n  loading: boolean;\r\n}\r\n\r\ninterface EtherscanResponse {\r\n  status: '0' | '1';\r\n  message: string;\r\n  result: string;\r\n}\r\n\r\nenum EtherscanErrors {\r\n  MaxLimit = 'Max rate limit reached',\r\n  MissingAPI = 'OK-Missing/Invalid API Key, rate limit of 1/5sec applied',\r\n  invalidAPI = 'Invalid API Key',\r\n  tooManyAttempts = 'Too many invalid api key attempts, please try again later',\r\n}\r\n\r\nexport const useEtherscanService = (): UseEtherscanServiceReturns => {\r\n  const {\r\n    context: { etherscanService, configStore },\r\n  } = useContext();\r\n\r\n  const networkName = configStore.getActiveChainName();\r\n  const contracts = configStore.getNetworkContracts();\r\n\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<Error | null>(null);\r\n\r\n  const checkEtherscanErrors = (\r\n    etherscanResult: AxiosResponse<EtherscanResponse>\r\n  ) => {\r\n    if (\r\n      Object.values<string>(EtherscanErrors).includes(\r\n        etherscanResult.data.result || etherscanResult.data.message\r\n      )\r\n    ) {\r\n      throw new Error('API');\r\n    }\r\n  };\r\n\r\n  const getContractABI = async (address: string) => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      if (address === contracts.controller) {\r\n        return JSON.stringify(require('../contracts/DxController.json').abi);\r\n      }\r\n\r\n      const ABI = await etherscanService.getContractABI(address, networkName);\r\n      checkEtherscanErrors(ABI);\r\n\r\n      setLoading(false);\r\n      return ABI.data.result;\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getContractSource = async (address: string) => {\r\n    try {\r\n      setLoading(true);\r\n      const source = await etherscanService.getContractSource(\r\n        address,\r\n        networkName\r\n      );\r\n      checkEtherscanErrors(source);\r\n      setLoading(false);\r\n      return source.data.result;\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    getContractABI,\r\n    getContractSource,\r\n    loading,\r\n    error,\r\n  };\r\n};\r\n","import styled from 'styled-components';\r\n\r\nimport { ProposalCalls } from '../../../types/types';\r\nimport { BlockchainLink } from '../../common';\r\n\r\nconst CallParams = styled.span`\r\n  color: black;\r\n  font-style: ${props => props.fontStyle || 'normal'};\r\n  font-size: ${props => props.fontSize || '14px'};\r\n  font-weight: ${props => props.fontWeight || 500};\r\n`;\r\n\r\ntype EtherscanCallProps = Pick<ProposalCalls, 'to' | 'from'> & {\r\n  abi: any;\r\n  showMore: boolean;\r\n};\r\n\r\nexport const EtherscanCalls = ({\r\n  to,\r\n  from,\r\n  abi,\r\n  showMore,\r\n}: EtherscanCallProps) => {\r\n  if (showMore) {\r\n    return (\r\n      <div>\r\n        <p>\r\n          <strong>From:</strong>\r\n          <small>\r\n            <BlockchainLink text={from} toCopy={false} />\r\n          </small>\r\n        </p>\r\n        <p>\r\n          <strong>To: </strong>\r\n          <small>\r\n            <BlockchainLink text={to} toCopy={false} />\r\n          </small>\r\n        </p>\r\n        <p>\r\n          <strong>Function: </strong>\r\n          <small>{abi?.function?.signature}</small>\r\n        </p>\r\n        {Object.keys(abi.args)\r\n          .filter(item => item != '__length__')\r\n          .map((item, i) => {\r\n            const check = abi.function.inputs[item];\r\n            const functionName = check\r\n              ? abi.function.inputs[item].name.replace(/[^a-zA-Z0-9]/g, '')\r\n              : 'failed';\r\n            const functionType = check\r\n              ? abi.function.inputs[item].type\r\n              : 'failed';\r\n            return (\r\n              <p key={i}>\r\n                <CallParams fontSize=\"14px\" fontWeight={700}>\r\n                  {functionName}:{' '}\r\n                </CallParams>\r\n                <CallParams fontStyle=\"italic\">({functionType}) </CallParams>\r\n                <CallParams>{abi.args[item]} </CallParams>\r\n              </p>\r\n            );\r\n          })}\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <CallParams>from </CallParams>\r\n        <CallParams fontStyle=\"italic\">{from} </CallParams>\r\n        <CallParams>to </CallParams>\r\n        <CallParams fontStyle=\"italic\">{to} </CallParams>\r\n        <CallParams>calling function </CallParams>\r\n        <CallParams fontStyle=\"italic\">{abi?.function?.signature} </CallParams>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport BigNumber from 'bignumber.js';\r\nimport moment from 'moment';\r\nimport { useContext } from '../../contexts';\r\nimport { bnum, normalizeBalance, ZERO_ADDRESS } from '../../utils';\r\n\r\ninterface RepDisplayProps {\r\n  rep: BigNumber;\r\n  timestamp?: number;\r\n  atBlock?: number;\r\n}\r\n\r\nconst HoverHighlight = styled.span`\r\n  &:hover {\r\n    color: var(--blue-onHover);\r\n  }\r\n`;\r\n\r\nconst RepDisplay: React.FC<RepDisplayProps> = ({ rep, atBlock, timestamp }) => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n\r\n  const [isHovering, setIsHovering] = useState(false);\r\n  const repNormalized = normalizeBalance(rep).toString();\r\n  const repPercent = bnum(rep)\r\n    .times(100)\r\n    .div(daoStore.getRepAt(ZERO_ADDRESS, atBlock).totalSupply)\r\n    .toFixed(4)\r\n    .toString();\r\n\r\n  return (\r\n    <HoverHighlight\r\n      onMouseEnter={() => setIsHovering(true)}\r\n      onMouseLeave={() => setIsHovering(false)}\r\n    >\r\n      {isHovering ? `${repPercent}%` : repNormalized} REP{' '}\r\n      {isHovering &&\r\n        timestamp &&\r\n        `as of ${moment.unix(timestamp).format('Do MMM YYYY')}`}\r\n    </HoverHighlight>\r\n  );\r\n};\r\n\r\nexport default RepDisplay;\r\n","import reactStringReplace from 'react-string-replace';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { bnum, normalizeBalance } from 'utils';\r\nimport { BlockchainLink } from 'components/common';\r\nimport { CallParameterDefinition, ProposalCalls } from '../../../types/types';\r\nimport RepDisplay from '../../RepDisplay';\r\nimport { useContext } from '../../../contexts';\r\n\r\ntype RecomendedCallsProps = Pick<\r\n  ProposalCalls,\r\n  | 'to'\r\n  | 'from'\r\n  | 'recommendedCallUsed'\r\n  | 'callParameters'\r\n  | 'encodedFunctionName'\r\n  | 'data'\r\n> & {\r\n  showMore: boolean;\r\n};\r\n\r\nexport const RecommendedCalls = ({\r\n  to,\r\n  from,\r\n  recommendedCallUsed,\r\n  callParameters,\r\n  encodedFunctionName,\r\n  data,\r\n  showMore,\r\n}: RecomendedCallsProps) => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n  const proposal = daoStore.getProposal(proposalId);\r\n\r\n  const normalizeValue = (value: any, param: CallParameterDefinition) => {\r\n    if (param.decimals) {\r\n      return normalizeBalance(value, param.decimals).toString();\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  const getComponentToRender = (param: CallParameterDefinition, value: any) => {\r\n    if (param.isRep) {\r\n      return (\r\n        <RepDisplay\r\n          rep={bnum(value)}\r\n          atBlock={proposal.creationEvent.blockNumber}\r\n          timestamp={proposal.creationEvent.timestamp}\r\n        />\r\n      );\r\n    } else {\r\n      return normalizeValue(value, param);\r\n    }\r\n  };\r\n\r\n  let decodedCallDetail: React.ReactNodeArray = [\r\n    recommendedCallUsed.decodeText,\r\n  ];\r\n  if (\r\n    recommendedCallUsed.decodeText &&\r\n    recommendedCallUsed.decodeText.length > 0\r\n  ) {\r\n    recommendedCallUsed.params.forEach((param, paramIndex) => {\r\n      const component = getComponentToRender(param, callParameters[paramIndex]);\r\n\r\n      decodedCallDetail = reactStringReplace(\r\n        reactStringReplace(\r\n          decodedCallDetail,\r\n          `[PARAM_${paramIndex}]`,\r\n          () => component\r\n        ),\r\n        'FROM',\r\n        () => proposal.scheme\r\n      );\r\n    });\r\n  }\r\n\r\n  if (showMore) {\r\n    return (\r\n      <div>\r\n        <p>\r\n          <strong>From: </strong>{' '}\r\n          <small>\r\n            <BlockchainLink text={from} toCopy={false} />\r\n          </small>\r\n        </p>\r\n        <p>\r\n          <strong>To: </strong>{' '}\r\n          <small>\r\n            <BlockchainLink text={to} toCopy={false} />\r\n          </small>\r\n        </p>\r\n        <p>\r\n          <strong>Descriptions: </strong>{' '}\r\n          <small>{recommendedCallUsed.toName}</small>\r\n        </p>\r\n        <p>\r\n          <strong>Function: </strong>\r\n          <small>{recommendedCallUsed.functionName}</small>\r\n        </p>\r\n        <p>\r\n          <strong>Function Signature: </strong>{' '}\r\n          <small>{encodedFunctionName}</small>\r\n        </p>\r\n        <strong>Params: </strong>\r\n        {Object.keys(callParameters).map((paramIndex, i) => {\r\n          return (\r\n            <p key={i}>\r\n              <small>{callParameters[paramIndex]} </small>\r\n            </p>\r\n          );\r\n        })}\r\n        <strong>data: </strong>\r\n        <small>{data} </small>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <small>{decodedCallDetail}</small>\r\n    </div>\r\n  );\r\n};\r\n","import { Link } from 'react-router-dom';\r\n\r\nexport const Error = ({ error }) => {\r\n  if (error.message === 'API') {\r\n    return (\r\n      <div>\r\n        An API Key error has occured:\r\n        <Link to=\"/config\"> Click here to enter API key</Link>\r\n      </div>\r\n    );\r\n  } else return <p>{error.message}</p>;\r\n};\r\n","import { Error } from './Error';\r\nimport { BlockchainLink } from 'components/common';\r\nimport { ProposalCalls } from '../../../types/types';\r\n\r\ntype BaseCallsProps = Pick<ProposalCalls, 'to' | 'from' | 'value' | 'data'> & {\r\n  showMore: boolean;\r\n  error: any;\r\n};\r\n\r\nexport const BaseCalls = ({\r\n  to,\r\n  from,\r\n  data,\r\n  value,\r\n  error,\r\n  showMore,\r\n}: BaseCallsProps) => {\r\n  return (\r\n    <div>\r\n      {error && <Error error={error} />}\r\n      <p>\r\n        <strong>From: </strong>\r\n        <small>\r\n          <BlockchainLink text={from} toCopy={false} />\r\n        </small>\r\n      </p>\r\n      <p>\r\n        <strong>To: </strong>\r\n        <small>\r\n          <BlockchainLink text={to} toCopy={false} />\r\n        </small>\r\n      </p>\r\n      <p>\r\n        <strong>Value: </strong>\r\n        <small>{value.toString()}</small>\r\n      </p>\r\n      {showMore ? (\r\n        <p>\r\n          <strong>data: </strong>\r\n          <small>{data}</small>\r\n        </p>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import { FiZoomIn, FiZoomOut } from 'react-icons/fi';\r\nimport { Question } from 'components/common';\r\n\r\nexport const ShowMore = ({ showMore, setShowMore }) => (\r\n  <h2>\r\n    Calls\r\n    {showMore ? (\r\n      <FiZoomOut\r\n        onClick={() => {\r\n          setShowMore(false);\r\n        }}\r\n      />\r\n    ) : (\r\n      <FiZoomIn\r\n        onClick={() => {\r\n          setShowMore(true);\r\n        }}\r\n      />\r\n    )}\r\n    <Question question=\"9\" />\r\n  </h2>\r\n);\r\n","import styled from 'styled-components';\r\n\r\nexport const TextCenter = styled.div`\r\n  text-align: center;\r\n`;\r\n\r\nexport const ActionArea = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nexport const SpaceAroundRow = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: row;\r\n  padding: 5px 0px;\r\n\r\n  .timeText {\r\n    font-size: 20;\r\n    margin-left: -10px;\r\n    width: 100%;\r\n    text-align: center;\r\n    padding-top: 5px;\r\n  }\r\n\r\n  span {\r\n    margin-bottom: 5px;\r\n  }\r\n`;\r\n\r\nexport const Vote = styled.div`\r\n  display: flex;\r\n  font-size: ${({ theme }) => theme.votes.fontSize};\r\n  justify-content: space-between;\r\n\r\n  > * {\r\n    margin-left: 4px;\r\n  }\r\n`;\r\n\r\nexport const AmountInput = styled.input`\r\n  background-color: white;\r\n  border: 1px solid gray;\r\n  border-radius: 4px;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 32px;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  width: 60px;\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n  font-family: var(--roboto);\r\n`;\r\n\r\nexport const Summary = styled.div``;\r\n\r\nexport const PositiveSummary = styled(Summary)`\r\n  color: ${({ theme }) => theme.votes.positive.color};\r\n`;\r\n\r\nexport const NegativeSummary = styled(Summary)`\r\n  color: ${({ theme }) => theme.votes.negative.color};\r\n`;\r\n\r\nexport const SummaryTotal = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 15px;\r\n`;\r\nexport const SummaryDetails = styled.div`\r\n  font-size: 13px;\r\n  flex: 1;\r\n`;\r\n\r\nexport const ActionButton = styled.div`\r\n  background-color: ${props => props.color || '#536DFE'};\r\n  border-radius: 4px;\r\n  color: white;\r\n  height: 34px;\r\n  width: max-content;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 34px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  svg {\r\n    margin-right: 4px;\r\n  }\r\n`;\r\n\r\nexport const Divider = styled.div`\r\n  border-top: 1px solid gray;\r\n  margin: 10px 0;\r\n`;\r\n","import { useState, useEffect } from 'react';\r\nimport { useABIService } from 'hooks/useABIService';\r\nimport { observer } from 'mobx-react';\r\nimport { useEtherscanService } from 'hooks/useEtherscanService';\r\nimport { ProposalCalls } from '../../../types/types';\r\nimport { useContext } from 'contexts';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport PendingCircle from '../../common/PendingCircle';\r\nimport { EtherscanCalls } from './EtherscanCalls';\r\nimport { RecommendedCalls } from './RecommendedCalls';\r\nimport { BaseCalls } from './BaseCalls';\r\nimport { ShowMore } from './ShowMore';\r\nimport { Divider } from '../styles';\r\nimport { isWalletScheme } from 'utils';\r\n\r\nconst Calls = observer(() => {\r\n  const [showMore, setShowMore] = useState(false);\r\n  const {\r\n    context: { configStore, daoStore },\r\n  } = useContext();\r\n\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n  const proposal = daoStore.getProposal(proposalId);\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const scheme = daoStore.getScheme(proposal.scheme);\r\n\r\n  const { decodedCallData } = useABIService();\r\n  const { getContractABI, error } = useEtherscanService();\r\n  const [loading, setLoading] = useState(false);\r\n  const [ProposalCallTexts, setProposalCallTexts] = useState<ProposalCalls[]>(\r\n    new Array(proposal.to.length)\r\n  );\r\n\r\n  const proposalCallArray = [];\r\n  const getProposalCalls = async () => {\r\n    setLoading(true);\r\n    const result = await Promise.all(\r\n      proposal.to.map(item => getContractABI(item))\r\n    );\r\n    result.map((abi, i) => {\r\n      proposalCallArray.push(\r\n        decodedCallData(\r\n          isWalletScheme(scheme) &&\r\n            scheme.controllerAddress !== networkContracts.controller\r\n            ? scheme.address\r\n            : networkContracts.avatar,\r\n          proposal.to[i],\r\n          proposal.callData[i],\r\n          proposal.values[i],\r\n          abi\r\n        )\r\n      );\r\n    });\r\n    setLoading(false);\r\n  };\r\n  useEffect(() => {\r\n    getProposalCalls();\r\n    setProposalCallTexts(proposalCallArray);\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <PendingCircle height=\"44px\" width=\"44px\" color=\"blue\" />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ShowMore showMore={showMore} setShowMore={setShowMore} />\r\n\r\n      {ProposalCallTexts.map(\r\n        (\r\n          {\r\n            to,\r\n            from,\r\n            recommendedCallUsed,\r\n            callParameters,\r\n            data,\r\n            value,\r\n            encodedFunctionName,\r\n            contractABI,\r\n          },\r\n          i\r\n        ) => {\r\n          return (\r\n            <div key={i}>\r\n              {i > 0 ? <Divider></Divider> : null}\r\n              <strong> Call #{i + 1}</strong>\r\n              {recommendedCallUsed ? (\r\n                <RecommendedCalls\r\n                  to={to}\r\n                  from={from}\r\n                  recommendedCallUsed={recommendedCallUsed}\r\n                  callParameters={callParameters}\r\n                  data={data}\r\n                  encodedFunctionName={encodedFunctionName}\r\n                  // value={value}\r\n                  // contractABI={contractABI}\r\n                  showMore={showMore}\r\n                />\r\n              ) : contractABI.function ? (\r\n                <EtherscanCalls\r\n                  to={to}\r\n                  from={from}\r\n                  abi={contractABI}\r\n                  showMore={showMore}\r\n                />\r\n              ) : (\r\n                <BaseCalls\r\n                  to={to}\r\n                  from={from}\r\n                  data={data}\r\n                  value={value}\r\n                  error={error}\r\n                  showMore={showMore}\r\n                />\r\n              )}\r\n            </div>\r\n          );\r\n        }\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Calls;\r\n","import { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { hashVote, toEthSignedMessageHash } from 'utils';\r\n\r\nimport { Modal } from '../Modal';\r\n\r\nconst Wrapper = styled.div`\r\n  ${({ theme }) => theme.flexColumnWrap}\r\n  margin: 5px 0px;\r\n  padding: 5px 20px;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.backgroundColor};\r\n  text-align: left;\r\n`;\r\n\r\nconst SignedVoteDetails = styled.div`\r\n  textAlign: center,\r\n  fontSize: 15px,\r\n  maxWidth: 100% - 20px\r\n`;\r\n\r\nexport interface ModalProps {\r\n  onConfirm?: (any) => void;\r\n  onCancel?: () => void;\r\n  voteDecision: null | number;\r\n  positive: number;\r\n  negative: number;\r\n  toAdd: number;\r\n  voteDetails: {\r\n    votingMachine: string;\r\n    proposalId: string;\r\n    voter: string;\r\n    decision: string;\r\n    repAmount: string;\r\n    signVote: boolean;\r\n  };\r\n}\r\n\r\nexport const ConfirmVoteModal: React.FC<ModalProps> = ({\r\n  onCancel,\r\n  onConfirm,\r\n  voteDecision,\r\n  positive,\r\n  negative,\r\n  toAdd,\r\n  voteDetails,\r\n}) => {\r\n  const header = (\r\n    <div>Confirm vote {voteDecision === 1 ? 'for' : 'against'} proposal</div>\r\n  );\r\n\r\n  const [hashToETHMessage, setHashToETHMessage] = useState(true);\r\n  const [shareSignatureOnOrbitDB, setShareSignatureOnOrbitDB] = useState(true);\r\n  const [shareSignatureOnRinkeby, setShareSignatureOnRinkeby] = useState(false);\r\n\r\n  const hashedVote = hashVote(\r\n    voteDetails.votingMachine,\r\n    voteDetails.proposalId,\r\n    voteDetails.voter,\r\n    voteDetails.decision,\r\n    voteDetails.repAmount\r\n  );\r\n\r\n  return (\r\n    <Modal\r\n      header={header}\r\n      isOpen={!(voteDecision === 0)}\r\n      onDismiss={onCancel}\r\n      onCancel={onCancel}\r\n      onConfirm={() => {\r\n        let voteConfirmed = {\r\n          ...voteDetails,\r\n          networks: [shareSignatureOnOrbitDB, shareSignatureOnRinkeby],\r\n          hashToETHMessage,\r\n        };\r\n        onConfirm(voteConfirmed);\r\n      }}\r\n    >\r\n      <Wrapper>\r\n        {voteDetails.signVote ? (\r\n          <b>Confirm vote signature</b>\r\n        ) : (\r\n          <b>Confirm vote transaction</b>\r\n        )}\r\n        <div>Vote on voting machine contract: {voteDetails.votingMachine}</div>\r\n        <div>\r\n          Vote in proposal: <small>{voteDetails.proposalId}</small>\r\n        </div>\r\n        <div>\r\n          Vote for decision: {voteDetails.decision === '1' ? 'YES' : 'NO'}\r\n        </div>\r\n        <div>Vote with REP amount: {voteDetails.repAmount}</div>\r\n        <div>Vote with REP percentage: {toAdd}%</div>\r\n        <br></br>\r\n\r\n        {voteDetails.signVote && (\r\n          <SignedVoteDetails>\r\n            <strong>Vote Hash:</strong>\r\n            <div>\r\n              <i>\r\n                keccak256(votingMachine, proposalId, voter, decision, repAmount)\r\n              </i>\r\n            </div>\r\n            <span style={{ fontWeight: !hashToETHMessage ? 'bold' : 'normal' }}>\r\n              {hashedVote}\r\n            </span>\r\n            <div>\r\n              Hash to ETH message (disable for hardware wallets){' '}\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={hashToETHMessage}\r\n                onChange={() => setHashToETHMessage(!hashToETHMessage)}\r\n              ></input>\r\n            </div>\r\n            <br></br>\r\n\r\n            {hashToETHMessage && (\r\n              <div>\r\n                <strong>ETH message to be signed:</strong>\r\n                <div>\r\n                  Domain separator appended to the vote hash, more info in{' '}\r\n                  <a href=\"https://solidity-by-example.org/signature/\">\r\n                    solidity signature example\r\n                  </a>\r\n                </div>\r\n                <strong>{toEthSignedMessageHash(hashedVote)}</strong>\r\n                <br></br>\r\n                <br></br>\r\n              </div>\r\n            )}\r\n\r\n            <strong>Distribute signature On:</strong>\r\n            <div>\r\n              OrbitDB{' '}\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={shareSignatureOnOrbitDB}\r\n                onChange={() =>\r\n                  setShareSignatureOnOrbitDB(!shareSignatureOnOrbitDB)\r\n                }\r\n              ></input>\r\n            </div>\r\n            <div>\r\n              Rinkeby (Not recommended, needs an extra signature){' '}\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={shareSignatureOnRinkeby}\r\n                onChange={() =>\r\n                  setShareSignatureOnRinkeby(!shareSignatureOnRinkeby)\r\n                }\r\n              ></input>\r\n            </div>\r\n          </SignedVoteDetails>\r\n        )}\r\n      </Wrapper>\r\n    </Modal>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport moment from 'moment';\r\nimport {\r\n  FiThumbsDown,\r\n  FiThumbsUp,\r\n  FiWifi,\r\n  FiWifiOff,\r\n  FiArrowUp,\r\n} from 'react-icons/fi';\r\nimport { useLocation } from 'react-router-dom';\r\nimport {\r\n  Question,\r\n  AmountBadge,\r\n  HorizontalSeparator,\r\n  BlockchainLink,\r\n} from 'components/common';\r\nimport { ConfirmVoteModal } from 'components/ConfirmVoteModal';\r\nimport {\r\n  TextCenter,\r\n  SpaceAroundRow,\r\n  Vote,\r\n  AmountInput,\r\n  PositiveSummary,\r\n  NegativeSummary,\r\n  SummaryTotal,\r\n  SummaryDetails,\r\n  ActionButton,\r\n} from '../styles';\r\n\r\nimport { useContext } from 'contexts';\r\nimport {\r\n  bnum,\r\n  isVoteNo,\r\n  isVoteYes,\r\n  parseSignedVoteMessage,\r\n  toPercentage,\r\n  verifySignedVote,\r\n} from 'utils';\r\nimport { utils } from 'ethers';\r\n\r\nconst Votes = () => {\r\n  const {\r\n    context: {\r\n      configStore,\r\n      daoStore,\r\n      providerStore,\r\n      daoService,\r\n      orbitDBService,\r\n    },\r\n  } = useContext();\r\n\r\n  //State\r\n  const [signVote, setSignVote] = useState(false);\r\n  const [decision, setDecision] = useState(0);\r\n  const [votePercentage, setVotePercentage] = useState(0);\r\n  const [signedVotesOfProposal, setSignedVotesOfProposal] = useState([]);\r\n  const [loadingSignedOrbitDBVotes, setLoadingSignedOrbitDBVotes] =\r\n    useState(true);\r\n\r\n  // We should get the ID in another way\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n\r\n  const proposal = daoStore.getProposal(proposalId);\r\n  const proposalEvents = daoStore.getProposalEvents(proposalId);\r\n  const { account } = providerStore.getActiveWeb3React();\r\n  const signedVoteMessageId = utils.id(`dxvote:${proposalId}`);\r\n  const { finishTime } = daoStore.getProposalStatus(proposalId);\r\n  const votingMachineOfProposal =\r\n    daoStore.getVotingMachineOfProposal(proposalId);\r\n  const finishTimeReached = finishTime.toNumber() < moment().unix();\r\n  const isDXDVotingMachine =\r\n    configStore.getNetworkContracts().votingMachines[\r\n      votingMachineOfProposal.address\r\n    ].type == 'DXDVotingMachine';\r\n\r\n  orbitDBService.getLogs(signedVoteMessageId).then(signedVoteMessages => {\r\n    console.debug('[OrbitDB messages]', signedVoteMessages);\r\n    signedVoteMessages.map(signedVoteMessageRaw => {\r\n      const signedVoteMessage = parseSignedVoteMessage(signedVoteMessageRaw);\r\n      if (signedVoteMessage.valid) {\r\n        const alreadyAdded =\r\n          signedVotesOfProposal.findIndex(\r\n            s => s.voter == signedVoteMessage.voter\r\n          ) > -1 ||\r\n          proposalEvents.votes.findIndex(\r\n            s => s.voter == signedVoteMessage.voter\r\n          ) > -1;\r\n\r\n        const repOfVoterForProposal = daoStore.getRepAt(\r\n          signedVoteMessage.voter,\r\n          proposal.creationEvent.blockNumber\r\n        ).userRep;\r\n\r\n        if (\r\n          !alreadyAdded &&\r\n          repOfVoterForProposal >= bnum(signedVoteMessage.repAmount)\r\n        ) {\r\n          signedVotesOfProposal.push({\r\n            voter: signedVoteMessage.voter,\r\n            vote: signedVoteMessage.decision,\r\n            amount: bnum(signedVoteMessage.repAmount),\r\n            signature: signedVoteMessage.signature,\r\n            source: 'orbitDB',\r\n          });\r\n        }\r\n      }\r\n    });\r\n    setSignedVotesOfProposal(signedVotesOfProposal);\r\n    setLoadingSignedOrbitDBVotes(false);\r\n  });\r\n\r\n  let votedAmount = bnum(0);\r\n\r\n  proposalEvents.votes.map(vote => {\r\n    if (vote.voter === account) {\r\n      votedAmount = bnum(vote.amount);\r\n    }\r\n  });\r\n\r\n  let positiveVotesCount = proposalEvents.votes.filter(vote =>\r\n    isVoteYes(vote.vote)\r\n  ).length;\r\n\r\n  let negativeVotesCount = proposalEvents.votes.filter(vote =>\r\n    isVoteNo(vote.vote)\r\n  ).length;\r\n\r\n  const {\r\n    userRep: userRepAtProposalCreation,\r\n    totalSupply: totalRepAtProposalCreation,\r\n  } = daoStore.getRepAt(account, proposal.creationEvent.blockNumber);\r\n\r\n  const repPercentageAtCreation = toPercentage(\r\n    userRepAtProposalCreation.div(totalRepAtProposalCreation)\r\n  ).toFixed(2);\r\n\r\n  const positiveVotes = toPercentage(\r\n    proposal.positiveVotes.div(totalRepAtProposalCreation)\r\n  ).toFixed(2, 4);\r\n\r\n  const negativeVotes = toPercentage(\r\n    proposal.negativeVotes.div(totalRepAtProposalCreation)\r\n  ).toFixed(2, 4);\r\n\r\n  const totalPositiveSignedVotes = toPercentage(\r\n    signedVotesOfProposal\r\n      .filter(signedVote => isVoteYes(signedVote.vote))\r\n      .reduce(function (acc, obj) {\r\n        return acc.plus(obj.amount);\r\n      }, bnum(0))\r\n      .div(totalRepAtProposalCreation)\r\n  ).toFixed(2, 4);\r\n\r\n  const totalNegativeSignedVotes = toPercentage(\r\n    signedVotesOfProposal\r\n      .filter(signedVote => isVoteNo(signedVote.vote))\r\n      .reduce(function (acc, obj) {\r\n        return acc.plus(obj.amount);\r\n      }, bnum(0))\r\n      .div(totalRepAtProposalCreation)\r\n  ).toFixed(2, 4);\r\n\r\n  if (Number(repPercentageAtCreation) > 0 && votePercentage === 0) {\r\n    setVotePercentage(Number(repPercentageAtCreation));\r\n  }\r\n\r\n  // Events Handlers\r\n  const onVoteValueChange = event => {\r\n    setVotePercentage(\r\n      event.target.value < repPercentageAtCreation\r\n        ? event.target.value\r\n        : repPercentageAtCreation\r\n    );\r\n  };\r\n\r\n  const executeSignedVote = function (signedVote) {\r\n    daoService.executeSignedVote(\r\n      votingMachineOfProposal.address,\r\n      proposalId,\r\n      signedVote.voter,\r\n      signedVote.vote,\r\n      signedVote.amount.toString(),\r\n      signedVote.signature\r\n    );\r\n  };\r\n\r\n  const submitVote = async function (voteDetails: {\r\n    votingMachine: string;\r\n    proposalId: string;\r\n    voter: string;\r\n    decision: string;\r\n    repAmount: string;\r\n    signVote: boolean;\r\n    networks: boolean[];\r\n    hashToETHMessage: boolean;\r\n  }) {\r\n    if (voteDetails.signVote) {\r\n      const voteSignature = await daoService.signVote(\r\n        voteDetails.votingMachine,\r\n        voteDetails.proposalId,\r\n        voteDetails.decision,\r\n        voteDetails.repAmount,\r\n        voteDetails.hashToETHMessage\r\n      );\r\n      if (\r\n        verifySignedVote(\r\n          voteDetails.votingMachine,\r\n          voteDetails.proposalId,\r\n          voteDetails.voter,\r\n          voteDetails.decision,\r\n          voteDetails.repAmount,\r\n          voteSignature\r\n        )\r\n      ) {\r\n        if (voteDetails.networks[0])\r\n          orbitDBService.addLog(\r\n            utils.id(`dxvote:${proposalId}`),\r\n            `signedVote:${voteDetails.votingMachine}:${voteDetails.proposalId}:${voteDetails.voter}:${voteDetails.decision}:${voteDetails.repAmount}:${voteSignature}`\r\n          );\r\n      }\r\n    } else {\r\n      daoService.vote(\r\n        voteDetails.decision,\r\n        voteDetails.repAmount,\r\n        voteDetails.proposalId\r\n      );\r\n    }\r\n\r\n    setDecision(0);\r\n  };\r\n\r\n  // TODO:\r\n  // This Component could be abstracted so much!\r\n  // <Counts> <NewVote> each one getting proposalEvents and iterating and counting.\r\n  // and Summary can be based on polarity <Summary polarity={positive|negative} /> and reused.\r\n  return (\r\n    <>\r\n      <SpaceAroundRow>\r\n        <strong>\r\n          Confirmed Votes <Question question=\"4\" />\r\n        </strong>\r\n      </SpaceAroundRow>\r\n      <SpaceAroundRow>\r\n        <PositiveSummary>\r\n          <SummaryTotal>\r\n            <AmountBadge color=\"green\">{positiveVotesCount}</AmountBadge>\r\n            {`${positiveVotes}%`}\r\n          </SummaryTotal>\r\n          <HorizontalSeparator />\r\n          <SummaryDetails>\r\n            {proposalEvents?.votes\r\n              .filter(voteEvent => isVoteYes(voteEvent.vote))\r\n              .map((voteEvent, i) => (\r\n                <Vote key={`vote-pos-${i}`}>\r\n                  <BlockchainLink\r\n                    size=\"short\"\r\n                    type=\"user\"\r\n                    text={voteEvent.voter}\r\n                  />\r\n                  <span>\r\n                    {bnum(voteEvent.amount)\r\n                      .times('100')\r\n                      .div(totalRepAtProposalCreation)\r\n                      .toFixed(2, 4)}\r\n                    %\r\n                  </span>\r\n                </Vote>\r\n              ))}\r\n          </SummaryDetails>\r\n        </PositiveSummary>\r\n        <NegativeSummary>\r\n          <SummaryTotal>\r\n            <AmountBadge color=\"red\">{negativeVotesCount}</AmountBadge>\r\n            <span>{`${negativeVotes}%`}</span>\r\n          </SummaryTotal>\r\n          <HorizontalSeparator />\r\n          <SummaryDetails>\r\n            {proposalEvents?.votes\r\n              ?.filter(voteEvent => isVoteNo(voteEvent.vote))\r\n              .map((voteEvent, i) => (\r\n                <Vote key={`vote-neg-${i}`}>\r\n                  <BlockchainLink\r\n                    size=\"short\"\r\n                    type=\"user\"\r\n                    text={voteEvent.voter}\r\n                  />\r\n                  <span>\r\n                    {bnum(voteEvent.amount)\r\n                      .times('100')\r\n                      .div(totalRepAtProposalCreation)\r\n                      .toFixed(2, 4)}\r\n                    %\r\n                  </span>\r\n                </Vote>\r\n              ))}\r\n          </SummaryDetails>\r\n        </NegativeSummary>\r\n      </SpaceAroundRow>\r\n\r\n      {!loadingSignedOrbitDBVotes && (\r\n        <div>\r\n          <SpaceAroundRow>\r\n            <strong>\r\n              Signed Votes <Question question=\"4\" /> <br />\r\n              {!isDXDVotingMachine && <small>Non-Executable</small>}\r\n            </strong>\r\n          </SpaceAroundRow>\r\n          <SpaceAroundRow>\r\n            <PositiveSummary>\r\n              <SummaryTotal>\r\n                <AmountBadge color=\"green\">\r\n                  {\r\n                    signedVotesOfProposal.filter(signedVote =>\r\n                      isVoteYes(signedVote.vote)\r\n                    ).length\r\n                  }\r\n                </AmountBadge>\r\n                {`${totalPositiveSignedVotes}%`}\r\n              </SummaryTotal>\r\n              <HorizontalSeparator />\r\n              <SummaryDetails>\r\n                {signedVotesOfProposal\r\n                  .filter(signedVote => isVoteYes(signedVote.vote))\r\n                  .map((signedVote, i) => (\r\n                    <Vote key={`vote-pos-${i}`}>\r\n                      <BlockchainLink\r\n                        size=\"short\"\r\n                        type=\"user\"\r\n                        text={signedVote.voter}\r\n                      />\r\n                      <span>\r\n                        {bnum(signedVote.amount)\r\n                          .times('100')\r\n                          .div(totalRepAtProposalCreation)\r\n                          .toFixed(2, 4)}\r\n                        %\r\n                      </span>\r\n                      {isDXDVotingMachine && (\r\n                        <ActionButton\r\n                          style={{\r\n                            height: '15px',\r\n                            margin: '0px 0px 0px 2px',\r\n                            maxWidth: '15px',\r\n                            textAlign: 'center',\r\n                          }}\r\n                          color=\"#536DFE\"\r\n                          onClick={() => executeSignedVote(signedVote)}\r\n                        >\r\n                          <FiArrowUp />\r\n                        </ActionButton>\r\n                      )}\r\n                    </Vote>\r\n                  ))}\r\n              </SummaryDetails>\r\n            </PositiveSummary>\r\n            <NegativeSummary>\r\n              <SummaryTotal>\r\n                <AmountBadge color=\"red\">\r\n                  {\r\n                    signedVotesOfProposal.filter(signedVote =>\r\n                      isVoteNo(signedVote.vote)\r\n                    ).length\r\n                  }\r\n                </AmountBadge>\r\n                {`${totalNegativeSignedVotes}%`}\r\n              </SummaryTotal>\r\n              <HorizontalSeparator />\r\n              <SummaryDetails>\r\n                {signedVotesOfProposal\r\n                  ?.filter(signedVote => isVoteNo(signedVote.vote))\r\n                  .map((signedVote, i) => (\r\n                    <Vote key={`vote-neg-${i}`}>\r\n                      <BlockchainLink\r\n                        size=\"short\"\r\n                        type=\"user\"\r\n                        text={signedVote.voter}\r\n                      />\r\n                      <span>\r\n                        {bnum(signedVote.amount)\r\n                          .times('100')\r\n                          .div(totalRepAtProposalCreation)\r\n                          .toFixed(2, 4)}\r\n                        %\r\n                      </span>\r\n                      {isDXDVotingMachine && (\r\n                        <ActionButton\r\n                          style={{\r\n                            height: '15px',\r\n                            margin: '0px 0px 0px 2px',\r\n                            maxWidth: '15px',\r\n                            textAlign: 'center',\r\n                          }}\r\n                          color=\"#536DFE\"\r\n                          onClick={() => executeSignedVote(signedVote)}\r\n                        >\r\n                          <FiArrowUp />\r\n                        </ActionButton>\r\n                      )}\r\n                    </Vote>\r\n                  ))}\r\n              </SummaryDetails>\r\n            </NegativeSummary>\r\n          </SpaceAroundRow>\r\n        </div>\r\n      )}\r\n\r\n      {Number(repPercentageAtCreation) > 0 && (\r\n        <small>{repPercentageAtCreation} % REP at proposal creation</small>\r\n      )}\r\n\r\n      {(proposal.stateInVotingMachine === 3 ||\r\n        proposal.stateInVotingMachine === 4) &&\r\n        votingMachineOfProposal.params.votersReputationLossRatio.toNumber() >\r\n          0 &&\r\n        finishTime.toNumber() > 0 && (\r\n          <TextCenter>\r\n            <small>\r\n              Voter REP Loss Ratio:\r\n              {votingMachineOfProposal.params.votersReputationLossRatio.toString()}\r\n              %\r\n            </small>\r\n          </TextCenter>\r\n        )}\r\n\r\n      {account &&\r\n      !finishTimeReached &&\r\n      votedAmount.toNumber() === 0 &&\r\n      Number(repPercentageAtCreation) > 0 &&\r\n      proposal.stateInVotingMachine >= 3 ? (\r\n        <SpaceAroundRow>\r\n          <ConfirmVoteModal\r\n            voteDecision={decision}\r\n            toAdd={votePercentage}\r\n            positive={parseFloat(positiveVotes)}\r\n            negative={parseFloat(negativeVotes)}\r\n            onConfirm={submitVote}\r\n            onCancel={() => setDecision(0)}\r\n            voteDetails={{\r\n              votingMachine: votingMachineOfProposal.address,\r\n              proposalId: proposalId,\r\n              voter: account,\r\n              decision: decision.toString(),\r\n              repAmount: totalRepAtProposalCreation\r\n                .times(bnum(votePercentage))\r\n                .div('100')\r\n                .toFixed(0, 1)\r\n                .toString(),\r\n              signVote: signVote,\r\n            }}\r\n          />\r\n          <AmountInput\r\n            type=\"number\"\r\n            placeholder=\"REP\"\r\n            name=\"votePercentage\"\r\n            max={repPercentageAtCreation}\r\n            value={votePercentage}\r\n            min=\"0\"\r\n            step={\r\n              votePercentage > 10\r\n                ? '1'\r\n                : votePercentage > 1\r\n                ? '0.01'\r\n                : votePercentage > 0.1\r\n                ? '0.001'\r\n                : '0.00001'\r\n            }\r\n            id=\"votePercentage\"\r\n            onChange={onVoteValueChange}\r\n            style={{ flex: 2 }}\r\n          />\r\n          <ActionButton\r\n            style={{ flex: 1, maxWidth: '20px', textAlign: 'center' }}\r\n            color=\"green\"\r\n            onClick={() => setDecision(1)}\r\n          >\r\n            <FiThumbsUp />\r\n          </ActionButton>\r\n          <ActionButton\r\n            style={{ flex: 1, maxWidth: '20px', textAlign: 'center' }}\r\n            color=\"red\"\r\n            onClick={() => setDecision(2)}\r\n          >\r\n            <FiThumbsDown />\r\n          </ActionButton>\r\n          <ActionButton\r\n            style={{ flex: 1, maxWidth: '20px', textAlign: 'center' }}\r\n            color=\"#536DFE\"\r\n            onClick={() => setSignVote(!signVote)}\r\n          >\r\n            {signVote ? <FiWifiOff /> : <FiWifi />}\r\n          </ActionButton>\r\n        </SpaceAroundRow>\r\n      ) : (\r\n        votedAmount.toNumber() !== 0 && (\r\n          <SpaceAroundRow>\r\n            <TextCenter>\r\n              {`\r\n              Already voted ${votedAmount.toNumber() > 0 ? 'for' : 'against'}\r\n              with\r\n              ${votedAmount\r\n                .times('100')\r\n                .div(totalRepAtProposalCreation)\r\n                .toFixed(2, 4)}\r\n              % REP`}\r\n            </TextCenter>\r\n          </SpaceAroundRow>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default Votes;\r\n","import { useWeb3React } from '@web3-react/core';\r\nimport useEtherSWRHook, {\r\n  etherKeyFuncInterface,\r\n  ethKeyInterface,\r\n  ethKeysInterface,\r\n  EthSWRConfigInterface,\r\n} from 'ether-swr';\r\nimport { useEffect } from 'react';\r\nimport { SWRResponse, Fetcher } from 'swr';\r\nimport { usePrevious } from '../usePrevious';\r\n\r\nfunction useEtherSWR<Data = any, Error = any>(\r\n  key: ethKeyInterface | ethKeysInterface | etherKeyFuncInterface\r\n): SWRResponse<Data, Error>;\r\nfunction useEtherSWR<Data = any, Error = any>(\r\n  key: ethKeyInterface | ethKeysInterface | etherKeyFuncInterface,\r\n  config?: EthSWRConfigInterface<Data, Error>\r\n): SWRResponse<Data, Error>;\r\nfunction useEtherSWR<Data = any, Error = any>(\r\n  key: ethKeyInterface | ethKeysInterface | etherKeyFuncInterface,\r\n  fetcher?: Fetcher<Data>,\r\n  config?: EthSWRConfigInterface<Data, Error>\r\n): SWRResponse<Data, Error>;\r\nfunction useEtherSWR<Data = any, Error = any>(\r\n  ...args: any[]\r\n): SWRResponse<Data, Error> {\r\n  // @ts-ignore - TS gets confused here about the number of args\r\n  const swrResponse = useEtherSWRHook<Data, Error>(...args);\r\n  const { chainId } = useWeb3React();\r\n\r\n  const prevChainId = usePrevious(chainId);\r\n  useEffect(() => {\r\n    if (prevChainId && chainId !== prevChainId) {\r\n      swrResponse.mutate(null);\r\n    }\r\n  }, [chainId, prevChainId, swrResponse]);\r\n\r\n  return swrResponse;\r\n}\r\n\r\nexport default useEtherSWR;\r\n","// modified from https://usehooks.com/usePrevious/\r\nimport { useEffect, useRef } from 'react';\r\n\r\nexport function usePrevious<T>(value: T) {\r\n  const ref = useRef<T>();\r\n\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n\r\n  return ref.current;\r\n}\r\n","import { useWeb3React } from '@web3-react/core';\r\nimport { providers } from 'ethers';\r\nimport { useMemo } from 'react';\r\nimport { getContract } from '../utils/contracts';\r\nimport useEtherSWR from './ether-swr/useEtherSWR';\r\nimport { SWRResponse } from 'swr';\r\n\r\nexport const useContract = function (address: string, abi: any[]) {\r\n  const { library } = useWeb3React();\r\n\r\n  const resolver = useMemo(() => {\r\n    try {\r\n      const provider = new providers.Web3Provider(library.currentProvider);\r\n      return getContract(address, abi, provider);\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }, [library, abi, address]);\r\n\r\n  return resolver;\r\n};\r\n\r\nexport const useContractCall = (\r\n  address: string,\r\n  abi: any[],\r\n  functionName: string,\r\n  params: string[]\r\n): SWRResponse => {\r\n  return useContractCalls([\r\n    {\r\n      address,\r\n      abi,\r\n      functionName,\r\n      params,\r\n    },\r\n  ]);\r\n};\r\n\r\nexport const useContractCalls = (\r\n  calls: {\r\n    address: string;\r\n    abi: any[];\r\n    functionName: string;\r\n    params: string[];\r\n  }[]\r\n): SWRResponse => {\r\n  return useEtherSWR(\r\n    calls.map(call => {\r\n      return [call.address, call.functionName, ...call.params];\r\n    }),\r\n    {\r\n      ABIs: new Map(calls.map(call => [call.address, call.abi])),\r\n    }\r\n  );\r\n};\r\n","import { bnum } from 'utils';\r\nimport { BigNumber } from 'utils/bignumber';\r\nimport { useContractCalls } from './useContract';\r\n\r\nconst ERC20JSON = require('../contracts/ERC20.json');\r\n\r\nexport const useBalance = (\r\n  fromAddress: string,\r\n  assetAddress: string\r\n): BigNumber => {\r\n  const { data, error } = useContractCalls([\r\n    {\r\n      address: assetAddress,\r\n      abi: ERC20JSON.abi,\r\n      functionName: 'balanceOf',\r\n      params: [fromAddress],\r\n    },\r\n  ]);\r\n  if (error) return bnum('0');\r\n  else if (!data) return bnum('0');\r\n  else return bnum(data[0]);\r\n};\r\n\r\nexport const useAllowance = (\r\n  tokenAddress: string,\r\n  fromAddress: string,\r\n  toAddress: string\r\n): BigNumber => {\r\n  const { data, error } = useContractCalls([\r\n    {\r\n      address: tokenAddress,\r\n      abi: ERC20JSON.abi,\r\n      functionName: 'allowance',\r\n      params: [fromAddress, toAddress],\r\n    },\r\n  ]);\r\n  if (error) return bnum('0');\r\n  else if (!data) return bnum('0');\r\n  else return bnum(data[0]);\r\n};\r\n\r\nexport const useBalances = (\r\n  calls: {\r\n    fromAddress: string;\r\n    assetAddress: string;\r\n  }[]\r\n): any => {\r\n  const { data, error } = useContractCalls(\r\n    calls.map(call => ({\r\n      address: call.assetAddress,\r\n      abi: ERC20JSON.abi,\r\n      functionName: 'balanceOf',\r\n      params: [call.fromAddress],\r\n    }))\r\n  );\r\n  if (error) return [];\r\n  else if (!data) return [];\r\n  else return data;\r\n};\r\n","import { useState } from 'react';\r\nimport moment from 'moment';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { useContext } from 'contexts';\r\nimport {\r\n  bnum,\r\n  calculateStakes,\r\n  formatBalance,\r\n  denormalizeBalance,\r\n} from 'utils';\r\n\r\nimport { FiThumbsUp, FiThumbsDown } from 'react-icons/fi';\r\n\r\nimport {\r\n  Question,\r\n  AmountBadge,\r\n  BlockchainLink,\r\n  HorizontalSeparator,\r\n} from 'components/common';\r\n\r\nimport {\r\n  ActionArea,\r\n  SpaceAroundRow,\r\n  Vote,\r\n  AmountInput,\r\n  PositiveSummary,\r\n  NegativeSummary,\r\n  SummaryDetails,\r\n  SummaryTotal,\r\n  ActionButton,\r\n} from '../styles';\r\nimport { useAllowance } from 'hooks/useERC20';\r\nimport { parseUnits } from 'ethers/lib/utils';\r\n\r\nconst Stakes = () => {\r\n  const {\r\n    context: { daoStore, configStore, providerStore, daoService },\r\n  } = useContext();\r\n\r\n  const [stakeAmount, setStakeAmount] = useState(0);\r\n  // We should get the ID in another way\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n\r\n  const proposal = daoStore.getProposal(proposalId);\r\n  const proposalEvents = daoStore.getProposalEvents(proposalId);\r\n  const { account } = providerStore.getActiveWeb3React();\r\n  const scheme = daoStore.getScheme(proposal.scheme);\r\n\r\n  let stakedAmount = bnum(0);\r\n  let positiveStakesCount = proposalEvents.stakes.filter(\r\n    stake => stake.vote.toString() === '1'\r\n  ).length;\r\n  let negativeStakesCount = proposalEvents.stakes.filter(\r\n    stake => stake.vote.toString() === '2'\r\n  ).length;\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const votingMachines = networkContracts.votingMachines;\r\n\r\n  const redeemsLeft = daoStore.getUserRedeemsLeft(account);\r\n\r\n  const votingMachineOfProposal =\r\n    daoStore.getVotingMachineOfProposal(proposalId);\r\n\r\n  const votingMachineTokenName =\r\n    votingMachines[votingMachineOfProposal.address].type == 'DXDVotingMachine'\r\n      ? 'DXD'\r\n      : 'GEN';\r\n\r\n  const votingMachineTokenAllowed = useAllowance(\r\n    votingMachines[votingMachineOfProposal.address].token,\r\n    account,\r\n    votingMachineOfProposal.address\r\n  );\r\n\r\n  const votingMachineTokenApproved = votingMachineTokenAllowed.gt(\r\n    bnum(parseUnits('10000'))\r\n  );\r\n\r\n  const votingParameters =\r\n    daoStore.getVotingMachineOfProposal(proposalId).params;\r\n\r\n  proposalEvents.stakes.map(stake => {\r\n    if (stake.staker === account && stake.vote.toString() === '1') {\r\n      stakedAmount = stakedAmount.plus(stake.amount);\r\n    } else if (stake.staker === account && stake.vote.toString() === '2') {\r\n      stakedAmount = stakedAmount.minus(stake.amount);\r\n    }\r\n  });\r\n\r\n  const { recommendedStakeToBoost, recommendedStakeToUnBoost } =\r\n    calculateStakes(\r\n      votingParameters.thresholdConst,\r\n      scheme.boostedProposals,\r\n      proposal.stateInVotingMachine === 4\r\n        ? daoStore.getAmountOfProposalsPreBoostedInScheme(scheme.address) - 1\r\n        : daoStore.getAmountOfProposalsPreBoostedInScheme(scheme.address),\r\n      proposal.positiveStakes,\r\n      proposal.negativeStakes\r\n    );\r\n\r\n  if (Number(votingMachineTokenApproved) > 0 && stakeAmount === 0) {\r\n    setStakeAmount(\r\n      Number(formatBalance(recommendedStakeToBoost, 18, 1, false))\r\n    );\r\n  }\r\n\r\n  const { finishTime } = daoStore.getProposalStatus(proposalId);\r\n  const finishTimeReached = finishTime.toNumber() < moment().unix();\r\n\r\n  // Event Handlers\r\n  function onStakeAmountChange(event) {\r\n    setStakeAmount(event.target.value);\r\n  }\r\n\r\n  const submitStake = function (decision) {\r\n    daoService.stake(\r\n      decision,\r\n      denormalizeBalance(bnum(stakeAmount)).toString(),\r\n      proposalId\r\n    );\r\n  };\r\n\r\n  const redeem = function () {\r\n    if (\r\n      scheme.type === 'ContributionReward' &&\r\n      networkContracts.daostack[scheme.address].redeemer\r\n    ) {\r\n      daoService.redeemContributionReward(\r\n        networkContracts.daostack[scheme.address].redeemer,\r\n        scheme.address,\r\n        scheme.votingMachine,\r\n        proposalId,\r\n        account\r\n      );\r\n    } else {\r\n      daoService.redeem(proposalId, account);\r\n    }\r\n  };\r\n\r\n  const redeemDaoBounty = function () {\r\n    daoService.redeemDaoBounty(proposalId, account);\r\n  };\r\n\r\n  const votingMachineUsed = daoStore.getVotingMachineOfProposal(proposalId);\r\n  const approveVotingMachineToken = function () {\r\n    daoService.approveVotingMachineToken(votingMachineUsed);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SpaceAroundRow>\r\n        <strong>\r\n          Stakes <Question question=\"5\" />\r\n        </strong>\r\n      </SpaceAroundRow>\r\n      <SpaceAroundRow>\r\n        <PositiveSummary>\r\n          <SummaryTotal>\r\n            <AmountBadge color=\"green\">{positiveStakesCount}</AmountBadge>\r\n            {formatBalance(proposal.positiveStakes).toString()}\r\n            {votingMachineTokenName}\r\n          </SummaryTotal>\r\n          <HorizontalSeparator />\r\n          <SummaryDetails>\r\n            {proposalEvents &&\r\n              proposalEvents.stakes\r\n                .filter(stakeEvent => stakeEvent?.vote?.toString() === '1')\r\n                .map((stakeEvent, i) => (\r\n                  <Vote key={`stakeUp${i}`} style={{ flexDirection: 'column' }}>\r\n                    <BlockchainLink\r\n                      size=\"short\"\r\n                      type=\"user\"\r\n                      text={stakeEvent.staker}\r\n                    />\r\n                    <span>\r\n                      {formatBalance(bnum(stakeEvent.amount)).toString()}\r\n                      {votingMachineTokenName}\r\n                    </span>\r\n                  </Vote>\r\n                ))}\r\n          </SummaryDetails>\r\n        </PositiveSummary>\r\n\r\n        <NegativeSummary>\r\n          <SummaryTotal>\r\n            <AmountBadge color=\"red\">{negativeStakesCount}</AmountBadge>\r\n            {formatBalance(proposal.negativeStakes).toString()}\r\n            {votingMachineTokenName}\r\n          </SummaryTotal>\r\n          <HorizontalSeparator />\r\n          <SummaryDetails>\r\n            {proposalEvents &&\r\n              proposalEvents.stakes\r\n                .filter(stakeEvent => stakeEvent?.vote?.toString() === '2')\r\n                .map((stakeEvent, i) => (\r\n                  <Vote\r\n                    key={`stakeDown${i}`}\r\n                    style={{ flexDirection: 'column' }}\r\n                  >\r\n                    <BlockchainLink\r\n                      size=\"short\"\r\n                      type=\"user\"\r\n                      text={stakeEvent.staker}\r\n                    />\r\n                    <span>\r\n                      {formatBalance(bnum(stakeEvent.amount)).toString()}\r\n                      {votingMachineTokenName}\r\n                    </span>\r\n                  </Vote>\r\n                ))}\r\n          </SummaryDetails>\r\n        </NegativeSummary>\r\n      </SpaceAroundRow>\r\n\r\n      {stakedAmount.toNumber() > 0 ? (\r\n        <SpaceAroundRow>\r\n          {`Already staked ${\r\n            stakedAmount.toNumber() > 0 ? 'for' : 'against'\r\n          } with `}\r\n          {formatBalance(stakedAmount).toString()} {votingMachineTokenName}\r\n        </SpaceAroundRow>\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n\r\n      {account &&\r\n      !finishTimeReached &&\r\n      (proposal.stateInVotingMachine === 3 ||\r\n        proposal.stateInVotingMachine === 4) &&\r\n      !votingMachineTokenApproved ? (\r\n        <SpaceAroundRow>\r\n          <ActionArea>\r\n            <small>Approve {votingMachineTokenName} to stake</small>\r\n            <ActionButton\r\n              color=\"blue\"\r\n              onClick={() => approveVotingMachineToken()}\r\n            >\r\n              Approve {votingMachineTokenName}\r\n            </ActionButton>\r\n          </ActionArea>\r\n        </SpaceAroundRow>\r\n      ) : (\r\n        account &&\r\n        !finishTimeReached &&\r\n        (proposal.stateInVotingMachine === 3 ||\r\n          proposal.stateInVotingMachine === 4) && (\r\n          <div>\r\n            {Number(recommendedStakeToBoost) > 0 && (\r\n              <small>\r\n                Stake ~\r\n                {formatBalance(\r\n                  recommendedStakeToBoost,\r\n                  18,\r\n                  1,\r\n                  false\r\n                ).toString()}\r\n                {votingMachineTokenName} to boost\r\n              </small>\r\n            )}\r\n            {Number(recommendedStakeToUnBoost) > 0 && (\r\n              <small>\r\n                Stake ~\r\n                {formatBalance(\r\n                  recommendedStakeToUnBoost,\r\n                  18,\r\n                  1,\r\n                  false\r\n                ).toString()}\r\n                {votingMachineTokenName} to unboost\r\n              </small>\r\n            )}\r\n            <SpaceAroundRow>\r\n              <AmountInput\r\n                type=\"number\"\r\n                placeholder={votingMachineTokenName}\r\n                name=\"stakeAmount\"\r\n                value={stakeAmount}\r\n                id=\"stakeAmount\"\r\n                step=\"0.01\"\r\n                min=\"0\"\r\n                onChange={onStakeAmountChange}\r\n                style={{ flex: 2 }}\r\n              />\r\n              <ActionButton\r\n                style={{ flex: 1, maxWidth: '20px', textAlign: 'center' }}\r\n                color=\"green\"\r\n                onClick={() => submitStake(1)}\r\n              >\r\n                <FiThumbsUp />\r\n              </ActionButton>\r\n              <ActionButton\r\n                style={{ flex: 1, maxWidth: '20px', textAlign: 'center' }}\r\n                color=\"red\"\r\n                onClick={() => submitStake(2)}\r\n              >\r\n                <FiThumbsDown />\r\n              </ActionButton>\r\n            </SpaceAroundRow>\r\n          </div>\r\n        )\r\n      )}\r\n\r\n      {proposal.stateInVotingMachine < 3 &&\r\n        (redeemsLeft.rep.indexOf(proposalId) > -1 ||\r\n          redeemsLeft.stake.indexOf(proposalId) > -1) && (\r\n          <SpaceAroundRow\r\n            style={{\r\n              borderTop: '1px solid gray',\r\n              margin: '0px 10px',\r\n              justifyContent: 'center',\r\n            }}\r\n          >\r\n            <ActionButton color=\"blue\" onClick={() => redeem()}>\r\n              Redeem\r\n            </ActionButton>\r\n          </SpaceAroundRow>\r\n        )}\r\n\r\n      {account &&\r\n        proposal.stateInVotingMachine < 3 &&\r\n        redeemsLeft.bounty[proposalId] && (\r\n          <SpaceAroundRow\r\n            style={{\r\n              borderTop: '1px solid gray',\r\n              margin: '0px 10px',\r\n              justifyContent: 'center',\r\n            }}\r\n          >\r\n            <ActionButton color=\"blue\" onClick={() => redeemDaoBounty()}>\r\n              Redeem Stake Bounty\r\n            </ActionButton>\r\n          </SpaceAroundRow>\r\n        )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Stakes;\r\n","import styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport { BlockchainLink } from 'components/common';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useContext } from 'contexts';\r\nimport { WalletSchemeProposalState, VotingMachineProposalState } from 'utils';\r\n\r\nimport { SpaceAroundRow } from '../styles';\r\n\r\nconst ProposalDescription = styled.div`\r\n  margin: 0px 10px;\r\n  padding: 10px 0px;\r\n  flex-direction: column;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst Detail = styled.div`\r\n  display: flex;\r\n  align-items: baseline;\r\n  line-height: 20px;\r\n  align-content: center;\r\n  justify-items: center;\r\n  flex-wrap: no-wrap;\r\n  > * {\r\n    margin-right: 5px;\r\n  }\r\n`;\r\n\r\nconst Details = () => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n  const proposal = daoStore.getProposal(proposalId);\r\n\r\n  const scheme = daoStore.getScheme(proposal.scheme);\r\n\r\n  const boostedVoteRequiredPercentage =\r\n    scheme.boostedVoteRequiredPercentage / 100;\r\n\r\n  const { boostTime, finishTime } = daoStore.getProposalStatus(proposalId);\r\n\r\n  return (\r\n    <SpaceAroundRow>\r\n      <ProposalDescription>\r\n        <Detail>\r\n          <strong>Proposer</strong>\r\n          <small>\r\n            <BlockchainLink type=\"user\" text={proposal.proposer} toCopy />\r\n          </small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>Scheme</strong> <small>{scheme.name}</small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>Voting Parameters</strong>{' '}\r\n          <small>{proposal.paramsHash.substring(0, 10)}...</small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>State in Voting Machine </strong>\r\n          <small>\r\n            {VotingMachineProposalState[proposal.stateInVotingMachine]}\r\n          </small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>State in Scheme </strong>\r\n          <small>{WalletSchemeProposalState[proposal.stateInScheme]}</small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>Submitted Date</strong>\r\n          <small>\r\n            {moment\r\n              .unix(proposal.submittedTime.toNumber())\r\n              .format('MMMM Do YYYY, HH:mm:ss')}\r\n          </small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>Boost Date</strong>\r\n          <small>\r\n            {boostTime.toNumber() > 0\r\n              ? moment\r\n                  .unix(boostTime.toNumber())\r\n                  .format('MMMM Do YYYY, HH:mm:ss')\r\n              : '-'}\r\n          </small>\r\n        </Detail>\r\n        <Detail>\r\n          <strong>Finish Date</strong>\r\n          <small>\r\n            {moment\r\n              .unix(finishTime.toNumber())\r\n              .format('MMMM Do YYYY, HH:mm:ss')}\r\n          </small>\r\n        </Detail>\r\n\r\n        {boostedVoteRequiredPercentage > 0 && (\r\n          <Detail>\r\n            <strong> Required Boosted Vote: </strong>\r\n            <small>{boostedVoteRequiredPercentage}%</small>\r\n          </Detail>\r\n        )}\r\n      </ProposalDescription>\r\n    </SpaceAroundRow>\r\n  );\r\n};\r\nexport default Details;\r\n","import moment from 'moment';\r\nimport Countdown from 'react-countdown';\r\nimport { FiPlayCircle } from 'react-icons/fi';\r\nimport { useContext } from 'contexts';\r\n\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { bnum, isWalletScheme, PendingAction } from 'utils';\r\nimport { Question } from 'components/common';\r\n\r\nimport { SpaceAroundRow, ActionButton } from '../styles';\r\n\r\nconst Status = () => {\r\n  const {\r\n    context: { daoStore, configStore, providerStore, daoService },\r\n  } = useContext();\r\n\r\n  //State\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  // We should get the ID in another way\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n  const proposal = daoStore.getProposal(proposalId);\r\n  const { account } = providerStore.getActiveWeb3React();\r\n  const scheme = daoStore.getScheme(proposal.scheme);\r\n\r\n  const executionTimeoutTime = isWalletScheme(scheme)\r\n    ? proposal.submittedTime.plus(scheme.maxSecondsForExecution)\r\n    : bnum(0);\r\n\r\n  const executePendingAction = function (pendingAction) {\r\n    switch (pendingAction) {\r\n      case PendingAction.Redeem:\r\n        daoService.redeemContributionReward(\r\n          networkContracts.daostack[scheme.address].redeemer,\r\n          scheme.address,\r\n          scheme.votingMachine,\r\n          proposalId,\r\n          account\r\n        );\r\n        break;\r\n      case PendingAction.RedeemForBeneficiary:\r\n        daoService.executeMulticall(scheme.address, proposalId);\r\n        break;\r\n      default:\r\n        daoService.execute(proposalId);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const votingMachineUsed = daoStore.getVotingMachineOfProposal(proposalId);\r\n\r\n  const { status, boostTime, finishTime, pendingAction } =\r\n    daoStore.getProposalStatus(proposalId);\r\n\r\n  const autoBoost =\r\n    networkContracts.votingMachines[votingMachineUsed.address].type ==\r\n    'DXDVotingMachine';\r\n\r\n  return (\r\n    <>\r\n      <h2 style={{ margin: '10px 0px 0px 0px', textAlign: 'center' }}>\r\n        {status} <Question question=\"3\" />\r\n      </h2>\r\n      <SpaceAroundRow style={{ margin: '0px 10px', flexDirection: 'column' }}>\r\n        {boostTime.toNumber() > moment().unix() && (\r\n          <span className=\"timeText\">\r\n            Boost in <Countdown date={boostTime.toNumber() * 1000} />{' '}\r\n          </span>\r\n        )}\r\n        {finishTime.toNumber() > moment().unix() && (\r\n          <span className=\"timeText\">\r\n            Finish in{' '}\r\n            <Countdown\r\n              autoStart={pendingAction === 1 && !autoBoost ? false : true}\r\n              date={finishTime.toNumber() * 1000}\r\n            />\r\n            {pendingAction === 1 && !autoBoost && ' after boost'}\r\n          </span>\r\n        )}\r\n        {status === 'Pending Execution' && executionTimeoutTime.toNumber() > 0 && (\r\n          <span className=\"timeText\">\r\n            {' '}\r\n            Execution timeout in{' '}\r\n            <Countdown date={executionTimeoutTime.toNumber() * 1000} />{' '}\r\n          </span>\r\n        )}\r\n      </SpaceAroundRow>\r\n      {account && pendingAction > 0 && (\r\n        <SpaceAroundRow\r\n          style={{ flexDirection: 'column', alignItems: 'center' }}\r\n        >\r\n          <ActionButton\r\n            color=\"blue\"\r\n            onClick={() => executePendingAction(pendingAction)}\r\n          >\r\n            <FiPlayCircle /> {PendingAction[pendingAction]}{' '}\r\n          </ActionButton>\r\n        </SpaceAroundRow>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Status;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../contexts';\r\n\r\nimport MDEditor from '@uiw/react-md-editor';\r\nimport { useHistory } from 'react-router-dom';\r\nimport contentHash from 'content-hash';\r\nimport { Box, Title } from '../components/common';\r\n\r\nimport {\r\n  History,\r\n  Calls,\r\n  Votes,\r\n  Status,\r\n  Stakes,\r\n  Details,\r\n} from 'components/Proposal';\r\n\r\nconst ProposalInformationWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst InfoSidebarBox = styled(Box)`\r\n  max-width: 400px;\r\n  min-width: 300px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n  padding: 10px 15px;\r\n`;\r\n\r\nconst ProposalInfoSection = styled.div`\r\n  max-width: 900px;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  margin-right: 15px;\r\n`;\r\n\r\nconst ProposalInfoBox = styled(Box)`\r\n  max-width: 900px;\r\n  overflow-wrap: anywhere;\r\n  padding: 20px 15px 10px 15px;\r\n  justify-content: flex-start;\r\n  overflow: auto;\r\n`;\r\n\r\nconst SidebarDivider = styled.div`\r\n  border-bottom: 1px solid gray;\r\n  margin: 5px 10px;\r\n`;\r\n\r\nconst ProposalPage = observer(() => {\r\n  let history = useHistory();\r\n\r\n  const {\r\n    context: { daoStore, ipfsService },\r\n  } = useContext();\r\n\r\n  const proposalId = useLocation().pathname.split('/')[3];\r\n  const proposal = daoStore.getProposal(proposalId);\r\n  const [proposalDescription, setProposalDescription] = React.useState(\r\n    '## Getting proposal description from IPFS...'\r\n  );\r\n  const [proposalTitle, setProposalTitle] = React.useState(\r\n    proposal?.title?.length > 0\r\n      ? proposal.title\r\n      : 'Getting proposal title from IPFS...'\r\n  );\r\n\r\n  if (!proposal) {\r\n    history.push('/');\r\n    return null;\r\n  }\r\n\r\n  const proposalEvents = daoStore.getProposalEvents(proposalId);\r\n\r\n  // @ts-ignore\r\n  try {\r\n    if (proposalDescription === '## Getting proposal description from IPFS...')\r\n      ipfsService\r\n        .getContentFromIPFS(contentHash.decode(proposal.descriptionHash))\r\n        .then(data => {\r\n          try {\r\n            setProposalTitle(data.title);\r\n            setProposalDescription(data.description);\r\n          } catch (error) {\r\n            setProposalDescription(data);\r\n          }\r\n        });\r\n  } catch (error) {\r\n    console.error('[IPFS ERROR]', error);\r\n    setProposalTitle('Error getting proposal title from ipfs');\r\n    setProposalDescription('Error getting proposal description from IPFS');\r\n  }\r\n\r\n  return (\r\n    <ProposalInformationWrapper>\r\n      <ProposalInfoSection>\r\n        <ProposalInfoBox>\r\n          <Title noMargin> {proposalTitle} </Title>\r\n          <MDEditor.Markdown\r\n            source={proposalDescription}\r\n            style={{\r\n              padding: '20px 10px',\r\n              whiteSpace: 'pre-line',\r\n            }}\r\n            linkTarget=\"_blank\"\r\n            skipHtml\r\n            escapeHtml\r\n          />\r\n          {proposal.descriptionHash.length > 0 && (\r\n            <h3 style={{ margin: '0px' }}>\r\n              <small>\r\n                IPFS Document:{' '}\r\n                <a\r\n                  target=\"_blank\"\r\n                  href={`https://ipfs.io/ipfs/${contentHash.decode(\r\n                    proposal.descriptionHash\r\n                  )}`}\r\n                  rel=\"noreferrer\"\r\n                >\r\n                  ipfs://{contentHash.decode(proposal.descriptionHash)}\r\n                </a>\r\n              </small>\r\n            </h3>\r\n          )}\r\n          <Calls />\r\n        </ProposalInfoBox>\r\n\r\n        <History proposalEvents={proposalEvents}></History>\r\n      </ProposalInfoSection>\r\n      <InfoSidebarBox>\r\n        <Status />\r\n        <SidebarDivider />\r\n        <Details />\r\n        <SidebarDivider />\r\n        <Votes />\r\n        <SidebarDivider />\r\n        <Stakes />\r\n      </InfoSidebarBox>\r\n    </ProposalInformationWrapper>\r\n  );\r\n});\r\n\r\nexport default ProposalPage;\r\n","import { useContext } from 'contexts';\r\nimport { bnum } from 'utils';\r\nimport { BigNumber } from 'utils/bignumber';\r\nimport { useContractCalls } from './useContract';\r\n\r\nconst MulticallJSON = require('../contracts/Multicall.json');\r\n\r\nexport const useETHBalance = (fromAddress: string): BigNumber => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n\r\n  const { data, error } = useContractCalls([\r\n    {\r\n      address: configStore.getNetworkContracts().utils.multicall,\r\n      abi: MulticallJSON.abi,\r\n      functionName: 'getEthBalance',\r\n      params: [fromAddress],\r\n    },\r\n  ]);\r\n\r\n  if (error) return bnum('0');\r\n  else if (!data) return bnum('0');\r\n  else return bnum(data[0]);\r\n};\r\n","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../contexts';\r\nimport {\r\n  BlockchainLink,\r\n  Subtitle,\r\n  Row,\r\n  Table,\r\n  TableHeader,\r\n  HeaderCell,\r\n  TableBody,\r\n  TableRow,\r\n  DataCell,\r\n} from '../components/common';\r\nimport {\r\n  bnum,\r\n  parseCamelCase,\r\n  ZERO_ADDRESS,\r\n  formatCurrency,\r\n  formatBalance,\r\n} from '../utils';\r\nimport { NETWORK_ASSET_SYMBOL } from '../utils';\r\nimport useExporters from '../hooks/useExporters';\r\nimport { Button } from './common/Button';\r\nimport { flatten } from '../utils/array';\r\nimport moment from 'moment';\r\nimport { useBalance } from 'hooks/useERC20';\r\nimport { useETHBalance } from 'hooks/useETHBalance';\r\n\r\nconst FinanceInfoWrapper = styled.div`\r\n  background: white;\r\n  padding: 0px 10px;\r\n  font-weight: 400;\r\n  border-radius: 4px;\r\n  justify-content: center;\r\n  color: var(--dark-text-gray);\r\n`;\r\n\r\nconst FinanceTable = styled(Table)`\r\n  grid-template-columns: 33% 33% 33%;\r\n`;\r\n\r\nconst CenteredRow = styled(Row)`\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 0;\r\n`;\r\n\r\nconst ExportRow = styled(CenteredRow)`\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst FinanceInformation = observer(() => {\r\n  const {\r\n    context: { daoStore, configStore, coingeckoService },\r\n  } = useContext();\r\n  const { exportToCSV, triggerDownload } = useExporters();\r\n\r\n  const schemes = daoStore.getSchemes();\r\n  const prices = coingeckoService.getPrices();\r\n  const networkAssetSymbol =\r\n    NETWORK_ASSET_SYMBOL[configStore.getActiveChainName()];\r\n\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const tokens = configStore.getTokensToFetchPrice();\r\n\r\n  let assets = {\r\n    total: [\r\n      {\r\n        address: ZERO_ADDRESS,\r\n        name: networkAssetSymbol,\r\n        amount: useETHBalance(networkContracts.avatar),\r\n        decimals: 18,\r\n      },\r\n    ],\r\n    avatar: [\r\n      {\r\n        address: ZERO_ADDRESS,\r\n        name: networkAssetSymbol,\r\n        amount: useETHBalance(networkContracts.avatar),\r\n        decimals: 18,\r\n      },\r\n    ],\r\n  };\r\n  tokens.map(token => {\r\n    assets.avatar.push({\r\n      address: token.address,\r\n      name: token.name,\r\n      amount: useBalance(networkContracts.avatar, token.address),\r\n      decimals: token.decimals,\r\n    });\r\n    assets.total.push({\r\n      address: token.address,\r\n      name: token.name,\r\n      amount: useBalance(networkContracts.avatar, token.address),\r\n      decimals: token.decimals,\r\n    });\r\n  });\r\n\r\n  schemes.map(scheme => {\r\n    if (scheme.controllerAddress !== ZERO_ADDRESS) return;\r\n\r\n    if (!assets[scheme.name])\r\n      assets[scheme.name] = [\r\n        {\r\n          address: ZERO_ADDRESS,\r\n          name: networkAssetSymbol,\r\n          amount: useETHBalance(scheme.address),\r\n          decimals: 18,\r\n        },\r\n      ];\r\n\r\n    tokens.map(token => {\r\n      assets[scheme.name].push({\r\n        address: token.address,\r\n        name: token.name,\r\n        amount: useBalance(scheme.address, token.address),\r\n        decimals: token.decimals,\r\n      });\r\n      const indexOfAssetInTotal = assets.total.findIndex(\r\n        asset => asset.address === token.address\r\n      );\r\n      if (indexOfAssetInTotal > -1) {\r\n        assets.total[indexOfAssetInTotal].amount = assets.total[\r\n          indexOfAssetInTotal\r\n        ].amount.plus(useBalance(scheme.address, token.address));\r\n      } else {\r\n        assets.total.push({\r\n          address: token.address,\r\n          name: token.name,\r\n          amount: useBalance(scheme.address, token.address),\r\n          decimals: token.decimals,\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  const getExportFileName = () => {\r\n    return `finances-${moment().format('YYYY-MM-DD')}`;\r\n  };\r\n\r\n  const exportData = async () => {\r\n    const allAssets = Object.keys(assets).map(assetHolder => {\r\n      const assetsOfHolder = assets[assetHolder];\r\n      const assetsExportable = assetsOfHolder.map(asset => ({\r\n        name: asset.name,\r\n        address: asset.address,\r\n        holder: parseCamelCase(assetHolder),\r\n        balance: formatBalance(asset.amount, asset.decimals, 2).toString(),\r\n        usdPrice:\r\n          prices[asset.address] && prices[asset.address].usd\r\n            ? Number(formatBalance(asset.amount, asset.decimals, 2)) *\r\n              prices[asset.address].usd\r\n            : null,\r\n      }));\r\n      return assetsExportable;\r\n    });\r\n    const assetsExportable = flatten(allAssets);\r\n    const csvString = await exportToCSV(assetsExportable);\r\n\r\n    triggerDownload(csvString, `${getExportFileName()}.csv`, 'text/csv');\r\n  };\r\n\r\n  return (\r\n    <FinanceInfoWrapper>\r\n      {Object.keys(assets).map(assetHolder => {\r\n        const assetsOfHolder = assets[assetHolder];\r\n        return (\r\n          <div>\r\n            <Subtitle centered> {parseCamelCase(assetHolder)} </Subtitle>\r\n            <FinanceTable>\r\n              <TableBody>\r\n                <TableHeader>\r\n                  <HeaderCell>Asset</HeaderCell>\r\n                  <HeaderCell align=\"center\">Balance</HeaderCell>\r\n                  <HeaderCell align=\"center\">USD Value</HeaderCell>\r\n                </TableHeader>\r\n                {assetsOfHolder.map((asset, i) => {\r\n                  if (\r\n                    asset &&\r\n                    Number(formatBalance(asset.amount, asset.decimals, 2)) > 0\r\n                  ) {\r\n                    return (\r\n                      <TableRow key={`asset${i}`}>\r\n                        <DataCell align=\"left\" weight=\"500\">\r\n                          <CenteredRow>\r\n                            {asset.name}{' '}\r\n                            {asset.address != ZERO_ADDRESS && (\r\n                              <BlockchainLink\r\n                                size=\"long\"\r\n                                type=\"address\"\r\n                                text={asset.address}\r\n                                onlyIcon\r\n                                toCopy\r\n                              />\r\n                            )}\r\n                          </CenteredRow>\r\n                        </DataCell>\r\n                        <DataCell align=\"center\">\r\n                          {formatBalance(\r\n                            asset.amount,\r\n                            asset.decimals,\r\n                            2\r\n                          ).toString()}\r\n                        </DataCell>\r\n                        <DataCell align=\"center\">\r\n                          {prices[asset.address] && prices[asset.address].usd\r\n                            ? formatCurrency(\r\n                                bnum(\r\n                                  Number(\r\n                                    formatBalance(\r\n                                      asset.amount,\r\n                                      asset.decimals,\r\n                                      2\r\n                                    )\r\n                                  ) * prices[asset.address].usd\r\n                                )\r\n                              )\r\n                            : '-'}\r\n                        </DataCell>\r\n                      </TableRow>\r\n                    );\r\n                  } else return <></>;\r\n                })}\r\n              </TableBody>\r\n            </FinanceTable>\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      <ExportRow>\r\n        <Button onClick={exportData}>Export to CSV</Button>\r\n      </ExportRow>\r\n    </FinanceInfoWrapper>\r\n  );\r\n});\r\n\r\nexport default FinanceInformation;\r\n","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { encodePermission, ZERO_ADDRESS } from '../utils';\r\nimport moment from 'moment';\r\nimport { useContext } from '../contexts';\r\nimport {\r\n  BlockchainLink,\r\n  Question,\r\n  Table,\r\n  TableRow,\r\n  DataCell,\r\n  TableBody,\r\n  TableHeader,\r\n  HeaderCell,\r\n} from '../components/common';\r\n\r\nconst ProposalTable = styled(Table)`\r\n  grid-template-columns: minmax(auto, 15%) minmax(auto, 45%) minmax(auto, 20%) minmax(\r\n      auto,\r\n      25%\r\n    );\r\n`;\r\n\r\nconst SchemesInformation = observer(() => {\r\n  const {\r\n    context: { providerStore, daoStore },\r\n  } = useContext();\r\n  const { library } = providerStore.getActiveWeb3React();\r\n\r\n  const schemes = daoStore.filterSchemes({ registered: true });\r\n  return (\r\n    <ProposalTable>\r\n      <TableBody>\r\n        <TableHeader>\r\n          <HeaderCell>Name</HeaderCell>\r\n          <HeaderCell>\r\n            Configuration <Question question=\"9\" />\r\n          </HeaderCell>\r\n          <HeaderCell>\r\n            Permissions <Question question=\"9\" />\r\n          </HeaderCell>\r\n          <HeaderCell>\r\n            <span>Boosted</span> - <span>Active</span> - <span>Total</span>\r\n          </HeaderCell>\r\n        </TableHeader>\r\n        {schemes.map(scheme => {\r\n          const schemeProposals = daoStore.filterProposals({\r\n            scheme: scheme.address,\r\n          });\r\n          const votingMachineParameters = daoStore.getVotingMachineOfScheme(\r\n            scheme.address\r\n          ).params;\r\n          if (votingMachineParameters)\r\n            return (\r\n              <TableRow>\r\n                <DataCell>\r\n                  {scheme.name}\r\n                  <br />\r\n                  <small>{scheme.type}</small>\r\n                  <br />\r\n                  <BlockchainLink size=\"short\" text={scheme.address} toCopy />\r\n                </DataCell>\r\n                <DataCell>\r\n                  <small>Params Hash: {scheme.paramsHash}</small>\r\n                  <br />\r\n                  <small>\r\n                    Do Avatar Generic Calls:{' '}\r\n                    {scheme.controllerAddress !== ZERO_ADDRESS ? 'YES' : 'NO'}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Queued Proposal Period:{' '}\r\n                    {moment\r\n                      .duration(\r\n                        votingMachineParameters.queuedVotePeriodLimit.toString(),\r\n                        'seconds'\r\n                      )\r\n                      .humanize()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Boosted Proposal Period:{' '}\r\n                    {moment\r\n                      .duration(\r\n                        votingMachineParameters.boostedVotePeriodLimit.toString(),\r\n                        'seconds'\r\n                      )\r\n                      .humanize()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    PreBoosted Proposal Period:{' '}\r\n                    {moment\r\n                      .duration(\r\n                        votingMachineParameters.preBoostedVotePeriodLimit.toString(),\r\n                        'seconds'\r\n                      )\r\n                      .humanize()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Quiet Ending Period:{' '}\r\n                    {moment\r\n                      .duration(\r\n                        votingMachineParameters.quietEndingPeriod.toString(),\r\n                        'seconds'\r\n                      )\r\n                      .humanize()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Rep Proposing Reward:{' '}\r\n                    {Number(\r\n                      library.utils.fromWei(\r\n                        votingMachineParameters.proposingRepReward.toString()\r\n                      )\r\n                    ).toFixed(2)}{' '}\r\n                    REP\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Reputation Loss Ratio:{' '}\r\n                    {votingMachineParameters.votersReputationLossRatio.toString()}{' '}\r\n                    %\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Minimum Dao Boost:{' '}\r\n                    {Number(\r\n                      library.utils.fromWei(\r\n                        votingMachineParameters.minimumDaoBounty.toString()\r\n                      )\r\n                    ).toFixed(2)}{' '}\r\n                    DXD\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Proposal Boost Bounty Const:{' '}\r\n                    {votingMachineParameters.daoBountyConst.toString()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Boost Threshold Constant:{' '}\r\n                    {votingMachineParameters.thresholdConst\r\n                      .div(10 ** 12)\r\n                      .toString()}\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    Boost Limit Exponent Value:{' '}\r\n                    {votingMachineParameters.limitExponentValue.toString()}\r\n                  </small>\r\n                </DataCell>\r\n                <DataCell>\r\n                  <strong>Controller Permissions</strong>\r\n                  <br />\r\n                  <small>Raw: {encodePermission(scheme.permissions)}</small>\r\n                  <br />\r\n                  <small>\r\n                    {scheme.permissions.canGenericCall ? 'Can' : 'Cant'} make\r\n                    generic call\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    {scheme.permissions.canUpgrade ? 'Can' : 'Cant'} upgrade\r\n                    controller\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    {scheme.permissions.canChangeConstraints ? 'Can' : 'Cant'}{' '}\r\n                    change constraints\r\n                  </small>\r\n                  <br />\r\n                  <small>\r\n                    {scheme.permissions.canRegisterSchemes ? 'Can' : 'Cant'}{' '}\r\n                    register schemes\r\n                  </small>\r\n                </DataCell>\r\n                <DataCell>\r\n                  <span>{scheme.boostedProposals}</span>-\r\n                  <span>\r\n                    {\r\n                      schemeProposals.filter(proposal => {\r\n                        return proposal.stateInVotingMachine > 2;\r\n                      }).length\r\n                    }\r\n                  </span>\r\n                  -\r\n                  <span>\r\n                    {scheme.proposalIds ? scheme.proposalIds.length : 0}\r\n                  </span>\r\n                </DataCell>\r\n              </TableRow>\r\n            );\r\n          else return <></>;\r\n        })}\r\n      </TableBody>\r\n    </ProposalTable>\r\n  );\r\n});\r\n\r\nexport default SchemesInformation;\r\n","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../contexts';\r\nimport {\r\n  BlockchainLink,\r\n  InfoBox,\r\n  Title,\r\n  Row,\r\n  Table,\r\n  TableHeader,\r\n  HeaderCell,\r\n  TableBody,\r\n  TableRow,\r\n  DataCell,\r\n  Positive,\r\n  Negative,\r\n} from '../components/common';\r\nimport { bnum } from '../utils';\r\nimport { Chart } from 'react-google-charts';\r\n\r\nconst GovernanceInfoWrapper = styled.div`\r\n  background: white;\r\n  padding: 0px 10px;\r\n  font-weight: 400;\r\n  border-radius: 4px;\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  color: var(--dark-text-gray);\r\n`;\r\n\r\nconst GovernanceTable = styled(Table)`\r\n  grid-template-columns:\r\n    minmax(auto, 6%) minmax(auto, 36%) minmax(auto, 15%) minmax(auto, 15%)\r\n    minmax(auto, 15%) minmax(auto, 15%);\r\n  min-width: 100%;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst GovernanceInformation = observer(() => {\r\n  const {\r\n    context: { daoStore },\r\n  } = useContext();\r\n\r\n  const governanceInfo = daoStore.getGovernanceInfo();\r\n\r\n  function toNumber(weiNumber) {\r\n    return bnum(weiNumber)\r\n      .div(10 ** 18)\r\n      .toFixed(0);\r\n  }\r\n  return (\r\n    <GovernanceInfoWrapper>\r\n      <Title centered>Stats</Title>\r\n      <Row>\r\n        <InfoBox>{toNumber(governanceInfo.repTotalSupply)} REP</InfoBox>\r\n        <InfoBox>{governanceInfo.totalPositiveVotes} Positive Votes</InfoBox>\r\n        <InfoBox>{governanceInfo.totalNegativeVotes} Negative Votes</InfoBox>\r\n        <InfoBox>{governanceInfo.totalProposalsCreated} Proposals</InfoBox>\r\n      </Row>\r\n\r\n      <Title centered>Reputation Charts</Title>\r\n      <Row>\r\n        <Chart\r\n          chartType=\"PieChart\"\r\n          loader={<div>Loading Chart</div>}\r\n          data={governanceInfo.rep}\r\n          options={{\r\n            legend: 'none',\r\n            pieSliceText: 'none',\r\n            pieStartAngle: 100,\r\n            title: 'Reputation Distribution',\r\n            sliceVisibilityThreshold: 0.001, // 0.1%\r\n          }}\r\n        />\r\n        <Chart\r\n          width=\"100%\"\r\n          chartType=\"LineChart\"\r\n          loader={<div>Loading Chart</div>}\r\n          data={governanceInfo.repEvents}\r\n          options={{\r\n            hAxis: { title: 'Block Number' },\r\n            vAxis: { title: 'Reputation' },\r\n            title: 'Reputation over Time',\r\n            legend: 'none',\r\n          }}\r\n        />\r\n      </Row>\r\n\r\n      <Title centered>Governance Members</Title>\r\n\r\n      <GovernanceTable>\r\n        <TableBody>\r\n          <TableHeader>\r\n            <HeaderCell align=\"center\">#</HeaderCell>\r\n            <HeaderCell align=\"center\">Address</HeaderCell>\r\n            <HeaderCell align=\"center\">Proposals Created</HeaderCell>\r\n            <HeaderCell align=\"center\">Voted</HeaderCell>\r\n            <HeaderCell align=\"center\">Staked</HeaderCell>\r\n            <HeaderCell align=\"center\">REP %</HeaderCell>\r\n          </TableHeader>\r\n          {governanceInfo.ranking.map((user, i) => {\r\n            return (\r\n              <TableRow key={`user${i}`}>\r\n                <DataCell align=\"center\" weight=\"500\">\r\n                  {' '}\r\n                  {i + 1}\r\n                </DataCell>\r\n                <DataCell weight=\"500\">\r\n                  <BlockchainLink\r\n                    size=\"long\"\r\n                    type=\"address\"\r\n                    text={user.address}\r\n                    toCopy\r\n                  />\r\n                </DataCell>\r\n                <DataCell>{user.proposals}</DataCell>\r\n                <DataCell>\r\n                  <Positive>{user.correctVotes} </Positive>-\r\n                  <Negative> {user.wrongVotes}</Negative>\r\n                </DataCell>\r\n                <DataCell>\r\n                  <Positive>{user.correctStakes} </Positive>-\r\n                  <Negative> {user.wrongStakes}</Negative>\r\n                </DataCell>\r\n                <DataCell>{user.rep}</DataCell>\r\n              </TableRow>\r\n            );\r\n          })}\r\n        </TableBody>\r\n      </GovernanceTable>\r\n    </GovernanceInfoWrapper>\r\n  );\r\n});\r\n\r\nexport default GovernanceInformation;\r\n","import styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { FiX } from 'react-icons/fi';\r\n\r\nimport {\r\n  Table,\r\n  TableRow,\r\n  DataCell,\r\n  TableBody,\r\n  HeaderCell,\r\n  TableHeader,\r\n} from './common';\r\n\r\nimport { useContext } from '../contexts';\r\nimport { NETWORK_ASSET_SYMBOL } from '../utils';\r\nimport {\r\n  ANY_ADDRESS,\r\n  ZERO_ADDRESS,\r\n  ANY_FUNC_SIGNATURE,\r\n  ERC20_APPROVE_SIGNATURE,\r\n  ERC20_TRANSFER_SIGNATURE,\r\n  bnum,\r\n  timestampToDate,\r\n} from '../utils';\r\n\r\nconst PermissionsTable = styled(Table)`\r\n  grid-template-columns: 10% 20% 20% 20% 10% 20%;\r\n`;\r\n\r\nconst PermissionsInformation = observer(() => {\r\n  const {\r\n    context: { daoStore, configStore, providerStore },\r\n  } = useContext();\r\n\r\n  const web3 = providerStore.getActiveWeb3React().library;\r\n  const schemes = daoStore.getSchemes();\r\n  const rawPermissions = daoStore.daoCache.callPermissions;\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  const tokens = configStore.getTokensOfNetwork();\r\n  const recommendedCalls = configStore.getRecommendedCalls();\r\n  let addressesNames = {};\r\n  let functionNames = {};\r\n  addressesNames[ZERO_ADDRESS] =\r\n    NETWORK_ASSET_SYMBOL[configStore.getActiveChainName()];\r\n  addressesNames[ANY_ADDRESS] = 'Any Address';\r\n  addressesNames[networkContracts.avatar] = 'Avatar';\r\n  addressesNames[networkContracts.controller] = 'Controller';\r\n  for (const votingMachineAddress in networkContracts.votingMachines) {\r\n    addressesNames[votingMachineAddress] =\r\n      networkContracts.votingMachines[votingMachineAddress].type;\r\n  }\r\n\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature('mintTokens(uint256,address,address)')\r\n  ] = 'mintTokens(uint256,address,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature('unregisterSelf(address)')\r\n  ] = 'unregisterSelf(address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature(\r\n      'addGlobalConstraint(address,bytes32,address)'\r\n    )\r\n  ] = 'addGlobalConstraint(address,bytes32,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature(\r\n      'removeGlobalConstraint(address,address)'\r\n    )\r\n  ] = 'removeGlobalConstraint(address,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature('upgradeController(address,address)')\r\n  ] = 'upgradeController(address,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature('sendEther(uint256,address,address)')\r\n  ] = 'sendEther(uint256,address,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature(\r\n      'externalTokenTransfer(address,address,uint256,address)'\r\n    )\r\n  ] = 'externalTokenTransfer(address,address,uint256,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature(\r\n      'externalTokenTransferFrom(address,address,address,uint256,address)'\r\n    )\r\n  ] = 'externalTokenTransferFrom(address,address,address,uint256,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature(\r\n      'externalTokenApproval(address,address,uint256,address)'\r\n    )\r\n  ] = 'externalTokenApproval(address,address,uint256,address)';\r\n  functionNames[\r\n    web3.eth.abi.encodeFunctionSignature('metaData(string,address)')\r\n  ] = 'metaData(string,address)';\r\n\r\n  functionNames[ERC20_TRANSFER_SIGNATURE] = 'ERC20 Transfer';\r\n  functionNames[ERC20_APPROVE_SIGNATURE] = 'ERC20 Approve';\r\n  recommendedCalls.map(recommendedCall => {\r\n    functionNames[\r\n      web3.eth.abi.encodeFunctionSignature(recommendedCall.functionName)\r\n    ] = recommendedCall.functionName;\r\n  });\r\n  schemes.map(scheme => {\r\n    addressesNames[scheme.address] = scheme.name;\r\n  });\r\n  tokens.map(token => {\r\n    addressesNames[token.address] = token.symbol;\r\n  });\r\n\r\n  const permissions = [];\r\n\r\n  for (const assetAddress in rawPermissions) {\r\n    for (const fromAddress in rawPermissions[assetAddress]) {\r\n      for (const toAddress in rawPermissions[assetAddress][fromAddress]) {\r\n        for (const functionSignature in rawPermissions[assetAddress][\r\n          fromAddress\r\n        ][toAddress]) {\r\n          const value =\r\n            rawPermissions[assetAddress][fromAddress][toAddress][\r\n              functionSignature\r\n            ].value.toString();\r\n          permissions.push({\r\n            asset: addressesNames[assetAddress] || assetAddress,\r\n            from: addressesNames[fromAddress] || fromAddress,\r\n            to: addressesNames[toAddress] || toAddress,\r\n            functionSignature:\r\n              functionSignature === ANY_FUNC_SIGNATURE\r\n                ? 'Any Function'\r\n                : functionSignature,\r\n            value:\r\n              value ===\r\n              '115792089237316195423570985008687907853269984665640564039457584007913129639935'\r\n                ? 'ANY Value'\r\n                : value,\r\n            fromTime:\r\n              rawPermissions[assetAddress][fromAddress][toAddress][\r\n                functionSignature\r\n              ].fromTime,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <PermissionsTable>\r\n      <TableHeader>\r\n        <HeaderCell>Asset</HeaderCell>\r\n        <HeaderCell>From</HeaderCell>\r\n        <HeaderCell>To</HeaderCell>\r\n        <HeaderCell>Function</HeaderCell>\r\n        <HeaderCell>Value</HeaderCell>\r\n        <HeaderCell>From Time</HeaderCell>\r\n      </TableHeader>\r\n      <TableBody>\r\n        {permissions.map((permission, i) => (\r\n          <TableRow key={`permission${i}`}>\r\n            <DataCell>{permission.asset}</DataCell>\r\n            <DataCell>{permission.from}</DataCell>\r\n            <DataCell>{permission.to}</DataCell>\r\n            <DataCell>\r\n              {functionNames[permission.functionSignature] ||\r\n                permission.functionSignature}\r\n            </DataCell>\r\n            <DataCell>{permission.value}</DataCell>\r\n            <DataCell>\r\n              {permission.fromTime === 0 ? (\r\n                <FiX />\r\n              ) : (\r\n                timestampToDate(bnum(permission.fromTime))\r\n              )}\r\n            </DataCell>\r\n          </TableRow>\r\n        ))}\r\n      </TableBody>\r\n    </PermissionsTable>\r\n  );\r\n});\r\n\r\nexport default PermissionsInformation;\r\n","import styled from 'styled-components';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useContext } from '../contexts';\r\nimport { Box, LinkButton } from '../components/common';\r\nimport FinanceInformation from '../components/FinanceInformation';\r\nimport SchemesInformation from '../components/SchemesInformation';\r\nimport GovernanceInformation from '../components/GovernanceInformation';\r\nimport PermissionsInformation from '../components/PermissionsInformation';\r\n\r\nconst InfoPageWrapper = styled(Box)`\r\n  width: 100%;\r\n`;\r\n\r\nconst InfoNavigation = styled.div`\r\n  padding: 0px 10px 10px 10px;\r\n  color: var(--dark-text-gray);\r\n  border-bottom: 1px solid var(--line-gray);\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  letter-spacing: 1px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  flex-direction: row;\r\n`;\r\nconst InfoPage = () => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n  const networkName = configStore.getActiveChainName();\r\n  const searchPath = useLocation().search;\r\n  return (\r\n    <InfoPageWrapper>\r\n      <InfoNavigation>\r\n        <LinkButton route={`/${networkName}/info?view=governance`}>\r\n          Governance\r\n        </LinkButton>\r\n        <LinkButton route={`/${networkName}/info?view=finance`}>\r\n          Finance\r\n        </LinkButton>\r\n        <LinkButton route={`/${networkName}/info?view=schemes`}>\r\n          Schemes\r\n        </LinkButton>\r\n      </InfoNavigation>\r\n      <div>\r\n        {searchPath === `?view=schemes` ? (\r\n          <SchemesInformation />\r\n        ) : searchPath === `?view=governance` ? (\r\n          <GovernanceInformation />\r\n        ) : searchPath === `?view=permissions` ? (\r\n          <PermissionsInformation />\r\n        ) : (\r\n          <FinanceInformation />\r\n        )}\r\n      </div>\r\n    </InfoPageWrapper>\r\n  );\r\n};\r\n\r\nexport default InfoPage;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useContext } from '../contexts';\r\nimport { FiCheckCircle, FiX } from 'react-icons/fi';\r\nimport { Row, Box, Question, Button } from '../components/common';\r\n\r\nconst FormLabel = styled.label`\r\n  padding: 10px 0px;\r\n`;\r\n\r\nconst InputBox = styled.input`\r\n  background-color: white;\r\n  border: 1px solid var(--medium-gray);\r\n  border-radius: 4px;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 32px;\r\n  text-align: left;\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n`;\r\n\r\nconst Dropdown = styled.select`\r\n  background-color: white;\r\n  border: 1px solid var(--medium-gray);\r\n  border-radius: 4px;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 32px;\r\n  text-align: left;\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n`;\r\n\r\nconst FormContainer = styled.div`\r\n  max-width: 500px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n`;\r\n\r\nconst ConfigPage = observer(() => {\r\n  const {\r\n    context: {\r\n      configStore,\r\n      pinataService,\r\n      etherscanService,\r\n      infuraService,\r\n      poktService,\r\n      alchemyService,\r\n      customRpcService,\r\n    },\r\n  } = useContext();\r\n  const networkName = configStore.getActiveChainName();\r\n\r\n  const [etherscanApiStatus, setEtherscanApiStatus] = React.useState(\r\n    etherscanService.auth\r\n  );\r\n  const [pinataKeyStatus, setPinataKeyStatus] = React.useState(\r\n    pinataService.auth\r\n  );\r\n  const [infuraKeyStatus, setInfuraKeyStatus] = React.useState(\r\n    infuraService.auth\r\n  );\r\n  const [poktStatus, setPoktStatus] = React.useState(poktService.auth);\r\n  const [alchemyKeyStatus, setAlchemyKeyStatus] = React.useState(\r\n    alchemyService.auth\r\n  );\r\n  const [customRpcUrlStatus, setCustomRpcUrlStatus] = React.useState(\r\n    customRpcService.auth\r\n  );\r\n\r\n  const [localConfig, setLocalConfig] = React.useState(\r\n    configStore.getLocalConfig()\r\n  );\r\n  const [, forceUpdate] = React.useReducer(x => x + 1, 0);\r\n\r\n  function onApiKeyValueChange(value, key) {\r\n    localConfig[key] = value;\r\n    setLocalConfig(localConfig);\r\n    forceUpdate();\r\n  }\r\n\r\n  function saveConfig() {\r\n    configStore.setLocalConfig(localConfig);\r\n  }\r\n\r\n  async function testApis() {\r\n    await pinataService.isAuthenticated();\r\n    await etherscanService.isAuthenticated(networkName);\r\n    await infuraService.isAuthenticated();\r\n    await poktService.isAuthenticated();\r\n    await alchemyService.isAuthenticated();\r\n    await customRpcService.isAuthenticated();\r\n    setPinataKeyStatus(pinataService.auth);\r\n    setEtherscanApiStatus(etherscanService.auth);\r\n    setInfuraKeyStatus(infuraService.auth);\r\n    setPoktStatus(poktService.auth);\r\n    setAlchemyKeyStatus(alchemyService.auth);\r\n    setCustomRpcUrlStatus(customRpcService.auth);\r\n  }\r\n\r\n  async function pinDXvoteHashes() {\r\n    pinataService.updatePinList();\r\n  }\r\n\r\n  async function clearCache() {\r\n    localStorage.clear();\r\n    caches.delete(`dxvote-cache`);\r\n    window.location.reload();\r\n  }\r\n\r\n  return (\r\n    <Box centered>\r\n      <h2>\r\n        API Keys <Question question=\"8\" />\r\n      </h2>\r\n      <FormContainer>\r\n        <Row>\r\n          <FormLabel>Etherscan:</FormLabel>\r\n          <InputBox\r\n            type=\"text\"\r\n            serviceName=\"etherscan\"\r\n            onChange={event =>\r\n              onApiKeyValueChange(event.target.value, 'etherscan')\r\n            }\r\n            value={localConfig.etherscan}\r\n          ></InputBox>\r\n          <FormLabel>\r\n            {etherscanApiStatus ? <FiCheckCircle /> : <FiX />}\r\n          </FormLabel>\r\n        </Row>\r\n        <Row>\r\n          <FormLabel>Pinata:</FormLabel>\r\n          <InputBox\r\n            type=\"text\"\r\n            serviceName=\"pinata\"\r\n            onChange={event =>\r\n              onApiKeyValueChange(event.target.value, 'pinata')\r\n            }\r\n            value={localConfig.pinata}\r\n          ></InputBox>\r\n          <FormLabel>{pinataKeyStatus ? <FiCheckCircle /> : <FiX />}</FormLabel>\r\n        </Row>\r\n\r\n        <Row>\r\n          <FormLabel>RPC:</FormLabel>\r\n          <Dropdown\r\n            onChange={event =>\r\n              onApiKeyValueChange(event.target.value, 'rpcType')\r\n            }\r\n            value={localConfig.rpcType}\r\n          >\r\n            <option value=\"\">Default</option>\r\n            <option value=\"pokt\">Pokt</option>\r\n            <option value=\"infura\">Infura</option>\r\n            <option value=\"alchemy\">Alchemy</option>\r\n            <option value=\"custom\">Custom</option>\r\n          </Dropdown>\r\n        </Row>\r\n\r\n        {localConfig.rpcType === 'pokt' && (\r\n          <Row>\r\n            <FormLabel>Pokt:</FormLabel>\r\n            <InputBox\r\n              type=\"text\"\r\n              serviceName=\"pokt\"\r\n              onChange={event =>\r\n                onApiKeyValueChange(event.target.value, 'pokt')\r\n              }\r\n              value={localConfig.pokt}\r\n            ></InputBox>\r\n            <FormLabel>{poktStatus ? <FiCheckCircle /> : <FiX />}</FormLabel>\r\n          </Row>\r\n        )}\r\n        {localConfig.rpcType === 'infura' && (\r\n          <Row>\r\n            <FormLabel>Infura:</FormLabel>\r\n            <InputBox\r\n              type=\"text\"\r\n              serviceName=\"infura\"\r\n              onChange={event =>\r\n                onApiKeyValueChange(event.target.value, 'infura')\r\n              }\r\n              value={localConfig.infura}\r\n            ></InputBox>\r\n            <FormLabel>\r\n              {infuraKeyStatus ? <FiCheckCircle /> : <FiX />}\r\n            </FormLabel>\r\n          </Row>\r\n        )}\r\n        {localConfig.rpcType === 'alchemy' && (\r\n          <Row>\r\n            <FormLabel>Alchemy:</FormLabel>\r\n            <InputBox\r\n              type=\"text\"\r\n              serviceName=\"alchemy\"\r\n              onChange={event =>\r\n                onApiKeyValueChange(event.target.value, 'alchemy')\r\n              }\r\n              value={localConfig.alchemy}\r\n            ></InputBox>\r\n            <FormLabel>\r\n              {alchemyKeyStatus ? <FiCheckCircle /> : <FiX />}\r\n            </FormLabel>\r\n          </Row>\r\n        )}\r\n        {localConfig.rpcType === 'custom' && (\r\n          <Row>\r\n            <FormLabel>RPC URL:</FormLabel>\r\n            <InputBox\r\n              type=\"text\"\r\n              serviceName=\"customRpcUrl\"\r\n              onChange={event =>\r\n                onApiKeyValueChange(event.target.value, 'customRpcUrl')\r\n              }\r\n              value={localConfig.customRpcUrl}\r\n            ></InputBox>\r\n            <FormLabel>\r\n              {customRpcUrlStatus ? <FiCheckCircle /> : <FiX />}\r\n            </FormLabel>\r\n          </Row>\r\n        )}\r\n      </FormContainer>\r\n      <Row>\r\n        <FormLabel>Pin DXdao hashes on start</FormLabel>\r\n        <InputBox\r\n          type=\"checkbox\"\r\n          checked={localConfig.pinOnStart}\r\n          onChange={event =>\r\n            onApiKeyValueChange(event.target.checked, 'pinOnStart')\r\n          }\r\n        ></InputBox>\r\n      </Row>\r\n      <Row>\r\n        <Button onClick={saveConfig}>Save</Button>\r\n        <Button onClick={testApis}>Test Apis</Button>\r\n        <Button onClick={clearCache}>Clear Cache</Button>\r\n        <Button onClick={pinDXvoteHashes}>Pin DXVote Hashes</Button>\r\n      </Row>\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default ConfigPage;\r\n","import { useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { Box } from '../components/common';\r\nimport { useContext } from '../contexts';\r\nimport { useLocation } from 'react-router-dom';\r\nimport MDEditor from '@uiw/react-md-editor';\r\n\r\nconst FAQPage = observer(() => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n\r\n  const questionId =\r\n    useLocation().search.indexOf('=') > -1\r\n      ? useLocation().search.split('=')[1]\r\n      : 0;\r\n\r\n  const FAQBox = styled(Box)`\r\n    padding: 20px 30px;\r\n    p {\r\n      line-height: 28px;\r\n      font-size: 20px;\r\n    }\r\n    h2 {\r\n      margin: 10px 0px;\r\n    }\r\n    h3 {\r\n      margin: 5px 0px;\r\n    }\r\n    h4 {\r\n      margin: 0px;\r\n    }\r\n  `;\r\n  useEffect(() => {\r\n    if (questionId > 0)\r\n      document.querySelectorAll('#FAQBody div h1')[questionId].scrollIntoView();\r\n  }, []);\r\n\r\n  let daoAddresses = '';\r\n  const networkContracts = configStore.getNetworkContracts();\r\n  daoAddresses += '- Avatar: ' + networkContracts.avatar + '\\n';\r\n  daoAddresses += '- Controller: ' + networkContracts.controller + '\\n';\r\n  daoAddresses += '- Reputation: ' + networkContracts.reputation + '\\n';\r\n  daoAddresses +=\r\n    '- Permission Registry: ' + networkContracts.permissionRegistry + '\\n';\r\n  daoAddresses += '- Reputation: ' + networkContracts.reputation + '\\n';\r\n\r\n  for (const votingMachineAddress in networkContracts.votingMachines) {\r\n    if (\r\n      networkContracts.votingMachines[votingMachineAddress].type ===\r\n      '\"DXDVotingMachine\"'\r\n    ) {\r\n      daoAddresses += '- DXDVotingMachine: ' + votingMachineAddress + '\\n';\r\n      daoAddresses +=\r\n        '- DXD: ' +\r\n        networkContracts.votingMachines[votingMachineAddress].token +\r\n        '\\n';\r\n    }\r\n  }\r\n\r\n  const FAQBody = `# Where are the dao funds held?\r\n\r\nMost of the ETH and tokens are held in the DXdao avatar address, this is the safest place for the funds to be, the access to this funds is usually slow and it take day for a proposal to move funds from this address. The Wallet Schemes can also hold funds too, but only the ones that dont make calls from the avatar.\r\n\r\n## DXdao Addresses\r\n\r\n${daoAddresses}\r\n\r\n# What is a Wallet Scheme?\r\n\r\nA wallet scheme is a smart contract that manage the access to DXdao funds, in order to make transfers or calls from the DXdao avatar or the scheme itself the scheme needs to execute a proposal. The proposals are executed after it reaches a certain amount of votes or stakes over time, the amount of votes, staked and time that has to passed depends on the scheme configuration. An scheme who will have access to the DXdao avatar funds will usually take more votes, stakes and time than a scheme who make calls form itself, this means that funds can be allocated in the schemes as well, but this schemes will have only access to the funds held by themselves.\r\n\r\n# Proposal States\r\n\r\n## In Queue\r\n\r\nA proposal that needs the queuedVoteRequiredPercentage % of votes sets in the proposal scheme to pass.\r\n\r\n## Pre Boosted\r\n\r\nA proposal that has enough stakes to pass be boosted state but cant be boosted just yet.\r\n\r\n## Pending Boost\r\n\r\nA proposal that has enough stakes to pass to boosted state.\r\n\r\n## Boosted\r\n\r\nA proposal that needs the boostedVoteRequiredPercentage % of votes sets in the proposal scheme to pass.\r\n\r\n## Quiet Ending Period\r\n\r\nA proposal that changed the winning option in the amount of seconds specified as quietEndingPeriod before finishing, this will extend the proposal time for quietEndingPeriod seconds. The quietEndingPeriod is specified in the scheme configuration where the proposal was submitted.\r\n\r\n## Pending Execution\r\n\r\nA proposal that got enough votes and is ready to be executed.\r\n\r\n## Execution Failed\r\n\r\nA proposal that was executed after it passed but it execution failed.\r\n\r\n## Execution Succeded\r\n\r\nA proposal that was executed after it passed but it execution succeeded.\r\n\r\n## Expired in Queue\r\n\r\nA proposal that spent too much time in Queue state and didnt get enough votes to pass.\r\n\r\n# How does voting works?\r\n\r\nA proposal needs a minimum amount of votes to pass, and that depends on the state of the proposal at the moment of execution. If a proposal is in Boosted state it will need the boostedVoteRequiredPercentage percentage amount specified in the scheme configuration where the proposal was created of votes in favor to be executed. If a proposal reaches the queuedVoteRequiredPercentage percentage amount of votes it gets executed instantly. This means that any proposal in Queued state will need that amount of votes to pass.\r\n\r\n# How does staking works?\r\n\r\nA proposal can receives a financial stake in DXD to speed up the voting process. If a proposal receives enough positive stakes to boost it will enter pre-boosted state, once the pre-boosted state finish if the proposal still has enough DXD staked to boost it will be boosted in the next voting machine action (vote, stake, or voting machine execution). If a proposal is in Boosted state it will need the boostedVoteRequiredPercentage percentage amount specified in the scheme configuration where the proposal was created of votes in favor to be executed.\r\n\r\n# How do I get DXD?\r\n\r\nYou can get rinkeby DXD buying DXD in dxtrust rinkeby here: https://levelkdev.github.io/dxtrust/\r\n\r\n# How are proposals created?\r\n\r\nEach proposal has a title, description and calls to be exected by the wallet scheme where it is proposed. The description of the proposal is stored in IPFS, and we save the hash of the IPFS description in the blokchain next to the proposal title and calls. When creating a proposal you first need to submit the description to IPFS and once you get the IPFS hash of the description the proposal can be submited by sending a transaction to the wallet scheme smart contract.\r\n\r\n# External APIs\r\n\r\nThe app allows you to add external API services. Use Pinata to help DXdao by pinning the proposal description and important documents in you pinata account. Use Etherscan to decode proposal calls and know what the proposal will execute.\r\n\r\n# Schemes Configuration\r\n## Scheme Parameters\r\n\r\n### name\r\n\r\nThe name of the scheme, this will be used to identify the scheme by name in DXvote dapp.\r\n\r\n### callToController\r\n\r\nIf the scheme make calls to the controller or not. A Scheme that makes calls to a controller will make calls from the dxdao avatar (which gives access to the dxdao funds) and a scheme that do not call the controller will make call directly from itself, which means that it will have access only to the funds held in the scheme address.\r\n\r\n### maxSecondsForExecution\r\n\r\nThis is the amount of time that a proposal has to be executed in the scheme, this is useful to \"clean\" proposals that weren't successful or weren't able to be executed for some reason. This means that if a proposal passes in 3 days in the voting machine and the maxSecondsForExecution are 6 days it will have 3 days to be executed, after that it will be marked in ExecutionTimeout state and wont be able to be executed again, reaching a state of termination.\r\n\r\n### maxRepPercentageToMint\r\n\r\nThis is the maximum amount of rep in percentage allowed to be minted by proposal, the value can be between 0-100, if a proposal execution mints 5% of REP and the maxRepPercentageToMint equals 3, it will fail.\r\n\r\n## Controller Permissions\r\n\r\nThis are four values that determine what the scheme can do in the dxdao controller contract, the most powerful contract in the stack, the only two values that we use from it are canRegisterSchemes and canGenericCall. canRegisterSchemes allows the addition/removal of schemes and the canGenericCall allows the execution of calls in the avatar contract.\r\n\r\n## Permission Registry Permissions\r\n\r\nThe permissions are set by asset, specifying the sender and receiver addresses (from and to) and the signature of the function to be used and the value to be transferred.\r\n\r\nThis permissions are checked before a proposal execution, checking that the total value transferred by asset and the functions to be called are allowed.\r\n\r\nThe asset address will be address 0x0 for ethereum calls (this would be used for ethereum smart contract calls), and if the permission is for an ERC20 address the asset would be the address of the ERC20 token.\r\n\r\nIf a scheme make calls to the controller the permissions are checked avatar address as sender (from field in the permission regsitry).\r\n\r\nIf a scheme does not make calls to the controller the permissions are checked scheme address as sender (from field in the permission regsitry).\r\n\r\nIt allows the use of \"wildcard\" permissions by using 0xaAaAaAaaAaAaAaaAaAAAAAAAAaaaAaAaAaaAaaAa for any address and 0xaaaaaaaa for any signature.\r\nIt also allows the use of global transfer limits, by setting the limit by asset using the scheme as receiver address, any value recorded here will be used as global transfer limit in the proposal check.\r\n\r\nConstant 0x0 address used as \"zero address\": \\`0x0000000000000000000000000000000000000000\\`\r\n\r\nConstant address used as \"any address\": \\`0xaAaAaAaaAaAaAaaAaAAAAAAAAaaaAaAaAaaAaaAa\\`\r\n\r\nConstant function signature used as \"any function\": \\`0xaaaaaaaa\\`\r\n\r\nConstant Max uint256 to be used: \\`0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\\`\r\n\r\n## Voting Machine Params\r\n\r\n### queuedVoteRequiredPercentage\r\n\r\nThe percentage of votes required to execute a proposal in queued state.\r\n\r\n### boostedVoteRequiredPercentage\r\n\r\nThe percentage of votes required to execute a proposal in boosted state.\r\n\r\n### queuedVotePeriodLimit\r\n\r\nThe amount of time that a proposal will be in queue state (not boosted), once the time limit is reached and the proposal was not executed it finish.\r\n\r\n### boostedVotePeriodLimit\r\n\r\nThe amount of time that a proposal will be in boost state (after pre-boosted), once the time limit is reached and the proposal was not executed it finish.\r\n\r\n### preBoostedVotePeriodLimit\r\n\r\nThe amount of time that a proposal will be in pre-boosted state. A proposal gets into pre-boosted state when it has enough.\r\n\r\n### thresholdConst\r\n\r\nThe constant used to calculate the needed upstakes in a proposal to reach boosted state, where the upstakes needed equal to downStakes * (thresholdConst ** (numberOfBoostedProposals)) taking in count the number of boosted proposals at the moment of the pre-boost to boosted state change.\r\n\r\n### quietEndingPeriod\r\n\r\nThe amount of time a proposal has to have the same winning option before it finish, if the winning option change during that time the proposal finish time will be extended till the winning option doesn't change during that time.\r\n\r\nproposingRepReward\r\nThe fixed amount of REP that will be minted to the address who created the proposal.\r\n\r\n### votersReputationLossRatio\r\n\r\nThe percentage of REP a voter will loose if the voter voted a proposal in queue state for the loosing option.\r\n\r\n### minimumDaoBounty\r\n\r\nThe minimum amount to be set as downstake when a proposal is created.\r\n\r\n### daoBountyConst\r\n\r\nThe downstake for proposal is calculated when the proposal is created, by using the formula: (daoBountyConst * averageBoostDownstakes) / 100. If the value calculated is higher than minimumDaoBounty then this value will be used, if not the start downstake of the proposal will be minimumDaoBounty.\r\n\r\n# Useful Apps\r\n\r\n- Unit Converter Etherscan: https://rinkeby.etherscan.io/unitconverter\r\n- ETH Converter: https://eth-converter.com\r\n- UNIX Timestamp Converter: https://www.unixtimestamp.com\r\n- Hashhex ABI Encoder/Decoder: https://abi.hashex.org\r\n- Abidas ABI Encoder/Decoder: https://adibas03.github.io/online-ethereum-abi-encoder-decoder\r\n`;\r\n\r\n  return (\r\n    <FAQBox id=\"FAQBody\">\r\n      <MDEditor.Markdown\r\n        source={FAQBody}\r\n        style={{\r\n          padding: '20px 10px',\r\n        }}\r\n        skipHtml\r\n        escapeHtml\r\n      />\r\n    </FAQBox>\r\n  );\r\n});\r\n\r\nexport default FAQPage;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Box } from '../components/common';\r\nimport { FiZap } from 'react-icons/fi';\r\n\r\nconst ForumPage = () => {\r\n  const LoadingBox = styled.div`\r\n    .loader {\r\n      text-align: center;\r\n      font-weight: 500;\r\n      font-size: 20px;\r\n      line-height: 18px;\r\n      color: var(--dark-text-gray);\r\n      padding: 25px 0px;\r\n\r\n      .svg {\r\n        height: 30px;\r\n        width: 30px;\r\n        margin-bottom: 10px;\r\n      }\r\n    }\r\n  `;\r\n\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  function postMessageReceived(e) {\r\n    if (!e) {\r\n      return;\r\n    }\r\n\r\n    if (loading) {\r\n      setLoading(false);\r\n    }\r\n  }\r\n  window.addEventListener('message', postMessageReceived, false);\r\n\r\n  var lists = document.querySelectorAll('d-topics-list');\r\n  for (var i = 0; i < lists.length; i++) {\r\n    var list = lists[i];\r\n    var url = list.getAttribute('discourse-url');\r\n    if (!url || url.length === 0) {\r\n      console.error('Error, `discourse-url` was not found');\r\n      continue;\r\n    }\r\n    var frameId = 'de-' + Math.random().toString(36).substr(2, 9);\r\n    var params = ['discourse_embed_id=' + frameId];\r\n    list.removeAttribute('discourse-url');\r\n\r\n    for (var j = 0; j < list.attributes.length; j++) {\r\n      var attr = list.attributes[j];\r\n      params.push(attr.name.replace('-', '_') + '=' + attr.value);\r\n    }\r\n\r\n    var iframe = document.createElement('iframe');\r\n    iframe.src = url + '/embed/topics?' + params.join('&');\r\n    iframe.id = frameId;\r\n    iframe.width = '100%';\r\n    iframe.frameBorder = '0';\r\n    iframe.scrolling = 'no';\r\n    list.appendChild(iframe);\r\n  }\r\n\r\n  return (\r\n    <Box noPadding>\r\n      {loading ? (\r\n        <LoadingBox>\r\n          <div className=\"loader\">\r\n            {' '}\r\n            <FiZap /> <br /> Loading..{' '}\r\n          </div>\r\n        </LoadingBox>\r\n      ) : (\r\n        // @ts-ignore\r\n        <d-topics-list\r\n          discourse-url=\"https://daotalk.org/\"\r\n          category=\"15\"\r\n          per-page=\"10000\"\r\n          template=\"complete\"\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ForumPage;\r\n","import styled from 'styled-components';\r\nimport { useContext } from 'contexts';\r\nimport { observer } from 'mobx-react';\r\nimport { Row, Box, Button } from '../components/common';\r\nimport React from 'react';\r\nimport { FiCheckCircle, FiDownload, FiUpload, FiX } from 'react-icons/fi';\r\nimport { NETWORKS, toCamelCaseString } from 'utils';\r\nimport PulsingIcon from 'components/common/LoadingIcon';\r\nimport Copy from '../components/common/Copy';\r\nimport JSZip from 'jszip';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst FormLabel = styled.label`\r\n  padding: 10px 0px;\r\n`;\r\n\r\nconst InputBox = styled.input`\r\n  background-color: white;\r\n  border: 1px solid var(--medium-gray);\r\n  border-radius: 4px;\r\n  height: 34px;\r\n  letter-spacing: 1px;\r\n  font-weight: 500;\r\n  line-height: 32px;\r\n  text-align: left;\r\n  padding: 0px 10px;\r\n  margin: 5px;\r\n`;\r\n\r\nconst FormContainer = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst LoadingBox = styled.div`\r\n  display: flex;\r\n  height: 100%;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n\r\n  .loader {\r\n    text-align: center;\r\n    font-weight: 500;\r\n    font-size: 20px;\r\n    line-height: 18px;\r\n    color: var(--dark-text-gray);\r\n    padding: 25px 0px;\r\n\r\n    svg {\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst LoadingProgressText = styled.div`\r\n  font-size: 14px;\r\n  margin-top: 8px;\r\n`;\r\n\r\nconst RowAlignedLeft = styled(Row)`\r\n  justify-content: start;\r\n`;\r\n\r\nconst CopyButton = styled(Button)`\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  a {\r\n    color: inherit;\r\n    text-decoration: none;\r\n    margin-right: 0;\r\n    :hover,\r\n    :active,\r\n    :focus {\r\n      text-decoration: none;\r\n      color: ${({ theme }) => theme.white};\r\n    }\r\n  }\r\n`;\r\n\r\nconst CachePage = observer(() => {\r\n  // Set html title to cache to differentiate from dxvote dapp\r\n  document.title = 'Cache';\r\n\r\n  const {\r\n    context: { cacheService, configStore, notificationStore, ipfsService },\r\n  } = useContext();\r\n\r\n  const [updateProposalTitles, setUpdateProposalTitles] = React.useState(false);\r\n  const [buildingCacheState, setBuildingCacheState] = React.useState(0);\r\n  const [updatedCacheHash, setUpdatedCacheHash] = React.useState({\r\n    proposalTitles: {},\r\n    configHashes: {},\r\n    configs: {},\r\n    caches: {},\r\n  });\r\n  const [resetCache, setResetCache] = React.useState({\r\n    mainnet: false,\r\n    rinkeby: false,\r\n    xdai: false,\r\n    arbitrum: false,\r\n    arbitrumTestnet: false,\r\n  });\r\n  const [localConfig, setLocalConfig] = React.useState(\r\n    configStore.getLocalConfig()\r\n  );\r\n  const [, forceUpdate] = React.useReducer(x => x + 1, 0);\r\n\r\n  async function resetCacheOptions() {\r\n    configStore.resetLocalConfig();\r\n    setLocalConfig(configStore.getLocalConfig());\r\n    setBuildingCacheState(0);\r\n    setResetCache({\r\n      mainnet: false,\r\n      rinkeby: false,\r\n      xdai: false,\r\n      arbitrum: false,\r\n      arbitrumTestnet: false,\r\n    });\r\n    setUpdatedCacheHash({\r\n      proposalTitles: {},\r\n      configHashes: {},\r\n      configs: {},\r\n      caches: {},\r\n    });\r\n    setUpdateProposalTitles(false);\r\n  }\r\n\r\n  async function uploadToIPFS(content) {\r\n    ipfsService.upload(content);\r\n  }\r\n\r\n  async function runCacheScript() {\r\n    setBuildingCacheState(1);\r\n    const updatedCache = await cacheService.getUpdatedCacheConfig(\r\n      {\r\n        1: {\r\n          rpcUrl: localConfig.mainnet_rpcURL,\r\n          toBlock: localConfig.mainnet_toBlock,\r\n          reset: resetCache.mainnet,\r\n        },\r\n        4: {\r\n          rpcUrl: localConfig.rinkeby_rpcURL,\r\n          toBlock: localConfig.rinkeby_toBlock,\r\n          reset: resetCache.rinkeby,\r\n        },\r\n        100: {\r\n          rpcUrl: localConfig.xdai_rpcURL,\r\n          toBlock: localConfig.xdai_toBlock,\r\n          reset: resetCache.xdai,\r\n        },\r\n        42161: {\r\n          rpcUrl: localConfig.arbitrum_rpcURL,\r\n          toBlock: localConfig.arbitrum_toBlock,\r\n          reset: resetCache.arbitrum,\r\n        },\r\n        421611: {\r\n          rpcUrl: localConfig.arbitrumTestnet_rpcURL,\r\n          toBlock: localConfig.arbitrumTestnet_toBlock,\r\n          reset: resetCache.arbitrumTestnet,\r\n        },\r\n      },\r\n      updateProposalTitles\r\n    );\r\n    console.log('[Updated Cache]', updatedCache);\r\n    setUpdatedCacheHash(updatedCache);\r\n    setBuildingCacheState(2);\r\n    forceUpdate();\r\n  }\r\n\r\n  function onApiKeyValueChange(value, key) {\r\n    localConfig[key] = value;\r\n    setLocalConfig(localConfig);\r\n    configStore.setLocalConfig(localConfig);\r\n    forceUpdate();\r\n  }\r\n\r\n  function downloadAll() {\r\n    var zip = new JSZip();\r\n\r\n    var cache = zip.folder('cache');\r\n\r\n    var configs = zip.folder('configs');\r\n    zip.file(\r\n      'default.json',\r\n      JSON.stringify(\r\n        {\r\n          mainnet: updatedCacheHash.configHashes['mainnet'],\r\n          xdai: updatedCacheHash.configHashes['xdai'],\r\n          arbitrum: updatedCacheHash.configHashes['arbitrum'],\r\n          rinkeby: updatedCacheHash.configHashes['rinkeby'],\r\n          arbitrumTestnet: updatedCacheHash.configHashes['arbitrumTestnet'],\r\n        },\r\n        null,\r\n        2\r\n      )\r\n    );\r\n    zip.file(\r\n      'proposalTitles.json',\r\n      JSON.stringify(updatedCacheHash.proposalTitles, null, 2)\r\n    );\r\n\r\n    NETWORKS.map((network, i) => {\r\n      cache.file(\r\n        network.name + '.json',\r\n        JSON.stringify(updatedCacheHash.caches[network.name], null, 2)\r\n      );\r\n      const configFolder = configs.folder(network.name);\r\n      configFolder.file(\r\n        'config.json',\r\n        JSON.stringify(updatedCacheHash.configs[network.name], null, 2)\r\n      );\r\n    });\r\n\r\n    zip.generateAsync({ type: 'blob' }).then(function (content) {\r\n      saveAs(content, 'dxvote-cache.zip');\r\n    });\r\n  }\r\n\r\n  if (window.location.hash.length > 7) {\r\n    const searchParams = new URLSearchParams(window.location.hash.substring(7));\r\n    setUpdateProposalTitles(searchParams.get('proposalTitles') ? true : false);\r\n    NETWORKS.map((network, i) => {\r\n      const networkName = network.name;\r\n      if (searchParams.get(networkName + '_toBlock'))\r\n        localConfig[networkName + '_toBlock'] = searchParams.get(\r\n          networkName + '_toBlock'\r\n        );\r\n      if (searchParams.get(networkName + '_targetHash'))\r\n        localConfig[networkName + '_targetHash'] = searchParams.get(\r\n          networkName + '_targetHash'\r\n        );\r\n      if (searchParams.get(networkName + '_reset')) {\r\n        resetCache[networkName] = true;\r\n      }\r\n    });\r\n    setLocalConfig(localConfig);\r\n    setResetCache(resetCache);\r\n    configStore.setLocalConfig(localConfig);\r\n    window.location.assign(window.location.origin + '/#cache');\r\n    forceUpdate();\r\n  }\r\n\r\n  function getOptionsLink(): string {\r\n    let optionsLinkUrl =\r\n      window.location.origin + '/' + window.location.hash + '?';\r\n    if (updateProposalTitles)\r\n      optionsLinkUrl = optionsLinkUrl = 'proposalTitles=1&';\r\n    NETWORKS.map((network, i) => {\r\n      const networkName = network.name;\r\n      if (localConfig[networkName + '_toBlock'])\r\n        optionsLinkUrl =\r\n          optionsLinkUrl +\r\n          networkName +\r\n          '_toBlock=' +\r\n          localConfig[networkName + '_toBlock'] +\r\n          '&';\r\n      if (localConfig[networkName + '_targetHash'])\r\n        optionsLinkUrl =\r\n          optionsLinkUrl +\r\n          networkName +\r\n          '_targetHash=' +\r\n          localConfig[networkName + '_targetHash'] +\r\n          '&';\r\n      if (resetCache[networkName])\r\n        optionsLinkUrl = optionsLinkUrl + networkName + '_reset=1&';\r\n    });\r\n    optionsLinkUrl = optionsLinkUrl.slice(0, -1);\r\n    return optionsLinkUrl;\r\n  }\r\n\r\n  return buildingCacheState === 1 ? (\r\n    <LoadingBox>\r\n      <div className=\"loader\">\r\n        {' '}\r\n        <PulsingIcon size={80} inactive={false} />\r\n        <LoadingProgressText>\r\n          {notificationStore.globalMessage}\r\n        </LoadingProgressText>\r\n      </div>\r\n    </LoadingBox>\r\n  ) : (\r\n    <Box>\r\n      <FormContainer>\r\n        {NETWORKS.map((network, i) => {\r\n          const networkName = network.name;\r\n          return (\r\n            networkName !== 'localhost' && (\r\n              <div key={`networkOptions${i}`}>\r\n                <RowAlignedLeft>\r\n                  {' '}\r\n                  <strong>{toCamelCaseString(networkName)}</strong>{' '}\r\n                </RowAlignedLeft>\r\n                <RowAlignedLeft>\r\n                  <FormLabel>Block:</FormLabel>\r\n                  <InputBox\r\n                    type=\"text\"\r\n                    onChange={event =>\r\n                      onApiKeyValueChange(\r\n                        event.target.value,\r\n                        networkName + '_toBlock'\r\n                      )\r\n                    }\r\n                    value={localConfig[networkName + '_toBlock']}\r\n                    style={{ width: '100px' }}\r\n                  ></InputBox>\r\n                  <FormLabel>RPC:</FormLabel>\r\n                  <InputBox\r\n                    type=\"text\"\r\n                    onChange={event =>\r\n                      onApiKeyValueChange(\r\n                        event.target.value,\r\n                        networkName + '_rpcURL'\r\n                      )\r\n                    }\r\n                    value={localConfig[networkName + '_rpcURL']}\r\n                    style={{ width: '100%' }}\r\n                  ></InputBox>\r\n                  <FormLabel>Reset</FormLabel>\r\n                  <InputBox\r\n                    type=\"checkbox\"\r\n                    checked={resetCache[networkName]}\r\n                    onChange={() => {\r\n                      resetCache[networkName] = !resetCache[networkName];\r\n                      setResetCache(resetCache);\r\n                      forceUpdate();\r\n                    }}\r\n                  ></InputBox>\r\n                </RowAlignedLeft>\r\n                <RowAlignedLeft>\r\n                  <FormLabel>Target Config Hash:</FormLabel>\r\n                  <InputBox\r\n                    type=\"text\"\r\n                    onChange={event =>\r\n                      onApiKeyValueChange(\r\n                        event.target.value,\r\n                        networkName + '_targetHash'\r\n                      )\r\n                    }\r\n                    value={localConfig[networkName + '_targetHash']}\r\n                    style={{ width: '400px' }}\r\n                  ></InputBox>\r\n                  {updatedCacheHash.configs[networkName] && (\r\n                    <div>\r\n                      <Button\r\n                        onClick={() =>\r\n                          uploadToIPFS(\r\n                            JSON.stringify(\r\n                              updatedCacheHash.configs[networkName],\r\n                              null,\r\n                              2\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        <FiUpload></FiUpload> Config\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() =>\r\n                          uploadToIPFS(\r\n                            JSON.stringify(\r\n                              updatedCacheHash.caches[networkName],\r\n                              null,\r\n                              2\r\n                            )\r\n                          )\r\n                        }\r\n                      >\r\n                        <FiUpload></FiUpload> Cache\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </RowAlignedLeft>\r\n                {updatedCacheHash.configs[networkName] && (\r\n                  <RowAlignedLeft>\r\n                    Received Config Hash:{' '}\r\n                    {updatedCacheHash.configHashes[networkName]}\r\n                    {'  '}\r\n                    <FormLabel>\r\n                      {updatedCacheHash.configHashes[networkName] ==\r\n                      localConfig[networkName + '_targetHash'] ? (\r\n                        <FiCheckCircle />\r\n                      ) : (\r\n                        <FiX />\r\n                      )}\r\n                    </FormLabel>\r\n                  </RowAlignedLeft>\r\n                )}\r\n              </div>\r\n            )\r\n          );\r\n        })}\r\n      </FormContainer>\r\n      <Row style={{ justifyContent: 'left' }}>\r\n        <FormLabel>Update Proposal Titles</FormLabel>\r\n        <InputBox\r\n          type=\"checkbox\"\r\n          checked={updateProposalTitles}\r\n          onChange={() => setUpdateProposalTitles(!updateProposalTitles)}\r\n        ></InputBox>\r\n      </Row>\r\n      {buildingCacheState === 2 && (\r\n        <Row>\r\n          <Button onClick={downloadAll}>\r\n            {' '}\r\n            <FiDownload></FiDownload> Download All\r\n          </Button>\r\n        </Row>\r\n      )}\r\n      <Row>\r\n        <Button onClick={runCacheScript}>Build Cache</Button>\r\n        <Button onClick={resetCacheOptions}>Reset Options</Button>\r\n        <CopyButton>\r\n          <Copy toCopy={getOptionsLink()}>Build Link</Copy>\r\n        </CopyButton>\r\n      </Row>\r\n    </Box>\r\n  );\r\n});\r\n\r\nexport default CachePage;\r\n","// Externals\r\nimport { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { observer } from 'mobx-react';\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport MDEditor, { commands } from '@uiw/react-md-editor';\r\n\r\nimport { useContext } from '../contexts';\r\nimport { Button } from '../components/common/Button';\r\nimport { Box } from '../components/common';\r\nimport DiscourseImporter from '../components/DiscourseImporter';\r\n\r\nconst ProposalsWrapper = styled.div`\r\n  padding: 10px 0px;\r\n  background: white;\r\n  border-radius: 4px;\r\n  display: grid;\r\n  grid-template-columns: 30% 70%;\r\n  grid-gap: 10px;\r\n`;\r\n\r\nconst SidebarWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  height: 80vh;\r\n`;\r\n\r\nconst TextInput = styled.input`\r\n  width: ${props => props.width || '100%'};\r\n  height: 50px;\r\n  border: 0;\r\n  border-bottom: 1px solid #10161a33;\r\n  margin-right: 5px;\r\n  font-size: xx-large;\r\n`;\r\n\r\nconst ButtonsWrapper = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n  margin-top: 100px;\r\n`;\r\n\r\nconst MarkdownWrapper = styled.div`\r\n  display: flex;\r\n  width: 110%;\r\n  height: 80vh;\r\n`;\r\n\r\nconst Editor = styled(MDEditor)`\r\n  width: 50%;\r\n  overflow: scroll;\r\n`;\r\n\r\nconst PreviewWrapper = styled.div`\r\n  width: 50%;\r\n  box-shadow: 0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0),\r\n    0 1px 1px rgba(16, 22, 26, 0.2);\r\n  border-radius: 3px;\r\n`;\r\nconst PreviewHeader = styled.div`\r\n  height: 28px;\r\n  background-color: #fbfbfb;\r\n  border-radius: 3px 3px 0 0;\r\n  padding-left: 10px;\r\n`;\r\n\r\nconst Preview = styled(MDEditor.Markdown)`\r\n  background-color: white;\r\n  border: 1px solid #10161a33;\r\n  border-radius: 0 0 3px 3px;\r\n  padding: 20px 10px;\r\n  height: 80vh;\r\n  overflow: scroll;\r\n`;\r\n\r\nconst Error = styled.div`\r\n  text-align: center;\r\n  font-weight: 500;\r\n  font-size: 20px;\r\n  line-height: 18px;\r\n  color: var(--dark-text-gray);\r\n  padding: 25px 0px;\r\n`;\r\n\r\nexport const CreateMetadataPage = observer(() => {\r\n  const {\r\n    context: { configStore },\r\n  } = useContext();\r\n\r\n  const history = useHistory();\r\n  const { proposalType } = useParams<{ proposalType?: string }>();\r\n\r\n  const [proposalConfig, setProposalConfig] = useState({});\r\n\r\n  useEffect(() => {\r\n    const proposalTypes = configStore.getProposalTypes();\r\n    setProposalConfig(proposalTypes.find(type => type.id === proposalType));\r\n  }, []);\r\n\r\n  const [descriptionText, setDescriptionText] = useState(\r\n    localStorage.getItem('dxvote-newProposal-description') || ''\r\n  );\r\n  const [title, setTitle] = useState(\r\n    localStorage.getItem('dxvote-newProposal-title') || ''\r\n  );\r\n  const [error, setError] = useState(null);\r\n\r\n  const onTitleChange = newValue => {\r\n    setTitle(newValue);\r\n    localStorage.setItem('dxvote-newProposal-title', newValue);\r\n  };\r\n\r\n  const onDescriptionChange = newValue => {\r\n    setDescriptionText(newValue);\r\n    localStorage.setItem('dxvote-newProposal-description', newValue);\r\n  };\r\n\r\n  const uploadToIPFS = async function () {\r\n    if (title.length < 10) {\r\n      setError('Title has to be at mimimum 10 characters length');\r\n    } else if (descriptionText.length === 0) {\r\n      setError('Description has to be at mimimum 100 characters length');\r\n    } else {\r\n      setError(null);\r\n\r\n      history.push(`../submit/${proposalType}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {proposalConfig ? (\r\n        <ProposalsWrapper>\r\n          <SidebarWrapper>\r\n            <TextInput\r\n              type=\"text\"\r\n              placeholder=\"Title\"\r\n              onChange={event => onTitleChange(event.target.value)}\r\n              value={title}\r\n            />\r\n            {error}\r\n\r\n            <div>\r\n              <DiscourseImporter onImport={onDescriptionChange} />\r\n              <ButtonsWrapper>\r\n                <Button onClick={() => history.push(`../type`)}>Back</Button>\r\n                <Button\r\n                  onClick={async () => {\r\n                    await uploadToIPFS();\r\n                  }}\r\n                >\r\n                  Next\r\n                </Button>\r\n              </ButtonsWrapper>\r\n            </div>\r\n          </SidebarWrapper>\r\n          <MarkdownWrapper>\r\n            <Editor\r\n              value={descriptionText}\r\n              onChange={onDescriptionChange}\r\n              preview=\"edit\"\r\n              height={window.innerHeight * 0.85}\r\n              commands={[\r\n                commands.bold,\r\n                commands.italic,\r\n                commands.strikethrough,\r\n                commands.hr,\r\n                commands.title,\r\n                commands.divider,\r\n                commands.link,\r\n                commands.quote,\r\n                commands.code,\r\n                commands.image,\r\n                commands.unorderedListCommand,\r\n                commands.orderedListCommand,\r\n                commands.checkedListCommand,\r\n              ]}\r\n              previewOptions={{\r\n                skipHtml: true,\r\n                escapeHtml: true,\r\n              }}\r\n            />\r\n            <PreviewWrapper>\r\n              <PreviewHeader>Preview</PreviewHeader>\r\n              <Preview\r\n                source={descriptionText}\r\n                linkTarget=\"_blank\"\r\n                skipHtml\r\n                escapeHtml\r\n              />\r\n            </PreviewWrapper>\r\n          </MarkdownWrapper>\r\n        </ProposalsWrapper>\r\n      ) : (\r\n        <Box>\r\n          <Error>Error: Unknown proposal type</Error>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n","import { JsonRpcProvider } from '@ethersproject/providers';\r\nimport { createContext, useMemo } from 'react';\r\nimport { useRpcUrls } from '../../provider/providerHooks';\r\n\r\ninterface MultichainContextInterface {\r\n  providers: Record<number, JsonRpcProvider>;\r\n}\r\n\r\nexport const MultichainContext =\r\n  createContext<MultichainContextInterface>(null);\r\n\r\nconst MultichainProvider = ({ children }) => {\r\n  const rpcUrls = useRpcUrls();\r\n\r\n  const providers = useMemo(() => {\r\n    if (!rpcUrls) return null;\r\n\r\n    return Object.entries(rpcUrls).reduce((acc, [networkId, rpcUrl]) => {\r\n      acc[Number.parseInt(networkId)] = new JsonRpcProvider(rpcUrl);\r\n      return acc;\r\n    }, {} as Record<number, JsonRpcProvider>);\r\n  }, [rpcUrls]);\r\n\r\n  if (!providers) return null;\r\n\r\n  return (\r\n    <MultichainContext.Provider\r\n      value={{\r\n        providers,\r\n      }}\r\n    >\r\n      {children}\r\n    </MultichainContext.Provider>\r\n  );\r\n};\r\n\r\nexport default MultichainProvider;\r\n","import { useWeb3React } from '@web3-react/core';\r\nimport { providers } from 'ethers';\r\nimport { useContext, useMemo } from 'react';\r\nimport { MultichainContext } from '../contexts/MultichainProvider';\r\n\r\nexport default function useJsonRpcProvider(chainId?: number) {\r\n  const { providers: multichainProviders } = useContext(MultichainContext);\r\n\r\n  const { library, chainId: walletChainId } = useWeb3React();\r\n\r\n  return useMemo(\r\n    () =>\r\n      (!chainId || walletChainId === chainId) && library\r\n        ? new providers.Web3Provider(library.currentProvider)\r\n        : multichainProviders[chainId],\r\n    [library, chainId, walletChainId, multichainProviders]\r\n  );\r\n}\r\n","import { Middleware, SWRHook } from 'swr';\r\n\r\nconst loggerMiddleware: Middleware =\r\n  (useSWRNext: SWRHook) => (key, fetcher, config) => {\r\n    const extendedFetcher = (...args) => {\r\n      console.debug(`[SWR ${key}] Request triggered`);\r\n      return fetcher(...args);\r\n    };\r\n\r\n    const response = useSWRNext(key, extendedFetcher, config);\r\n    if (response.data) {\r\n      console.debug(`[SWR ${key}] Response:`, {\r\n        data: response.data,\r\n        error: response.error,\r\n      });\r\n    } else if (response.error) {\r\n      console.error(`[SWR ${key}] Response:`, {\r\n        data: response.data,\r\n        error: response.error,\r\n      });\r\n    }\r\n    return response;\r\n  };\r\n\r\nexport default loggerMiddleware;\r\n","import { EtherSWRConfig } from 'ether-swr';\r\nimport useJsonRpcProvider from 'hooks/useJsonRpcProvider';\r\nimport loggerMiddleware from 'hooks/ether-swr/middleware/logger';\r\n\r\nconst EtherSWRManager: React.FC = ({ children }) => {\r\n  const provider = useJsonRpcProvider();\r\n\r\n  return (\r\n    <EtherSWRConfig\r\n      value={{\r\n        web3Provider: provider,\r\n        refreshInterval: 30000,\r\n        use: [loggerMiddleware],\r\n      }}\r\n    >\r\n      {children}\r\n    </EtherSWRConfig>\r\n  );\r\n};\r\n\r\nexport default EtherSWRManager;\r\n","import ReactDOM from 'react-dom';\r\nimport { HashRouter, Route, Switch, useLocation } from 'react-router-dom';\r\nimport { Web3ReactProvider } from '@web3-react/core';\r\nimport Web3ReactManager from 'components/Web3ReactManager';\r\nimport Web3 from 'web3';\r\nimport moment from 'moment';\r\nimport styled from 'styled-components';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport ThemeProvider, { GlobalStyle } from './theme';\r\n\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport GlobalErrorBoundary from './components/ErrorBoundary/GlobalErrorBoundary';\r\nimport PageRouter from './PageRouter';\r\n\r\nimport ProposalsPage from './pages/proposals';\r\nimport { SubmitProposalPage } from './pages/SubmitProposal';\r\nimport { NewProposalTypePage } from './pages/NewProposalType';\r\nimport UserPage from './pages/User';\r\nimport ProposalPage from './pages/Proposal';\r\nimport InfoPage from './pages/Info';\r\nimport ConfigPage from './pages/Configuration';\r\nimport FAQPage from './pages/FAQ';\r\nimport ForumPage from './pages/Forum';\r\nimport CachePage from 'pages/Cache';\r\nimport { CreateMetadataPage } from 'pages/Metadata';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport MultichainProvider from './contexts/MultichainProvider';\r\nimport useJsonRpcProvider from './hooks/useJsonRpcProvider';\r\nimport { useEffect } from 'react';\r\nimport { useContext } from './contexts';\r\nimport { MAINNET_ID } from './utils';\r\n\r\nimport EtherSWRManager from 'components/EtherSWRManager';\r\n\r\nconst Content = styled.div`\r\n  margin: auto;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  width: 85%;\r\n`;\r\n\r\nmoment.updateLocale('en', {\r\n  relativeTime: {\r\n    s: '1 second',\r\n    m: '1 minute',\r\n    h: '1 hour',\r\n    d: '1 day',\r\n  },\r\n});\r\n\r\nfunction getLibrary(provider) {\r\n  return new Web3(provider);\r\n}\r\n\r\nconst Routes = () => {\r\n  const location = useLocation();\r\n  return (\r\n    <PageRouter>\r\n      <Route exact path=\"/\">\r\n        {' '}\r\n        <ProposalsPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/config\">\r\n        {' '}\r\n        <ConfigPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/forum\">\r\n        {' '}\r\n        <ForumPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/faq\">\r\n        {' '}\r\n        <FAQPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/cache\">\r\n        {' '}\r\n        <CachePage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/:network/proposals\">\r\n        {' '}\r\n        <ProposalsPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/:network/create/type\">\r\n        {' '}\r\n        <NewProposalTypePage />{' '}\r\n      </Route>\r\n      <Route path=\"/:network/create/submit\">\r\n        {' '}\r\n        <SubmitProposalPage />{' '}\r\n      </Route>\r\n      <Route path=\"/:network/create/metadata/:proposalType\">\r\n        {' '}\r\n        <CreateMetadataPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/:network/info\">\r\n        {' '}\r\n        <InfoPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/:network/user/:address\">\r\n        {' '}\r\n        <UserPage />{' '}\r\n      </Route>\r\n      <Route exact path=\"/:network/proposal/:proposalId\">\r\n        {' '}\r\n        <ProposalPage />{' '}\r\n      </Route>\r\n      {location.pathname.indexOf('/proposals') < 0 &&\r\n        location.pathname.indexOf('/create/metadata') < 0 && <Footer />}\r\n    </PageRouter>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  const {\r\n    context: { ensService },\r\n  } = useContext();\r\n  const mainnetProvider = useJsonRpcProvider(MAINNET_ID);\r\n\r\n  useEffect(() => {\r\n    ensService.setWeb3Provider(mainnetProvider);\r\n  }, [mainnetProvider, ensService]);\r\n\r\n  return (\r\n    <EtherSWRManager>\r\n      <Switch>\r\n        <Web3ReactManager>\r\n          <GlobalStyle />\r\n          <Content>\r\n            <Header />\r\n            <Routes />\r\n            <ToastContainer />\r\n          </Content>\r\n        </Web3ReactManager>\r\n      </Switch>\r\n    </EtherSWRManager>\r\n  );\r\n};\r\n\r\nconst Root = () => {\r\n  return (\r\n    <GlobalErrorBoundary>\r\n      <Web3ReactProvider getLibrary={getLibrary}>\r\n        <MultichainProvider>\r\n          <ThemeProvider>\r\n            <HashRouter>\r\n              <App />\r\n            </HashRouter>\r\n          </ThemeProvider>\r\n        </MultichainProvider>\r\n      </Web3ReactProvider>\r\n    </GlobalErrorBoundary>\r\n  );\r\n};\r\nReactDOM.render(<Root />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { utils } from 'ethers';\r\n\r\nexport const toEthSignedMessageHash = function (messageHex) {\r\n  const messageBuffer = Buffer.from(messageHex.substring(2), 'hex');\r\n  const prefix = Buffer.from(\r\n    `\\u0019Ethereum Signed Message:\\n${messageBuffer.length}`\r\n  );\r\n  return utils.keccak256(Buffer.concat([prefix, messageBuffer]));\r\n};\r\n","import { BigNumber as bn } from 'ethers';\r\nimport { BigNumber } from './bignumber';\r\nimport { MAX_UINT } from './constants';\r\n\r\ntype EnumType = { [s: number]: string };\r\n\r\nexport function mapEnum(enumerable: EnumType, fn: Function): any[] {\r\n  // get all the members of the enum\r\n  let enumMembers: any[] = Object.keys(enumerable).map(key => enumerable[key]);\r\n\r\n  // enum contains both string and number representations of the enum [\"None\", 0]\r\n  // we are only interested in the numeric identifiers as these represent the values\r\n  let enumValues: number[] = enumMembers.filter(v => typeof v === 'number');\r\n\r\n  // now map through the enum number values\r\n  return enumValues.map(m => fn(m));\r\n}\r\n\r\nexport function toCamelCaseString(text: string): string {\r\n  if (text.length > 0) return text.replace(/^./, text[0].toUpperCase());\r\n  else return '';\r\n}\r\n\r\nexport function bnum(val: string | number | bn | BigNumber): BigNumber {\r\n  return new BigNumber(val.toString());\r\n}\r\n\r\nexport function scale(input: BigNumber, decimalPlaces: number): BigNumber {\r\n  const scalePow = new BigNumber(decimalPlaces.toString());\r\n  const scaleMul = new BigNumber(10).pow(scalePow);\r\n  return input.times(scaleMul);\r\n}\r\n\r\nexport function setPropertyToMaxUintIfEmpty(value?): string {\r\n  if (!value || value === 0 || value === '') {\r\n    value = MAX_UINT.toString();\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function setPropertyToZeroIfEmpty(value?): string {\r\n  if (!value || value === '') {\r\n    value = '0';\r\n  }\r\n  return value;\r\n}\r\n\r\nexport function hasMaxApproval(amount: BigNumber): boolean {\r\n  return amount.gte(bnum(bnum(MAX_UINT).div(2).toString()));\r\n}\r\n\r\nexport function isEmpty(str: string): boolean {\r\n  return !str || 0 === str.length;\r\n}\r\n\r\nexport function roundValue(value, decimals = 4): string {\r\n  const decimalPoint = value.indexOf('.');\r\n  if (decimalPoint === -1) {\r\n    return value;\r\n  }\r\n  return value.slice(0, decimalPoint + decimals + 1);\r\n}\r\n\r\nexport function str(value: any): string {\r\n  return value.toString();\r\n}\r\n\r\nexport function sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function parseCamelCase(text) {\r\n  const parsed = text.replace(/([a-z])([A-Z])/g, '$1 $2');\r\n  return parsed[0].toUpperCase() + parsed.substring(1);\r\n}\r\n\r\nexport const appendEthAPIKey = (\r\n  networkName: string,\r\n  etherscanAPIKey: string\r\n) => {\r\n  if (!['arbitrum', 'xdai', 'arbitrumTestnet'].includes(networkName)) {\r\n    return etherscanAPIKey;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport function escapeRegExp(string: string): string {\r\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\r\n}\r\n\r\nexport async function retryPromise(\r\n  promise: Promise<any>,\r\n  timeToWait: number = 0,\r\n  maxTries: number = 10\r\n): Promise<any> {\r\n  let toReturn;\r\n  while (!toReturn && maxTries > 0) {\r\n    try {\r\n      toReturn = await promise;\r\n      if (!toReturn) {\r\n        await sleep(timeToWait);\r\n        maxTries--;\r\n      }\r\n    } catch (error) {\r\n      console.warn(error);\r\n      await sleep(timeToWait);\r\n      maxTries--;\r\n    } finally {\r\n      if (maxTries === 0) console.error('[RETRY PROMISE] (max errors reached)');\r\n      else maxTries = 0;\r\n    }\r\n  }\r\n  return toReturn;\r\n}\r\n"],"sourceRoot":""}